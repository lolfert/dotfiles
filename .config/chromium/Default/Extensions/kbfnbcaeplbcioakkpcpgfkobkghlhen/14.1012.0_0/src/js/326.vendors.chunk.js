/*! For license information please see 326.vendors.chunk.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[326],{11066:(e,t)=>{function n(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=i(e)+"="+i(t);null==t&&(n.maxage=-1),n.maxage&&(n.expires=new Date(+new Date+n.maxage)),n.path&&(r+="; path="+n.path),n.domain&&(r+="; domain="+n.domain),n.expires&&(r+="; expires="+n.expires.toUTCString()),n.secure&&(r+="; secure"),document.cookie=r}function r(e){var t=function(e){var t={},n=e.split(/ *; */);if(!n[0])return t;var r=n,i=Array.isArray(r),a=0;for(r=i?r:r[Symbol.iterator]();;){var s;if(i){if(a>=r.length)break;s=r[a++]}else{if((a=r.next()).done)break;s=a.value}var l=s;t[o((l=l.split("="))[0])]=o(l[1])}return t}(document.cookie);return e?t[e]:t}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}function o(e){try{return decodeURIComponent(e)}catch(e){return null}}t.Z=function(e,t,i){if(arguments.length<2)return r(e);n(e,t,i)}},18410:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RequestBuilder=t.Request=t.HTTPError=t.RequestError=t.Ajax=void 0;var r,i=n(59312),o=n(99950),a=n(90877),s=n(99129),l=n(68511);!function(e){e.extend=function(e){return l.R.local((function(t){return i.__assign(i.__assign({},t),{requestExtender:t.requestExtender?p.Extender.compose(e,t.requestExtender):e})}))};var t=function(e){function t(t,n){var r=e.call(this,t)||this;return r.message=t,r.details=n,r.name="ParseError",r}return i.__extends(t,e),t.prototype.toString=function(){return"Ajax response parsing error\n        Message "+this.message+"\n        Details "+a.failure(this.details)},t}(l.CustomError);e.ParseError=t,function(e){e.json="application/json",e.form="application/x-www-form-urlencoded",e.multipart="multipart/form-data",e.pdf="application/pdf",e.txt="text/plain",e.stream="application/octet-stream",e.vnd="application/vnd",e.zip="application/zip",e.any="*/*"}(e.MimeType||(e.MimeType={})),e.mapToHTTPErrorWithoutBody=function(t,n,r){return r.removeBody(),e.mapToHTTPError(t,n,r)},e.mapToHTTPError=function(e,t,n){return new u({request:n,code:t.status,status:t.statusText,url:t.url,body:e})}}(r=t.Ajax||(t.Ajax={}));var c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.message=t,r.details=n,r.name="RequestError",r}return i.__extends(t,e),t.prototype.toString=function(){return"Request error\n      Message: "+this.message+"\n      details: "+this.details},t.fromError=function(e,n){var r=new t(e,n.message);return r.stack=n.stack,r},t}(l.CustomError);t.RequestError=c;var u=function(e){function t(t){var n=t.code,r=t.status,i=t.url,o=t.message,a=t.body,s=t.request,l=e.call(this,o||r||a||"HTTPError")||this;return l.name="HTTPError",l.url=i,l.code=n,l.body=a,l.status=r,l.request=s,l}return i.__extends(t,e),t.prototype.toString=function(){return"Response\n      Message: "+this.message+"\n      Status: "+this.status+"\n      Code: "+this.code+"\n      Body: "+this.body+"\n      "+(void 0!==this.request?"\n"+this.request.toString():"Url: "+this.url)},t}(l.CustomError);t.HTTPError=u;var d=function(){function e(e,t,n,r,i){this._url=e,this._method=t,this._headers=n,this._mime=r,this._body=i}return e.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return p.get.apply(p,e).build()},e.post=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return p.post.apply(p,e).build()},e.put=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return p.put.apply(p,e).build()},e.del=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return p.del.apply(p,e).build()},e.head=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return p.head.apply(p,e).build()},Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return this._method},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this._headers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mime",{get:function(){return this._mime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return l.O.fromNullable(this._body)},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Request\n    Method: "+this.method.toUpperCase()+"\n    Url: "+this.url+"\n    Mime: "+this.mime+"\n    Headers: "+JSON.stringify(this.headers,void 0,2)+"\n    Body:"+l.O.mapOrDefault((function(e){return t=JSON.stringify(e),n=100,t.length<=n?t:t.slice(0,n)+"....";var t,n}),"empty")(this.body)+"\n    "},e.prototype.removeBody=function(){this._body=void 0},e}();t.Request=d,function(e){!function(e){e.GET="get",e.POST="post",e.PUT="put",e.OPTIONS="options",e.HEAD="head",e.TRACE="trace",e.DELETE="delete",e.CONNECT="connect"}(e.Method||(e.Method={}))}(d=t.Request||(t.Request={})),t.Request=d;var p=function(){function e(e,t,n,r,i,o,a,s){void 0===e&&(e=""),void 0===t&&(t=new URLSearchParams),void 0===n&&(n=[]),void 0===r&&(r={}),void 0===s&&(s=!1),this._url=e,this._queryParams=t,this._cookies=n,this._headers=r,this._method=i,this._mime=o,this._body=a,this._preserveUrl=s}return e.join=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=[].slice.call(t.filter((function(e){return e.length>0})),0).join("/");return e._normalize(r)},e._normalize=function(e){return e=(e=(e=e.replace(/:\//g,"://")).replace(/([^:\s])\/+/g,"$1/")).replace(/\/(\?|#)/g,"$1")},e.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method(d.Method.GET)},e.post=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method(d.Method.POST)},e.put=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method(d.Method.PUT)},e.del=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method(d.Method.DELETE)},e.head=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method(d.Method.HEAD)},e.url=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new e(e.join.apply(e,t))},e.prototype.url=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(""!==this._url)throw new Error("URL already set to "+this._url+", use join(string) to add additional parts to it");return this.join(e.join.apply(e,t))},e.create=function(){return new e},e.prototype.method=function(e){if(this._method&&this._method!==e)throw new Error("Method already set to "+this._method+", but was overwritten by "+e);return this._method=e,this},e.prototype.join=function(t){return this._url=e.join(this._url,t),this},e.prototype.pathParam=function(t){return this._url=e.join(this._url,encodeURIComponent(t)),this},e.prototype.body=function(e){if(this._body)throw new Error("Body already set to "+this._body+", but was overwritten by "+e);return this._body=e,this},e.prototype.formParam=function(e,t){return(this._body=this._body instanceof URLSearchParams?this._body:new URLSearchParams).append(e,t),this},e.prototype.multipartFormData=function(e,t,n){var r=this._body instanceof s?this._body:new s;return r.append(e,t,n),this._body=r,this},e.prototype.header=function(e,t){return this._headers[e]=t,this},e.prototype.queryParam=function(e,t){return this._queryParams.append(e,t),this},e.prototype.cookie=function(e,t){return this._cookies.push(e+"="+t),this},e.prototype.mime=function(e){if(this._mime&&this._mime!==e)throw new Error("MIME already set to "+this._mime+", but was overwritten by "+e);return this._mime=e,this},e.prototype.json=function(e){return e?this.body(e).mime(r.MimeType.json):this.mime(r.MimeType.json)},e.prototype.preserveUrl=function(){return this._preserveUrl=!0,this},e.prototype.build=function(){if(!this._url||0===this._url.length)throw new Error("URL cannot be empty");if(this._preserveUrl||(this._url=this._url.replace(/\/$/,"")),(""+this._queryParams).length>0&&(this._url+="?"+this._queryParams),this._body instanceof URLSearchParams){if(this._mime&&this._mime!==r.MimeType.form)throw new Error("Only application/x-www-form-urlencoded can be used for form requests, don't specify it mandatory in mime() method");this._mime=r.MimeType.form}else if(this._body instanceof s&&this._mime&&this._mime!==r.MimeType.multipart)throw new Error("Only multipart/form-data can be used for multipart form data requests, don't specify it mandatory in mime() method");if(this._mime===r.MimeType.json&&this._body&&(this._body=JSON.stringify(this._body)),!this._method)throw new Error("HTTP method was not set");if(this._method=this._method.toLocaleLowerCase(),("get"===this._method||"delete"===this._method)&&this._body)throw new Error("Body is not supported for GET, DELETE requests");if(this._mime&&(this._headers["Content-Type"]=this._mime),this._cookies.length>0){this._headers.Cookie=this._cookies.join("; ")}return new d(this._url,this._method,this._headers,this._mime||null,this._body)},e}();t.RequestBuilder=p,function(e){!function(e){e.identity=function(e){return o.task.of(e)},e.compose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){return t.reduce(o.task.chain,e.identity(n))}}}(e.Extender||(e.Extender={}))}(p=t.RequestBuilder||(t.RequestBuilder={})),t.RequestBuilder=p},81777:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Alternative=t.AlternativeReversed=t.AlternativeOperation=void 0;var r,i,o=n(59312),a=n(71249),s=n(45614),l=n(57050),c=n(40327),u=n(64450),d=n(68511),p=n(81531),h=n(64613),m=n(27966);!function(e){var t,n;!function(e){e.Important="important",e.Main="main",e.Optional="optional"}(t=e.Type||(e.Type={})),function(e){e.OptionalContext="optional_context"}(n=e.TypeExt||(e.TypeExt={})),e.eq=d.Eq.getStructEq({type:d.Eq.eqStrict,insert:d.Eq.eqString,delete:d.Eq.eqNumber,retain:d.Eq.eqNumber}),e.isInsert=function(e){return"insert"in e},e.isInsertString=function(t){return e.isInsert(t)&&r(t.insert)},e.isInsertGap=function(t){return e.isInsert(t)&&i(t.insert)},e.isDelete=function(e){return"delete"in e},e.isRetain=function(e){return"retain"in e},e.isOptionalContextRetain=function(t){return"retain"in t&&e.isOptionalContextType(t.type)};var r=function(e){return"string"==typeof e},i=function(e){return"object"==typeof e&&null!==e&&"gap"in e};e.isMain=function(t){return t.type===e.Type.Main},e.isOptionalType=function(t){return t===e.Type.Optional},e.isOptionalContextType=function(t){return t===e.TypeExt.OptionalContext},e.isSignificant=function(e){switch(e.type){case t.Main:case t.Important:return!0;case t.Optional:return!1;default:return d.assertNever(e.type)}},e.fromRawAbsAlternative=function(e){if(s=e.ops,(l=s[0])&&"retain"in l&&l.attributes&&"optional_context"===l.attributes.type){var t=e.ops,r=t[0],i=t.slice(1),a={retain:r.retain,type:n.OptionalContext};return o.__spreadArrays([a],i.map(p))}return e.ops.map(p);var s,l},e.length=u.Delta.Op.length,e.anonymize=function(t){return e.isInsert(t)?o.__assign(o.__assign({},t),{insert:"string"==typeof t.insert?"<"+e.length(t)+">":"<embed>"}):t};var a=function(){function n(e){this.ops=e,this.index=0,this.offset=0}return n.prototype.hasNext=function(){return this.peekLength()<1/0},n.prototype.next=function(n){n||(n=1/0);var r=this.ops[this.index];if(r){var i=r.type,o=this.offset,a=e.length(r);return n>=a-o?(n=a-o,this.index+=1,this.offset=0):this.offset+=n,e.isDelete(r)?{delete:n,type:i}:e.isRetain(r)?{retain:n,type:i,attributes:!e.isOptionalContextType(i)&&r.attributes}:e.isInsertString(r)?{insert:r.insert.substr(o,n),type:i,attributes:r.attributes}:r}return{retain:1/0,type:t.Optional,attributes:{}}},n.prototype.peekLength=function(){return this.ops[this.index]?e.length(this.ops[this.index])-this.offset:1/0},n.prototype.peekType=function(){return this.ops[this.index]?e.isDelete(this.ops[this.index])?"delete":e.isRetain(this.ops[this.index])?"retain":"insert":"retain"},n}();e.Iterator=a;var c=l.flow(d.O.fromNullable,d.O.map(s.deleteAt("type")),d.O.getOrElse((function(){return{}}))),p=function(e){var n=function(e){if(e&&e.type)switch(e.type){case"main":return t.Main;case"important":return t.Important;default:return d.assertNever(e.type)}return t.Optional}(e.attributes);return"insert"in e?{insert:e.insert,type:n,attributes:c(e.attributes)}:"delete"in e?{delete:e.delete,type:n}:{retain:e.retain,type:n,attributes:c(e.attributes)}}}(r=t.AlternativeOperation||(t.AlternativeOperation={})),function(e){e.fromAlternative=function(e){var t=e.alternative,n=e.fullText;return c.pipe(t.delta.invert(n),i.fromRawDelta)},e.fromAlternativeBoldified=function(t){var n=t.alternative,r=t.fullText,i=c.pipe(n.delta.map(h.DeltaUtils.match((function(e){return c.pipe(e,d.O.fromPredicate(h.DeltaUtils.isInsertString),d.O.chain((function(e){return c.pipe(d.O.fromNullable(e.attributes),d.O.map((function(t){return{attributes:t,retain:e.insert.length}})))})),d.O.filter((function(e){return!!e.attributes.bold})),d.O.map((function(e){return{retain:e.retain,attributes:{bold:!1}}})))}),(function(e){return d.O.none}),(function(e){return d.O.some({retain:e.retain})}))),d.A.compact,(function(e){return new u.Delta(e)}),(function(e){return r.compose(e)}));return e.fromAlternative({alternative:n,fullText:i})},e.fromAlternativeListified=function(t){var n=t.alternative,r=t.fullText;return c.pipe(e.fromAlternative({alternative:n,fullText:r}),(function(e){return c.pipe(e.delta.ops,d.A.findLastIndex((function(e){return h.DeltaUtils.isInsertString(e)&&"\n"===e.insert&&Boolean(!e.attributes||!e.attributes.list)})),d.O.map((function(t){var n=e.delta.ops,r=n[t];return new u.Delta(o.__spreadArrays(n.slice(0,t),[o.__assign(o.__assign({},r),{attributes:o.__assign(o.__assign({},r.attributes),{list:!1})})],n.slice(t+1)))})),d.O.getOrElse((function(){return e.delta})))}),i.fromRawDelta)}}(t.AlternativeReversed||(t.AlternativeReversed={})),function(e){var t;function n(e){return function(t){return r.isInsertGap(t)?o.__assign(o.__assign({},t),{insert:e}):t}}function i(e){return new s(e)}e.hasOptionalContext=function(e){return!!e[0]&&r.isOptionalContextRetain(e[0])},function(e){e.Insert="insert",e.Remove="remove",e.Substitution="substitution"}(t=e.Type||(e.Type={})),function(e){function t(t){return t.type===r.Type.Main?d.O.some(r.isInsert(t)?e.Insert:e.Remove):d.O.none}e.eq=d.Eq.eqString,e.fromOperation=t,e.semigroup={concat:function(t,n){switch(t){case e.Insert:return n===e.Remove?e.Substitution:n;case e.Remove:return n===e.Insert?e.Substitution:n;case e.Substitution:return e.Substitution;default:return d.assertNever(t)}}},e.monoid=d.O.getMonoid(e.semigroup),e.parse=a.foldMap(e.monoid)(t)}(t=e.Type||(e.Type={})),e.eq=d.Eq.getStructEq({lengthAffected:d.Eq.eqNumber,type:d.O.getEq(t.eq),ops:a.getEq(r.eq)}),e.fromRawDelta=l.flow(m.RawTransform.AbsAlternative.unsafeFromDelta,r.fromRawAbsAlternative,i),e.fillGaps=function(t,r){return e.hasOptionalContext(t.ops)?i(o.__spreadArrays([t.ops[0]],t.ops.slice(1).map(n(r)))):i(t.ops.map(n(r)))},e.create=i,e.validate=l.flow((function(e){return e.ops}),d.E.fromPredicate(d.ArrayUtils.existsOnEdgesOnly(r.isOptionalContextRetain),(function(e){return"Optional_context operations exist not only at the beginning or at the end of Delta"}))),function(t){t.fromSerialized=function(t){return{context:t.context,alternatives:c.pipe(t.alternatives,d.NEA.map((function(e){return e.ops})),d.NEA.map(e.create))}},t.fromSubalerts=function(e,t){return{context:e,alternatives:d.NEA.map(l.flow(r.fromRawAbsAlternative,i))(t)}},t.fromRawTransform=function(e){return{context:d.NEA.of(e.context),alternatives:d.NEA.map(l.flow(r.fromRawAbsAlternative,i))(e.alternatives)}},t.rebase=function(e){return function(t){return{context:c.pipe(t.context,d.NEA.map((function(t){return{s:e.transformPosition(t.s,!0),e:e.transformPosition(t.e,!0)}}))),alternatives:c.pipe(t.alternatives,d.NEA.map((function(t){return c.pipe(t.rebase(e),d.O.fold((function(){return t}),l.identity))})))}}},t.copy=function(e){return{context:d.NEA.copy(e.context),alternatives:d.NEA.copy(e.alternatives)}}}(e.Group||(e.Group={}));var s=function(){function n(e){this.ops=e,this.type=t.parse(this.ops),this.lengthAffected=h.DeltaUtils.calcAffectedLength(this)}return n.prototype.rebase=function(e){var t=e.ops[0];return!t||h.DeltaUtils.isRetain(t)&&(void 0===t.attributes||0===Object.keys(t.attributes).length)&&u.Delta.Op.length(t)>this.lengthAffected?d.O.some(this):this._internalRebase(e)},n.prototype._internalRebase=function(t){for(var i=this,o=u.Delta.Op.iterator(t.ops),a=new r.Iterator(this.ops),s=d.O.some(new n([])),l=!1;a.hasNext();)if("insert"===o.peekType()){if(l&&c.pipe(s,d.O.forAll((function(e){return e.ops[e.ops.length-1].type===r.Type.Main}))))return d.O.none;var p=u.Delta.Op.length(o.next()),m=c.pipe(s,d.O.map((function(e){return e.ops[e.ops.length-1]})),d.O.unsafeGet);if(l&&d.O.forAll((function(e){return e.lengthAffected>0}))(s)){var f={retain:p,type:m.type,attributes:"attributes"in m&&!r.isOptionalContextType(m.type)&&m.attributes};s=n._pushOp(s,f)}else s=n._pushOp(s,{retain:p,type:r.Type.Optional,attributes:{}})}else if("insert"===a.peekType()){var g=a.next();if(g.type===r.Type.Main&&"delete"===o.peekType()&&o.offset>0)return d.O.none;s=n._pushOp(s,g)}else{var y=Math.min(o.peekLength(),a.peekLength()),v=o.next(y),b=a.next(y);h.DeltaUtils.isDelete(v)||(l=a.offset>0,s=n._pushOp(s,r.isDelete(b)?b:r.isOptionalContextType(b.type)?{retain:y,type:r.TypeExt.OptionalContext}:{retain:y,type:b.type,attributes:b.attributes}))}return c.pipe(s,d.O.map((function(t){return t.type=e.Type.parse(i.ops),t})))},n._pushOp=function(e,t){return c.pipe(e,d.O.chain((function(e){return c.pipe(d.E.tryCatchError((function(){return e._push(t)})),d.E.mapLeft((function(e){return p.Monitoring.Logging.getLogger("Alternative").error("Alternative push error",e),e})),d.O.fromEither)})))},n.prototype._push=function(e){var t=this.ops.length,n=this.ops[t-1];if(n){if(r.isOptionalContextRetain(e))return r.isOptionalContextRetain(n)?n.retain+=e.retain:r.isRetain(n)&&t<=2?2===t?(d.invariant(r.isOptionalContextRetain(this.ops[0]),"OptionalContext is expected in the beginning of alternative but not found",JSON.stringify({ops:this.ops,newOp:e,index:t})),this.ops[0].retain+=e.retain):(this.ops[t]=n,this.ops[t-1]=e):d.invariant(r.isOptionalContextRetain(n)||r.isRetain(n)&&1===t,"Attempted to push optional_context in the middle of alternative ops",JSON.stringify({ops:this.ops,newOp:e,index:t})),this.lengthAffected+=e.retain,this;if(r.isDelete(e)&&r.isDelete(n))return e.type===n.type?n.delete+=e.delete:this.ops.push(e),this.lengthAffected+=e.delete,this;if(r.isInsert(e)&&r.isInsert(n))return e.type===n.type&&"string"==typeof e.insert&&"string"==typeof n.insert?n.insert+=e.insert:this.ops.push(e),this;if(r.isRetain(e)&&r.isRetain(n))return e.type===n.type?n.retain+=e.retain:this.ops.push(e),this.lengthAffected+=e.retain,this;this.ops.push(e)}else this.ops=[e];return r.isInsert(e)||(this.lengthAffected+=r.length(e)),this},Object.defineProperty(n.prototype,"delta",{get:function(){return h.DeltaUtils.normalizeDelta(new u.Delta(this))},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{ops:this.ops}},n}();e.compose=function(e,t){var n={composedDelta:new u.Delta,currentFullText:t,reversedAlternatives:[]},r=e.reduce((function(e,t,n){var r=t[0],i=t[1];return c.pipe(r.rebase(e.composedDelta),d.O.fold((function(){e.reversedAlternatives.push(d.E.left({error:new Error("Could not rebase alternative to composed delta"),delta:r.delta,alternativeIndex:n}))}),(function(t){var r=i({alternative:t,fullText:e.currentFullText});e.composedDelta=e.composedDelta.compose(t.delta),e.currentFullText=e.currentFullText.compose(t.delta),function(e,t){e.forEach((function(n,r){return c.pipe(n,d.E.fold(l.constVoid,(function(n){e[r]=c.pipe(n.reversedAlternative.rebase(t.delta),d.E.fromOption((function(){return{error:new Error("Could not rebase reversed alternative to some alternative"),delta:n.reversedAlternative.delta,alternativeIndex:n.alternativeIndex}})),d.E.map((function(e){return o.__assign(o.__assign({},n),{reversedAlternative:e})})))})))}))}(e.reversedAlternatives,t),e.reversedAlternatives.push(d.E.right({reversedAlternative:r,alternativeIndex:n}))}))),e}),n),i=c.pipe(r.reversedAlternatives,d.A.separate,d.RecoverableOperation.fromSeparatedArray);return o.__assign(o.__assign({},r),{reversedAlternatives:i})},e.withoutOptionalOps=function(t){return e.create(t.filter((function(e){return!r.isOptionalType(e.type)})))}}(i=t.Alternative||(t.Alternative={}))},86664:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultCAPIEventHandler=void 0;var n=function(){},r=function(){this.onSessionStarted=n,this.onWaitForOT=n,this.onReady=n,this.onSessionInbound=n,this.beforeAlert=n,this.onAlert=n,this.onRemove=n,this.onChange=n,this.onSynonyms=n,this.onPlagiarism=n,this.onBeforeAsyncCheckFinish=n,this.onAsyncCheckFinish=n,this.onError=n,this.onBeforeFinish=n,this.onFinish=n,this.onStats=n,this.onTextMaps=n,this.onTextInfo=n,this.onEmotions=n,this.onGoalPrediction=n,this.onPong=n,this.onDebugInfo=n,this.onConnect=n,this.onDisconnect=n,this.onClose=n,this.onQueueMsgAccepted=n,this.onQueueMsgDropped=n,this.onAck=n,this.onMessageReceived=n,this.onMessageSent=n,this.onAutoComplete=n,this.onAttentionHeatmap=n,this.onAttentionInfo=n,this.onProofitAvailability=n,this.onProofitCancelled=n,this.onProofitCompleted=n,this.onProofitProgress=n,this.onProofitProgressProblem=n,this.onProofitSubmit=n,this.onBoomerangSharedLinkReceived=n,this.onBoomerangReviewSubmitted=n,this.onBoomerangReviewProgress=n,this.onBoomerangCreateSharedLinkAck=n,this.onBoomerangCheckReviewersFeedbackAck=n};t.DefaultCAPIEventHandler=r},13669:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CAPIConnection=void 0;var r=n(59312),i=n(57050),o=n(40327),a=n(68511),s=n(81531),l=n(26696),c=n(86664),u=n(59954),d=function(){function e(e,t,n){var d=this,p=e.handler,h=e.reconnectHandler,m=void 0===h?l.Reconnect.getDefaultReconnect(l.Reconnect.ClientType.capi):h,f=e.maxReconnectDelay,g=e.baseReconnectDelay,y=r.__rest(e,["handler","reconnectHandler","maxReconnectDelay","baseReconnectDelay"]);this._connect=t,this._ws=n,this._log=s.Monitoring.Logging.getLogger("coreclients.capi.connection"),this._isIdle=!1,this._isStarted=!1;var v=r.__assign(r.__assign({},p||{}),{onWaitForOT:function(e){a.invariant(void 0!==d._onInitResetSent&&void 0!==d._onInitResetFailed,"expected initial connect promise to be initialized at this stage"),d._log.trace("sending initial reset Delta to CAPI"),d._capi.pushChanges(d._contentSource())().then(a.E.fold((function(e){d._onInitResetFailed(e),d._onInitResetFailed=void 0}),a.O.fold(i.constVoid,(function(e){d._onInitResetSent(e),d._onInitResetSent=void 0})))),p&&p.onWaitForOT&&p.onWaitForOT(e)}});this._handler=Object.assign(new c.DefaultCAPIEventHandler,v),this._ws.onMessage((function(e,t){d._capi.isStable(t)&&b.reset()})).onConnecting((function(){d._isIdle=!1})).onConnect((function(){return d._handler.onConnect({kind:"connect"})})).onDisconnect((function(e){if(!d._capi.isClosed()){var t={canGoIdle:d._capi.canGoIdle(),isStable:d._capi.isStable()};d._log.debug("calling reconnect handler:",t),o.pipe(m(e,b,t),(function(t){return d._handler.onDisconnect({kind:"disconnect",reason:e,reconnectCounter:b.reconnectCounter,reconnectResult:t}),t}),a.E.fold((function(e){d._log.warn("error reconnecting, closing CAPI:",e.message),d._capi.close("error reconnecting:"+e.message)}),(function(e){"idle"===e.kind&&(d._isIdle=!0)})))}}));var b=new l.Reconnect.ReconnectSchedulerImpl(f,g,(function(){return d.connect(d._contentSource).then((function(e){var t=e[0];e[1];return t}))}));this._capi=new u.CAPIClientImpl(y,this._handler,this._ws)}return e.prototype.connect=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return a.invariant(!this._capi.isClosed(),"cannot connect when CAPI is closed"),this._isIdle=!1,this._isStarted=!0,this._contentSource=e,this._log.trace("connect: initializing new ws connection"),[4,this._connect(this._ws)];case 1:return t=r.sent(),this._conn=t,[2,new Promise((function(e,r){n._onInitResetFailed=r,n._onInitResetSent=function(n){return e([t,n])},setTimeout((function(){return r('failed to initialize CAPI: timeout waiting for "wait_for_ot event" to send an initial reset Delta')}),5e3)}))]}}))}))},e.prototype.close=function(e,t){return void 0===e&&(e=l.Reconnect.WsCodes.NORMAL_CLOSURE),r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return n=t||"CAPI WS Close called",this._log.trace("close: closing CAPI because: "+n),[4,this._capi.close(n)];case 1:return r.sent(),this._conn?(this._log.debug("close: closing connection because: "+n),[4,this._conn.close({code:e,reason:n})]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},Object.defineProperty(e.prototype,"isIdle",{get:function(){return this._isIdle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDisconnected",{get:function(){return this._ws.isDisconnected()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wasStarted",{get:function(){return this._isStarted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"client",{get:function(){return this._capi},enumerable:!1,configurable:!0}),e}();t.CAPIConnection=d},60169:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CAPIHttpClient=void 0;var r=n(18410),i=n(52868),o=function(){function e(e,t,n){this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:i.Fingerprints.toHeaderAppender(this._fingerprints)})}return e.prototype.checkText=function(e){var t=r.RequestBuilder.post(this._url,"/check").mime(r.Ajax.MimeType.txt).body(e);return this._ajax.json(t)},e.prototype.getWeeklyStatistics=function(){var e=r.RequestBuilder.get(this._url,"/statistics/product/weekly");return this._ajax.json(e)},e.prototype.getMonthlyStatistics=function(){var e=r.RequestBuilder.get(this._url,"/statistics/product/monthly");return this._ajax.json(e)},e.targetTag="capi",e}();t.CAPIHttpClient=o},59954:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RawAlertValidation=t.AsyncChecksStateManager=t.CAPIClientImpl=t.optimizedOTSerializer=void 0;var r,i,o=n(59312),a=n(57050),s=n(40327),l=n(68511),c=n(81531),u=n(93153),d=n(15495),p=n(70861),h=n(49150),m=n(95302),f=n(67529),g=n(44562),y=n(12976),v=n(96804),b=n(76971),w=n(67697),_=n(99727);!function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.WAITING_FOR_OT=3]="WAITING_FOR_OT",e[e.WAITING_FOR_ACK=4]="WAITING_FOR_ACK",e[e.SESSION_INBOUND=5]="SESSION_INBOUND",e[e.ANY=6]="ANY",e[e.CLOSED=7]="CLOSED"}(r||(r={})),function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECT=2]="DISCONNECT",e[e.WAIT=3]="WAIT",e[e.READY=4]="READY",e[e.SEND=5]="SEND",e[e.ACK=6]="ACK",e[e.CLOSE=7]="CLOSE"}(i||(i={}));t.optimizedOTSerializer=function(e){if("string"==typeof e)return e;switch(e.action){case"submit_ot":if(e.chunked)return JSON.stringify(e);var t=o.__assign(o.__assign({},e),{deltasString:void 0,deltas:void 0}),n=JSON.stringify(t);return n.substring(0,n.length-1)+',"deltas": '+e.deltasString+"}";default:return JSON.stringify(e)}};var C=function(){function e(e,t,n){var a=this,g=e.context,y=void 0===g?void 0:g,w=e.dialect,_=void 0===w?"undefined":w,C=e.client,I=e.clientVersion,k=void 0===I?"":I,A=e.extDomain,x=void 0===A?void 0:A,T=e.sendDelay,O=void 0===T?50:T,R=e.docid,N=void 0===R?"":R,L=e.clientSupports,P=void 0===L?[]:L,M=e.isDemoDoc,D=void 0!==M&&M,F=e.maxMessageSizeKb,B=e.messagePaddingKb,U=e.startSessionOptions,$=void 0===U?{}:U,j=e.idGenerator,W=void 0===j?new p.CappedIdGenerator(v.MAX_SAFE_ID,0,!1):j;this._log=c.Monitoring.Logging.getLogger("coreclients.capi",c.Logging.LogLevel.DEBUG),this._queueIdGenerator=new p.CappedIdGenerator(v.MAX_SAFE_ID,0,!1),this._textSize=0,this._asyncChecksManager=new E,this._pingsMap=new Map,this._validateAlert=S.validate,this._statsRequester=new m.ValueRequester(15e3,"CAPI.DocStats"),this._synonymsRequester=new m.ValueRequester(15e3,"CAPI.Synonyms"),this._sharedLinkRequester=new m.ValueRequester(15e3,"CAPI.SharedLink"),this._getTextRequester=new m.ValueRequester(15e3,"CAPI.Text"),this._commandsRequester=new m.ValueRequester(15e3,"CAPI.Commands"),this._otChunksNotifier=new m.ValueNotifier(15e3,"CAPI.OT.Chunks"),this.reportLensFeedback=function(e,t){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"feedback",type:t,lens:e},a._commandsRequester)},this.reportSystemFeedback=function(e){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"feedback",type:e},a._commandsRequester)},this.reportEmotionFeedback=function(e,t,n){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"feedback",type:t,emotion:e,subtype:n},a._commandsRequester)},this.reportEmotionSentenceFeedback=function(e,t){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"feedback",type:t,alertId:e},a._commandsRequester)},this.reportIntentFeedback=function(e,t){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"feedback",type:e,predictionId:t},a._commandsRequester)},this.reportMuteFeedback=function(e,t,n){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"feedback",type:n,userMuteScope:t,userMuteCategories:e},a._commandsRequester)},this.reportAutocorrectFeedback=function(e,t){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"feedback",type:e,before:t.before,after:t.after,context:t.context,expected:t.expected},a._commandsRequester)},this.reportAutocompleteFeedback=function(e,t){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"feedback",type:e,alertId:t.alertId,begin:t.begin,end:t.end,context:t.context,before:t.before,after:t.after,text:t.text,pname:t.pname},a._commandsRequester)},this.reportAutocompleteRejectedFeedback=function(e){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"feedback",type:f.AutocompleteFeedbackType.COMPLETION_REJECTED,alertId:e.alertId,begin:e.begin,end:e.end,context:e.context,before:e.before,after:e.after,text:e.text,pname:e.pname,subtype:e.subtype},a._commandsRequester)},this.reportSnippetFeedback=function(e,t){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"feedback",type:e,snippetUuid:t},a._commandsRequester)},this.requestSynonyms=function(e,t){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"synonyms",begin:e,token:t},a._synonymsRequester)},this.shortenItSubmit=function(e){return s.pipe(l.TE.rightIO((function(){a._log.trace("shorten-it submit")})),l.TE.chain((function(){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"shorten_it_submit",alertId:e},a._commandsRequester)})))},this.requestDocStats=this._sendLazyInbandCommand((function(){return{id:a._idGenerator.newId(),action:"get_text_stats"}}),this._statsRequester),this.enablePlagiarismSearch=s.pipe(l.TE.rightIO((function(){a._log.trace("Enable plagiarism search"),a._asyncChecksManager.resetCheck("plagiarism")})),l.TE.chain((function(){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"toggle_checks",checks:{plagiarism:!0}},a._commandsRequester)}))),this.disablePlagiarismSearch=this._sendLazyInbandCommand((function(){return{id:a._idGenerator.newId(),action:"toggle_checks",checks:{plagiarism:!1}}}),this._commandsRequester),this.realtimeProofitSubmit=function(e){return a._log.trace("Submit real-time Proofit job"),a._sendInbandCommand({id:a._idGenerator.newId(),action:"realtime_proofit_submit",reconnect:e},a._commandsRequester)},this.realtimeProofitCancel=s.pipe(l.TE.rightIO((function(){a._log.trace("Cancel real-time Proofit job")})),l.TE.chain((function(){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"realtime_proofit_cancel"},a._commandsRequester)}))),this.submitRecipients=function(e){return a._log.trace("Submit recipients for better suggestions!"),a._sendInbandCommand({id:a._idGenerator.newId(),action:"submit_recipients",recipients:e},a._commandsRequester)},this.boomerangGetSharedLink=s.pipe(l.TE.rightIO((function(){a._log.trace("Submit request for Boomerang shared link")})),l.TE.chain((function(){return a._sendInbandCommand({id:a._idGenerator.newId(),action:"create_shared_link"},a._sharedLinkRequester)}))),this.boomerangCheckReviewersFeedback=function(e){return a._log.trace("Ping to check if feedback from reviewers is received"),a._sendInbandCommand({id:a._idGenerator.newId(),action:"check_reviewers_feedback",sharedLink:e},a._commandsRequester)},this.ping=this._sendLazyInbandCommand((function(){return{id:a._idGenerator.newId(),action:"ping"}}),this._commandsRequester),this.canGoIdle=function(){return a._changesQueue.isEmpty&&!a._changesQueue.isStaging},this.isStable=function(e){var t=void 0===e?a._idGenerator.id:a._idGenerator.id+1;return(void 0===e||"error"!==e.action)&&t>5},this._startSession=function(){return o.__awaiter(a,void 0,void 0,(function(){var e,t,n,r;return o.__generator(this,(function(a){switch(a.label){case 0:return this._log.trace("_startSession"),this._idGenerator.reset(),this._queueIdGenerator.reset(),e="session start",this._clear(e),this._commandsRequester.clear(e),this._statsRequester.clear(e),this._synonymsRequester.clear(e),this._sharedLinkRequester.clear(e),this._getTextRequester.clear(e),"function"!=typeof this._startSessionOptions?[3,2]:[4,this._startSessionOptions()];case 1:return n=a.sent(),[3,3];case 2:n=this._startSessionOptions,a.label=3;case 3:return t=n,r=o.__assign({id:this._idGenerator.newId(),action:"start",client:this._client.type,clientSubtype:this._client.sub,clientVersion:this._clientVersion,dialect:this._dialect,docid:this._docid,extDomain:this._extDomain,documentContext:this._context&&u.DocumentContext.serialize(this._context),clientSupports:this._clientSupports,isDemoDoc:this._isDemoDoc},t),this._queueIdGenerator.newId(),[4,this._fsm.event(i.SEND)];case 4:return a.sent(),this._sendMessage(r),[2]}}))}))},this._handleStart=function(e){a._log.trace("_handleStart"),a._fsm.event(i.ACK);var t=e.userMutedCategories,n=e.domainCategory,o=e.domainName,s=e.isEnterprise,l=e.defaultDocumentContext,c=e.sessionUuid;a._handler.onSessionStarted({kind:"session_started",userMutedCategories:t,domainCategory:n,domainName:o,isEnterprise:s,defaultDocumentContext:u.DocumentContext.parseDefault(l),sessionUuid:c}),a._fsm.is(r.CONNECTED)&&a._fsm.event(i.WAIT)},this._waitForSubmitOt=function(){a._handler.onWaitForOT({kind:"wait_for_ot"})},this._sessionInbound=function(e){a._handler.onSessionInbound({kind:"session_inbound"}),a._trySend(e)},this._canSend=function(){return!a._fsm.is(r.DISCONNECTED,r.CONNECTING,r.CLOSED)},this._send=function(){return o.__awaiter(a,void 0,void 0,(function(){var e,t,n=this;return o.__generator(this,(function(a){switch(a.label){case 0:return this._resetTimer(),!this._fsm.is(r.SESSION_INBOUND)||this._changesQueue.isEmpty?[3,6]:[4,this._fsm.event(i.SEND)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),e=this._changesQueue.poll(),[4,s.pipe(e,l.O.map((function(e){return o.__awaiter(n,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:return t=b.ChangesQueue.isChange(e),[4,this._sendMessage(this._processQueueMessage(e))];case 1:return n.sent(),t?[3,3]:[4,this._fsm.event(i.ACK)];case 2:n.sent()?this._changesQueue.ackOperation(e.id):this._log.debug("can not do ack for non change msg because we are in unexpected state",{state:r[this._fsm.current]}),n.label=3;case 3:return[2]}}))}))})))];case 3:return a.sent(),[3,5];case 4:return t=a.sent(),this._log.error("unexpected error on sending",t),[3,5];case 5:return[3,7];case 6:this._trySend(this._fsm.current),a.label=7;case 7:return[2]}}))}))},this._processQueueMessage=function(e){return b.ChangesQueue.isChange(e)?a._processSubmitOTMessage(e):a._shouldHaveSeparateRevision(e.cmd)?o.__assign(o.__assign({},e.cmd),{rev:e.rev,id:e.id}):o.__assign(o.__assign({},e.cmd),{id:e.id})},this._resetTimer=function(){void 0!==a._timeout&&(clearTimeout(a._timeout),a._timeout=void 0)},this._onQueueMsgAccepted=function(e){a._handler.onQueueMsgAccepted({kind:"queue_msg_accepted",message:e})},this._onQueueMsgDropped=function(e,t){e.filter(b.ChangesQueue.isCmd).forEach((function(e){var n=new m.DroppedError("message dropped from queue:"+t);switch(e.cmd.action){case"ping":case"option":case"toggle_checks":case"set_context":case"feedback":a._commandsRequester.onError(e.id,n);break;case"get_text_stats":a._statsRequester.onError(e.id,n);break;case"synonyms":a._synonymsRequester.onError(e.id,n);break;case"create_shared_link":a._sharedLinkRequester.onError(e.id,n);break;case"get_debug_info":a._getTextRequester.onError(e.id,n)}})),a._handler.onQueueMsgDropped({kind:"queue_msgs_dropped",messages:e,reason:t})},this._handler=t,this._context=y,this._dialect=_,this._client=C,this._clientVersion=k,this._extDomain=x,this._sendDelay=O,this._docid=N,this._clientSupports=P,this._isDemoDoc=D,this._startSessionOptions=$,this._idGenerator=W,this._changesQueue=new b.CapiQueue(this._shouldHaveSeparateRevision,this._onQueueMsgAccepted,this._onQueueMsgDropped,(function(){return a._queueIdGenerator.newId()}),F,B),this._fsm=new d.StateMachine("capi",r.DISCONNECTED,r.CLOSED).with(r.ANY).parentOf(r.CONNECTED,r.CONNECTING,r.DISCONNECTED,r.WAITING_FOR_OT,r.WAITING_FOR_ACK,r.SESSION_INBOUND).from(r.ANY).to(r.CLOSED).on(i.CLOSE).from(r.DISCONNECTED).to(r.CONNECTING).on(i.CONNECT).from(r.CONNECTING).to(r.CONNECTING).on(i.CONNECT).from(r.CONNECTING).to(r.CONNECTED).on(i.CONNECTED).from(r.CONNECTED,r.WAITING_FOR_OT,r.WAITING_FOR_ACK,r.SESSION_INBOUND,r.CONNECTING).to(r.DISCONNECTED).on(i.DISCONNECT).from(r.CONNECTED).to(r.WAITING_FOR_OT).on(i.WAIT).from(r.CONNECTED,r.WAITING_FOR_OT).to(r.SESSION_INBOUND).on(i.READY).from(r.SESSION_INBOUND).to(r.WAITING_FOR_ACK).on(i.SEND).from(r.WAITING_FOR_ACK).to(r.SESSION_INBOUND).on(i.ACK).on(r.CONNECTED,this._startSession).on(r.WAITING_FOR_OT,this._waitForSubmitOt).on(r.SESSION_INBOUND,(function(e){return a._sessionInbound(e.to)})).on(r.DISCONNECTED,(function(e){return a._clear(e.args)})),this._log.isEnabled(c.Logging.LogLevel.TRACE)&&this._fsm.verbose(r,i),n.onConnecting((function(){return a._handleConnecting()})).onConnect((function(e){return a._handleConnect(e)})).onDisconnect((function(e){return a._handleDisconnect(e)})).onMessage((function(e,t){return a._handleMessage(t)})),l.registerDebugHelper("closeCapiSocket",(function(e,t){void 0===e&&(e=1e3),null!==a._conn&&a._conn._ws.close(e,t)})),l.registerDebugHelper("capiState",this),l.registerDebugHelper("capiReadyToReceive",(function(){return a._fsm.is(r.SESSION_INBOUND)&&a._changesQueue.isEmpty})),l.registerDebugHelper("capiRuntimeError",(function(){var e=h.Change.ins(0,"test",100500);a.pushChanges(e)}))}return e.prototype.pushChanges=function(e){return this._pushChangesTask(e)},Object.defineProperty(e.prototype,"checkingState",{get:function(){return 0===this._checkedTextSize||1===this._textSize?"idle":this._checkedTextSize>f.BIG_TEXT_SIZE&&this._textSize>f.BIG_TEXT_SIZE/3?"full":"checking"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asyncChecksState",{get:function(){return this._asyncChecksManager.getState()},enumerable:!1,configurable:!0}),e.prototype.setSessionOption=function(e){switch(e.kind){case f.CAPISessionOptionType.Context:return this.setContext(e.context);case f.CAPISessionOptionType.GnarContainerId:return this.setOption(e.kind,e.id);default:return l.assertNever(e)}},e.prototype.setContext=function(e){return this._log.debug("setContext(...)"),this._context=e,this._sendInbandCommand({action:"set_context",id:this._idGenerator.newId(),rev:-1,documentContext:u.DocumentContext.serialize(e)},this._commandsRequester)},e.prototype.setOption=function(e,t){return this._log.trace("Set option "+t),this._sendInbandCommand({id:this._idGenerator.newId(),action:"option",name:e,value:t},this._commandsRequester)},e.prototype.sendFeedback=function(e){switch(this._log.debug("sendFeedback",e.kind),e.kind){case f.AlertFeedbackType.ACCEPTED:return this._sendAlertAcceptedFeedback(e);case f.AlertFeedbackType.IGNORE:return this.reportIgnoreFeedback(e.id,e.reason,e.subtype,e.pnameQualifier,e.drilldownSuggestionIds);case f.AlertFeedbackType.ACKNOWLEDGED:return this.reportAcknowledgeFeedback(e.id,e.subtype,e.pnameQualifier);case f.AlertFeedbackType.ADD_TO_DICTIONARY:case f.AlertFeedbackType.LOOKED:case f.AlertFeedbackType.CLOSED:case f.AlertFeedbackType.LIKE:case f.AlertFeedbackType.DISLIKE:case f.AlertFeedbackType.WRONG_SUGGESTION:case f.AlertFeedbackType.OFFENSIVE_CONTENT:case f.AlertFeedbackType.EXPANDED:case f.AlertFeedbackType.IGNORE_BULK_ACCEPTED:case f.AlertFeedbackType.HIDE:return this.reportAlertFeedback(e.id,e.kind,e.subtype);case f.DrilldownFeedbackType.DRILLDOWN:return this._reportDrilldownFeedback(e.id,e.alternativeIndex,e.drilldownSuggestionIds,e.subtype);case f.SynonymFeedbackType.SYNONYM_ACCEPTED:return this.reportSynonymFeedback(e.id,e.kind,e.replacementText,e.subtype);case f.SynonymFeedbackType.SYNONYM_DISMISSED:return this.reportSynonymFeedback(e.id,e.kind,e.subtype);case f.EmotionFeedbackType.EMOTION_LIKE:case f.EmotionFeedbackType.EMOTION_DISLIKE:case f.EmotionFeedbackType.EMOTION_OFFENSIVE:return this.reportEmotionFeedback(e.emotionName,e.kind,e.subtype);case f.EmotionSentenceFeedbackType.EMOTION_SENTENCE_LIKE:case f.EmotionSentenceFeedbackType.EMOTION_SENTENCE_DISLIKE:return this.reportEmotionSentenceFeedback(e.id,e.kind);case f.MutedFeedbackType.MUTE:case f.MutedFeedbackType.UNMUTE:return this.reportMuteFeedback(e.userMuteCategories,e.userMuteScope,e.kind);case f.SystemFeedbackType.RECHECK_SHOWN:return this.reportSystemFeedback(e.kind);case f.LensFeedbackType.LENS_CLOSE:case f.LensFeedbackType.LENS_OPEN:case f.LensFeedbackType.DISMISS_BY_LENS:return this.reportLensFeedback(e.lensName,e.kind);case f.AutocorrectFeedbackType.AUTOCORRECT_ACCEPT:case f.AutocorrectFeedbackType.AUTOCORRECT_DISMISS:case f.AutocorrectFeedbackType.AUTOCORRECT_REPLACE:return this.reportAutocorrectFeedback(e.kind,e);case f.AutocompleteFeedbackType.COMPLETION_REJECTED:return this.reportAutocompleteRejectedFeedback(e);case f.AutocompleteFeedbackType.COMPLETION_ACCEPTED:case f.AutocompleteFeedbackType.COMPLETION_IGNORED:case f.AutocompleteFeedbackType.COMPLETION_SHOWN:return this.reportAutocompleteFeedback(e.kind,e);case f.AlertsBatchFeedbackType.BULK_ACCEPTED:return this.reportAlertsBatchFeedback(e.alertIds,e.kind,e.subtype);case y.GoalPrediction.Intent.FeedbackType.INTENT_ALERT:case y.GoalPrediction.Intent.FeedbackType.INTENT_LOOKED:case y.GoalPrediction.Intent.FeedbackType.INTENT_IGNORED:case y.GoalPrediction.Intent.FeedbackType.INTENT_ACCEPTED:return this.reportIntentFeedback(e.kind,e.predictionId);case f.SnippetsFeedbackType.SNIPPET_ACCEPTED:return this.reportSnippetFeedback(e.kind,e.snippetUuid);default:return l.assertNever(e)}},e.prototype._reportDrilldownFeedback=function(e,t,n,r){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:f.DrilldownFeedbackType.DRILLDOWN,alertId:e,alternativeIndex:t,drilldownSuggestionIds:n,subtype:r},this._commandsRequester)},e.prototype._sendAlertAcceptedFeedback=function(e){return"replacementText"in e?this._reportTextAlertAcceptedFeedback(e.id,e.replacementText,e.subtype):"alternativeIndex"in e?this._reportTransformJsonAlertAcceptedFeedback(e.id,e.alternativeIndex,e.gapValue,e.subtype,e.drilldownSuggestionIds):l.assertNever(e)},e.prototype.reportIgnoreFeedback=function(e,t,n,r,i){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:f.AlertFeedbackType.IGNORE,alertId:e,userReason:t,subtype:n,pnameQualifier:r,drilldownSuggestionIds:i},this._commandsRequester)},e.prototype.reportAcknowledgeFeedback=function(e,t,n){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:f.AlertFeedbackType.ACKNOWLEDGED,alertId:e,subtype:t,pnameQualifier:n},this._commandsRequester)},e.prototype.reportAlertFeedback=function(e,t,n){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:t,alertId:e,subtype:n},this._commandsRequester)},e.prototype.reportAlertsBatchFeedback=function(e,t,n){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:t,alertIds:e,subtype:n},this._commandsRequester)},e.prototype._reportTextAlertAcceptedFeedback=function(e,t,n){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:f.AlertFeedbackType.ACCEPTED,alertId:e,text:t,subtype:n},this._commandsRequester)},e.prototype._reportTransformJsonAlertAcceptedFeedback=function(e,t,n,r,i){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:f.AlertFeedbackType.ACCEPTED,alertId:e,alternativeIndex:t,gapValue:n,subtype:r,drilldownSuggestionIds:i},this._commandsRequester)},e.prototype.reportSynonymFeedback=function(e,t,n,r){switch(t){case f.SynonymFeedbackType.SYNONYM_ACCEPTED:var i={id:this._idGenerator.newId(),action:"feedback",type:f.SynonymFeedbackType.SYNONYM_ACCEPTED,text:n,alertId:e,subtype:r};return this._sendInbandCommand(i,this._commandsRequester);case f.SynonymFeedbackType.SYNONYM_DISMISSED:return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:f.SynonymFeedbackType.SYNONYM_DISMISSED,alertId:e,subtype:r},this._commandsRequester);default:return l.assertNever(t)}},e.prototype.isClosed=function(){return this._fsm.is(r.CLOSED)},e.prototype.close=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.isClosed()?(this._log.trace("close: CAPI already closed, skipping"),[2]):(this._log.trace("close: closing CAPI"),[4,this._fsm.event(i.CLOSE,e)]);case 1:return t.sent()?this._clear(e):this._log.error("Cannot go to CLOSED state"),[2]}}))}))},e.prototype.getText=function(){return l.TE.toPromise(this._sendInbandCommand({id:this._idGenerator.newId(),action:"get_debug_info"},this._getTextRequester))},e.prototype._handleConnecting=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this._fsm.event(i.CONNECT)];case 1:return e.sent()||this._log.error("Can not enter CONNECTING state",{fsmState:r[this._fsm.current]}),[2]}}))}))},e.prototype._handleConnect=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(o){switch(o.label){case 0:this._log.trace("_handleConnect("+r[this._fsm.current]+"): received new ws connection"),this._conn=e,t=void 0,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._fsm.event(i.CONNECTED)];case 2:return o.sent()||(t="failed to switch to CONNECTED state"),[3,4];case 3:return n=o.sent(),t=n,[3,4];case 4:if(t)throw this._log.warn("Connection cannot be finalized.",t),t;return[2]}}))}))},e.prototype._handleDisconnect=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(o){switch(o.label){case 0:return this._log.trace("_handleDisconnect("+r[this._fsm.current]+")",e),[4,this._fsm.event(i.DISCONNECT,e.reason)];case 1:return t=o.sent(),n=this._fsm.is(r.CLOSED)?c.Logging.LogLevel.WARN:c.Logging.LogLevel.ERROR,t||this._log.log(n,"Can not enter DISCONNECTED state",{reason:e,fsmState:r[this._fsm.current]}),[2]}}))}))},e.prototype._handleMessage=function(e){switch(this._handler.onMessageReceived({kind:"message_received",message:e}),this._log.isEnabled(c.Logging.LogLevel.TRACE)&&this._log.trace("Message <<< "+JSON.stringify(e).replace("\n"," ").substring(0,300)),e.action){case"start":this._handleStart(e);break;case"alert":this._handleAlert(e);break;case"remove":this._handler.onRemove({kind:"alert_removed",alertId:f.RawAlert.Id.create(e.id),hint:s.pipe(l.O.fromNullable(e.hint),l.O.filter((function(e){return e===g.AlertRemoveHint.NotFixed}))),mergedIn:s.pipe(l.O.fromNullable(e.mergedIn),l.O.map((function(e){return f.RawAlert.Id.create(e)})))});break;case"alert_changes":this._handleAlertChange(e);break;case"finished":this._handleFinish(e);break;case"async_check_finished":this._handleAsyncCheckFinished(e);break;case"complete":this._handleComplete(e);break;case"heatmap":this._handleAttentionHeatmap(e);break;case"attention_widget":this._handleAttentionInfo(e);break;case"submit_ot":this._handleSubmitOtAck(e);break;case"submit_ot_chunk":this._handleSubmitOtChunkAck(e);break;case"feedback":case"option":case"toggle_checks":case"set_context":case"submit_recipients":this._handleCommandAck(e);break;case"perfstats":this._handleAck(e);break;case"error":this._handleError(e);break;case"pong":this._handlePong(e);break;case"synonyms":this._handleSynonyms(e);break;case"text_stats":this._handleTextStats(e);break;case"text_maps":this._handleTextMaps(e);break;case"text_info":this._handleTextInfo(e);break;case"emotions":this._handleEmotions(e);break;case"debug_info":this._handler.onDebugInfo({kind:"debug_info",info:e}),this._getTextRequester.onValue(e.id,e.text);break;case"goal_prediction":this._handleGoalPrediction(e);break;case"realtime_proofit_availability":this._handleProofitAvailability(e);break;case"realtime_proofit_submit_resp":this._handleProofitSubmit(e);break;case"realtime_proofit_progress":this._handleProofitProgress(e);break;case"realtime_proofit_cancel_resp":this._handleProofitCancelled(e);break;case"shared_link":this._handleBoomerangSharedLinkReceived(e);break;case"review_finish":this._handleBoomerangReviewSubmitted(e);break;case"review_progress":this._handleBoomerangReviewProgress(e);break;case"create_shared_link":this._handleBoomerangSharedLinkAck(e);break;case"check_reviewers_feedback":this._handleBoomerangcheckReviewersFeedbackAck(e);break;case"shorten_it_submit":this._handleCommandAck(e);break;case"shorten_it_finished":break;default:this._log.error("Unknown message",{message:e}),l.assertNever(e)}},e.prototype._handleAlert=function(e){var t=this;this._handler.beforeAlert({kind:"before_alert"});var n=f.RawAlert.fromAlertMessage(e);this._log.trace("_handleAlert");var r=this._changesQueue.transformAlertAgainstQueue(n);s.pipe(r,l.E.fromOption((function(){return new Error("position overlap: "+JSON.stringify(n).substring(0,200))})),l.E.chain(this._validateAlert),l.E.fold((function(e){t._log.isEnabled(c.Logging.LogLevel.TRACE)&&t._log.trace("OT ALERT: discarding alert due to error",e)}),(function(e){return t._handler.onAlert({kind:"alert_received",alert:e})})))},e.prototype._handleAlertChange=function(e){return s.pipe({kind:"alert_changed",alertId:f.RawAlert.Id.create(e.id),rev:e.rev,extraProperties:e.extra_properties&&f.RawAlert.parseExtraProperties(e.extra_properties),transformJson:e.transformJson&&f.RelRawTransform.toAbs(e.transformJson),muted:e.muted},this._changesQueue.transformChangeAgainstQueue,l.O.fold(a.constVoid,this._handler.onChange))},e.prototype._handleComplete=function(e){this._handler.onAutoComplete({kind:"autocomplete_received",complete:e})},e.prototype._handleAttentionHeatmap=function(e){var t=f.RawAttentionHeatmap.fromAttentionHeatmapMessage(e);this._handler.onAttentionHeatmap({kind:"attention_heatmap_received",heatmap:this._changesQueue.transformAttentionHeatmapAgainstQueue(t)})},e.prototype._handleAttentionInfo=function(e){2===e.version?this._handler.onAttentionInfo({kind:"attention_info_received",rev:e.rev,wordsCount:e.wordsCount,checklist:e.checklist.map(w.AttentionChecklistItem.fromRaw),headerMessage:e.headerMessage,predictionMessage:e.predictionMessage}):this._log.error("Got an unsupported attention_widget message version",e)},e.prototype._handleTextMaps=function(e){var t={score:e.score,generalScore:e.generalScore,textMaps:e.textMaps};this._handler.onTextMaps({kind:"text_maps",data:t})},e.prototype._handleTextInfo=function(e){var t={wordsCount:e.wordsCount,charsCount:e.charsCount-1,readingTime:_.DocumentStatistics.calculateReadingTime(e.wordsCount),speakingTime:_.DocumentStatistics.calculateSpeakingTime(e.wordsCount),readabilityScore:e.readabilityScore,messages:l.O.fromNullable(e.messages),sessionStats:e.sessionStats};this._handler.onTextInfo({kind:"text_info",data:t})},e.prototype._handleEmotions=function(e){this._handler.onEmotions({kind:"emotions",emotions:e.emotions,institutionLogo:e.institutionLogo,brandTonesEnabled:e.brandTonesEnabled,hidden:e.hidden})},e.prototype._handleGoalPrediction=function(e){this._handler.onGoalPrediction({kind:"goal_prediction",intent:e.intent})},e.prototype._handleProofitAvailability=function(e){this._handler.onProofitAvailability({id:e.id,kind:"realtime_proofit_availability",available:e.available,quota:e.quota})},e.prototype._handleProofitSubmit=function(e){this._handler.onProofitSubmit({id:e.id,kind:"realtime_proofit_submit_resp",status:e.status})},e.prototype._handleProofitProgress=function(e){"in_progress"===e.status?this._handler.onProofitProgress(o.__assign({kind:"realtime_proofit_in_progress"},e)):"completed"===e.status?this._handler.onProofitCompleted(o.__assign({kind:"realtime_proofit_completed"},e)):"error"===e.status?this._handler.onProofitProgressProblem(o.__assign({kind:"realtime_proofit_progress_error"},e)):"rejected"===e.status&&this._handler.onProofitProgressProblem(o.__assign({kind:"realtime_proofit_progress_rejected"},e))},e.prototype._handleProofitCancelled=function(e){this._handler.onProofitCancelled({id:e.id,kind:"realtime_proofit_cancel_resp",refunded:e.refunded,quota:e.quota})},e.prototype._handleBoomerangSharedLinkReceived=function(e){this._handler.onBoomerangSharedLinkReceived({id:e.id,kind:"shared_link",sharedLink:e.sharedLink}),this._sharedLinkRequester.onValue(e.id,e.sharedLink)},e.prototype._handleBoomerangReviewSubmitted=function(e){this._handler.onBoomerangReviewSubmitted({id:e.id,kind:"review_finish",sharedLink:e.sharedLink,reviewers:e.reviewers})},e.prototype._handleBoomerangReviewProgress=function(e){this._handler.onBoomerangReviewProgress({id:e.id,kind:"review_progress",sharedLink:e.sharedLink,reviewers:e.reviewers})},e.prototype._handleBoomerangSharedLinkAck=function(e){this._handler.onBoomerangCreateSharedLinkAck({id:e.id,kind:"create_shared_link"})},e.prototype._handleBoomerangcheckReviewersFeedbackAck=function(e){this._handler.onBoomerangCheckReviewersFeedbackAck({id:e.id,kind:"check_reviewers_feedback"})},e.prototype._handleFinish=function(e){this._log.trace("_handleFinish"),this._handler.onBeforeFinish({kind:"before_finish"}),this._changesQueue.ackRevision(e.rev);var t=this._createFinishEvent(e);this._handler.onFinish(t)},e.prototype._handleAsyncCheckFinished=function(e){this._handler.onBeforeAsyncCheckFinish({kind:"before_async_check_finish"}),this._asyncChecksManager.finish(e),this._handler.onAsyncCheckFinish({kind:"async_check_finished",check:e.check,revision:e.rev,outcomeScores:e.outcomeScores})},e.prototype._handleSubmitOtAck=function(e){this._log.trace("<<< Acknowledge for "+e.action,{message:e}),this._fsm.is(r.WAITING_FOR_ACK)?(this._handleAck(e),this._changesQueue.ackOperation(e.id),this._fsm.event(i.ACK)):this._log.error("Got an unexpected submit_ot ack",{curentState:r[this._fsm.current]})},e.prototype._sendNextOtChunk=function(e){var t=this;return 0===e.chunks.length?(this._log.trace("no more chunks, sending final submit_ot message"),l.TE.tryCatch((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this._sendMessage(e.submitOt)];case 1:return[2,t.sent()]}}))}))}),(function(e){return new Error("failed to send final submit_ot message: "+e)}))):(this._log.trace("sending next submit_ot chunk"),s.pipe(l.TE.tryCatch((function(){return o.__awaiter(t,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:return t=e.chunks.splice(0,1)[0],[4,this._sendMessage(t)];case 1:return n.sent(),[2,t]}}))}))}),(function(e){return new Error("failed to send next chunk message: "+e)})),l.TE.chain((function(n){return t._waitForOtChunkAck(n,e)}))))},e.prototype._waitForOtChunkAck=function(e,t){var n=this;return s.pipe(this._otChunksNotifier.waitFor(e.id,t),l.TE.chain(this._sendNextOtChunk.bind(this)),l.TE.mapLeft((function(e){return n._log.error("failed sending OT chunks",e),e})))},e.prototype._handleSubmitOtChunkAck=function(e){this._log.trace("<<< Acknowledge for "+e.action,{message:e}),this._otChunksNotifier.notify(e.id)},e.prototype._handleCommandAck=function(e){this._log.trace("<<< Acknowledge for "+e.action,{message:e}),this._commandsRequester.onValue(e.id),this._handleAck(e)},e.prototype._handleAck=function(e){s.pipe(I(e),l.O.fold(a.constNull,this._handler.onAck))},e.prototype._handlePong=function(e){var t=self.performance.now();this._handler.onPong({kind:"pong",latency:s.pipe(l.O.fromNullable(this._pingsMap.get(e.id)),l.O.map((function(e){return t-e})))})},e.prototype._handleSynonyms=function(e){var t=this._parseSynonymsResult(e);this._handler.onSynonyms({kind:"synonyms",synonyms:t,word:e.token,position:e.synonyms.pos}),this._synonymsRequester.onValue(e.id,t)},e.prototype._handleTextStats=function(e){e.readingTime=_.DocumentStatistics.calculateReadingTime(e.words),e.speakingTime=_.DocumentStatistics.calculateSpeakingTime(e.words),this._handler.onStats({kind:"stats",stats:e}),this._statsRequester.onValue(e.id,e)},e.prototype._createFinishEvent=function(e){return{kind:"finish",revision:e.rev,score:s.pipe(l.O.fromNullable(e.generalScore),l.O.filter((function(e){return e>=0})),l.O.map((function(t){return{errorRateScore:e.score,rank:t}}))),removed:new Set(e.removed),dialect:e.dialect,outcomeScores:v.Message.OutcomeScores.normalize(e.outcomeScores),foreign:e.foreign}},e.prototype._parseSynonymsResult=function(e){var t=this,n=function(e){return e.derived};return{id:e.id.toString(),originalWord:e.token,synonymsOrGroups:function(e){return 0===e.synonyms.meanings.length?l.O.none:1===e.synonyms.meanings.length?l.O.some(l.E.left(e.synonyms.meanings[0].synonyms.map(n))):l.O.some(l.E.right(e.synonyms.meanings.map((function(r){return void 0===r.meaning&&t._log.warn("Absent meaning in synonyms group.",{token:e.token}),{meaning:r.meaning||"",words:r.synonyms.map(n)}}))))}(e),pname:e.synonyms.pname}},e.prototype._trySend=function(e){void 0===this._timeout&&e===r.SESSION_INBOUND?this._timeout=self.setTimeout(this._send,this._sendDelay):e!==r.WAITING_FOR_OT||this._changesQueue.isEmpty?this._log.trace("_trySend("+r[e]+") send timeout already set or not waiting for ot, ignoring"):(this._log.trace("_trySend("+r[e]+") moving to READY"),this._fsm.event(i.READY),this._handler.onReady({kind:"ready"}))},e.prototype._shouldHaveSeparateRevision=function(e){return"set_context"===e.action},e.prototype._pushChangesTask=function(e){var t=this;this._log.debug("pushChanges("+r[this._fsm.current]+"):",e.kind);return h.Change.isReset(e)&&this._fsm.is(r.SESSION_INBOUND,r.WAITING_FOR_ACK)?(this._log.debug("pushChanges("+r[this._fsm.current]+"): got reset while active session, starting new session"),function(){return o.__awaiter(t,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:this._log.debug("pushChanges("+r[this._fsm.current]+"): starting new session"),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._startSession()];case 2:return n.sent(),[2,this._pushChanges(e)];case 3:return t=n.sent(),this._log.warn("pushChanges("+r[this._fsm.current]+"): failed sending start message: ",t),[2,l.E.left(t)];case 4:return[2]}}))}))}):l.TE.fromIOEither((function(){return t._pushChanges(e)}))},e.prototype._pushChanges=function(e){var t=this;if(!this._canSend())return this._log.debug("pushChanges: cannot send, rejecting changes",e.kind),l.E.left(new m.NotConnectedError("Cannot accepts changes as WS connection is down"));var n=function(e){t._asyncChecksManager.stage(t._changesQueue.localRevision);var n=t._changesQueue.pushChanges(e);return t._textSize=e.prevLen+e.length,t._trySend(t._fsm.current),l.E.right(l.O.some(n))};return h.Change.isDelta(e)?this._fsm.is(r.WAITING_FOR_OT)?l.E.left(new m.NotReadyError("Capi is waiting for reset change but got a delta, dropping change")):n(e):h.Change.isReset(e)?n(h.Change.delta(e.delta)):(this._changesQueue.isEmpty||this.ping(),l.E.right(l.O.none))},e.prototype._sendInbandCommand=function(e,t){return this._sendLazyInbandCommand((function(){return e}),t)},e.prototype._sendLazyInbandCommand=function(e,t){var n=this;return function(){var i=e();if(n._log.trace("_sendInbandCommand("+r[n._fsm.current]+"): ",i.action),n._canSend()){var o=n._changesQueue.isEmpty,a=n._changesQueue.pushCommand(i),s=t.watchRequest(a);return o?(n._log.trace("_sendInbandCommand: Q.isEmpty, sending command immediately"),n._send()):(n._log.trace("_sendInbandCommand: Q.notEmpty, delaying sending command"),n._trySend(n._fsm.current)),s}return n._log.debug("_sendInbandCommand: cannot send, rejecting command",i.action),Promise.resolve(l.E.left(new m.NotConnectedError("Cannot send commands as WS connection is down")))}},e.prototype._processSubmitOTMessage=function(e){if(b.ChangesQueue.isChunkedChange(e)){var t=e.chunks.map((function(e){return{id:e.id,action:"submit_ot_chunk",chunk:e.chunk}})),n=t.splice(0,1)[0],r={chunks:t,submitOt:{id:e.id,action:"submit_ot",rev:e.rev,doc_len:e.change.prevLen,chunked:!0}};return this._waitForOtChunkAck(n,r)(),n}return{id:e.id,action:"submit_ot",rev:e.rev,doc_len:e.change.prevLen,deltas:[e.change.delta],deltasString:e.deltasString,chunked:!1}},e.prototype._sendMessage=function(e){var t=this;return this._log.isEnabled(c.Logging.LogLevel.TRACE)&&this._log.trace("Sending >>>> "+JSON.stringify(e).replace("\n"," ").substring(0,300)),this._handler.onMessageSent({kind:"message_sent",message:e}),"ping"===e.action&&this._pingsMap.set(e.id,self.performance.now()),l.expectNonNull(this._conn,"_sendMessage should never be called without a connection").send(e).catch((function(e){return t._log.debug("fail on send",e)}))},Object.defineProperty(e.prototype,"_checkedTextSize",{get:function(){return this._changesQueue.stagedAmount},enumerable:!1,configurable:!0}),e.prototype._clear=function(e){this._log.debug("clearing message queue, reason: "+e),this._pingsMap.clear(),this._changesQueue.isEmpty||this._log.warn("clean queue with messages",{reason:e,queue:this._changesQueue.toJSON()}),this._changesQueue.clear(e),this._asyncChecksManager.reset(),this._resetTimer()},e.prototype._handleError=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(e.error){case f.ErrorCode.CANNOT_GET_TEXT_STATS:this._statsRequester.onError(e.id,new Error("Server Error"));break;case f.ErrorCode.CANNOT_FIND_SYNONYM:this._synonymsRequester.onError(e.id,new Error("can not find synonym"));break;case f.ErrorCode.RUNTIME_ERROR:this._fsm.is(r.WAITING_FOR_ACK)?(this._log.error("Got runtime_error for submit_ot",{message:e}),this._clear("runtime_error on submit_ot")):this._clear("runtime_error");break;default:this._handler.onError(o.__assign({kind:"error"},e)),this._log.error("Error",{message:e})}return[2]}))}))},e}();t.CAPIClientImpl=C;var E=function(){function e(){this._wasChecked={plagiarism:!1},this.reset()}return e.prototype.getState=function(){return{plagiarism:this._pendingRevision>this._finishedRevisions.plagiarism?this._wasChecked.plagiarism?"checking":"full":"idle"}},e.prototype.stage=function(e){this._pendingRevision=Math.max(this._pendingRevision,e)},e.prototype.finish=function(e){this._finishedRevisions[e.check]=Math.max(this._finishedRevisions[e.check],e.rev),this._wasChecked[e.check]=!0},e.prototype.reset=function(){this._pendingRevision=0,this._finishedRevisions={plagiarism:-1}},e.prototype.resetCheck=function(e){this._finishedRevisions[e]=-1},e}();t.AsyncChecksStateManager=E;var S,I=function(e){switch(e.action){case"option":return l.O.some({kind:"option_ack"});case"set_context":return l.O.some({kind:"set_context_ack",revision:e.rev});case"submit_recipients":return l.O.some({kind:"submit_recipients_ack"});case"toggle_checks":return l.O.some({kind:"toggle_checks_ack"});case"submit_ot":return l.O.some({kind:"set_context_ack",revision:e.rev});case"feedback":return l.O.some({kind:"feedback_ack",outcomeScores:e.scores?v.Message.OutcomeScores.normalize(e.scores):void 0});case"submit_ot_chunk":case"shorten_it_submit":case"perfstats":return l.O.none;default:return l.assertNever(e)}};!function(e){e.validate=function(e){var t=e.extra_properties.drilldownTree;return void 0===t?l.E.right(e):s.pipe(e,l.E.fromPredicate(f.RawAlert.withTransformJson,(function(){return n("no transformJSON")})),l.E.chain((function(e){var t=e.transformJson.alternatives;return s.pipe(t,l.E.fromOption((function(){return n("no alternatives")})))})),l.E.chain((function(i){var o=i.alternatives;return t.length>0&&r(o)(t)?l.E.right(e):l.E.left(n("incomplete tree"))})));function n(t){return new Error("Incorrect drilldownTree: "+JSON.stringify(e.extra_properties.drilldownTree)+" - "+t)}function r(e){return function(t){return t.every((function(t){var n=t[0],i=t[1];return void 0!==e[n]&&(!!f.Drilldown.isLeaf(i)||r(e)(i))}))}}}}(S=t.RawAlertValidation||(t.RawAlertValidation={}))},67529:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextMaps=t.BIG_TEXT_SIZE=t.PNameQualifier=t.CAPISessionOptionType=t.FeedbackSubtype=t.FeedbackType=t.SnippetsFeedbackType=t.AutocompleteFeedbackType=t.AutocorrectFeedbackType=t.MutedFeedbackType=t.SynonymFeedbackType=t.SystemFeedbackType=t.EmotionSentenceFeedbackType=t.EmotionFeedbackType=t.LensFeedbackType=t.AlertsBatchFeedbackType=t.DrilldownFeedbackType=t.AlertFeedbackType=t.ErrorSeverity=t.ErrorCode=t.RawAlert=t.AbsRawTransform=t.RawIntent=t.RawAttentionHeatmap=t.RelRawTransform=t.CardLayout=t.Autocomplete=t.MutedAlerts=t.DomainInfo=t.Drilldown=t.nominal=void 0;var r,i,o,a,s,l=n(59312),c=n(71249),u=n(57050),d=n(40327),p=n(93910),h=n(68511),m=n(81531),f=n(64613),g=n(49150),y=n(81777),v=n(27966);t.nominal||(t.nominal={}),function(e){e.empty=[],e.isLeaf=function(e){return 0===e.length},e.Tree=p.recursion("Tree",(function(){return p.array(p.tuple([p.number,e.Tree]))}))}(r=t.Drilldown||(t.Drilldown={})),function(e){!function(e){e.sales_crm="sales_crm",e.sales_engagement="sales_engagement",e.sales_enablement="sales_enablement",e.marketing_email_automation="marketing_email_automation",e.marketing_content="marketing_content",e.customer_service="customer_service",e.customer_surveys_surveys="customer_surveys_surveys",e.recruiting="recruiting",e.training_learning="training_learning",e.project_management="project_management",e.legal="legal",e.contractors="contractors",e.human_resources="human_resources",e.email="email",e.business_chat="business_chat"}(e.DomainCategory||(e.DomainCategory={}))}(t.DomainInfo||(t.DomainInfo={})),function(e){!function(e){e.InQuotes="InQuotes"}(e.SpecialCategory||(e.SpecialCategory={})),function(e){e.GLOBAL="GLOBAL",e.SESSION="SESSION",e.DOCUMENT="DOCUMENT"}(e.ScopeType||(e.ScopeType={})),function(e){e.MUTED_BY_USER="MUTED_BY_USER",e.NOT_ELIGIBLE_FOR_INLINE="NOT_ELIGIBLE_FOR_INLINE",e.NOT_MUTED="NOT_MUTED"}(e.MutedByType||(e.MutedByType={}))}(i=t.MutedAlerts||(t.MutedAlerts={})),function(e){!function(e){e.NOT_RELEVANT="NOT_RELEVANT",e.WRONG_TONE="WRONG_TONE",e.INCORRECT="INCORRECT",e.WRONG_GRAMMAR="WRONG_GRAMMAR",e.OFFENSIVE="OFFENSIVE",e.OTHER="OTHER"}(e.SuggestionRejectionReason||(e.SuggestionRejectionReason={}))}(t.Autocomplete||(t.Autocomplete={})),function(e){e.mock={category:"Test Category",bundle:"Test bundle",bundleRank:10,group:"Test Group",groupDescription:"Test Card Layout",rank:1,outcome:"Correctness"}}(t.CardLayout||(t.CardLayout={})),function(e){function t(e){return function(t){return{s:e.s+t.s,e:e.s+t.e,type:t.type}}}function n(e,t){return void 0===t&&(t=!1),0===e.s?u.unsafeCoerce:function(n){return u.unsafeCoerce({ops:l.__spreadArrays([{retain:e.s,attributes:t?void 0:{type:v.RawTransform.Edit.TypeExt.OPTIONAL_CONTEXT}}],n.ops)})}}e.prependContextToHighlight=t,e.prependContext=n,e.toAbs=function(e){return a.create({highlights:e.highlights.map(t(e.context)),alternatives:d.pipe(e,h.O.fromPredicate((function(e){return!!e.alternatives&&e.alternatives.length>0})),h.O.map((function(e){return l.__assign(l.__assign({},e),{alternatives:h.NEA.map(n(e.context))(e.alternatives)})})),h.O.map(y.Alternative.Group.fromRawTransform))})}}(o=t.RelRawTransform||(t.RelRawTransform={})),function(e){var t,n;!function(e){e.create=function(e){return e.toString()}}(t=e.Id||(e.Id={})),function(e){e.rebase=function(e,t){return h.ObjectUtils.update(e,{begin:t.transformPosition(e.begin,!0),end:t.transformPosition(e.end,!0)})},e.isSquashed=function(e){return e.begin>=e.end},e.fromAttentionHeatmapMessage=function(e){return l.__assign(l.__assign({},e),{id:t.create(e.id)})}}(n=e.Range||(e.Range={})),e.fromAttentionHeatmapMessage=function(e){return l.__assign(l.__assign({},e),{add:e.add.map(n.fromAttentionHeatmapMessage),update:e.update.map(n.fromAttentionHeatmapMessage),remove:e.remove.map(t.create)})}}(t.RawAttentionHeatmap||(t.RawAttentionHeatmap={})),function(e){!function(e){e.create=function(e){return e.toString()}}(e.Id||(e.Id={}))}(t.RawIntent||(t.RawIntent={})),function(e){e.create=function(e){return e},e.isSquashed=function(e){return e.highlights.some(v.RawTransform.Range.isEmpty)},e.isValidAfterTransform=function(e,n){var r=t(e),i=t(n);return h.ArrayUtils.compareInPairs(r.highlights,i.highlights,(function(e,t){return e.e-e.s==t.e-t.s}))&&h.ArrayUtils.compareInPairs(r.alternatives,i.alternatives,(function(e,t){return h.ArrayUtils.compareInPairs(e.ops.filter(h.not(f.DeltaUtils.isRetain)),t.ops.filter(h.not(f.DeltaUtils.isRetain)),f.DeltaUtils.isEqual((function(){return!0})))}))},e.rebase=function(t,n){return e.create({highlights:t.highlights.map((function(e){return{s:n.transformPosition(e.s,!0),e:n.transformPosition(e.e,!0),type:e.type}})),alternatives:d.pipe(t.alternatives,h.O.map(y.Alternative.Group.rebase(n)))})};var t=function(e){return{highlights:e.highlights,alternatives:d.pipe(e.alternatives,h.O.fold((function(){return[]}),(function(e){return e.alternatives.map((function(e){return e.delta}))})))}}}(a=t.AbsRawTransform||(t.AbsRawTransform={})),function(e){var t,n,s;function u(e){return void 0!==e.drilldownTree?l.__assign(l.__assign({},e),{drilldownTree:d.pipe(e.drilldownTree,(function(e){return"object"==typeof e?e:JSON.parse(e)}),r.Tree.decode,h.E.unsafeGet)}):e}function p(e,t){d.pipe(e.ops,c.findFirst((function(e){return f.DeltaUtils.isInsert(e)&&d.pipe(f.DeltaUtils.getAttr(e,"type"),h.O.exists((function(e){return e===v.RawTransform.Edit.Type.MAIN})))&&"string"==typeof e.insert})),h.O.map((function(e){var n=e.insert;return t(n)})))}function b(e){return function(t){switch(t){case i.SpecialCategory.InQuotes:return"true"===e.extra_properties.in_quotes;default:return!1}}}function w(e){return!C(e)&&!E(e)}function _(e){return void 0!==e.begin&&void 0!==e.end&&void 0!==e.highlightBegin&&void 0!==e.highlightEnd}function C(e){return void 0!==e.cardLayout&&void 0!==e.transformJson}function E(e){return"labels"in e&&"subalerts"in e}function S(e,t,n,r){return w(e)?t(e):C(e)?n(e):r(e)}!function(e){e.create=function(e){return e.toString()}}(e.Id||(e.Id={})),function(e){e.Critical="critical",e.Advanced="advanced"}(t=e.Impact||(e.Impact={})),function(e){e.all="all",e.priority="priority"}(n=e.View||(e.View={})),function(e){e.inline="inline",e.not_inline="not_inline"}(s=e.Inline||(e.Inline={})),e.parseExtraProperties=u,e.fromAlertMessage=function(t){return Object.assign({},t,l.__assign({id:e.Id.create(t.id),cost:t.cost||1,extra_properties:u(t.extra_properties)},t.transformJson?{transformJson:o.toAbs(t.transformJson),highlightText:[t.highlightText]}:d.pipe(h.NEA.fromNullableArray(t.subalerts),h.O.fold((function(){return{highlightText:[t.highlightText]}}),(function(e){return d.pipe(function(e,t){return d.pipe(t,h.O.fold((function(){return h.E.left(new Error("Got corrupted superalert — the labels are missing"))}),(function(t){return function(e,t){if(e.length<2)return h.E.left(new Error("There should be more than one subalert, got "+e.length));var n=t.map((function(e){return{matches:0,replacements:new Set,label:e}})),r=n.reduce((function(e,t){return e[t.label]=t,e}),{}),i=h.NEA.fromNullableArray(e[0].transformJson.alternatives);if(n.length>0&&h.O.isNone(i)||!d.pipe(i,h.O.forAll((function(e){return n.length===e.length}))))return h.E.left(new Error("Alternatives array length must match labels array length"));for(var s=d.pipe(i,h.O.map(h.NEA.mapWithIndex((function(t,r){return p(r,(function(e){return n[t].replacements.add(e)})),o.prependContext(e[0].transformJson.context)(r)}))),h.O.map((function(t){return r[e[0].label].matches+=1,[h.NEA.of(e[0].transformJson.context),t]}))),c=e[0].transformJson.highlights.map(o.prependContextToHighlight(e[0].transformJson.context)),u=[e[0].highlightText],m=function(t){var i=e[t];if(n.length>0){if(!i.transformJson.alternatives)return{value:h.E.left(new Error("The alternatives are missing from subalert, expected length: "+n.length))};if(i.transformJson.alternatives.length!==n.length)return{value:h.E.left(new Error("Subalert has incorrect alternatives length: expected "+n.length+", got "+i.transformJson.alternatives.length))}}s=d.pipe(s,h.O.map((function(e){var t=e[0],a=e[1];r[i.label].matches+=1,t.push(i.transformJson.context);for(var s=function(e){var t=i.transformJson.alternatives[e];p(t,(function(t){return n[e].replacements.add(t)})),a[e]=d.pipe(new g.Delta(a[e]),(function(e){return e.compose(e.transform(new g.Delta(o.prependContext(i.transformJson.context,!0)(t)),!0))}),v.RawTransform.AbsAlternative.unsafeFromDelta)},l=0;l<a.length;l++)s(l);return[t,a]}))),c.push.apply(c,i.transformJson.highlights.map(o.prependContextToHighlight(i.transformJson.context))),u.push(i.highlightText)},f=1;f<e.length;f++){var b=m(f);if("object"==typeof b)return b.value}return h.E.right({subalerts:a.create({alternatives:d.pipe(s,h.O.map((function(e){var t=e[0],n=e[1];return y.Alternative.Group.fromSubalerts(t,n)}))),highlights:c}),labels:n.map((function(e){var t=e.replacements,n=l.__rest(e,["replacements"]);return l.__assign(l.__assign({},n),{replacementTexts:Array.from(t)})})),highlightText:u})}(e,t)})))}(e,h.O.fromNullable(t.labels)),h.E.getOrElse((function(e){return m.Monitoring.Logging.getLogger("coreclients.capi.data").error("Error repacking superalert",e),{highlightText:[]}})))})))))},e.isFullSentence=function(e){return"true"===e.full_sentence_rewrite||"true"===e.full_sentence_fluency_rewrite},e.belongsToAnySpecialCategory=function(e){var t=b(e);return-1!==Object.values(i.SpecialCategory).findIndex(t)},e.belongsToSpecialCategory=b,e.withPosition=w,e.hasPosition=_,e.withTransformJson=C,e.withSubalerts=E,e.match=S,e.matchBy=function(e,t,n){return function(r){return S(r,e,t,n)}},function(e){function t(e){return e.end-e.begin}function n(e){return e.highlightEnd-e.highlightBegin}e.shift=function(e,t){return{begin:e.begin+t,end:e.end+t,highlightBegin:e.highlightBegin+t,highlightEnd:e.highlightEnd+t}},e.rebase=function(e,t){return{begin:t.transformPosition(e.begin,!0),end:t.transformPosition(e.end,!0),highlightBegin:t.transformPosition(e.highlightBegin,!0),highlightEnd:t.transformPosition(e.highlightEnd,!0)}},e.getReplacementLength=t,e.getHighlightLength=n,e.isSquashed=function(e){return 0===t(e)||0===n(e)},e.hasEqualLength=function(e,r){return t(e)===t(r)&&n(e)===n(r)}}(e.Position||(e.Position={})),e.isPlagiarism=function(e){return void 0!==e.cardLayout&&"Originality"===e.cardLayout.category},e.isOneGap=function(e){return void 0!==e.extra_properties&&"gap_transform"in e.extra_properties},e.isSmartPhrases=function(e){return void 0!==e.extra_properties&&"smart_phrases_intent"in e.extra_properties},e.isSentenceLevelBrandTones=function(e){return void 0!==e.extra_properties&&"brandToneDescription"in e.extra_properties},e.isTakeaway=function(e){return void 0!==e.extra_properties&&"takeawayScore"in e.extra_properties},e.hasDrilldownTree=function(e){return void 0!==e.extra_properties&&"drilldownTree"in e.extra_properties},e.isShortenIt=function(e){return void 0!==e.extra_properties&&"shorten_it"in e.extra_properties},e.isHidden=function(e){return!0===e.hidden},e.isRawAlert=function(e){if(!e)return!1;var t=e;return Number.isInteger(t.rev)&&S(t,(function(e){return Number.isInteger(e.begin)&&Number.isInteger(e.end)&&Number.isInteger(e.highlightBegin)&&Number.isInteger(e.highlightEnd)}),(function(e){return e.transformJson.highlights.length>0}),(function(e){return e.labels.length>0}))},e.mock={id:e.Id.create(""),rev:0,pname:"Spelling/BritishVsAmerican/BrInstOfAm/BrInstOfAm",group:"ContextualSpelling",point:"BrInstOfAm",category:"BritishVsAmerican",categoryHuman:"British vs American",hidden:!1,text:"centralise",todo:"correct",minicardTitle:"correct",title:"Inconsistent spelling",cost:1,transforms:["<span class='gr_grammar_del'>centralise</span>→<span class='gr_grammar_ins'>centralize</span>"],details:"<p>One of&nbsp;the most obvious differences between American and British English is&nbsp;the spelling of&nbsp;certain words such as&nbsp;<b>color/colour, learned/learnt,</b> and <b>toward/towards</b>. Typically, the spelling of&nbsp;words like these only varies by&nbsp;one or&nbsp;two letters. In&nbsp;the interest of&nbsp;consistency and clarity, you should use the spelling that will be&nbsp;more familiar to&nbsp;your intended audience.\n",explanation:"<p>The word <b>centralise</b> is&nbsp;a&nbsp;British English spelling. In&nbsp;the interest of&nbsp;consistency, consider replacing it&nbsp;with the American English spelling.\n",examples:'<p><span class="grey">British: I&nbsp;wish you success in&nbsp;all your endeavours.</span><br/><span class="grey">American: I&nbsp;wish you success in&nbsp;all your endeavors.</span><br/><p><span class="grey">British: Sweet yoghurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><span class="grey">American: Sweet yogurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><p><span class="grey">British: Serena moved towards the blinking light.</span><br/><span class="grey">American: Serena moved toward the blinking light.</span><br/>',free:!0,impact:e.Impact.Critical,highlightBegin:5092,highlightEnd:5102,highlightText:[""],begin:5092,end:5102,replacements:["centralize"],extra_properties:{priority:"2"},cardLayout:{category:"Accuracy",bundle:"Fix spelling and grammar",bundleRank:10,group:"Spelling",groupDescription:"Checks spelling, confused words, capitalization",rank:10,outcome:"Correctness"},transformJson:a.create({highlights:[{s:5092,e:5102}],alternatives:h.O.none}),view:n.all,inline:s.inline},e.mockPlagiarism={id:e.Id.create(""),rev:0,transforms:[],title:"Citation audit",cost:1,details:"",explanation:"",examples:"",free:!1,impact:e.Impact.Advanced,hidden:!1,todo:"",minicardTitle:"",cardLayout:{category:"Originality",bundle:"Plagiarism",bundleRank:10,group:"Unoriginal content",groupDescription:"Unoriginal content from the web",rank:0,outcome:"Originality"},category:"Plagiarism",categoryHuman:"Unoriginal content",begin:156,end:697,text:"",group:"Plagiarism",pname:"Plagiarism/Plagiarism/UnoriginalContent",point:"UnoriginalContent",highlightBegin:156,highlightEnd:697,highlightText:[""],replacements:[],extra_properties:{},transformJson:a.create({highlights:[{s:1,e:40}],alternatives:h.O.none}),view:n.all,inline:s.not_inline},e.mockWithSubalerts={id:e.Id.create(""),point:"Capitalization",title:"Inconsistent capitalization",details:"<p>For certain words, capitalization preferences can vary between style guides. <i>Internet</i> was once routinely capitalized, for example. However, in recent years many style guides have begun advising writers to lowercase the word: <i>internet</i>. Whether you choose to capitalize a particular term or not, it’s best to choose one style and use it consistently throughout the same document.\n",explanation:"<p>You wrote <b>Country</b> once and <b>country</b> twice. Both spellings are acceptable, but it’s best not to switch back and forth. Choose whether or not to capitalize this word throughout your text.\n",examples:'<p><span class="grey">Inconsistent: Office life was different before the <b>Internet</b>. Education has changed because of the <b>internet</b>, too.</span><br/><span class="grey">Consistent: Office life was different before the <b>internet</b>. Education has changed because of the <b>internet</b>, too.</span><br/><span class="grey">Consistent: Office life was different before the <b>Internet</b>. Education has changed because of the <b>Internet</b>, too.</span><br/>',todo:"capitalize consistently",minicardTitle:"capitalize consistently",free:!1,hidden:!1,labels:[{label:"Country",matches:1,replacementTexts:["Country"]},{label:"country",matches:2,replacementTexts:["country"]}],highlightText:["Country","country"],cost:1,subalerts:a.create({highlights:[{s:144,e:162},{s:755,e:778},{s:1458,e:1481}],alternatives:h.O.some(y.Alternative.Group.fromSubalerts([{s:144,e:162},{s:755,e:778},{s:1458,e:1481}],[v.RawTransform.AbsAlternative.unsafeFromDelta({ops:[{retain:144,attributes:{type:v.RawTransform.Edit.TypeExt.OPTIONAL_CONTEXT}},{delete:7,attributes:{type:v.RawTransform.Edit.Type.MAIN}},{insert:"Country",attributes:{type:v.RawTransform.Edit.Type.MAIN}}]}),v.RawTransform.AbsAlternative.unsafeFromDelta({ops:[{retain:144,attributes:{type:v.RawTransform.Edit.TypeExt.OPTIONAL_CONTEXT}},{delete:7,attributes:{type:v.RawTransform.Edit.Type.MAIN}},{insert:"country",attributes:{type:v.RawTransform.Edit.Type.MAIN}}]})]))}),category:"Inconsistency",text:"",group:"Style",pname:"Style/Inconsistency/Capitalization/Capitalization",rev:0,replacements:[],impact:t.Advanced,extra_properties:{priority:"4"},cardLayout:{category:"General",bundle:"Keep your style consistent",bundleRank:10,group:"Consistency",groupDescription:"Fixes inconsistent formatting and spelling",rank:160,outcome:"Correctness"},categoryHuman:"Text Inconsistencies",updatable:!0,view:n.all,inline:s.not_inline},e.clearUserTextFields=function(e){var t=e;return t.text,t.replacements,t.highlightText,t.transformJson,t.transforms,t.details,t.explanation,t.examples,l.__rest(t,["text","replacements","highlightText","transformJson","transforms","details","explanation","examples"])},e.unsafeGetPosition=function(e){return h.invariant(_(e),"raw alert should have a position"),e},e.unsafeGetTransformJson=function(e){return h.invariant(C(e),"raw alert should have transformJson"),e}}(t.RawAlert||(t.RawAlert={})),function(e){e.NOT_AUTHORIZED="not_authorized",e.SESSION_NOT_INITIALIZED="session_not_initialized",e.BAD_REQUEST="bad_request",e.BACKEND_ERROR="backend_error",e.AUTH_ERROR="auth_error",e.RUNTIME_ERROR="runtime_error",e.ILLEGAL_DICT_WORD="illegal_dict_word",e.TIMEOUT="timeout",e.CANNOT_FIND_SYNONYM="cannot_find_synonym",e.CANNOT_GET_TEXT_STATS="cannot_get_text_stats"}(t.ErrorCode||(t.ErrorCode={})),function(e){e[e.INFO=0]="INFO",e[e.WARN=1]="WARN",e[e.ERROR=2]="ERROR"}(t.ErrorSeverity||(t.ErrorSeverity={})),function(e){e.IGNORE="IGNORE",e.ADD_TO_DICTIONARY="ADD_TO_DICTIONARY",e.LOOKED="LOOKED",e.ACCEPTED="ACCEPTED",e.CLOSED="CLOSED",e.ACKNOWLEDGED="ACKNOWLEDGED",e.HIDE="HIDE",e.LIKE="LIKE",e.DISLIKE="DISLIKE",e.WRONG_SUGGESTION="WRONG_SUGGESTION",e.OFFENSIVE_CONTENT="OFFENSIVE_CONTENT",e.EXPANDED="EXPANDED",e.IGNORE_BULK_ACCEPTED="IGNORE_BULK_ACCEPTED"}(s=t.AlertFeedbackType||(t.AlertFeedbackType={})),function(e){e.DRILLDOWN="DRILLDOWN"}(t.DrilldownFeedbackType||(t.DrilldownFeedbackType={})),function(e){e.BULK_ACCEPTED="BULK_ACCEPTED"}(t.AlertsBatchFeedbackType||(t.AlertsBatchFeedbackType={})),function(e){e.LENS_CLOSE="LENS_CLOSE",e.LENS_OPEN="LENS_OPEN",e.DISMISS_BY_LENS="DISMISS_BY_LENS"}(t.LensFeedbackType||(t.LensFeedbackType={})),function(e){e.EMOTION_LIKE="EMOTION_LIKE",e.EMOTION_DISLIKE="EMOTION_DISLIKE",e.EMOTION_OFFENSIVE="EMOTION_OFFENSIVE"}(t.EmotionFeedbackType||(t.EmotionFeedbackType={})),function(e){e.EMOTION_SENTENCE_LIKE="EMOTION_SENTENCE_LIKE",e.EMOTION_SENTENCE_DISLIKE="EMOTION_SENTENCE_DISLIKE"}(t.EmotionSentenceFeedbackType||(t.EmotionSentenceFeedbackType={})),function(e){e.RECHECK_SHOWN="RECHECK_SHOWN"}(t.SystemFeedbackType||(t.SystemFeedbackType={})),function(e){e.SYNONYM_ACCEPTED="SYNONYM_ACCEPTED",e.SYNONYM_DISMISSED="SYNONYM_DISMISSED"}(t.SynonymFeedbackType||(t.SynonymFeedbackType={})),function(e){e.MUTE="MUTE",e.UNMUTE="UNMUTE"}(t.MutedFeedbackType||(t.MutedFeedbackType={})),function(e){e.AUTOCORRECT_ACCEPT="AUTOCORRECT_ACCEPT",e.AUTOCORRECT_DISMISS="AUTOCORRECT_DISMISS",e.AUTOCORRECT_REPLACE="AUTOCORRECT_REPLACE"}(t.AutocorrectFeedbackType||(t.AutocorrectFeedbackType={})),function(e){e.COMPLETION_SHOWN="COMPLETION_SHOWN",e.COMPLETION_IGNORED="COMPLETION_IGNORED",e.COMPLETION_ACCEPTED="COMPLETION_ACCEPTED",e.COMPLETION_REJECTED="COMPLETION_REJECTED"}(t.AutocompleteFeedbackType||(t.AutocompleteFeedbackType={})),function(e){e.SNIPPET_ACCEPTED="SNIPPET_ACCEPTED"}(t.SnippetsFeedbackType||(t.SnippetsFeedbackType={})),function(e){e.willRemoveAlert=function(e){return e===s.IGNORE||e===s.OFFENSIVE_CONTENT||e===s.WRONG_SUGGESTION||e===s.ADD_TO_DICTIONARY||e===s.LIKE||e===s.DISLIKE||e===s.ACKNOWLEDGED||e===s.HIDE}}(t.FeedbackType||(t.FeedbackType={})),function(e){e.Inline="inline",e.Hover="hover",e.Click="click",e.SidebarPriority="sidebar-priority",e.Sidebar="sidebar"}(t.FeedbackSubtype||(t.FeedbackSubtype={})),function(e){e.Context="context",e.GnarContainerId="gnar_containerId"}(t.CAPISessionOptionType||(t.CAPISessionOptionType={})),function(e){e.likelyToBeReadTakeaway="LikelyToRead",e.unlikelyToBeReadTakeaway="NotLikelyToRead"}(t.PNameQualifier||(t.PNameQualifier={})),t.BIG_TEXT_SIZE=300,function(e){e.generatePoints=function(e,t,n){var r=function(e,t){return Math.max(Math.trunc(e/t),h.rand(e))};return h.ArrayUtils.mapNTimes(r(e,2),(function(e){return h.ArrayUtils.mapNTimes(r(t,3),(function(t){return{value:Math.random()*n,alertIds:[],footprint:""+(100*e+t)}}))}))}}(t.TextMaps||(t.TextMaps={}))},44562:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CAPIEvent=t.AlertRemoveHint=void 0,function(e){e.NotFixed="NOT_FIXED"}(t.AlertRemoveHint||(t.AlertRemoveHint={})),function(e){e.is=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return e===t.kind}))}}}(t.CAPIEvent||(t.CAPIEvent={}))},12976:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GoalPrediction=void 0,function(e){!function(e){!function(e){e.INTENT_ALERT="INTENT_ALERT",e.INTENT_LOOKED="INTENT_LOOKED",e.INTENT_ACCEPTED="INTENT_ACCEPTED",e.INTENT_IGNORED="INTENT_IGNORED"}(e.FeedbackType||(e.FeedbackType={}))}(e.Intent||(e.Intent={}))}(t.GoalPrediction||(t.GoalPrediction={}))},61601:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GoalPrediction=t.DocumentStatistics=t.MAX_SAFE_ID=t.Message=t.CAPIFeature=t.CAPIHttpClient=t.optimizedOTSerializer=t.CAPIClientImpl=t.CAPIConnection=void 0;var r=n(59312),i=n(13669);Object.defineProperty(t,"CAPIConnection",{enumerable:!0,get:function(){return i.CAPIConnection}});var o=n(59954);Object.defineProperty(t,"CAPIClientImpl",{enumerable:!0,get:function(){return o.CAPIClientImpl}}),Object.defineProperty(t,"optimizedOTSerializer",{enumerable:!0,get:function(){return o.optimizedOTSerializer}});var a=n(60169);Object.defineProperty(t,"CAPIHttpClient",{enumerable:!0,get:function(){return a.CAPIHttpClient}});var s=n(96804);Object.defineProperty(t,"CAPIFeature",{enumerable:!0,get:function(){return s.CAPIFeature}}),Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return s.Message}}),Object.defineProperty(t,"MAX_SAFE_ID",{enumerable:!0,get:function(){return s.MAX_SAFE_ID}}),r.__exportStar(n(27966),t),r.__exportStar(n(67529),t),r.__exportStar(n(44562),t);var l=n(99727);Object.defineProperty(t,"DocumentStatistics",{enumerable:!0,get:function(){return l.DocumentStatistics}});var c=n(12976);Object.defineProperty(t,"GoalPrediction",{enumerable:!0,get:function(){return c.GoalPrediction}}),r.__exportStar(n(81777),t),r.__exportStar(n(80270),t)},80270:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LatencyMeasuringWSHandler=t.defaultConnectionFactory=t.windowPerformanceClientClock=void 0;var r=n(59312),i=n(76210),o=n(81531),a=n(9518),s=function(){function e(e,t){this._innerCon=e,this._addTimer=t}return e.prototype.send=function(e){return this._innerCon.send(this._addTimer(e))},e.prototype.close=function(e){return this._innerCon.close(e)},Object.defineProperty(e.prototype,"_ws",{get:function(){return this._innerCon._ws},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._innerCon.state},enumerable:!1,configurable:!0}),e}();function l(e,t){return new a.SerializingWSConnection(e,t)}t.windowPerformanceClientClock=function(){return Math.trunc(self.performance.now())},t.defaultConnectionFactory=l;var c=function(){function e(e,n,r,a,c,u){var d=this;void 0===r&&(r=10),void 0===a&&(a=t.windowPerformanceClientClock),void 0===c&&(c=i.v4),void 0===u&&(u=l),this._innerWs=e,this._idGenerator=n,this._bufferSize=r,this._clientClock=a,this._timerIdGenerator=c,this._defaultConnection=u,this._log=o.Monitoring.Logging.getLogger("coreclients.capi.latencyMeasuringWSHandler"),this._timers=[],this._connection=null,this._innerWs=e.onDisconnect((function(){d._timers=[]})).onMessage((function(e,t){d._processTimerResponse(t)})).withConnection((function(e,t){return new s(d._defaultConnection(e,t),(function(e){return d._addTimerToRequest(e)}))})).onConnect((function(e){d._connection=e}))}return e.prototype.onConnecting=function(e){return this._innerWs.onConnecting(e),this},e.prototype.onConnect=function(e){return this._innerWs.onConnect(e),this},e.prototype.onDisconnect=function(e){return this._innerWs.onDisconnect(e),this},e.prototype.onMessage=function(e){return this._innerWs.onMessage(e),this},e.prototype.connect=function(e){return this._innerWs.connect(e)},e.prototype.isDisconnected=function(){return this._innerWs.isDisconnected()},e.prototype._addTimerToRequest=function(e){if("string"==typeof e)return e;switch(e.action){case"ping":case"submit_ot":return r.__assign(r.__assign({},e),{timer:{client_clock:this._clientClock(),id:this._timerIdGenerator()}});default:return e}},e.prototype._processTimerResponse=function(e){var t=this;switch(e.action){case"pong":case"finished":return void(e.timer&&(this._timers.push({id:e.timer.id,name:e.timer.name,client_clock:this._clientClock()}),this._timers.length>=this._bufferSize&&setTimeout((function(){return t._flush()}),0)));default:return}},e.prototype._flush=function(){this._timers.length>0&&(null===this._connection?this._log.warn("tried flushing when not connected"):(this._connection.send({id:this._idGenerator.newId(),action:"perfstats",timers:this._timers}),this._timers=[]))},e}();t.LatencyMeasuringWSHandler=c},96804:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.CAPIFeature=t.MAX_SAFE_ID=void 0;var r=n(59312);t.MAX_SAFE_ID=Math.pow(2,32)/2,function(e){e.alertsUpdate="alerts_update",e.textInfo="text_info",e.freeAdvancedChecks="free_inline_advanced_alerts",e.readability="readability_check",e.sentenceVariety="sentence_variety_check",e.fillerWords="filler_words_check",e.alertsChanges="alerts_changes",e.freeClarityChecks="free_clarity_alerts",e.superAlerts="super_alerts",e.consistency="consistency_check",e.setGoalsLink="set_goals_link",e.emogenieCheck="emogenie_check",e.toneCards="tone_cards",e.alternativeDeletesCard="alternative_deletes_card",e.voxCheck="vox_check",e.plagiarismAlertsUpdate="plagiarism_alerts_update",e.fullSentenceRewrite="full_sentence_rewrite_card",e.listCard="turn_to_list_card",e.userMutes="user_mutes",e.completions="completions",e.muteQuotedAlerts="mute_quoted_alerts",e.keyTakeaways="key_takeaways_v4",e.supportsFormatting="formatting",e.supportsButtonTransformCards="transform_with_button_card",e.priorityAlertsView="priority_alerts_view",e.proofit="realtime_proofit",e.goalPrediction="goal_prediction",e.freeOccasionalPremiumAlerts="free_occasional_premium_alerts",e.gapTransformCard="gap_transform_card",e.smartPhrases="smart_phrases",e.sentenceLevelBrandTones="sentence_level_brand_tones",e.enclosingHighlight="enclosing_highlight",e.drilldownCard="drilldown_card"}(t.CAPIFeature||(t.CAPIFeature={})),function(e){!function(e){var t={Clarity:0,Correctness:0,Engagement:0,Tone:0,"Style guide":0,GeneralScore:0};e.normalize=function(e){return r.__assign(r.__assign({},t),e)}}(e.OutcomeScores||(e.OutcomeScores={}))}(t.Message||(t.Message={}))},76971:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CapiQueue=t.ChangesQueue=void 0;var r,i=n(59312),o=n(57050),a=n(40327),s=n(68511),l=n(81531),c=n(64613),u=n(67529),d=n(7858);!function(e){function t(e){return"change"===e.kind}function n(e){return"change_chunked"===e.kind}e.isChange=s.orP(t,n),e.isFullChange=t,e.isChunkedChange=n,e.isCmd=function(e){return"cmd"===e.kind},e.isCmdIncRevision=function(e){return"cmdIncRevision"===e.kind}}(r=t.ChangesQueue||(t.ChangesQueue={}));var p=function(){function e(e,t,n,i,o,a){var c=this;void 0===o&&(o=100),void 0===a&&(a=.1),this._shouldIncreaseRevision=e,this._acceptHandler=t,this._dropHandler=n,this._idGenerator=i,this._maxMessageSizeKb=o,this._messagePaddingKb=a,this._log=l.Monitoring.Logging.getLogger("coreclients.capi.queue",l.Logging.LogLevel.DEBUG),this._changes=[],this._staged=[],this._stagedOperationId=null,this._stagedAmount=0,this.transformChangeAgainstQueue=function(e){if(e.transformJson){var t=c._getQueuedDeltaAndLatestRevision(e.rev),n=u.AbsRawTransform.rebase(e.transformJson,t.delta);return u.AbsRawTransform.isSquashed(n)?s.O.none:s.O.some(s.ObjectUtils.update(e,{transformJson:n,rev:t.latestRev}))}return s.O.some(e)},this._split=function(e){var t=JSON.stringify([e.delta]);return c._log.trace("change delta string",{deltasStr:t,size:d.utf8Kbytes(t)}),d.split(t,c._maxMessageSizeKb,c._messagePaddingKb)},this._acceptMessage=function(e){c._updateCheckedTextSize(e),c._acceptHandler(e)},this._dropMessages=function(e,t){e.forEach(c._updateCheckedTextSize),c._dropHandler(e,t)},this._updateCheckedTextSize=function(e){r.isChange(e)?c._changeStagedAmount(-e.change.amount):c._shouldIncreaseRevision(e.cmd)&&c._changeStagedAmount(-u.BIG_TEXT_SIZE)},this._log.debug("capi queue created",{maxMessageSizeKb:this._maxMessageSizeKb,messagePaddingKb:this._messagePaddingKb}),this.clear("init")}return e.prototype.pushChanges=function(e){var t=this,n=a.pipe(this._tail(),s.O.filter(r.isChange));return a.pipe(n,s.O.fold((function(){return t._log.trace("pushChanges() adding new change to queue"),t._enqueueChange(e,t._split(e))}),(function(n){t._log.trace("pushChanges() composing with latest change");var r=n.change.compose(e),i=t._split(r);if(t._replaceChange(t._changes.length-1,r,i),r.isEmpty){var o=t._changes.pop();setTimeout((function(){return t._acceptMessage(o)}),0)}return n.id})))},e.prototype.pushCommand=function(e){var t=this._idGenerator();return this._shouldIncreaseRevision(e)?(this._changeStagedAmount(u.BIG_TEXT_SIZE),this._changes.push({kind:"cmdIncRevision",cmd:e,id:t,rev:this._revision++})):this._changes.push({kind:"cmd",cmd:e,id:t,rev:this._revision}),t},Object.defineProperty(e.prototype,"isStaging",{get:function(){return this._staged.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._changes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localRevision",{get:function(){return this._revision},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stagedAmount",{get:function(){return this._stagedAmount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChanges",{get:function(){return this._changes.some(r.isChange)},enumerable:!1,configurable:!0}),e.prototype.poll=function(){var e=this;return s.invariant(null===this._stagedOperationId,"Should not be in staging mode"),a.pipe(s.O.fromNullable(this._changes.shift()),s.O.map((function(t){return r.isCmd(t)||e._staged.push(t),e._stagedOperationId=t.id,t})))},e.prototype.ackOperation=function(e){s.invariant(!!this._stagedOperationId&&e===this._stagedOperationId,"Cannot ack operation by wrong id. Expected: '"+this._stagedOperationId+", got: '"+e+"'"),this._stagedOperationId=null},e.prototype.ackRevision=function(e){this._ackedRevisions.add(e),this._cleanStaged()},e.prototype.transformAlertAgainstQueue=function(t){var n=this._getQueuedDeltaAndLatestRevision(t.rev),r=a.pipe(u.RawAlert.hasPosition(t)?e._transformPosition(t,n.delta):s.O.some(t),s.O.map((function(e){return s.ObjectUtils.update(e,{rev:n.latestRev})})));return a.pipe(r,s.O.chain(u.RawAlert.matchBy(s.O.some,(function(e){var t=u.AbsRawTransform.rebase(e.transformJson,n.delta);return(e.updatable?u.AbsRawTransform.isSquashed(t):!u.AbsRawTransform.isValidAfterTransform(e.transformJson,t))?s.O.none:s.O.some(s.ObjectUtils.update(e,{transformJson:t}))}),(function(e){var t=u.AbsRawTransform.rebase(e.subalerts,n.delta);return u.AbsRawTransform.isSquashed(t)?s.O.none:s.O.some(s.ObjectUtils.update(e,{subalerts:t}))}))))},e.prototype.transformAttentionHeatmapAgainstQueue=function(e){var t=this._getQueuedDeltaAndLatestRevision(e.rev),n=function(e){return e.map((function(e){return u.RawAttentionHeatmap.Range.rebase(e,t.delta)}))},r=n(e.update),a=r.filter(u.RawAttentionHeatmap.Range.isSquashed).map((function(e){return e.id}));return s.ObjectUtils.update(e,{rev:t.latestRev,add:n(e.add).filter(o.not(u.RawAttentionHeatmap.Range.isSquashed)),update:r.filter(o.not(u.RawAttentionHeatmap.Range.isSquashed)),remove:i.__spreadArrays(e.remove,a)})},e.prototype.clear=function(e){var t=i.__spreadArrays(this._changes,this._staged);this._changes=[],this._staged=[],this._stagedOperationId=null,this._ackedRevisions=new Set,this._revision=0,t.length>0&&this._dropMessages(t,e)},e.prototype._tail=function(){return this.isEmpty?s.O.none:s.O.fromNullable(this._changes[this._changes.length-1])},e.prototype._enqueueChange=function(e,t){var n,r=this,i=this._revision++;if(this._changeStagedAmount(e.amount),1===t.length)n=this._idGenerator(),this._changes.push({kind:"change",change:e,id:n,rev:i,deltasString:t[0]});else{this._log.trace("change is larger than maximum allowed size, splitting to chunks",t.length);var o=t.map((function(e){return{id:r._idGenerator(),chunk:e}}));n=this._idGenerator(),this._changes.push({kind:"change_chunked",change:e,id:n,rev:i,chunks:o})}return n},e.prototype._replaceChange=function(e,t,n){var o=this,a=this._changes[e];s.invariant(r.isChange(a),"queued change should exist");var l=a;this._changeStagedAmount(-l.change.amount+t.amount),n.length>1?this._changes[e]=i.__assign(i.__assign({},l),{kind:"change_chunked",chunks:n.map((function(e){return{id:o._idGenerator(),chunk:e}}))}):this._changes[e]=i.__assign(i.__assign({},l),{kind:"change",change:t,deltasString:n[0]})},e.prototype._cleanStaged=function(){for(;void 0!==this._staged[0]&&this._ackedRevisions.has(this._staged[0].rev);){var e=this._staged.shift();this._ackedRevisions.delete(e.rev),this._acceptMessage(e)}},e.prototype._changeStagedAmount=function(e){this._stagedAmount+=e},e.prototype._getQueuedDeltaAndLatestRevision=function(e){var t=this._staged.filter((function(t){return t.rev>e})).concat(this._changes).filter(r.isChange);return{delta:c.DeltaUtils.squash(t.map((function(e){return e.change.delta}))),latestRev:a.pipe(s.A.last(t),s.O.map((function(e){return e.rev})),s.O.getOrElse((function(){return e})))}},e.prototype.toJSON=function(){return{isEmpty:this.isEmpty,isStaging:this.isStaging,changes:this._changes.map((function(e){return r.isChange(e)?{kind:"change",prevLen:e.change.prevLen,changeDiff:e.change.length,changeAmount:e.change.amount}:e}))}},e._transformPosition=function(e,t){var n=u.RawAlert.Position.rebase(e,t);return(e.updatable?u.RawAlert.Position.isSquashed(n):!u.RawAlert.Position.hasEqualLength(e,n))?s.O.none:s.O.some(s.ObjectUtils.update(e,n))},e}();t.CapiQueue=p},27966:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RawTransform=void 0;var r=n(59312),i=n(57050),o=n(68511),a=n(64613);!function(e){var t;!function(e){e.isEmpty=function(e){return e.e-e.s==0}}(e.Range||(e.Range={})),function(e){!function(e){e.MAIN="main",e.IMPORTANT="important"}(e.Type||(e.Type={})),function(e){e.OPTIONAL_CONTEXT="optional_context"}(e.TypeExt||(e.TypeExt={}))}(t=e.Edit||(e.Edit={})),function(e){function n(e){return i.pipe(e.ops,o.O.fromPredicate((function(e){return-1===e.findIndex(n)})),o.O.fold((function(){return o.E.left({ops:(t=e.ops,t.reduce((function(e,t,i){if(n(t,i)){var o=t.attributes,a=(o.type,r.__rest(o,["type"]));e.push(r.__assign(r.__assign({},t),{attributes:a}))}else e.push(t);return e}),[]))});var t}),(function(e){return o.E.right({ops:e})})));function n(e,n){return n>0&&a.DeltaUtils.isRetain(e)&&void 0!==e.attributes&&e.attributes.type===t.TypeExt.OPTIONAL_CONTEXT}}e.unsafeFromDelta=function(e){return i.pipe(e,n,o.E.fold(i.identity,i.identity))},e.fromDelta=n}(e.AbsAlternative||(e.AbsAlternative={}))}(t.RawTransform||(t.RawTransform={}))},67697:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AttentionChecklistItem=void 0;var r=n(59312),i=n(40327),o=n(68511);!function(e){e.fromRaw=function(e){return r.__assign(r.__assign({},e),{suggestionsCard:i.pipe(o.O.fromNullable(e.suggestionsCard),o.O.map((function(e){return{title:e.title,miniTitle:o.O.fromNullable(e.miniTitle)}}))),successCard:i.pipe(o.O.fromNullable(e.successCard),o.O.map((function(e){return{title:e.title,miniTitle:o.O.fromNullable(e.miniTitle)}}))),defaultCard:r.__assign(r.__assign({},e.defaultCard),{miniTitle:o.O.fromNullable(e.defaultCard.miniTitle),details:o.O.fromNullable(e.defaultCard.details)})})}}(t.AttentionChecklistItem||(t.AttentionChecklistItem={}))},7858:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.split=t.utf8Kbytes=t.utf8Bytes=void 0;var r=n(68511);function i(e){for(var t,n,r=0,i=e.length,o=0;o<i;o++)(t=e.charCodeAt(o))>=55296&&t<57344&&t<56320&&o+1<i&&(n=e.charCodeAt(o+1))>=56320&&n<57344?(r+=4,o++):r+=t<128?1:t<2048?2:3;return r}function o(e,t){var n=e.charCodeAt(t),r=e.charCodeAt(t+1);return n>=55296&&n<57344&&r>=56320&&r<57344}function a(e){return i(e)/1e3}t.utf8Bytes=i,t.utf8Kbytes=a,t.split=function(e,t,n){if(void 0===n&&(n=0),r.invariant(n<t,"padding must be less than the max message size"),l(3*e.length)+n<t)return[e];if(a(e)<t-n)return[e];for(var i=Math.max(2,Math.floor(s(t-n)/3)),c=Math.ceil(e.length/i),u=new Array(c),d=0,p=0;d<e.length;){var h=o(e,d+i-1)?i-1:i;u[p++]=e.substr(d,h),d+=h}return u};var s=function(e){return 1e3*e},l=function(e){return e/1e3}},99727:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentStatistics=void 0;var r=n(68511);!function(e){function t(e,t){var n=t/60,i=r.DateUtils.secondsToTime(e/n);return i.s=i.h>0&&i.m>10?0:Math.floor(i.s),i}e.calculateReadingTime=function(e){return t(e,250)},e.calculateSpeakingTime=function(e){return t(e,130)},e.generateStats=function(t,n){var r={words:t,chars:n,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return r.readingTime=e.calculateReadingTime(r.words),r.speakingTime=e.calculateSpeakingTime(r.words),r}}(t.DocumentStatistics||(t.DocumentStatistics={}))},32769:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Dapi=t.DapiPropertiesSerializationError=t.Properties=t.PropertyImpl=t.emptyValue=void 0;var r=n(59312),i=n(95195),o=n(45614),a=n(40327),s=n(93910),l=n(90877),c=n(68511),u=n(18410),d=n(52868);function p(e){return"null"===e||"undefined"===e||null==e}function h(e){if(null===e||"null"===e||"boolean"==typeof e)return null;var t=Number(e);return Number.isNaN(t)?null:t}function m(e){return p(e)?null:"true"===e||"false"!==e&&"0"!==e&&Boolean(e)}function f(e){try{return JSON.parse(decodeURI(e))}catch(e){return null}}t.emptyValue=p;var g,y=function(){function e(e){this._value=e}return e.prototype.getStr=function(){return p(this._value)?null:String(this._value)},e.prototype.getNum=function(){return h(this._value)},e.prototype.getBool=function(){return m(this._value)},e.prototype.getBoolOrDefault=function(e){return function(e,t){return p(e)?t:"true"===e||"false"!==e&&"0"!==e&&Boolean(e)}(this._value,e)},e.prototype.getObject=function(){return f(this._value)},e.prototype.getArray=function(){return f(this._value)},e.prototype.getObjProp=function(e){return this._value.hasOwnProperty(e)?this._value[e]:null},e}();t.PropertyImpl=y,function(e){e.find=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t.find((function(t){return t.has(e)}));return new y(r&&r[e])},e.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=new b,r=0,i=e;r<i.length;r++){var o=i[r];for(var a in o){var s=o[a];n[a]="object"==typeof s?encodeURI(JSON.stringify(s)):s}}return n},e.is=function(e){return e instanceof b}}(g=t.Properties||(t.Properties={}));var v,b=function(){function e(){}return e.prototype.getStr=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.getNum=function(e){return this.hasOwnProperty(e)?h(this[e]):null},e.prototype.getBool=function(e){return this.hasOwnProperty(e)?m(this[e]):null},e.prototype.getObject=function(e){return this.hasOwnProperty(e)?f(this[e]):null},e.prototype.has=function(e){return this.hasOwnProperty(e)},e.prototype.ifPresent=function(e,t){this[e]&&t(this[e])},e.prototype.entries=function(){var e=this;return Object.keys(this).map((function(t){return[t,new y(e[t])]}))},e.find=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t.find((function(t){return t.has(e)}));return new y(r&&r[e])},e}(),w=function(e){function t(t,n){var r=e.call(this,t)||this;return r.message=t,r.details=n,r.name="DapiPropertiesSerializationError",r}return r.__extends(t,e),t.prototype.toString=function(){return"DAPI properties serialization error\n      Message "+this.message+"\n      Details "+l.failure(this.details)},t}(c.CustomError);function _(e){return v.fromProperties(e).decode(e)}function C(e){return new w("Serialization failed",e)}t.DapiPropertiesSerializationError=w,function(e){var t=["{","}",";","="];e.property=new s.Type("property",(function(e){return!0}),(function(e,n){var r=n[1].key,i=String(e);return i.length>1024?s.failure(e,n,"Property "+r+" is too long (max length is 1024)"):t.some((function(e){return i.indexOf(e)>=0}))?s.failure(e,n,"Property "+r+" has forbidden characters ("+t.join(", ")+")"):s.success(e)}),s.identity),e.fromProperties=function(t){return s.type(a.pipe(t,o.filter((function(e){return"function"!=typeof e})),o.map((function(t){return e.property}))))}}(v||(v={}));var E=function(){function e(e,t,n){this._fingerprints=n,this._endpoints={props:"props/v2",mimic:"mimic"},this._url=u.RequestBuilder.join(e,"api"),this._ajax=t({requestExtender:d.Fingerprints.toHeaderAppender(this._fingerprints)})}return e.prototype.load=function(){return a.pipe(this._ajax.json(u.RequestBuilder.get(this._url,this._endpoints.props)),this._ajax.map(g.of))},e.prototype.get=function(e){return a.pipe(this._ajax.text(u.RequestBuilder.get(this._url,this._endpoints.props,e)),this._ajax.map((function(t){var n;return g.of(((n={})[e]=t||null,n))})))},e.prototype.save=function(e){var t=this;return a.pipe(e,_,i.mapLeft(C),i.fold(this._ajax.throwError,this._ajax.of),this._ajax.map((function(e){return u.RequestBuilder.post(t._url,t._endpoints.props).json(e)})),this._ajax.chain(this._ajax.empty))},e.prototype.getMimic=function(e){return this._ajax.json(u.RequestBuilder.get(this._url,this._endpoints.mimic).cookie("gnar_containerId",e))},e.prototype.getMimicWithProps=function(e){return a.pipe(this._ajax.json(u.RequestBuilder.get(this._url,this._endpoints.mimic,"withProps").cookie("gnar_containerId",e)),this._ajax.map((function(e){var t=e.groups,n=e.properties;return{experiments:new Set(t),properties:g.of(n)}})))},e.targetTag="dapi",e}();t.Dapi=E},64613:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaUtils=void 0;var r=n(57050),i=n(40327),o=n(64450),a=n(68511);!function(e){e.isInsert=function(e){return"insert"in e},e.isInsertString=function(t){return e.isInsert(t)&&"string"==typeof t.insert},e.isInsertEmbed=function(t){return e.isInsert(t)&&!e.isInsertString(t)},e.isDelete=function(e){return"delete"in e},e.isRetain=function(e){return"retain"in e},e.containsInsertsOnly=function(t){return t.ops.every(e.isInsert)},e.getInsertLength=o.Delta.Op.length,e.getTrimmedInsertLength=function(t){return e.isInsertString(t)?t.insert.trim().length:1},e.match=function(t,n,r){return function(i){return e.isInsert(i)?t(i):e.isDelete(i)?n(i):r(i)}},e.getAttr=function(t,n){return e.isDelete(t)||!t.attributes?a.O.none:"function"==typeof n?i.pipe(a.O.fromNullable(Object.keys(t.attributes).find(n)),a.O.map((function(e){return t.attributes[e]}))):a.O.fromNullable(t.attributes[n])},e.operationLength=o.Delta.Op.length;var t=function(e){return-e.delete};e.getOperationOffset=e.match(o.Delta.Op.length,t,o.Delta.Op.length);var n=function(e){return function(t){return t.ops.map(e).reduce(a.sum,0)}},s=function(){return 0};e.calcDiffLength=n(e.match(o.Delta.Op.length,t,s)),e.calcAmountLength=n(e.match(o.Delta.Op.length,o.Delta.Op.length,s)),e.calcAffectedLength=n(e.match(s,o.Delta.Op.length,o.Delta.Op.length)),e.rangeOfTheChange=function(t){var n=e.match(r.constTrue,r.constTrue,(function(e){return Boolean(e.attributes)}));return t.ops.reduce((function(t,r){var o=t[0],s=t[1],l=e.operationLength(r),c=s+l;return[i.pipe(o,a.O.fold((function(){return n(r)?a.O.some([s,c]):a.O.none}),(function(e){return n(r)?a.O.some([e[0],c]):a.O.some(e)}))),c]}),[a.O.none,0])[0]},e.isEqual=function(t){return function(n,r){return e.match((function(n){return e.isInsert(r)&&n.insert===r.insert&&t(n.attributes,r.attributes)}),(function(t){return e.isDelete(r)&&t.delete===r.delete}),(function(n){return e.isRetain(r)&&n.retain===r.retain&&t(n.attributes,r.attributes)}))(n)}},e.deltaEq=a.Eq.fromEquals((function(t,n){return t.ops.length===n.ops.length&&a.ArrayUtils.compareInPairs(t.ops,n.ops,e.isEqual(a.ObjectUtils.deepEqual))})),e.normalizeDelta=function(e){return(new o.Delta).compose(e)};var l=function(e){return e&&Object.keys(e).reduce((function(t,n){return t[n]="string"==typeof e[n]?"<"+e[n].length+">":e[n],t}),{})};e.anonymizeTextAndStringAttrs=function(t){return t.ops.reduce((function(t,n){return e.match((function(n){return t.insert("string"==typeof n.insert?"<"+e.getInsertLength(n)+">":"<embed>",l(n.attributes))}),(function(e){return t.delete(e.delete)}),(function(e){return t.retain(e.retain,l(e.attributes))}))(n)}),new o.Delta)},e.squash=function(e){return e.reduce((function(e,t){return e.compose(new o.Delta(t))}),new o.Delta)},e.cleanAllAttrs=function(t){return t.reduce((function(t,n){return e.match((function(e){return t.insert(e.insert)}),(function(e){return t.delete(e.delete)}),(function(e){return t.retain(e.retain)}))(n)}),new o.Delta)};var c=function(e){return a.O.fromNullable(e.attributes)};e.getAttrs=e.match(c,(function(){return a.O.none}),c),e.skipAny=r.constFalse;e.cleanDelta=function(t,n){return function(r){var i=function(e){return e&&Object.keys(e).filter((function(e,t,r){return n(e,r.slice(0))})).reduce((function(t,n){return t[n]=e[n],t}),{})};return r.reduce((function(n,r){return e.match((function(e){return n.insert("string"==typeof e.insert||t(e.insert)?e.insert:" ",i(e.attributes))}),(function(e){return n.delete(e.delete)}),(function(e){return n.retain(e.retain,i(e.attributes))}))(r)}),new o.Delta)}},e.splitToDeleteThenInsert=function(t){return t.reduce((function(t,n){var r=t[0],i=t[1];return e.match((function(e){return[r,i.push(e)]}),(function(e){return[r.push(e),i]}),(function(e){return[r.push({retain:e.retain}),i.push(e)]}))(n)}),[new o.Delta,new o.Delta]).map((function(e){return e.chop()}))},e.nonEmpty=function(e){return e.ops.length>0}}(t.DeltaUtils||(t.DeltaUtils={}))},93153:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.genreToDocumentContext=t.domainToGenre=t.genreToDomain=t.DocumentContext=void 0;var r,i=n(59312),o=n(73975),a=n(57050),s=n(40327),l=n(93910),c=n(90877),u=n(68511),d=n(81531),p=n(34930),h=u.O.getEq({equals:function(e,t){return e===t}});function m(e){if(!e)return"general";switch(e.split("_")[0]){case"academic":return"academic";case"business":return"business";case"technical":case"medical":return"mail";case"creative":return"creative";case"casual":return"casual";default:return"general"}}!function(e){e.equals=function(e,t){return u.O.getEq(o.eqStrict).equals(e.domain,t.domain)&&u.O.getEq({equals:u.isSetsEq}).equals(e.goals,t.goals)&&h.equals(e.audience,t.audience)&&h.equals(e.style,t.style)&&u.O.getEq({equals:u.isSetsEq}).equals(e.emotions,t.emotions)},e.goals=p.literalArray(["inform","describe","convince","tellStory"]),e.goalsLabels=["Inform","Describe","Convince","Tell A Story"],e.audiences=p.literalArray(["general","knowledgeable","expert"]),e.formalityLevels=p.literalArray(["informal","neutral","formal"]),e.tone=p.literalArray(["neutral","confident","joyful","optimistic","friendly","urgent","analytical","respectful"]),e.domains=p.literalArray(["academic","business","general","mail","casual","creative"]),e.dialects=p.literalArray(["american","british","canadian","australian"]),e.fromDomain=function(t){return i.__assign(i.__assign({},e.unset),{domain:u.O.some(t)})},e.unset={goals:u.O.none,domain:u.O.none,emotions:u.O.none,audience:u.O.none,style:u.O.none,dialect:u.O.none},e.defaultContextFallback={goals:new Set,domain:"general",emotions:new Set,audience:"knowledgeable",style:"neutral",dialect:u.O.none},e.isStyleValidWithDomain=function(e,t){return"neutral"===t||("formal"===t?"creative"!==e&&"casual"!==e:"academic"!==e)};var t=p.Type.literalUnion("goal",e.goals),n=p.Type.set(t),r=p.Type.literalUnion("audience",e.audiences),m=p.Type.literalUnion("formality",e.formalityLevels),f=p.Type.literalUnion("tone",e.tone),g=p.Type.set(f),y=p.Type.literalUnion("domain",e.domains),v=p.Type.literalUnion("dialect",e.dialects);e.IOType=l.interface({goals:p.Type.option(n),domain:p.Type.option(y),audience:p.Type.option(r),style:p.Type.option(m),emotions:p.Type.option(g),dialect:p.Type.option(v)}),e.IOTypeDefault=l.interface({goals:n,domain:y,audience:r,style:m,emotions:g,dialect:p.Type.option(v)}),e.tryParse=function(e){return function(t){return s.pipe(e(t),u.E.mapLeft(c.failure),u.E.mapLeft((function(e){return d.Monitoring.Logging.getLogger("coreclients.dox.context").warn("failed to parse document context",e),e})))}},e.parse=a.flow(u.O.fromNullable,u.O.chain((function(t){return s.pipe(t,e.tryParse(e.IOType.decode),u.O.fromEither)}))),e.parseDefault=a.flow(u.O.fromNullable,u.O.chain(a.flow(e.tryParse((function(t){return e.IOTypeDefault.decode(t)})),u.O.fromEither))),e.serialize=function(t){return e.IOType.encode(t)},e.serializeDefault=function(t){return e.IOTypeDefault.encode(t)}}(r=t.DocumentContext||(t.DocumentContext={})),t.genreToDomain=m,t.domainToGenre=function(e){switch(e){case"general":return"general";case"academic":return"academic_general";case"business":return"business_other";case"mail":return"technical_other";case"creative":return"creative_other";case"casual":return"casual_other";default:return e}},t.genreToDocumentContext=function(e){return r.fromDomain(m(e))}},15495:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventBuilder=t.TransitionBuilder=t.WithBuilder=t.StateMachine=t.EventInfo=void 0;var r=n(59312),i=n(81531),o=function(){function e(e,t,n,r){this.from=e,this.to=t,this.event=n,this.args=r}return e.prototype.toString=function(){return"Transition: From: "+this.from+" to: "+this.to+" (Args: "+this.args+")"},e}();t.EventInfo=o;var a=function(){function e(t,n,r){this._name=t,this._log=i.Monitoring.Logging.getLogger("coreclients.fsm"),this._parents={},this._transitions={},this._scheduled=[],this._listeners={},this._inTransition=!1,this._verbose=!1,this._id=++e._ids,this._current=n,this._final=r||null}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFinal",{get:function(){return this._final===this._current},enumerable:!1,configurable:!0}),e.prototype.transition=function(e,t,n){this._transitions[e<<11|n]=t},e.prototype.parent=function(e,t){this._parents[e]=t},e.prototype.is=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.findIndex((function(t){return t===e._current}))>=0},e.prototype.from=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(l.bind.apply(l,r.__spreadArrays([void 0,this],e)))},e.prototype.with=function(e){return new s(this,e)},e.prototype.verbose=function(e,t){return this._verbose=!0,this._states=e,this._events=t,this},e.prototype.on=function(e,t){return this._addCallback(this._listeners,e,t),this},e.prototype.event=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(i){return[2,new Promise((function(i,a){return r.__awaiter(n,void 0,void 0,(function(){var n,s,l,c;return r.__generator(this,(function(d){switch(d.label){case 0:if(this._verbose&&this._trace("Handling event "+this._eventName(e)+", currently in "+this._stateName(this._current)),this._current===this._final)return this._trace("Cannot handle event "+e+": FSM is in it's final state "+this._current),[2,i(!1)];if(this._inTransition)return this._scheduled.push(new u(e,t,i,a)),[2];n=this._current,s=null,l=function(){var a,l,u,d,p,h,m;return r.__generator(this,(function(f){switch(f.label){case 0:if(void 0===(a=c._transitions[n<<11|e]))return[3,10];c._inTransition=!0,l=c._listeners[a]||[],u=new o(c._current,a,e,t),f.label=1;case 1:f.trys.push([1,7,8,9]),c._verbose&&c._trace("Transition from "+c._stateName(u.from)+" to "+c._stateName(u.to)+" on "+c._eventName(e)+" Arguments: "+t),c._current=a,d=l.map((function(e){return Promise.resolve(e(u))})),c._inTransition=!1,p=function(e){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,c.event(e.event,e.args).then((function(t){return e.done(t)})).catch((function(t){return e.fail(t)}))];case 1:return t.sent(),[2]}}))},h=c._scheduled.shift(),f.label=2;case 2:return void 0===h?[3,5]:[5,p(h)];case 3:f.sent(),f.label=4;case 4:return h=c._scheduled.shift(),[3,2];case 5:return[4,Promise.all(d).then((function(e){return i(!0)}))];case 6:return f.sent(),[3,9];case 7:return m=f.sent(),s=m,[3,9];case 8:return c._inTransition=!1,[7];case 9:return[2,"break"];case 10:return n=c._parents[n],[2]}}))},c=this,d.label=1;case 1:return void 0===n?[3,3]:[5,l()];case 2:return"break"===d.sent()?[3,3]:[3,1];case 3:return s?a(s):i(!1),[2]}}))}))}))]}))}))},e.prototype._addCallback=function(e,t,n){var r=e[t];return r||(r=[],e[t]=r),r.push(n),this},e.prototype._eventName=function(e){return void 0===this._events?e:this._events[e]},e.prototype._stateName=function(e){return void 0===this._states?e:this._states[e]},e.prototype._trace=function(e){this._log.trace("FSM#"+this._id+(this._name&&"_"+this._name)+" [VERBOSE]: "+e)},e._ids=0,e}();t.StateMachine=a;var s=function(){function e(e,t){this.hsm=e,this.state=t}return e.prototype.childrenOf=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach((function(t){return e.hsm.parent(e.state,t)})),this.hsm},e.prototype.parentOf=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach((function(t){return e.hsm.parent(t,e.state)})),this.hsm},e}();t.WithBuilder=s;var l=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hsm=e,this._states=t}return e.prototype.to=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new c(this.hsm,this._states,e)},e}();t.TransitionBuilder=l;var c=function(){function e(e,t,n){this.hsm=e,this.from=t,this.to=n}return e.prototype.on=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach((function(t){return e.from.forEach((function(n){return e.to.forEach((function(r){return e.hsm.transition(n,r,t)}))}))})),this.hsm},e}();t.EventBuilder=c;var u=function(e,t,n,r){this.event=e,this.args=t,this.done=n,this.fail=r}},52868:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createCookiesAppender=t.createHeadersAppender=t.Fingerprints=void 0;var r=n(59312);function i(e){var t=this;return function(n){return function(){return r.__awaiter(t,void 0,void 0,(function(){var t,i,o,a,s,l,c,u;return r.__generator(this,(function(r){switch(r.label){case 0:for(i in t=[],e)t.push(i);o=0,r.label=1;case 1:return o<t.length?(a=t[o],s=e[a],c=(l=n).header,u=[a],[4,"function"==typeof s?s():s]):[3,4];case 2:c.apply(l,u.concat([r.sent()])),r.label=3;case 3:return o++,[3,1];case 4:return[2,n]}}))}))}}}!function(e){e.toHeaderAppender=function(e){return i({"X-Client-Version":e.clientVersion.toString(),"X-Client-Type":function(){return e.clientName},"X-Container-Id":e.containerId,"X-CSRF-Token":e.csrfToken})}}(t.Fingerprints||(t.Fingerprints={})),t.createHeadersAppender=i,t.createCookiesAppender=function(e){var t=this;return function(n){return function(){return r.__awaiter(t,void 0,void 0,(function(){var t,i,o,a,s,l,c,u;return r.__generator(this,(function(r){switch(r.label){case 0:for(i in t=[],e)t.push(i);o=0,r.label=1;case 1:return o<t.length?(a=t[o],s=e[a],c=(l=n).cookie,u=[a],[4,"function"==typeof s?s():s]):[3,4];case 2:c.apply(l,u.concat([r.sent()])),r.label=3;case 3:return o++,[3,1];case 4:return[2,n]}}))}))}}}},70861:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CappedIdGenerator=void 0;var r=n(68511),i=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!0),this._capacity=e,this._start=t,this._allowOverflow=n,this._nextId=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._nextId},enumerable:!1,configurable:!0}),e.prototype.newId=function(){var e=this._nextId;if(e>this._capacity){if(!this._allowOverflow)throw new r.InvariantError("ids limit reached: "+this._capacity);this._nextId=e=0}return this._nextId++,e},e.prototype.reset=function(){this._nextId=this._start},e}();t.CappedIdGenerator=i},34930:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Type=t.literalArray=void 0;var r=n(59312),i=n(40327),o=n(93910),a=n(68511),s=n(32769);function l(e){return e}t.literalArray=l,function(e){function t(e){return function(t){return a.O.is(t)&&i.pipe(t,a.O.fold((function(){return!0}),e.is))}}function n(e){return function(t){return Array.isArray(t)&&t.length>0&&t.every(e.is)}}e.set=function(e){return new o.Type("Set<"+e.name+">",(function(e){return e instanceof Set}),(function(t,n){return a.E.either.map(o.array(e).validate(t,n),(function(e){return new Set(e)}))}),(function(e){return Array.from(e)}))},e.getIsOption=t,e.option=function(e){return new o.Type("option:"+e.name,t(e),(function(t,n){return null==t?a.E.right(a.O.none):a.E.either.map(e.validate(t,n),a.O.some)}),a.O.fold((function(){}),e.encode))},e.opaque=function(e){return new o.Type("Opaque",(function(e){return"string"==typeof e}),(function(t,n){return a.E.either.chain(e.validate(t,n),(function(e){return o.success(e)}))}),(function(e){return e}))},e.getIsNEA=n,e.nonEmptyArray=function(e){return new o.Type("NEA",n(e),(function(t,n){return a.E.either.chain(o.array(e).validate(t,n),(function(e){return e.length>0?o.success(e):o.failure(e,n,"Array is empty")}))}),(function(e){return a.O.unsafeGet(a.NEA.fromArray(e))}))},e.literalUnion=function(e,t){return o.union(t.map((function(e){return o.literal(e)})),e+":string")},e.date=function(){return new o.Type("Date",(function(e){return e instanceof Date}),(function(e,t){var n=Date.parse(e.toString()),r=isNaN(n)?e:n;return a.E.either.map(o.number.validate(r,t),(function(e){return new Date(e)}))}),(function(e){return e.getTime()}))};var l=function(e){return o.string.is(e)&&!Number.isNaN(Number(e))};e.stringFromNumber=new o.Type("stringFromNumber",l,(function(e,t){return l(e)?o.success(e):"number"!=typeof e||Number.isNaN(e)?o.failure(e,t):o.success(e.toString())}),(function(e){return Number(e)})),e.withDefault=function(e,t){return new o.Type("withDefault("+JSON.stringify(t)+"):"+e.name,e.is,(function(n,r){return e.validate(s.emptyValue(n)?t:n,r)}),e.encode)},e.fallback=function(e,t){return new o.Type("fallback("+JSON.stringify(t)+"):"+e.name,e.is,(function(n,r){var i=e.validate(n,r);return a.E.isLeft(i)?a.E.right(t):i}),e.encode)};var c=function(e,t){Array.prototype.push.apply(e,t)},u=["boolean","string","Date","number","Array","Set","object","Dictionary","StringEnum","Partial"];function d(e,t){var n=function(e){var t=e.replace(/\w+\(.*?\):/,"");if("{"===t[0]&&"}"===t[t.length-1])return"object";var n=t.split(":").pop();return 0===n.indexOf("Date")?"Date":0===n.indexOf("Array<")?"Array":0===n.indexOf("Set<")?"Set":0===n.indexOf("StringEnum<")?"StringEnum":0===t.indexOf("Partial<")?"Partial":(a.invariant(u.indexOf(n)>-1,"unsupported prop type "+e),n)}(e);switch(n){case"boolean":return t.getBool();case"string":case"StringEnum":return t.getStr();case"Date":return null===t.getNum()?t.getStr():t.getNum();case"number":return t.getNum();case"Array":case"Set":return t.getArray();case"object":case"Partial":case"Dictionary":return t.getObject();default:return a.assertNever(n)}}e.properties=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=function(e){return"{ "+Object.keys(e).map((function(t){return t+": "+e[t].name})).join(", ")+" }"}(e)),new o.InterfaceType(n,(function(t){if(!s.Properties.is(t))return!1;for(var n in e)if(!e[n].is(t[n]))return!1;return!0}),(function(n,l){if(!Array.isArray(n)||n.some((function(e){return!s.Properties.is(e)})))return o.failure(n,l);var u={},p=[],h=function(h){var m=""!==t?t+":"+h:h,f=s.Properties.find.apply(s.Properties,r.__spreadArrays([m],n)),g=e[h],y=d(g.name,f),v=g.validate(y,o.appendContext(l,h,g));i.pipe(v,a.E.fold((function(e){return c(p,e)}),(function(e){u[h]=e})))};for(var m in e)h(m);return p.length?o.failures(p):o.success(u)}),(function(n){var r={};for(var i in e){var o=""!==t?t+":"+i:i,a=e[i],l=n[i];a.is(l)&&(r[o]=e[i].encode(l))}return s.Properties.of(r)}),e)},e.combineProperties=function(e,t){void 0===t&&(t="("+e.map((function(e){return e.name})).join(" & ")+")");var n=e.length;return new o.IntersectionType(t,(function(t){return e.every((function(e){return e.is(t)}))}),(function(t,r){for(var s={},l=[],u=0;u<n;u++){var d=e[u].validate(t,r);i.pipe(d,a.E.fold((function(e){return c(l,e)}),(function(e){return Object.assign(s,e)})))}return l.length?o.failures(l):o.success(s)}),(function(t){return s.Properties.of.apply(s.Properties,e.map((function(e){return e.encode(t)})))}),e)},e.createStringEnum=function(e,t){return o.keyof(Object.values(e).reduce((function(e,t){return e[t]=null,e}),{}),"StringEnum<"+t+">")}}(t.Type||(t.Type={}))},62097:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserWebSocket=void 0;try{n=WebSocket||self.MozWebSocket}catch(e){}function r(e,t){return t?new n(e,t):new n(e)}n&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(r,e,{get:function(){return n[e]}})})),t.BrowserWebSocket=n?r:null},49150:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Diff=t.Change=t.DeltaChange=t.Delta=void 0;var r,i=n(57050),o=n(64450),a=n(68511),s=n(64613),l=n(64450);Object.defineProperty(t,"Delta",{enumerable:!0,get:function(){return l.Delta}}),function(e){e.split=function(e,t){return[e]}}(t.DeltaChange||(t.DeltaChange={})),function(e){e.fromArrayOfDeltas=function(t,n){var r=n;return t.map((function(t){var n=e.delta(t,r);return r+=s.DeltaUtils.calcDiffLength(t),n}))};var t=function(){function e(e,t){this.delta=e,this.prevLen=t,this.kind="delta",this._length=void 0,this._amount=void 0,this._text=void 0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length||(this._length=s.DeltaUtils.calcDiffLength(this.delta))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount||(this._amount=s.DeltaUtils.calcAmountLength(this.delta))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){var e=this;return this._text||(this._text=a.E.tryCatchError((function(){return e.delta.ops.reduce((function(e,t){return s.DeltaUtils.match((function(t){return""+e+t.insert}),(function(){throw new Error("can not get text on delta with deletes")}),(function(){throw new Error("can not get text on delta with retains")}))(t)}),"")})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.delta.ops.length},enumerable:!1,configurable:!0}),e.prototype.compose=function(t){return new e(this.delta.compose(t.delta),this.prevLen)},e.prototype.transform=function(t,n){return void 0===n&&(n=!0),new e(t.delta.transform(this.delta,n),this.prevLen+t.length)},e.prototype.toString=function(){return"Delta("+this.delta+", pl: "+this.prevLen+")"},e}(),n=function(){function e(){this.kind="flush"}return e.prototype.toString=function(){return"Flush()"},e}(),r=function(){function e(e){this.delta=e,this.kind="reset"}return Object.defineProperty(e.prototype,"text",{get:function(){var e=this;return this._text||(this._text=a.E.tryCatchError((function(){return e.delta.ops.reduce((function(e,t){if(s.DeltaUtils.isInsert(t))return""+e+t.insert;throw s.DeltaUtils.isDelete(t)?new Error("can not get text on delta with deletes"):new Error("can not get text on delta with retains")}),"")})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length||(this._length=s.DeltaUtils.calcDiffLength(this.delta))},enumerable:!1,configurable:!0}),e.prototype.compose=function(e){return c(this.delta.compose(e.delta))},e.prototype.toString=function(){return"Reset("+this.delta+")"},e}();function l(e,n){return void 0===n&&(n=0),new t(e,n)}function c(e){return s.DeltaUtils.containsInsertsOnly(e)?a.E.right(new r(e)):a.E.left(new Error("Delta should contains only inserts to be Reset"))}e.delta=l,e.ins=function(e,t,n){return void 0===n&&(n=0),l((new o.Delta).retain(e).insert(t),n)},e.del=function(e,t,n){return void 0===n&&(n=0),l((new o.Delta).retain(e).delete(t),n)},e.ret=function(e,t,n){return void 0===t&&(t=0),l((new o.Delta).retain(e,n),t)},e.res=c,e.unsafeRes=i.flow(c,a.E.unsafeGet),e.resFromText=function(e){return a.E.unsafeGet(c((new o.Delta).insert(e)))},e.flush=function(){return new n},e.isDelta=function(e){return"delta"===e.kind},e.isReset=function(e){return"reset"===e.kind},e.isFlush=function(e){return"flush"===e.kind}}(r=t.Change||(t.Change={})),function(e){e.diffAsChanges=function(e,t){var n=(new o.Delta).insert(e),i=(new o.Delta).insert(t);return r.delta(n.diff(i),e.length)}}(t.Diff||(t.Diff={}))},26696:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Reconnect=void 0;var r=n(59312),i=n(40327),o=n(68511),a=n(81531),s=function(){function e(e){void 0===e&&(e=5*o.DateUtils.MS_IN_MIN),this._windowTime=e,this._count=0}return e.prototype.inc=function(){this._count++,this._startCounter()},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),e.prototype._startCounter=function(){var e=this;this._timer=this._timer||setTimeout((function(){e._timer=void 0,e._count-- >0&&e._startCounter()}),this._windowTime)},e}();!function(e){var t,n;!function(e){e[e.NORMAL_CLOSURE=1e3]="NORMAL_CLOSURE",e[e.GOING_AWAY=1001]="GOING_AWAY",e[e.CLOSED_ABNORMALLY=1006]="CLOSED_ABNORMALLY",e[e.NOT_CONSISTENT=1007]="NOT_CONSISTENT",e[e.VIOLATED_POLICY=1008]="VIOLATED_POLICY",e[e.TOO_BIG=1009]="TOO_BIG",e[e.UNEXPECTED_CONDITION=1011]="UNEXPECTED_CONDITION",e[e.SERVICE_RESTART=1012]="SERVICE_RESTART",e[e.CLIENT_MALFUNCTION=3e3]="CLIENT_MALFUNCTION",e[e.BLOCKED_BY_CLIENT=4e3]="BLOCKED_BY_CLIENT",e[e.UNAUTHORIZED=4001]="UNAUTHORIZED",e[e.SERVER_SHUTDOWN=4002]="SERVER_SHUTDOWN",e[e.NOT_FOUND=4004]="NOT_FOUND",e[e.PRECONDITION_FAILED=4012]="PRECONDITION_FAILED",e[e.TOO_MANY_REQUESTS=4029]="TOO_MANY_REQUESTS",e[e.UNKNOWN_WS_ERROR=-1]="UNKNOWN_WS_ERROR"}(t=e.WsCodes||(e.WsCodes={})),function(e){e.capi="capi",e.dox="dox"}(n=e.ClientType||(e.ClientType={}));e.getIdleReconnect=function(e){var t=a.Monitoring.Logging.getLogger("coreclients."+n[e]+".reconnect",a.Logging.LogLevel.TRACE);return function(n,r){var i={client:e,code:n.code,reason:n.reason,reconnectCounter:r.reconnectCounter};return t.info("skipping reconnect ",i),o.E.right({kind:"idle"})}},e.getDefaultReconnect=function(e,l){var c=this;void 0===l&&(l=5);var u=a.Monitoring.Logging.getLogger("coreclients."+n[e]+".reconnect",a.Logging.LogLevel.TRACE),d=new s;return function(n,a,s){return function(e){return"RUNTIME_ERROR"===e.error.status}(n)&&(u.debug("disconnected because of runtime error"),d.inc()),i.pipe(function(e,n,r,a,s,l){if(void 0===l&&(l="backOffReconnect"),n>10)return o.E.left(new Error("Maximum number (10) of reconnect attempts reached"));switch(e.code){case t.NORMAL_CLOSURE:case t.GOING_AWAY:return i.pipe(s.canGoIdle?"idle":"backOffReconnect",o.E.right);case t.TOO_BIG:return o.E.left(new Error("WS closed because message was too big"));case t.UNEXPECTED_CONDITION:return i.pipe(r>a?"idle":"backOffReconnect",o.E.right);case t.CLOSED_ABNORMALLY:case t.VIOLATED_POLICY:case t.SERVICE_RESTART:case t.SERVER_SHUTDOWN:case t.TOO_MANY_REQUESTS:return o.E.right("backOffReconnect");case t.NOT_FOUND:return o.E.left(new Error("WS closed due to not found error"));case t.UNAUTHORIZED:return o.E.left(new Error("WS closed due to unauthorized error"));case t.CLIENT_MALFUNCTION:case t.BLOCKED_BY_CLIENT:return!s.isStable&&n>1?o.E.left(new Error("Failed to init connection for the second time")):o.E.right("backOffReconnect");case t.NOT_CONSISTENT:return n>1?o.E.left(new Error("Tried to send invalid message for the second time in a row")):o.E.right("backOffReconnect");case t.PRECONDITION_FAILED:return o.E.left(new Error("Precondition failed"));default:return o.E.right(l)}}(n,a.reconnectCounter,d.count,l,s),o.E.chain((function(t){var i,s={client:e,code:n.code,reason:n.reason,reconnectDecision:t,timeout:a.nextDelay,reconnectCounter:a.reconnectCounter};switch(t){case"idle":return u.debug("Skip reconnect, going idle",s),o.E.right({kind:"idle"});case"backOffReconnect":return u.debug("Trying to reconnect",s),o.E.right({kind:"scheduledReconnect",reconnect:(i=a.nextDelay,r.__awaiter(c,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,a.scheduleReconnect(i)];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),u.warn("Reconnect failed due to error ",e),[3,3];case 3:return[2]}}))})))});default:return o.E.left(new Error("unsupported reconnect decision: "+t))}})))}};var l=function(){function e(e,t,n){void 0===e&&(e=o.DateUtils.MS_IN_MIN),void 0===t&&(t=o.DateUtils.MS_IN_SEC),this._maxDelay=e,this._baseDelay=t,this._reconnect=n,this._log=a.Monitoring.Logging.getLogger("coreclients.reconnect.scheduler"),this.prevDelay=0,this._reconnectCounter=0}return Object.defineProperty(e.prototype,"delay",{get:function(){return this.prevDelay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reconnectCounter",{get:function(){return this._reconnectCounter},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this._reconnectCounter=0,this.prevDelay=0},Object.defineProperty(e.prototype,"nextDelay",{get:function(){var t=Math.max(this._baseDelay,this.prevDelay,10),n=e._randomBetween(this._baseDelay,3*t);return Math.min(this._maxDelay,n)},enumerable:!1,configurable:!0}),e._randomBetween=function(e,t){return e+Math.floor(Math.random()*(t-e))},e.prototype.scheduleReconnect=function(e){return void 0===e&&(e=this.nextDelay),r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(n){if(e<0)throw new Error("WebSocket [ERROR]: Negative delay is not allowed: "+e);return 0===e?[2,this.reconnectNow()]:[2,new Promise((function(n,r){t._log.debug("Reconnecting after timeout "+e),t.cancelReconnect(),t._timer=self.setTimeout((function(){return t.reconnectNow().then((function(e){n(e)})).catch((function(e){return r(e)}))}),e),t.prevDelay=e}))]}))}))},e.prototype.reconnectNow=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){if(!this._reconnect)throw new Error("WebSocket [ERROR]: Reconnect is not set, consider setting it before reconnect will be triggered");return this.cancelReconnect(),this._reconnectCounter++,[2,this._reconnect()]}))}))},e.prototype.cancelReconnect=function(){this._timer&&clearTimeout(this._timer)},e}();e.ReconnectSchedulerImpl=l}(t.Reconnect||(t.Reconnect={}))},95302:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCookie=t.ValueRequester=t.ValueNotifier=t.retryWithDelay=t.retry=t.NotReadyError=t.NotConnectedError=t.DroppedError=t.TimeoutError=t.delay=t.assert=t.AssertionError=void 0;var r=n(59312),i=n(35214),o=n(40327),a=n(5986),s=n(43388),l=n(68511),c=n(81531),u=function(e){function t(t,n,r){var i=e.call(this,"AssertionError: "+r)||this;return i.expected=t,i.actual=n,i.name="AssertionError",i}return r.__extends(t,e),t.prototype.toString=function(){return this.message+"\nExpected: "+this.expected+"\nActual: "+this.actual},t}(l.CustomError);t.AssertionError=u,t.assert=function(e,t,n){if(e!==t)throw new u(e,t,n)},t.delay=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))};var d=function(e){function t(t){var n=e.call(this,t||"Timeout")||this;return n.name="TimeoutError",n}return r.__extends(t,e),t.isTimeoutError=function(e){return e instanceof t},t}(l.CustomError);t.TimeoutError=d;var p=function(e){function t(t){var n=e.call(this,t||"Dropped")||this;return n.name="DroppedError",n}return r.__extends(t,e),t.isDroppedError=function(e){return e instanceof t},t}(l.CustomError);t.DroppedError=p;var h=function(e){function t(t){var n=e.call(this,t||"Not Connected to WS")||this;return n.name="NotConnectedError",n}return r.__extends(t,e),t.isNotConnectedError=function(e){return e instanceof t},t}(l.CustomError);t.NotConnectedError=h;var m=function(e){function t(t){var n=e.call(this,t||"Not ready")||this;return n.name="NotReady",n}return r.__extends(t,e),t.isNotReadyError=function(e){return e instanceof t},t}(l.CustomError);function f(e,t){void 0===t&&(t=function(){return!0});var n=i.fold(a.monoidRetryPolicy)(e);return function(e){return s.retrying(n,(function(t){return o.pipe(t.previousDelay,l.O.fold((function(){return e}),(function(n){return o.pipe(g(t.iterNumber,n),l.TE.apSecond(e))})))}),(function(e){return l.E.isLeft(e)&&t(e.left)}))}}t.NotReadyError=m,t.retry=f,t.retryWithDelay=function(e,t,n,r){return void 0===t&&(t=3),void 0===n&&(n=1e3),void 0===r&&(r=function(){return!0}),f([a.constantDelay(n),a.limitRetries(t)],r)(e)};var g=function(e,t){return l.TE.rightIO((function(){return c.Monitoring.Logging.root.getLogger("coreclients.utils").trace("retryWithDelay: count "+e+", timeout: "+t)}))},y=function(){function e(e,t,n){void 0===e&&(e=5e3),void 0===t&&(t=""),void 0===n&&(n=new d),this._timeout=e,this._timeoutError=n,this._notifications=new Map,this._log=c.Monitoring.Logging.getLogger("coreclients.valueNotifier"+(t.length>0?"."+t:""))}return e.prototype.waitFor=function(e,t){var n=this;return function(){return n._startNotificationWatch(e,t)}},e.prototype.notify=function(e){this._stopNotification(e,l.E.right(void 0))},e.prototype.error=function(e,t){this._log.trace("onError:("+e+")"),this._stopNotification(e,l.E.left(t))},e.prototype.clear=function(e){var t=this;this._log.trace("clearing notification watches: "+e),this._notifications.forEach((function(n,r){t.error(r,new p("clearing value notifier and dropping all pending notification watches:"+e))}))},e.prototype._startNotificationWatch=function(e,t){var n=this;this._log.debug("Starting notification watch: "+e),l.invariant(!this._notifications.has(e),"must not start watch for same notification twice, notification already watched: "+e);var r={};return r.promise=new Promise((function(e){r.notifyValue=function(){return e(l.E.right(t))},r.notifyError=function(t){return e(l.E.left(t))}})),r.timer=self.setTimeout((function(){return n._stopNotification(e,l.E.left(n._timeoutError))}),this._timeout),this._notifications.set(e,r),r.promise},e.prototype._stopNotification=function(e,t){this._log.trace("_stopNotification: stopping notification watch: "+e,t);var n=this._notifications.get(e);void 0===n?this._log.error("Got result for unknown notification or notification has already expired.",{id:e,result:t}):(clearTimeout(n.timer),o.pipe(t,l.E.fold((function(e){return n.notifyError(e)}),(function(){return n.notifyValue()}))),this._notifications.delete(e))},e}();t.ValueNotifier=y;var v=function(){function e(e,t,n){void 0===e&&(e=5e3),void 0===t&&(t=""),void 0===n&&(n=new d),this._timeout=e,this._timeoutError=n,this._requests=new Map,this._log=c.Monitoring.Logging.getLogger("coreclients.valueRequester"+(t.length>0?"."+t:""))}return e.prototype.watchRequest=function(e){return this._startRequestWatch(e)},e.prototype.onValue=function(e,t){this._stopRequest(e,l.E.right(t))},e.prototype.onError=function(e,t){this._log.trace("onError:("+e+")"),this._stopRequest(e,l.E.left(t))},e.prototype.clear=function(e){var t=this;this._log.trace("clearing request watches: "+e),this._requests.forEach((function(n,r){t.onError(r,new p("clearing value requester and dropping all pending request watches:"+e))}))},e.prototype._startRequestWatch=function(e){var t=this;this._log.debug("Starting request watch: "+e),l.invariant(!this._requests.has(e),"must not start watch for same request twice, request already watched: "+e);var n={};return n.promise=new Promise((function(e){n.resolve=e})),n.timer=self.setTimeout((function(){return t._stopRequest(e,l.E.left(t._timeoutError))}),this._timeout),this._requests.set(e,n),n.promise},e.prototype._stopRequest=function(e,t){this._log.trace("_stopRequest: stopping request watch: "+e,t);var n=this._requests.get(e);void 0===n?this._log.warn("Got result for unknown request or request has already expired.",{id:e,result:t}):(clearTimeout(n.timer),n.resolve(t),this._requests.delete(e))},e}();t.ValueRequester=v,t.parseCookie=function(e,t){if(!e||!e.get)return l.E.left(new Error("received invalid headers object"));var n=new RegExp("("+t+"=.*?)(?=;)"),r=e.get("set-cookie");if(r){var i=r.match(n),o=i?i[0].split("=")[1].replace('"',""):void 0;return o?l.E.right(o):l.E.left(new Error("cookie "+t+" has empty value"))}return l.E.left(new Error("Got empty set-cookie header"))}},9518:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WSError=t.CloseEventInfo=t.WSCloseReasonImpl=t.WSConnection=t.STMWSConnection=t.SerializingWSConnection=t.WS=t.logPrintln=t.errPrintln=t.Events=t.States=void 0;var r,i,o=n(59312),a=n(40327),s=n(68511),l=n(81531),c=n(15495),u=n(62097),d=n(26696);!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.CLOSED=3]="CLOSED",e[e.ANY=4]="ANY"}(r=t.States||(t.States={})),function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECT=2]="DISCONNECT",e[e.SEND=3]="SEND",e[e.CLOSE=4]="CLOSE"}(i=t.Events||(t.Events={}));t.errPrintln=function(e){l.Monitoring.Logging.getLogger("coreclients.errPrintln").error("WebSocket Error",e)};t.logPrintln=function(e){l.Monitoring.Logging.root.isEnabled(l.Logging.LogLevel.TRACE)&&l.Monitoring.Logging.getLogger("coreclients.errPrintln").trace("WebSocket:",{message:e})};var p=function(){function e(e){var n=this;this._createWSInstance=e,this._log=l.Monitoring.Logging.getLogger("coreclients.ws"),this._ondisconnect=[],this._onconnecting=[],this._onconnect=[],this._onerror=[t.errPrintln],this._onmessage=[],this._read=function(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t&&null!==t)return t}catch(e){}return e},this._write=function(e){return"string"==typeof e?e:JSON.stringify(e)},this._createConnection=function(e){return new h(e,n._write)},this._fsm=new c.StateMachine("ws",r.DISCONNECTED,r.CLOSED).with(r.ANY).parentOf(r.CLOSED,r.CONNECTED,r.CONNECTING,r.DISCONNECTED).from(r.CONNECTING).to(r.CONNECTED).on(i.CONNECTED).from(r.CONNECTED,r.CONNECTING).to(r.DISCONNECTED).on(i.DISCONNECT).from(r.DISCONNECTED).to(r.CONNECTING).on(i.CONNECT).from(r.ANY).to(r.CLOSED).on(i.CLOSE).from(r.CONNECTED).to(r.CONNECTED).on(i.SEND).on(r.CONNECTED,(function(e){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return e.from===r.CONNECTED?[3,2]:[4,Promise.all(this._onconnect.map((function(t){return Promise.resolve(t(e.args))})))];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})).on(r.DISCONNECTED,(function(e){return n._ondisconnect.forEach((function(t){return t(e.args)}))})),this._log.isEnabled(l.Logging.LogLevel.TRACE)&&this._fsm.verbose(r,i)}return e.create=function(t){return void 0===t&&(t=function(e){return new u.BrowserWebSocket(e)}),new e(t)},e.prototype.reader=function(e){return this._read=e,this},e.prototype.writer=function(e){return this._write=e,this},e.prototype.withConnection=function(e){return this._createConnection=e,this},e.prototype.onConnecting=function(e){return this._onconnecting.push(e),this},e.prototype.onConnect=function(e){return this._onconnect.push(e),this},e.prototype.onDisconnect=function(e){return this._ondisconnect.push(e),this},e.prototype.onMessage=function(e){return this._onmessage.push(e),this},e.prototype.onError=function(e){return this._onerror.push(e),this},e.prototype.connect=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return s.invariant(this.isDisconnected(),"can only connect WS that is currently disconnected, was "+r[this._fsm.current]),[2,this._createWebSocket(e,this._fsm)]}))}))},e.prototype.isDisconnected=function(){return this._fsm.is(r.DISCONNECTED)},e.prototype.isConnecting=function(){return this._fsm.is(r.CONNECTING)},e.prototype.isConnected=function(){return this._fsm.is(r.CONNECTED)},e.prototype._createWebSocket=function(e,t){var n=this;return this._log.trace("_createWebSocket("+r[t.current]+")"),t.event(i.CONNECT).then((function(l){return new Promise((function(c,u){if(!l){var p=new y({status:"Unknown",message:"Cannot connect",code:d.Reconnect.WsCodes.UNKNOWN_WS_ERROR,url:e});return t.event(i.DISCONNECT,new g(p)),void u(new Error("\n            WebSocket [ERROR] FSM cannot be switched to CONNECTING state from "+r[t.current]+"\n          "))}n._log.debug("Connecting to "+e),n._onconnecting.forEach((function(e){return e()}));var h,m,v=n._createWSInstance(e),b=(h=1e3,m=s.O.empty(),{scheduleIO:function(e){a.pipe(m,s.O.map(self.clearTimeout)),m=a.pipe(e,s.O.map((function(e){return self.setTimeout(e,h)})))}});function w(e){var n=t.is(r.CONNECTING);t.event(i.DISCONNECT,e),n&&u(e.error)}v.onopen=function(a){return o.__awaiter(n,void 0,void 0,(function(){var n,a,s,p=this;return o.__generator(this,(function(o){switch(o.label){case 0:this._log.debug("Connection to "+e+" opened"),n=new f(t,this._createConnection(v,this._write)),a=void 0,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t.event(i.CONNECTED,n)];case 2:return(l=o.sent())||(a=new Error("WebSocket [ERROR] FSM cannot be switched to CONNECTED state from "+r[t.current])),[3,4];case 3:return s=o.sent(),this._log.warn("WebSocket [ERROR] FSM cannot be switched to CONNECTED state due to error in event handler",s),a=s,[3,4];case 4:return a?(u(a),v.close(d.Reconnect.WsCodes.BLOCKED_BY_CLIENT,"WebSocket lib initialized"),[2]):(v.onmessage=function(e){var t=p._read(e.data);p._onmessage.forEach((function(e){return e(n,t)}))},c(n),[2])}}))}))},v.onclose=function(i){n._log.debug("Connection to "+e+" closed",{code:i.code,reason:i.reason,fsmState:r[t.current]}),b.scheduleIO(s.O.none);var o=new y({status:i.reason,message:"Connection closed: "+i.reason,code:i.code,url:e});w(new g(o))},v.onerror=function(){n._log.debug("Connection to "+e+" errored");var t=new y({status:"ws_error",message:"WebSocket error",url:e}),r=new g(t);b.scheduleIO(s.O.some((function(){try{n._onerror.forEach((function(e){return e(t)}))}catch(e){n._log.error("OnError handler thrown an error",e)}w(r)})))}}))}))},e}();t.WS=p;var h=function(){function e(e,t){this._ws=e,this._serializer=t}return e.prototype.send=function(e){var t=this;return new Promise((function(n){t._ws.send(t._serializer(e)),n()}))},e.prototype.close=function(e){var t=this,n=void 0===e?{}:e,r=n.code,i=void 0===r?d.Reconnect.WsCodes.NORMAL_CLOSURE:r,o=n.reason;return new Promise((function(e){t._ws.close(i,o),e()}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._ws.readyState},enumerable:!1,configurable:!0}),e}();t.SerializingWSConnection=h;var m,f=function(){function e(e,t){this._fsm=e,this._inner=t,this._log=l.Monitoring.Logging.getLogger("coreclients.ws.connection")}return Object.defineProperty(e.prototype,"_ws",{get:function(){return this._inner._ws},enumerable:!1,configurable:!0}),e.prototype.send=function(e){var t=this;return this._fsm.event(i.SEND).then((function(n){if(!n)throw new Error("WebSocket [ERROR]: Trying to send on invalid connection state: "+r[t._fsm.current]);if(t.state!==m.State.OPEN)throw new Error("WebSocket [ERROR]: Trying to send on invalid websocket state: "+m.State[t.state]);return t._inner.send(e)}))},e.prototype.close=function(e){var t=this,n=void 0===e?{}:e,o=n.code,a=void 0===o?d.Reconnect.WsCodes.NORMAL_CLOSURE:o,s=n.reason;return this._fsm.event(i.CLOSE).then((function(e){return e?(t._log.debug("Closing connection",{code:a,reason:s,fsmState:r[t._fsm.current]}),t._inner.close({code:a,reason:s})):(t._log.warn("Tried to close connection which is already closed or closing",{fsmState:r[t._fsm.current]}),Promise.resolve())}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._inner.state},enumerable:!1,configurable:!0}),e}();t.STMWSConnection=f,function(e){!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(e.State||(e.State={}))}(m=t.WSConnection||(t.WSConnection={}));var g=function(){function e(e){this._error=e}return e.prototype.toString=function(){return this._error.message},Object.defineProperty(e.prototype,"code",{get:function(){return this._error.code},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return"WebSocket [CLOSE]: statusCode="+this._error.code+" reason: "+this._error.status},enumerable:!1,configurable:!0}),e}();t.WSCloseReasonImpl=g,function(e){e.is=function(e){return null!=e&&(void 0!==e.code||void 0!==e.reason)}}(t.CloseEventInfo||(t.CloseEventInfo={}));var y=function(e){function t(t){var n=t.code,r=void 0===n?-1:n,i=t.status,o=t.url,a=t.message,s=t.body,l=e.call(this,a)||this;return l.name="WSError",l.url=o,l.code=function(e,t){if(1005===e&&t){var n=t.toLowerCase();return n.indexOf("user not found")>=0?d.Reconnect.WsCodes.UNAUTHORIZED:n.indexOf("cannot find document")>=0?d.Reconnect.WsCodes.NOT_FOUND:n.indexOf("SERVER_SHUTDOWN")>=0?d.Reconnect.WsCodes.SERVER_SHUTDOWN:e}return e}(r,a),l.body=s,l.status=i,l}return o.__extends(t,e),t.prototype.toString=function(){return"Websocket Error\n      Message: "+this.message+"\n      Status: "+this.status+"\n      Code: "+this.code+"\n      Url: "+this.url},t}(s.CustomError);t.WSError=y},76210:(e,t,n)=>{n.r(t),n.d(t,{NIL:()=>O,parse:()=>g,stringify:()=>u,v1:()=>f,v3:()=>I,v4:()=>k,v5:()=>T,validate:()=>s,version:()=>R});var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function o(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}const a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const s=function(e){return"string"==typeof e&&a.test(e)};for(var l=[],c=0;c<256;++c)l.push((c+256).toString(16).substr(1));const u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n};var d,p,h=0,m=0;const f=function(e,t,n){var r=t&&n||0,i=t||new Array(16),a=(e=e||{}).node||d,s=void 0!==e.clockseq?e.clockseq:p;if(null==a||null==s){var l=e.random||(e.rng||o)();null==a&&(a=d=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==s&&(s=p=16383&(l[6]<<8|l[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.nsecs?e.nsecs:m+1,g=c-h+(f-m)/1e4;if(g<0&&void 0===e.clockseq&&(s=s+1&16383),(g<0||c>h)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=c,m=f,p=s;var y=(1e4*(268435455&(c+=122192928e5))+f)%4294967296;i[r++]=y>>>24&255,i[r++]=y>>>16&255,i[r++]=y>>>8&255,i[r++]=255&y;var v=c/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=255&v,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s;for(var b=0;b<6;++b)i[r+b]=a[b];return t||u(i)};const g=function(e){if(!s(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function y(e,t,n){function r(e,r,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=g(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),(a=n(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(var s=0;s<16;++s)i[o+s]=a[s];return i}return u(a)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function v(e){return 14+(e+64>>>9<<4)+1}function b(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function w(e,t,n,r,i,o){return b((a=b(b(t,e),b(r,o)))<<(s=i)|a>>>32-s,n);var a,s}function _(e,t,n,r,i,o,a){return w(t&n|~t&r,e,t,i,o,a)}function C(e,t,n,r,i,o,a){return w(t&r|n&~r,e,t,i,o,a)}function E(e,t,n,r,i,o,a){return w(t^n^r,e,t,i,o,a)}function S(e,t,n,r,i,o,a){return w(n^(t|~r),e,t,i,o,a)}const I=y("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var o=e[i>>5]>>>i%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[v(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=n,l=r,c=i,u=o;n=_(n,r,i,o,e[a],7,-680876936),o=_(o,n,r,i,e[a+1],12,-389564586),i=_(i,o,n,r,e[a+2],17,606105819),r=_(r,i,o,n,e[a+3],22,-1044525330),n=_(n,r,i,o,e[a+4],7,-176418897),o=_(o,n,r,i,e[a+5],12,1200080426),i=_(i,o,n,r,e[a+6],17,-1473231341),r=_(r,i,o,n,e[a+7],22,-45705983),n=_(n,r,i,o,e[a+8],7,1770035416),o=_(o,n,r,i,e[a+9],12,-1958414417),i=_(i,o,n,r,e[a+10],17,-42063),r=_(r,i,o,n,e[a+11],22,-1990404162),n=_(n,r,i,o,e[a+12],7,1804603682),o=_(o,n,r,i,e[a+13],12,-40341101),i=_(i,o,n,r,e[a+14],17,-1502002290),n=C(n,r=_(r,i,o,n,e[a+15],22,1236535329),i,o,e[a+1],5,-165796510),o=C(o,n,r,i,e[a+6],9,-1069501632),i=C(i,o,n,r,e[a+11],14,643717713),r=C(r,i,o,n,e[a],20,-373897302),n=C(n,r,i,o,e[a+5],5,-701558691),o=C(o,n,r,i,e[a+10],9,38016083),i=C(i,o,n,r,e[a+15],14,-660478335),r=C(r,i,o,n,e[a+4],20,-405537848),n=C(n,r,i,o,e[a+9],5,568446438),o=C(o,n,r,i,e[a+14],9,-1019803690),i=C(i,o,n,r,e[a+3],14,-187363961),r=C(r,i,o,n,e[a+8],20,1163531501),n=C(n,r,i,o,e[a+13],5,-1444681467),o=C(o,n,r,i,e[a+2],9,-51403784),i=C(i,o,n,r,e[a+7],14,1735328473),n=E(n,r=C(r,i,o,n,e[a+12],20,-1926607734),i,o,e[a+5],4,-378558),o=E(o,n,r,i,e[a+8],11,-2022574463),i=E(i,o,n,r,e[a+11],16,1839030562),r=E(r,i,o,n,e[a+14],23,-35309556),n=E(n,r,i,o,e[a+1],4,-1530992060),o=E(o,n,r,i,e[a+4],11,1272893353),i=E(i,o,n,r,e[a+7],16,-155497632),r=E(r,i,o,n,e[a+10],23,-1094730640),n=E(n,r,i,o,e[a+13],4,681279174),o=E(o,n,r,i,e[a],11,-358537222),i=E(i,o,n,r,e[a+3],16,-722521979),r=E(r,i,o,n,e[a+6],23,76029189),n=E(n,r,i,o,e[a+9],4,-640364487),o=E(o,n,r,i,e[a+12],11,-421815835),i=E(i,o,n,r,e[a+15],16,530742520),n=S(n,r=E(r,i,o,n,e[a+2],23,-995338651),i,o,e[a],6,-198630844),o=S(o,n,r,i,e[a+7],10,1126891415),i=S(i,o,n,r,e[a+14],15,-1416354905),r=S(r,i,o,n,e[a+5],21,-57434055),n=S(n,r,i,o,e[a+12],6,1700485571),o=S(o,n,r,i,e[a+3],10,-1894986606),i=S(i,o,n,r,e[a+10],15,-1051523),r=S(r,i,o,n,e[a+1],21,-2054922799),n=S(n,r,i,o,e[a+8],6,1873313359),o=S(o,n,r,i,e[a+15],10,-30611744),i=S(i,o,n,r,e[a+6],15,-1560198380),r=S(r,i,o,n,e[a+13],21,1309151649),n=S(n,r,i,o,e[a+4],6,-145523070),o=S(o,n,r,i,e[a+11],10,-1120210379),i=S(i,o,n,r,e[a+2],15,718787259),r=S(r,i,o,n,e[a+9],21,-343485551),n=b(n,s),r=b(r,l),i=b(i,c),o=b(o,u)}return[n,r,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(v(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))}));const k=function(e,t,n){var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return u(r)};function A(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function x(e,t){return e<<t|e>>>32-t}const T=y("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a),l=0;l<a;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=e[64*l+4*u]<<24|e[64*l+4*u+1]<<16|e[64*l+4*u+2]<<8|e[64*l+4*u+3];s[l]=c}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<a;++d){for(var p=new Uint32Array(80),h=0;h<16;++h)p[h]=s[d][h];for(var m=16;m<80;++m)p[m]=x(p[m-3]^p[m-8]^p[m-14]^p[m-16],1);for(var f=n[0],g=n[1],y=n[2],v=n[3],b=n[4],w=0;w<80;++w){var _=Math.floor(w/20),C=x(f,5)+A(_,g,y,v)+b+t[_]+p[w]>>>0;b=v,v=y,y=x(g,30)>>>0,g=f,f=C}n[0]=n[0]+f>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),O="00000000-0000-0000-0000-000000000000";const R=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},12738:(e,t,n)=>{var r;n.d(t,{$:()=>r}),function(e){!function(e){e.echo="echo",e.silent="silent"}(e.Mode||(e.Mode={}))}(r||(r={}))},59443:(e,t,n)=>{n.d(t,{Y1:()=>r,uq:()=>l});var r,i,o,a,s,l,c,u,d=n(73975),p=n(22232),h=n(8125),m=n(51996);!function(e){e.nonEmpty=function(e){return e.length>0},e.isEmpty=function(e){return 0===e.length},e.toTextRange=function(e){return m.SV.create(e.index,e.index+e.length)},e.eq=(0,d.fromEquals)((function(e,t){return e.index===t.index&&e.length===t.length})),e.empty={index:0,length:0}}(r||(r={})),function(e){e.DenaliOtherDocSession="denaliOtherDocSession",e.DenaliSameDocSession="denaliSameDocSession",e.MSOutlook="outlook",e.MSWord="word",e.MSWordOnline="wordOnline",e.MSExcel="excel",e.MSOffice="msoffice",e.ProbablyMSOutlookOnline="probablyMSOutlookOnline",e.GDocs="gdocs",e.GSheets="gsheets",e.ProbablyGMail="probablyGmail",e.CocoaHTMLWriter="cocoaHTMLWriter",e.DropboxPaper="dropbox_paper",e.PlainText="plainText",e.Unknown="unknown",e.Synthetic="synthetic"}(i||(i={})),function(e){e.empty={top:0,bottom:0}}(o||(o={})),function(e){!function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(e.Y||(e.Y={})),function(e){e.left="left",e.middle="middle",e.right="right"}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.X.left:return t.left;case e.X.middle:return t.left+t.width/2;case e.X.right:return t.right;default:return(0,p.vE)(n)}}}}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.Y.top:return t.top;case e.Y.middle:return t.top+t.height/2;case e.Y.bottom:return t.bottom;default:return(0,p.vE)(n)}}}}(e.Y||(e.Y={}))}(a||(a={})),function(e){var t;!function(e){e.textMaybeWithFormatting="text",e.onlyFormatting="formatting"}(t=e.Type||(e.Type={})),e.isTextMaybeWithFormatting=function(e){return e.type===t.textMaybeWithFormatting},e.isOnlyFormatting=function(e){return e.type===t.onlyFormatting}}(s||(s={})),function(e){e.none="none",e.fast="fast",e.initial="initial",e.fake="fake"}(l||(l={})),function(e){var t;!function(e){e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.header1="header1",e.header2="header2",e.bulletList="bulletList",e.dashedList="dashedList",e.orderedList="orderedList",e.link="link"}(t=e.Type||(e.Type={})),e.is=function(e){return(0,h.CI)(t,e)},function(e){e.is=function(e){return void 0!==e[t.link]}}(e.LinkPayload||(e.LinkPayload={}))}(c||(c={})),function(e){e.undo="undo",e.redo="redo",e.cut="cut",e.copy="copy",e.paste="paste",e.selectAll="selectAll"}(u||(u={}))},41046:(e,t,n)=>{n.d(t,{u:()=>r});var r,i=n(27378),o=n(40327),a=n(5114),s=n(83078),l=n(98403),c=n(19751),u=n(85255),d=n(2844),p=n(85089),h=n(2834),m=n(9223);!function(e){e.Manager=({children:t,remSize:n})=>{const r=l.Dx(n).pipe(c.d({refCount:!0,bufferSize:1}));return u.P.useSingleton("RemSize.Manager"),u.P.useSubscriptionTo(r),i.createElement(e.Context.Provider,{value:r},t)},e.DefaultManager=({children:t})=>(u.P.useSingleton("RemSize.DefaultManager"),i.createElement(e.Manager,{remSize:e.withRemSizeEffect(e.defaultSizeObserver)},t)),e.defaultSizeObserver=d.aj(p.Lw("(max-width: 1359px)"),p.Lw("(min-width: 1600px)"),((e,t)=>e?14:t?18:16)),e.withRemSizeEffect=(t,n=e.defaultFontSizeSetter)=>t.pipe(h.b((e=>n(a.some(e)))),m.x(n.bind(null,a.none)),c.d({refCount:!0,bufferSize:1})),e.defaultFontSizeSetter=t=>{e.setRootCssVar(document.documentElement,t),e.setRootFontSize(t)},e.Context=i.createContext(e.defaultSizeObserver),e.setRootCssVar=(e,t)=>{e.style.setProperty("--rem",(0,o.pipe)(t,a.map(String),s.orNull))},e.setRootFontSize=e=>{document.documentElement.style.fontSize=(0,o.pipe)(e,a.map((e=>e+"px")),s.orNull)}}(r||(r={}))},30763:(e,t,n)=>{n.d(t,{m:()=>d});var r,i=n(27378),o=n(88056),a=n(18208),s=n(19429);!function(e){e.ClarityAICard="clarityAiCard",e.CardMute="cardMute",e.MuteQuotedAdvice="muteQuotedAdvice",e.SeenPremiumPreviewUnderlines="seenPremiumPreviewUnderlines",e.BulkAccept="bulkAccept",e.PassiveVoiceCard="passiveVoiceCard"}(r||(r={}));var l=n(2291);const c=s.VF((e=>({hideAssistant:"Hide Assistant",textRemoved:`If you didn’t mean to delete that text, press ${e.commandKeyLabel("Z")} to undo.`,hotkeyLabelR:e.commandKeyLabel("R"),hotkeyLabelC:e.commandKeyLabel("C"),tour:{welcomeNewUserTitle:"Ready to write something brilliant?",welcomeNewUserContent:"The Grammarly Editor helps you turn your\nideas into clear, compelling writing.",welcomeOldUserTitle:"Welcome to the new Grammarly Editor",welcomeOldUserContent:"All the features you love, plus a few new ones, wrapped up in a fresh new look.",startTour:"Start a quick tour",skipTour:"Skip the tour",fastApplyHeader:"Editing made easy",fastApplyDescription:"Get detailed feedback on your\nwriting and apply suggestions\nwith just one click.",assistantHeader:"Become a better writer",assistantDescription:"See your feedback organized into categories that help you identify where your writing is strong and where you can make it stronger.",checkTypesHeader:"Go beyond grammar",checkTypesDescription:"Make your writing clear, compelling, and concise with suggestions customized to your writing goals.",goalsHeader:"Set your goals",goalsDescription:"Adjust Grammarly’s feedback based on your objectives, your target audience, your writing style, and more.",finalTitle:"Enjoy\nthe Grammarly Editor",finalContent:"You’re ready to start writing! You can also copy and paste or upload some existing text to the Grammarly Editor.",startWriting:"Start writing",notReady:e=>i.createElement("span",null,"Not ready? You can return to Grammarly Classic anytime via the ",e," icon")},dunningNotification:{title:e=>`Don’t lose your ${e?"Grammarly Business":"Premium"} features!`,description:e=>`Please update your billing information to avoid losing access to Grammarly ${e?"Business":"Premium"}.`,cta:"Update payment information",secondaryCta:"Later"},confirmUpgradeModal:{title:"Welcome to Premium",content:"Want to learn more about advanced features?",continueWritingCta:e=>e?"Not now, close tab":"Continue writing",learnPremiumCta:"Learn about Premium",closeCta:"Close"},survey:{oldUser:{title:"Share a feedback",content:"Hi! I'm Igor, a product designer at Grammarly.\nPlease, help me find out how the last update of\nthe interface affected your editing experience.",takeSurvey:"Take a survey",remindLater:"Remind me later"},newUser:{title:"Share your feedback",content:"Hi! I’m Igor, a product designer at Grammarly.\nPlease, let me know what you think of Grammarly and how we can improve.",takeSurvey:"Take a survey",remindLater:"Remind me later"},satisfaction:{veryUnsatisfied:"Very dissatisfied",unsatisfied:"Somewhat dissatisfied",neutral:"Neither satisfied nor dissatisfied",satisfied:"Somewhat satisfied",verySatisfied:"Very satisfied"},shareFeedback:"Share feedback",tellUs:i.createElement(i.Fragment,null,"Would you take a moment to tell us"," ",i.createElement("b",null,"how satisfied or dissatisfied you are with the Grammarly Editor?")),thankYou:"Thank you!",more:"We take your responses very seriously. Please, tell us a bit more:",whatsBad:"What do you find frustrating or annoying?",whatsGood:"What do you find most helpful?",proofitPromo:{title:"Thorough Human Proofreading",content:"If you need extra confidence that your text is mistake-free, send it to our team of experienced proofreaders.",actions:{view:"Get Started",close:"Close"}},docx:{didYouKnow:"Did you know?",title:"You can use Grammarly in Microsoft Word!",content:"Get Grammarly’s suggestions while you write\nin Word or Outlook with our free add-in.",download:"Download Grammarly for MS Office",remindLater:"Remind me later"}},performance:{title:"Performance",scoreUnder100:e=>`Text score: ${e} out of 100. This score represents the quality of writing in this document. You can increase it by addressing Grammarly's suggestions.`,score100:"Great job! Your text scores 100 out of 100. This score represents the quality of writing in this document.",notEnoughTextToCalculateStats:"Write away! Grammarly needs at least 30 words to calculate document statistics.",wordCount:"Word count",characters:"Characters",words:"Words",sentence:"Sentence",sentences:"Sentences",readingTime:"Reading time",speakingTime:"Speaking time",readability:"Readability",readabilityScore:"Readability score",vocabulary:"Vocabulary",sectionTitleDescription:"Metrics compared to other Grammarly users",uniqueWords:"Measures vocabulary diversity by calculating\nthe number of unique words.",rareWords:"Measures depth of vocabulary by identifying words that are\nnot among the 5,000 most common English words.",readabilityDescription:"In the Flesch reading-ease test, higher scores\nindicate material that is easier to read.",uniqueWordsTitle:"Unique words",rareWordsTitle:"Rare words",wordLengthTitle:"Word length",sentenceLengthTitle:"Sentence length",notEnoughTextToGenerateReport:"We need at least 30 words to calculate document statistics and generate your report.",belowAverage:"Below average",average:"Average",aboveAverage:"Above average",report:{plagiarismDescription:(e,t)=>`${e}% of your text matches ${t} sources on the web\nor in archives of academic publications`,downloadPdfReport:"Download PDF report",preparingPdfReport:"Preparing PDF report...",readingEase:"reading ease",readingEaseDescription:"Rates the text by the number of years of\neducation needed to understand it",readingEaseMeasure:"grade level",uniqueWordsDescription:"Measures vocabulary diversity by calculating\nthe percentage of words used only once in your\ndocument",wordLengthDescription:"Measures average word length",wordLengthMeasure:"characters per word",sentenceLengthDescription:"Measures average sentence length",sentenceLengthMeasure:"words per sentence"},button:{score:"Overall score",score100:"Great job!",statuses:{calculating:"Calculating...",unavailable:"Text is too short",available:"See performance"}}},sidebar:{content:{premiumIssues:{advancedAlerts:"Advanced issues",foundTitleSingular:{description1:"There is",description2:"advanced issue available only for Premium users."},foundTitlePlural:{description1:"There are",description2:"advanced issues available only for Premium users."}}},openLabel:"start assistant",fixErrorsLabel:"Correct with Assistant",checkingLabel:"Checking…",advancedAlerts:"Advanced suggestions",criticalIssue:e=>a.pluralize(e,"Critical issue","Critical issues"),critical:e=>a.pluralize(e,"Critical","Critical"),advanced:e=>a.pluralize(e,"Advanced","Advanced"),advancedIssue:e=>a.pluralize(e,"Advanced issue","Advanced\nissues"),premium:e=>a.pluralize(e,"Premium","Premium"),free:e=>a.pluralize(e,"Suggestion","Suggestions"),premiumAlertsTitle:"Premium\nsuggestions",allAlerts:"All suggestions",backToAllAlerts:"Back to all suggestions ",seeAlerts:e=>`${e} more ${a.pluralize(e,"suggestion","suggestions")}`,sendToProofreaders:i.createElement(i.Fragment,null,"Get Expert",i.createElement("br",null),"Writing Help")},successLens:{goPremium:"Go Premium",paidView:{title:"No critical issues"},emptyText:{title:"Nothing to check yet",firstLine:"Start writing or upload a document\nto see Grammarly’s feedback."},smallText:{title:"No issues found",firstLine:"Grammarly ran hundreds of checks\non your text and found no writing issues.",secondLine:"Check back in when you’re ready to write some more."},largeText:{title:"No issues found",firstLine:"Grammarly ran hundreds of checks\non your text and found no writing issues."},mutedSuggestions:e=>1===e?`${e} suggestion has been turned off.`:`${e} suggestions have been turned off.`,fixedText:{titles:["You made that look easy!","That’s quite an improvement!","Nothing can stop you now!","You must have been practicing!","Looking good!","Give yourself a pat on the back!","Great job!","Everything’s clear and polished.","To err is human; to edit, divine."]},fixedTextDemoPremium:{title:"Great job!",firstLine:"You’ve got the hang of it now.",secondLine:"Time to write your own masterpiece!"},priorityFirstCheck:{title:"Great job!",firstLine:"No relevant suggestions."}},uploadDropZone:"Drag a text file here to upload",uploadDropZoneTypes:"Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF are welcome",rtfCompatibilityModeNotificationTitle:"Your document’s formatting will be restored upon download.",notificationUploadFileText:"Upload a file in one of the following formats",denaliDocumentUploadNotification:{title:"The document was uploaded successfully",text:"Don’t worry! The previous document has been saved to",link:"My documents"},goals:{title:"Set goals",header:"Get tailored writing suggestions based on your goals and audience.",sections:{audience:{general:e=>i.createElement(i.Fragment,null,i.createElement("b",null,"General",e?" (default)":"",":")," Easy for anyone to read with minimal effort."),knowledgeable:e=>i.createElement(i.Fragment,null,i.createElement("b",null,"Knowledgeable",e?" (default)":"",":")," Requires focus to read and understand."),expert:e=>i.createElement(i.Fragment,null,i.createElement("b",null,"Expert",e?" (default)":"",":")," May require rereading to understand.")},formality:{formal:i.createElement(i.Fragment,null,i.createElement("b",null,"Formal:")," Restricts slang and colloquialisms."),informal:i.createElement(i.Fragment,null,i.createElement("b",null,"Informal:")," Allows slang and other more casual usages."),neutral:i.createElement(i.Fragment,null,i.createElement("b",null,"Neutral (default):")," Restricts slang but allows standard casual expressions.")},domain:{free:"Get customized suggestions for business writing, academic assignments, and more.",academic:i.createElement(i.Fragment,null,i.createElement("b",null,"Academic:")," Strictly applies all rules and formal writing conventions."),business:i.createElement(i.Fragment,null,i.createElement("b",null,"Business:")," Applies almost all rules but allows some informal expressions."),general:i.createElement(i.Fragment,null,i.createElement("b",null,"General (default):")," Applies most rules and conventions with medium strictness."),mail:i.createElement(i.Fragment,null,i.createElement("b",null,"Email: ")," Applies almost all rules, plus email writing conventions."),casual:i.createElement(i.Fragment,null,i.createElement("b",null,"Casual:")," Applies most rules but allows stylistic flexibility."),creative:i.createElement(i.Fragment,null,i.createElement("b",null,"Creative:")," Allows some intentional bending of rules and conventions.")},tone:{experimental:i.createElement(i.Fragment,null,i.createElement("b",null,"Experimental.")," How do you want to sound? This helps us build new suggestions and won't affect your feedback today."),options:{neutral:"😐 Neutral",confident:"🤝 Confident",joyful:"🙂 Joyful",optimistic:"✌️‌Optimistic",friendly:"🤗 Friendly",urgent:"⏰ Urgent",analytical:"📊 Analytical",respectful:"🙌 Respectful"}},intent:{experimental:i.createElement(i.Fragment,null,i.createElement("b",null,"Experimental.")," What are you trying to do? This helps us build new suggestions and won't affect your feedback today."),options:{inform:"Inform",describe:"Describe",convince:"Convince",tellStory:"Tell a Story"}}},footer:{showModalOnStart:i.createElement(i.Fragment,null,"Show ",i.createElement("b",null,"Set Goals")," when I start a new document"),reset:"Reset to defaults"},button:{title:"Goals",subtitle:(e,t,n)=>0===e?"Adjust goals":`${Math.max(e,n)} of ${t} set`}},plagiarism:{webReferenceDescription:"Click to copy reference",publicationReferenceDescription:e=>i.createElement(i.Fragment,null,"Click to copy reference (",e,")"),lensDescription:(e,t,n,r)=>i.createElement("span",null,i.createElement("em",null,e,"%")," of your text matches"," ",i.createElement("em",null,t," ",a.pluralize(t,"fragment","fragments"))," ","from"," ",i.createElement("em",null,n," ",a.pluralize(n,"source","sources"))," ","on the web or in academic databases. Cite them in ",i.createElement(r,{type:"MLA"}),","," ",i.createElement(r,{type:"APA"}),", or ",i.createElement(r,{type:"Chicago"})," format, or in another style you prefer."),percentileDescription:e=>i.createElement(i.Fragment,null,e," of your text matches this source:"),cardDescription:e=>i.createElement("span",null,"Regardless of what subject you're writing for, make a reference using"," ",i.createElement(e,{type:"MLA"}),", ",i.createElement(e,{type:"APA"}),", or"," ",i.createElement(e,{type:"Chicago"})," format, or another style you prefer."),helpIconDescription:(e,t,n)=>`${e}% of your text ${a.pluralize(l.g.prism.reverseGet(e),"matches","match")}  ${t} ${a.pluralize(t,"fragment","fragments")} from\n${n} ${a.pluralize(n,"source","sources")} on the web or in academic databases.`,loadingDescription:"Grammarly compares billions of web pages to your document and alerts you to passages that may need citations.",title:"Plagiarism",description:"Finds unoriginal text by checking against academic databases and over 16 billion web pages.",originalText:i.createElement("span",null,"Looks like your text is 100% original. ",i.createElement("br",null),"We found no matching text in our databases or on the Internet.")},documentActions:{plagiarism:{tooltip:{available:"Plagiarism Check",emptyDocument:"Add text first to check for plagiarism"}},proofit:{tooltip:{available:"Save time with human expertise.",emptyDocument:"Add text first to get expert writing help"}}},documentPerformanceRankText:e=>i.createElement("span",null,"Great job! Your text is expected to ",i.createElement("br",null),"perform ",i.createElement("b",null,"better than ",e,"%")," of comparable ",i.createElement("br",null),"texts written by other Grammarly users."),proofitTitle:"Get Expert Writing Help",proofitDescription:"Our writing experts are ready to check your document right now.",proofitOrderModal:{promo:{stepsNavigation:{howItWorks:"How it works",editingOptions:"Editing options",provideDetails:"Provide details"},step1:{title:"Save Time\nwith Human Expertise",description:"No time to polish your text?\nSend it to our team of writing experts."},step2:{title:"How it works",li1:"Select how fast you’d like your document\nreturned and place your order.",li2:i.createElement(i.Fragment,null,"Our writing experts will fix writing mechanics",i.createElement("br",null),"(like spelling, grammar, and punctuation).",i.createElement("br",null),"If you choose the ",i.createElement("b",null,"Correctness and Clarity"),i.createElement("br",null),"option, they’ll also revise sentences that are",i.createElement("br",null),"unclear or hard to follow."),li3:"We will email you a link to the edited version\nin a DOCX file with all changes marked.",back:"got it"},step3:{header:{correctness:{h1:"Correctness",h2:"Fix errors only"},correctnessClarity:{h1:"Correctness\n& Clarity",h2:"Fix errors and\nimprove clarity"}},spelling:{h1:"Spelling"},grammar:{h1:"Grammar"},punctuation:{h1:"Punctuation"},conciseness:{h1:"Conciseness",h2:"Streamline wordy\nsentences"},preciseness:{h1:"Preciseness",h2:"Clarify vague sentences"},readability:{h1:"Readability",h2:"Make sentences easier\nto follow"}},step4:{title:"Optional: Get better feedback by providing some extra information",nativeLanguage:"Your native language",nativeLanguageDescription:"We‘ll pay special attention to issues that are common among writers with your language background",dialect:"Preferred English dialect",quotationType:"Default quotation marks",quotationTypeSingle:"‘Single’",quotationTypeDouble:"“Double”",spaceType:"Spaces after end punctuation",spaceTypeSingle:"One space",spaceTypeDouble:"Two spaces",choose:"Choose from the list"}},order:{title:"How fast do you need your document returned?",tierBase:"Correctness only",tierClarity:"Correctness and Clarity",tierTitle:"Which option would you like?",helpMeChoose:"Help me choose",warningConfirm:"We won’t charge you until you confirm\nby clicking “Place Order.”",placeOrder:"Place Order",chooseOptions:"Choose from turnaround options to continue",recommended:"recommended",perWord:"per word",paymentWarnings:{payPal:e=>i.createElement("span",null,"By placing an order you authorize a charge of"," ",i.createElement("b",{"data-name":"payment-warning-price"},"$",a.formatPrice(e)),i.createElement("br",null),"to your PayPal account"),creditCard:e=>i.createElement("span",null,"By placing an order you agree that your card ",i.createElement("br",null),"will be charged"," ",i.createElement("b",{"data-name":"payment-warning-price"},"$",a.formatPrice(e))),updateBilling:"Update billing information"}},card:{toProtect:"To protect your security, we ask you to authorize\nthis charge by re-entering payment details\nfor Grammarly.",paymentSuccess:{title:"Success",message:"Your billing information has been updated successfully"},paymentError:{title:"Error",message:e=>i.createElement("span",null,"There is an issue with the payment method you provided. Please review your payment  information and try again or select a different payment method",i.createElement("br",null),"If you need further assistance, please contact our ",i.createElement("a",{href:e,target:"_blank",style:{color:"#fff"}},"Support Team"))}}},proofitSuccessModal:{title:"Your document will be ready by…",description:e=>i.createElement("span",null,"We will email you at ",i.createElement("span",{"data-name":"useremail"},e)," with a link to the corrected version in a DOCX file with all changes marked.")},proofitPayment:{creditCard:"Your card has been declined.",payPal:"Your PayPal account has been declined"},resolve:i.createElement("span",null,"Mark as resolved and",i.createElement("br",null),"hide suggestion"),dismiss:"Dismiss",back:"Back",new:"New",done:"Done",on:"On",off:"Off",card:{less:"Less",more:"Learn more",addToDict:"Add to dictionary",disabledForAnonymous:"Sign in to use this feature",like:"I'll address this",dislike:"Not helpful",wrong:"Incorrect suggestion",mute:"Turn off suggestions like this",offensive:"Offensive content",updatingSuggestion:"Updating suggestion…",or:"or",onboarding:{[r.ClarityAICard]:{title:"Grammarly just got smarter",content:"Grammarly now helps rewrite sentences to make your point clearer."},[r.PassiveVoiceCard]:{title:"Improved passive voice suggestions",content:"Grammarly now helps you rewrite passive voice sentences in the active voice."}},progressBarLabels:{readability:{min:"Hard to read",max:"Easy to read"},sentenceVariety:{min:"Monotonous",max:"Lively"},conciseness:{min:"Cluttered",max:"Concise"}},matchesNavigation:{next:"Next match",prev:"Previous match",currentMatchPosition:(e,t)=>`${e} of ${t}`,numberOfMatches:e=>`${e} ${a.pluralize(e,"match","matches")}`},todoAction:e=>`Click to ${e}`,checking:"Checking...",actionDescription:{setGoals:"Set goals to get tailored writing suggestions",openPreferences:"Open settings"},fluency:{tooltip:"This suggestion is based on your language settings.",cardTitle:"Fluency improvements",cardFooter:(e="multilingual")=>`Common issue for ${e} speakers`},takeaway:{defaultTitle:"Is this your text's main point?",feedback:"Is this your text’s main point?",yes:"Yes",no:"No"},shortenIt:{selectorTooltip:e=>`See ${e} version`,expandEdits:e=>(e?"Expand":"Hide")+" Edits",compressionHint:e=>`${Math.max(l.g.prism.reverseGet(e),1)}% shorter`},smartPhrases:{showMoreIdeas:"Show more ideas",intentDetectedFeedbackYes:"Yes",intentDetectedFeedbackNo:"No",openFeedbackFormQuestion:"Anything we can improve?"},sentenceLevelBrandTones:{helpfulFeedbackQuestion:e=>`Does this sound ${e}?`,helpfulFeedbackYes:"Yes",helpfulFeedbackNo:"No",offBrandBadge:"OFF-BRAND",offBrandCardTitle:"Off-brand",detected:"instance detected"},showChangesToggle:"Highlight changes",muteCitedText:e=>i.createElement(i.Fragment,null,"Don't want Grammarly to check quotes?",i.createElement("br",null),i.createElement("span",null,"Change this in ",e,".")),feedbackForm:{dismissReason:"Why did you dismiss this suggestion?",submit:"Submit",skip:"Skip",error:"Select one of the reasons first"},gapCard:{placeholder:"Who or what…"},mutedAlertCard:{description:e=>i.createElement(i.Fragment,null,"You’ve turned off suggestions related to ",i.createElement("b",null,e),". They won’t appear in any Grammarly apps and extensions until you you turn them back on."),successButtonLabel:"Got it",undoButtonLabel:"Turn back on",settingsLabel:"Manage optional suggestions"}},placeholderRTF:{typeOrPasteText:`Type or paste (${e.commandKeyLabel("V")}) your text here or `,upload:"upload",ending:" a document."},placeholder:{typeOrPasteText:`Type or paste (${e.commandKeyLabel("V")}) your text here. `,upload:"Upload",ending:" a document to save original formatting."},toolbar:{loading:"Loading...",processing:"Processing your document...",backToMyGrammarly:"Back to My Grammarly",signOut:"Sign out",title:{rename:"Rename",untitledDocument:"Untitled document",onboarding:{title:"Add a title",message:"Give your document a name so you can find it later."}},formatting:{head:"Text formatting",bold:"Bold",italic:"Italic",underline:"Underline",header1:"Heading 1",header2:"Heading 2",link:"Link",orderedList:"Numbered list",bulletList:"Bullet list",clear:"Clear formatting",tooltips:{head:"Text formatting",bold:"Bold",italic:"Italic",underline:"Underline",header1:"Heading 1",header2:"Heading 2",link:"Link",orderedList:"Numbered list",bulletList:"Bullet list",clear:"Clear formatting"},links:{apply:"Apply",change:"Change",remove:"Remove",placeholder:"Enter link URL"}}},footer:{word:"word",words:"words",character:"character",characters:"characters",readingTime:"reading time",speakingTime:"speaking time",readabilityScore:"readability score",disabledReadabilityScore:"Readability score — not enough text",rtfCompatibilityInfo:{message:{plainText:"⚠️ Formatting tools are ",textWithTooltip:"disabled"},tooltip:"Your document’s formatting will be restored upon download. To preserve your document’s original formatting, Grammarly’s formatting tools are temporarily disabled.",officeAddinPromo:{part1:"Try ",part2:"Grammarly for MS Office."}}},emogenie:{popup:{title:"Here’s how your text sounds",subtitle:"Which tones did we get right?",actions:{like:"Tone is detected correctly",dislike:"Tone is detected incorrectly"},intensities:{slight:"Slight intensity",moderate:"Moderate intensity",strong:"Strong intensity",veryStrong:"Very strong intensity"},textIsTooShortMessage:"Write away! Grammarly needs at least 30 words to detect your tone."}},vox:{styleGuide:"style guide"},mutedAlerts:{dialogue:{openBtnTooltip:"Manage deactivated suggestions",header:"Deactivated Suggestions",subHeader:"You’ve chosen to turn off the following types of suggestions:",on:"Turn on",off:"Turn back off",suggestions:e=>`${e} ${a.pluralize(e,"suggestion","suggestions")} in this document`,footerSuggestions:e=>`${e} ${a.pluralize(e,"suggestion","suggestions")}  will be turned back on`},onboarding:{cardMute:{description:"You can now deactivate certain types of suggestions (including Oxford commas and passive voice.)",buttonText:"Got it"},dialogue:{description:"Click this icon to manage deactivated suggestions."}}},preferences:{autoJumpToNextAlert:"Auto-jump to the next suggestion",autoScrollToNextAlert:"Auto-scroll to the next suggestion",autoJumpToNextAlertDescription:"When a suggestion is applied or rejected, automatically scroll the text to the next suggestion.",increaseFontSize:"Increase text font size",muteQuotedAlerts:"Don’t check text inside quotes",suggestionManagementDescription:"You can deactivate certain types of suggestions (including Oxford commas and passive voice) or activate them back.",suggestionManagementLink:"Suggestions management"},actions:{select:"Select",close:"Close",gotIt:"Got it"},statuses:{disabled:"Disabled",selected:"Selected",unavailable:"Unavailable"},subscription:{paypal:{description:"You can subscribe to Grammarly with PayPal. Click on the button below to sign in to your Paypal account.",descriptionWhenConnected:"You're already subscribed to Grammarly with PayPal. Click the button below to change your Paypal information."},apple:"Since you purchased your Grammarly Premium subscription through the App Store, please open the Grammarly app on your iOS device to manage your subscription.\nWe're working on a way to bring this functionality to you in our desktop products, but it's not quite ready yet."},desktopUpdate:{softTitle:"New version is available",hardTitle:"Please update to the latest version",soft:"The new version of the Grammarly Editor contains bug fixes and provides a better experience.",hard:"Your current version of the Grammarly Editor is outdated and will not work properly.",reload:"Update",download:"Download the latest version"},undo:"Undo",switchToDenali:"You switched to the new Grammarly Editor for this document.",feedbackSend:"Your feedback has been sent. Thank you!",statisticsError:"Error on requesting document statistics. Please try again later.",referenceCopied:"Reference copied to clipboard",documentCopied:"Document copied to clipboard",downloadDocumentNotFoundError:"Requested document was not found.",isTemporaryDownloadError:"Document wasn't downloaded.\nPlease try again.",freemiumNotifications:{engagement:"Grammarly Premium suggests ways to make your writing more specific, vivid, and interesting to keep your readers engaged.",delivery:"Grammarly’s AI adjusts the level of formality, confidence, friendliness, and more in your writing so you can make the best impression.",plagiarism:"Grammarly compares billions of web pages to your document and alerts you to passages that may need citations."},whatsNew:{title:"What's New?"},fileSizeExceededNotification:{title:"Maximum document size exceeded",body:"Currently, Grammarly can support documents up to 4 MB and 100,000 characters (about 60 pages).\n    Try uploading your file in multiple parts or copying and pasting your text into the editor.",link:"Alternatively, you can install Grammarly for Microsoft Office"},documentSettings:{close:"Close",myGrammarly:"My Grammarly",documentHeader:"DOCUMENT",newDocument:"New document",uploadFile:"Upload file",download:"Download",downloadLabel:"as .docx",print:"Print",template:"Insert Template",editHeader:"EDIT",undo:"Undo",redo:"Redo",cut:"Cut",copy:"Copy",paste:"Paste",selectAll:"Select all",editorSettings:"Editor settings",accountHeader:"ACCOUNT",eduLabel:"EDU",upgradeToPremium:"Upgrade to premium",language:"Language preference",subscription:"Subscription",logout:"Log out",support:"Support",whatsNew:"What's new",feedback:"Send product feedback",switchToClassicEditor:"Back to Classic Editor",privacyPolicy:"Privacy policy",termsOfService:"Terms of service",tooltips:{close:"Close",myGrammarly:"My Grammarly",newDocument:"Create a new document",uploadFile:"Upload a file",download:"Download",print:"Print",undo:"Undo",redo:"Redo",cut:"Cut",copy:"Copy",paste:"Paste",selectAll:"Select all",editorSettings:"Editor settings",upgradeToPremium:"Upgrade to premium",language:"Personal dictionary and dialect",subscription:"Manage your subscription",logout:"Log out",support:"Support",whatsNew:"What's new",feedback:"Send product feedback",switchToClassicEditor:"Back to Classic Editor",privacyPolicy:"Privacy policy",termsOfService:"Terms of service"},onboarding:{title:"Shortcuts and settings",message:"Click to adjust your settings"},supportTitle:"Support and feedback"},hotkeyUnsupported:"This action is unavailable using the menu, but you can still use ",goPremium:"Go Premium",editorSettingsModalHeader:"Editor settings",documentUploaded:{message:"Document successfully uploaded. ",link:"Open document for editing"},documentUploadGeneralError:"Document wasn't uploaded. Please try again.",documentIsEmpty:"The submitted file is empty.",noFileToUpload:"No files to upload!",oneDocumentIsAllowed:"Only one document upload at a time is allowed",tooltipUploadElementInput:"Click here to upload document",goBackToAllAlerts:"Go back to All Suggestions",beta:"Beta",premiumAlertLabel:{tooltip:{includedWithPaid:i.createElement(i.Fragment,null,i.createElement("div",null,"This suggestion is included"),i.createElement("div",null,"with your paid subscription."))},new:"new"},premiumFreeTrial:e=>i.createElement(i.Fragment,null,"This advanced suggestion is included in your"," ",i.createElement("span",{style:{whiteSpace:"nowrap"}},"1-week")," Premium Trial."," ",i.createElement("a",{onClick:e},"Learn More"),"."),freePremiumAlertFooter:{beforeIcon:"Your free",afterIcon:"Premium suggestion"},anonymousUserGenericSignInPrompt:e=>i.createElement(i.Fragment,null,i.createElement("a",{onClick:e},"Sign in")," to get key Grammarly features"),anonymousUserAddToDictionarySignInPrompt:e=>i.createElement(i.Fragment,null,i.createElement("a",{onClick:e},"Sign in")," to start your personalized dictionary"),inlineUpgradeHook:{suggestionIsPartOfPremium:"This suggestion is part of Grammarly Premium.",upgradeToPremium:"UPGRADE TO PREMIUM"},inlineCard:{addToDictionary:"Add to dictionary",dismiss:"Dismiss",seeMore:"See more"},changePlan:{title:e=>`Switch and save over ${e}`,confirmationDescription:(e,t,n,r,o)=>i.createElement(i.Fragment,null,"Your current plan ",e," Plan will update to Annual on"," ",t.toLocaleDateString(),", at which time you will be charged one payment of"," ",n,". Your subscription will automatically renew every ",o," months. You will be charged ",r," on each renewal."),cancelButton:"cancel",confirmationButton:e=>`Switch to ${e} Plan`,promoBadge:e=>`${e} PROMO`,savedBadge:e=>`${e} SAVED`,perYear:"year",perMonth:"mo",successfulNotificationCopy:e=>`You were switched to ${e} Plan`,hook:{title:"Your writing looks great with Grammarly Premium! Keep up the great work!",button:{switchTo:"Switch to Annual Plan ",price:e=>`Save ${e}`,cancel:"Later"}}},review:"Review",news:{bulkAccept:{title:"Accept multiple suggestions at once",body:"Save time by accepting all high-confidence suggestions at once. This will automatically apply any suggestions that other Grammarly users almost always accept."},mutedAlerts:{title:"Turn certain suggestions off",body:"You can now deactivate certain types of suggestions (including Oxford commas and passive voice.)"},proofitClarity:{title:"Expanded options from our expert writing service",body:'Our writing experts now offer a "Correctness and Clarity" option. Select this option when submitting a text and our experts will make sure your writing is concise, precise, and easy to read.'},pdf:{title:"Expanded PDF report now available",body:"Each document’s PDF report now contains the document text and shows Grammarly’s suggestions for all detected writing issues. "},rtf:{title:"Rich text formatting has arrived!",body:"The Grammarly Editor now supports bold, italics, bullet points, and more. The editor can now also preserve rich text formatting in pasted text."},clarity:{title:"Go Beyond Grammar",body:"Streamline your sentences with Grammarly's new clarity suggestions. Blue underlines appear with suggested edits for hard-to-read phrases and sentences."}},priorityLens:{prioritySuggestion:"Top suggestions",allSuggestion:"All suggestions",disabledAllSuggestion:"No additional suggestions",description:"Grammarly prioritizes suggestions based on the context of your writing.",descriptionLink:"goals"},feedModeSelector:{priority:"Top suggestions",priorityDescription:i.createElement(i.Fragment,null,"Prioritize suggestions based on the context ",i.createElement("br",null)," of your writing and your editing history."),all:"All"},waysToUseGrammarly:(e,t,n,r,o,a)=>i.createElement("ul",null,i.createElement("li",null,"In your browser (",i.createElement("a",{href:e,target:"_blank"},"Chrome"),","," ",i.createElement("a",{href:t,target:"_blank"},"Edge"),","," ",i.createElement("a",{href:n,target:"_blank"},"Firefox"),","," ",i.createElement("a",{href:r,target:"_blank"},"Safari"),")"),i.createElement("li",null,i.createElement("a",{href:o,target:"_blank"},"On your phone")," ","(iOS and Android)"),i.createElement("li",null,i.createElement("a",{href:a,target:"_blank"},"On your desktop")),i.createElement("li",null,"In the Grammarly Editor")),premiumOnboardingSurvey:{firstQuestion:{question:"How has your experience with Grammarly been?",answers:{verySatisfied:"Very satisfying",somewhatSatisfied:"Somewhat satisfying",neutral:"Neither satisfying nor dissatisfying",somewhatDissatisfied:"Somewhat dissatisfying",veryDissatisfied:"Very dissatisfying"}},secondSatisfactionQuestion:{question:"Great! Is there anything in particular that you’ve enjoyed?",answers:{plagiarismChecker:"Plagiarism checker",claritySuggestions:"Clarity suggestions",engagementSuggestions:"Engagement suggestions",toneSuggestions:"Delivery suggestions",usingMultipleDevices:"Using Grammarly Premium across devices"},learnMoreLink:"Learn more"},secondDissatisfactionQuestion:{question:"We’re sorry to hear that. What did you have trouble with?",answers:{lowQualitySuggestions:"Low-quality suggestions",poorPlagiarismSuggestions:"Can’t see plagiarism suggestions",noSupportForDesirableApp:"It doesn’t integrate with an app I use",aggressivePremiumPromotion:"It keeps asking me to upgrade",noPremiumSuggestions:"I can’t access Premium suggestions",premiumAndFreeAreIdentical:"The Premium and Free plans feel identical"}},completion:{enjoyment:{header:"Thank you so much for your feedback.",sub:"We hope you continue enjoying Grammarly!"},badExperience:{lowQuality:"Thanks for letting us know. We are constantly working to improve our suggestions. If you click the flag icon on suggestions that are unhelpful, it helps us understand how we can adjust our algorithms to be more accurate.",noPlagiarism:i.createElement(i.Fragment,null,"The plagiarism checker is turned off by default. To check your document for plagiarism, open a document in the Grammarly Editor and then click the Plagiarism button in the"," ",i.createElement("b",null,"lower right corner"),"."),noSupportForDesirableApp:(t,n,r,o,a,s)=>i.createElement(i.Fragment,null,"We’re working hard to be wherever you write, but there are some applications that we don’t yet support. Still, we may have what you’re looking for. Here are a few different ways to access Grammarly:",c(e).waysToUseGrammarly(t,n,r,o,a,s)),possibleMultipleAccounts:"We recommend double-checking to make sure you’re logged into your Premium account. Try visiting app.grammarly.com and look for the Premium label in the upper left corner. If you don’t see it, you may have unintentionally created a second free account."}}},gbSatisfactionSurvey:{firstQuestion:{question:"How has your experience with Grammarly been?",answers:{verySatisfied:"Very satisfying",somewhatSatisfied:"Somewhat satisfying",neutral:"Neither satisfying nor dissatisfying",somewhatDissatisfied:"Somewhat dissatisfying",veryDissatisfied:"Very dissatisfying"}},secondSatisfactionQuestion:{question:"Great! Is there anything in particular that you’ve enjoyed?",answers:{admin:{CreatingStrongCompanyBrand:"Creating a strong company brand",SavingTimeWritingAndEditing:"Saving time writing and editing",CentrallyManagingGrammarlyAccount:"Centrally managing team accounts and billing",FeelingConfidentTheTeamWillSoundPolishedAndProfessional:"Feeling confident the team will sound polished and professional",EnablingTeamToCommunicateWithCustomersEffectively:"Enabling the team to communicate effectively",ImprovingTeamsOverallWritingSkills:"Improving the team's overall writing skills",Other:"Other"},teamMember:{SavingTimeWritingAndEditing:"Saving time writing and editing",SoundingFluentInEnglish:"Sounding fluent in English",SoundingMoreProfessionalAndPolished:"Sounding more professional and polished",ImprovingOverallWritingSkills:"Improving overall writing skills",FeelingConfidentWhenCommunicating:"Feeling confident when communicating",CommunicatingWithCustomersEffectively:"Communicating with customers effectively",Other:"Other"}},learnMoreLink:"Learn more"},secondDissatisfactionQuestion:{question:"We’re sorry to hear that. What did you have trouble with?",answers:{admin:{DoesntIntegrateWithAnAppIUse:"It doesn't integrate with an app the team uses",LowQualitySuggestions:"Low-quality suggestions",FeaturesAreMissing:"The features I expected were missing",TechnicalDifficulties:"Technical difficulties",NotSureWhatGrammarlyBusinessDoes:"I'm still not sure what Grammarly Business does",Other:"Other",DidntFindItValuable:"I didn't find it valuable"},teamMember:{DoesntIntegrateWithAnAppIUse:"It doesn't integrate with an app I use",LowQualitySuggestions:"Low-quality suggestions",FeaturesAreMissing:"The features I expected were missing",TechnicalDifficulties:"Technical difficulties",NotSureWhatGrammarlyBusinessDoes:"I'm still not sure what Grammarly Business does",Other:"Other",DidntFindItValuable:"I didn't find it valuable"}}},thirdSatisfactionQuestion:{title:"Thank you.",question:i.createElement(i.Fragment,null,i.createElement("p",null,"We hope you continue enjoying Grammarly!"),i.createElement("p",null,"Is there anything else you'd like to share about your experience?"))},thirdDissatisfactionQuestion:{admin:{DoesntIntegrateWithAnAppIUse:(t,n,r,o,a,s)=>i.createElement(i.Fragment,null,i.createElement("p",null,"We’re working hard to be wherever you write, but there are some applications that we don’t yet support."),i.createElement("p",null,"Still, we may have what you’re looking for. Here are a few different ways to access Grammarly:"),c(e).waysToUseGrammarly(t,n,r,o,a,s),i.createElement("p",null,"Is there another app you need Grammarly in?")),LowQualitySuggestions:i.createElement(i.Fragment,null,i.createElement("p",null,"Thanks for letting us know. We are constantly working to improve our suggestions. If you click the flag icon on suggestions that are unhelpful, it helps us understand how we can adjust our algorithms to be more accurate."),i.createElement("p",null,"Is there anything else you'd like to share about your experience?")),FeaturesAreMissing:"Thanks for letting us know. Which features did you expect to see?",TechnicalDifficulties:i.createElement(i.Fragment,null,i.createElement("p",null,"Thanks for letting us know. We're here to help!"),i.createElement("p",null,"Please let our support team know about the difficulties you're having here")),NotSureWhatGrammarlyBusinessDoes:"Thanks for letting us know. Grammarly Business can deliver real-time writing suggestions to help everyone on your team compose mistake-free and on-brand writing. Is there anything you need help with?",Other:"Is there anything in particular you found frustrating or annoying?",DidntFindItValuable:{title:"Is there anything in particular you need help with?",answers:{CreatingAStrongCompanyBrand:"Creating a strong company brand",SavingTimeWritingAndEditing:"Saving time writing and editing",CentrallyManagingGrammarlyAccount:"Centrally managing Grammarly account settings, security, and billing",FeelingConfidentTheTeamWillSoundPolished:"Feeling confident the team will sound polished and professional",EnablingTheTeamToCommunicateWithCustomers:"Enabling the team to communicate with customers effectively",ImprovingTheTeamsOverallWritingSkills:"Improving the team's overall writing skills",Other:"Other"}}},teamMember:{DoesntIntegrateWithAnAppIUse:(t,n,r,o,a,s)=>i.createElement(i.Fragment,null,i.createElement("p",null,"We’re working hard to be wherever you write, but there are some applications that we don’t yet support."),i.createElement("p",null,"Still, we may have what you’re looking for. Here are a few different ways to access Grammarly:"),c(e).waysToUseGrammarly(t,n,r,o,a,s),i.createElement("p",null,"Is there another app you need Grammarly in?")),LowQualitySuggestions:i.createElement(i.Fragment,null,i.createElement("p",null,"Thanks for letting us know. We are constantly working to improve our suggestions. If you click the flag icon on suggestions that are unhelpful, it helps us understand how we can adjust our algorithms to be more accurate."),i.createElement("p",null,"Is there anything else you'd like to share about your experience?")),FeaturesAreMissing:"Thanks for letting us know. Which features did you expect to see?",TechnicalDifficulties:i.createElement(i.Fragment,null,"Thanks for letting us know. Can you tell us more about what happened? We'll try to help."),NotSureWhatGrammarlyBusinessDoes:(t,n,r,o,a,s)=>i.createElement(i.Fragment,null,i.createElement("p",null,"Thanks for letting us know. Grammarly helps compose polished, mistake-free writing wherever you write. Here are a few different ways to use Grammarly:"),c(e).waysToUseGrammarly(t,n,r,o,a,s),i.createElement("p",null,"Is there anything else you'd like to share about your experience?")),Other:"Is there anything in particular you found frustrating or annoying?",DidntFindItValuable:{title:"Is there anything in particular you need help with?",answers:{SavingTimeWritingAndEditing:"Saving time writing and editing",SoundingFluentInEnglish:"Sounding fluent in English",SoundingMoreProfessionalAndPolished:"Sounding more professional and polished",ImprovingOverallWritingSkills:"Improving overall writing skills",FeelingConfidentWhenCommunicating:"Feeling confident when communicating",CommunicatingWithCustomersEffectively:"Communicating with customers effectively",Other:"Other"}}}},thankYou:"Thank you so much for your feedback."},bulkAccept:{title:e=>`Accept ${e} suggestions at once`,appliedTitle:e=>`You’ve made ${e} instant corrections`,apply:e=>`Accept all ${e}`,confirm:"Looks good",undoAll:"Undo all"},premiumSuggestions:"Premium suggestions",gbUpHook:{proTipBadge:"Pro Tip",dontShowAgain:"Don't Show Again",dismiss:"Dismiss",smbSpecificProfessionalism:{title:"Give your business a professional edge",description:"Help your team impress customers with clear, professional, and compelling communication.",cta:"Try Grammarly Business for free"},styleGuides:{title:"A strong business needs consistent writing",description:"Grammarly Business helps your team use a consistent voice and style everywhere they write.",cta:"Create a Grammarly Business style guide for free"}},gbVoxLensUpHook:{title:"Style guide",description:"Grammarly Business helps your whole team consistently match your company’s voice and style. Create a style guide with rules specific to your business.",cta:"Try Grammarly Business for free",maybeLater:"Maybe later"},gbEnableVoxLensHook:{title:"Create a company style guide",description:"Let Grammarly Business deliver customized writing feedback to help your team stay on-brand and in your company's voice.",cta:"Create a style guide",maybeLater:"Maybe later"},gbBillingMigration:{title:"Action required: Update your subscription",description:e=>`Your team’s subscription will expire on ${e}. Please add your billing information for uninterrupted access to Grammarly Business.`,cta:"Add Billing Information"},premiumUngatingRenewalNotification:{title:"Your Grammarly Business subscription is about to renew",message:e=>`On ${e}, your free trial of Grammarly Business will end and you'll be charged for a subscription renewal.`,cta:"Manage Your Subscription"},safariExtActivationNotification:{title:"Re-activate Grammarly Today",description:"Due to a recent update, Grammarly for Safari was turned off in your browser. Re-activate it today to enhance your writing across the web!",cta:"Re-activate"},undoCard:{title:"Instantly corrected",confirm:"Looks good",revert:e=>i.createElement(i.Fragment,null,"Revert to ",e)},priorityList:{expand:"More",collapse:"Less",toggleButtonTooltip:e=>(e?"Show":"Hide")+" de-prioritized suggestion (less relevant for this text or those you often dismiss)",hint:"Grammarly de-prioritizes suggestions that are less relevant for this text or those you often dismiss.",successState:{allAlertsHint:"No more relevant suggestions.",outcomesHint:"You’ve addressed the most relevant suggestions.",firstCheckText:"No relevant suggestions."}},synfony:{back:"Back",applyTooltip:"Replace with this word",drilldownTooltip:e=>i.createElement(i.Fragment,null,"Explore alternatives related to"," ",i.createElement("b",null,i.createElement("i",null,e))),onboardingTooltip:"Click the arrow to explore related words"}})));function u(e){return t=>("mac"===e||"ios"===e?"⌘+":"Ctrl+")+t}var d;!function(e){e.holder=c,e.getConfig=function(e){return{commandKeyLabel:u(e)}},e.Context=i.createContext(o.Y.invariantContent("PlatformTextResources"))}(d||(d={}))},62310:(e,t,n)=>{n.d(t,{C:()=>r});var r,i=n(27378),o=n(12187),a=n(90351),s=n(63969),l=n(40219),c=n(94793);!function(e){e.Regular=e=>i.createElement("span",Object.assign({},(0,o.Sh)(m.badge,e.className)),e.children),e.New=({className:t})=>i.createElement(e.Regular,{className:t},"New"),e.NewWrapper=({children:t})=>i.createElement("div",null,i.createElement(e.New,null),t),e.Premium=({className:t})=>i.createElement(e.Regular,Object.assign({},(0,o.Sh)(m.premiumBadge,t)),i.createElement(c.JO.PaidLink,{className:m.premiumBadgeIcon,width:12}),"PREMIUM"),e.Business=({className:t})=>i.createElement(e.Regular,Object.assign({},(0,o.Sh)(t)),"BUSINESS")}(r||(r={}));const u={display:"inline-block",padding:`${s.u.rem(a.Zh.BadgeY)} ${s.u.rem(a.Zh.BadgeX)}`,height:s.u.rem(a.L3.Badge),borderRadius:s.u.rem(l.mA),background:a.Il.CoreGreen10,color:a.Il.CoreGreen70,verticalAlign:"middle",textAlign:"center",textTransform:a._5.Badge,letterSpacing:a.LK.Badge,fontWeight:a.U9.Badge,fontSize:s.u.rem(a.Bf.Badge),lineHeight:s.u.rem(a.L3.Badge)},d={marginRight:a.Zh.BadgeX,maxWidth:s.u.rem(a.L3.Badge),maxHeight:s.u.rem(a.L3.Badge),minWidth:s.u.rem(a.L3.Badge),minHeight:s.u.rem(a.L3.Badge),verticalAlign:"top"},p={background:a.Il.CoreYellow20,color:a.Il.CoreYellow80},h={fill:a.Il.CoreYellow80},m=s.u.stylesheet({badge:[u],badgeIcon:[d],premiumBadge:[u,p],premiumBadgeIcon:[d,h]})},24811:(e,t,n)=>{n.d(t,{B:()=>w,N:()=>_});var r=n(27378),i=n(5739),o=n(12187),a=n(38983),s=n(8125),l=n(90351),c=n(63969),u=n(24588),d=n(40219),p=n(2291),h=n(76974),m=n(2844),f=n(98403),g=n(77176),y=n(93508),v=n(66310),b=n(19751);function w({value:e,initValue:t=p.g.MIN,wrapperClass:n,progressClass:a,isLoading:s=h.of(!1)}){const l=_(e,t);return r.createElement(i.F.div,Object.assign({},(0,o.Sh)(R.wrapper,n)),r.createElement(C,{width:l,progressClass:a,isLoading:s}))}function _(e,t=p.g.MIN){const n=a.h.create(!1);return requestAnimationFrame((()=>requestAnimationFrame((()=>n.set(!0))))),m.aj(f.Dx(e),n,((e,n)=>n?e:t))}function C({width:e,progressClass:t,isLoading:n}){const a=e.pipe(g.U((e=>`${e}%`))),l=e.pipe(g.U(p.g.prism.reverseGet),g.U((e=>e>0?`${e+.75}%`:0)),y.O(0)),c=n.pipe(v.w((e=>e?a:"0"))),u=e.pipe(g.U(p.g.isMin),b.d({bufferSize:1,refCount:!0}));return r.createElement(r.Fragment,null,r.createElement(i.F.div,Object.assign({},(0,o.Sh)(R.borderContainer,u.pipe(g.U((0,s.RN)(R.borderContainerZeroWidth,R.borderContainerWithMinWidth)))),{style:{width:l}})),r.createElement(i.F.div,Object.assign({},(0,o.Sh)(t||R.defaultProgress,R.progressBar,u.pipe(g.U((0,s.RN)(R.progressBarZeroWidth,R.progressBarWithMinWidth)))),{style:{width:a}})),r.createElement(i.F.div,{className:R.loading,style:{width:c}}))}const E=c.u.keyframes({"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"20px 20px"}}),S={position:"relative",width:c.u.percent(100),height:c.u.rem(.25),borderRadius:c.u.rem(d.Jr),backgroundColor:u.xO},I={position:"relative",top:0,height:c.u.percent(100),borderRadius:c.u.rem(d.Jr),backgroundPosition:"center",transition:"width .8s ease-in-out 0s"},k={minWidth:c.u.px(4)},A={position:"absolute",backgroundColor:l.Il.CoreNeutral0},x={minWidth:c.u.px(6)},T={position:"absolute",minWidth:0,backgroundImage:u.b6,backgroundSize:"20px 20px",transition:"none",animation:`${E} 1s linear infinite`},O={backgroundImage:u.Xd},R=c.u.stylesheet({wrapper:[S,S],progressBar:[I],progressBarZeroWidth:[{minWidth:0}],progressBarWithMinWidth:[k],borderContainer:[I,A],borderContainerZeroWidth:[{minWidth:0}],borderContainerWithMinWidth:[x],loading:[I,T],defaultProgress:[O]})},77797:(e,t,n)=>{n.d(t,{Ys:()=>u});var r=n(27378),i=n(5739),o=n(12187),a=n(90351),s=n(63969),l=n(40219);const c=()=>r.createElement("svg",{className:f.svg2,viewBox:"0 0 12 9",width:"12",height:"9",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M1.386 4.115L4.561 7.29l5.81-5.81",stroke:"#FFF",strokeWidth:"2",fill:"none",fillRule:"evenodd",strokeLinecap:"round"})),u=({checked:e,className:t,children:n,name:i})=>r.createElement(d,{checked:e,name:i,className:t,checkedComponent:e=>r.createElement("div",{key:e?"checkbox1":"checkbox2",className:e?f.rectangleFilledBlue:f.rectangle},e&&r.createElement(c,null))},n),d=({checked:e,checkedComponent:t,className:n,children:a,name:s})=>r.createElement(i.F.label,Object.assign({},(0,o.Sh)(f.wrapper,n),{onClick:e=>e.stopPropagation()},s?{"data-name":`${s}-checkbox`}:{}),r.createElement(i.F.input,{type:"checkbox",checked:e,onChange:t=>e.modify((e=>!e)),className:f.inputCheckbox}),e.view(t),r.createElement("div",null,a)),p={display:"flex",marginRight:s.u.rem(.5),paddingTop:s.u.rem(.18),width:s.u.rem(1),height:s.u.rem(1),border:`2px solid ${a.Il.CoreNeutral30}`,borderRadius:s.u.rem(l.mA),backgroundColor:"transparent",alignItems:"center"},h={paddingTop:s.u.rem(.1),borderColor:a.Il.CoreBlue50,borderRadius:s.u.rem(l.mA),backgroundColor:a.Il.CoreBlue50},m={width:s.u.percent(100),height:s.u.percent(100)},f=s.u.stylesheet({wrapper:[{display:"flex",cursor:"default",alignItems:"center",userSelect:"none"}],rectangle:[p],rectangleFilledBlue:[p,h],inputCheckbox:[{margin:0,"-webkit-appearance":"none",appearance:"none"}],svg:[m],svg2:[{margin:"auto"}]})},87380:(e,t,n)=>{n.d(t,{x:()=>r});var r,i=n(27378),o=n(5739),a=n(12187),s=n(19962),l=n(90351),c=n(63969),u=n(24588),d=n(71284),p=n(94793),h=n(42329),m=n(43743),f=n(77176),g=n(98403),y=n(57091),v=n(93508),b=n(2291);!function(e){function t(e){return 0===e?"":e>=1e3?`${Math.min(Math.trunc(e/1e3),9)}k+`:String(e)}const n=({className:e,isChecking:t,type:n,animateFade:r=!0})=>{const{state:s,complete:l}=m.f.fadeOutState(t),c="checking-complete";return i.createElement(o.F.div,Object.assign({},(0,a.Sh)(H.loader,e),{role:"loader"}),r?s.pipe(f.U((e=>"end"===e?i.createElement("div",{key:"checking-complete",className:c}):i.createElement(h.$,{key:"spinner",variation:n,size:"100%",className:"fadeOut"===e?H.fadeOut:void 0,onTransitionEnd:l})))):t.pipe(f.U((e=>e?i.createElement(h.$,{variation:n,size:"100%"}):i.createElement("div",{className:c})))))},r=({name:e,theme:n={},count:r,type:l="white",suffix:c=""})=>{const u=i.useContext(d.a.Context);return i.createElement(o.F.div,Object.assign({},(0,a.Sh)(H.roundCounter,g.ab(l,h.$.getClassName(H)),n.counterWrapper),{role:"counter"}),i.createElement("svg",{viewBox:"0 0 32 32",className:H.circular},i.createElement("g",null,i.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),i.createElement("text",Object.assign({x:"16",y:"17"},s.svgVerticalAlignment(u.has(d.a.Flag.supportsSVGDominantBaseline)),{fontSize:r>=100?14:18,"data-name":e},(0,a.Sh)(x,n.counterContent)),t(r),c))))},l=({name:e,theme:n={},count:r,type:l="white",suffix:c=""})=>{const u=i.useContext(d.a.Context);return i.createElement(o.F.div,Object.assign({},(0,a.Sh)(H.ovalCounter,g.ab(l,h.$.getClassName(H)),n.counterWrapper),{role:"counter"}),i.createElement("svg",{viewBox:"0 0 32 20",className:H.circular},i.createElement("rect",{width:"32",height:"20",rx:"10"}),i.createElement("text",Object.assign({x:"16",y:"10.5"},s.svgVerticalAlignment(u.has(d.a.Flag.supportsSVGDominantBaseline)),{fontSize:11,"data-name":e},(0,a.Sh)(x,n.counterContent)),t(r),c)))};e.Counter=({theme:e={},count:t,type:n="white"})=>{const o=t>=100?l:r;return i.createElement(o,{theme:Object.assign(Object.assign({},e),{counterWrapper:(0,a.Sh)(e.counterWrapper,H.flexCounter).className}),count:t,type:n})},e.OutcomeCounter=({name:e,theme:n={},count:r,type:l="white",suffix:c,fontSize:u=12})=>{const p=i.useContext(d.a.Context);return i.createElement(o.F.div,Object.assign({},(0,a.Sh)(H.outcomeCounter,g.ab(l,h.$.getClassName(H)),n.counterWrapper),{role:"counter"}),i.createElement("svg",{viewBox:"0 0 32 18",className:H.circular},i.createElement("rect",Object.assign({},function(e,t){return t||e>=100?{width:32}:e>=10?{x:4,width:24}:{x:7,width:18}}(r,!!c),{height:18,rx:9})),i.createElement("text",Object.assign({x:"50%",y:"10px"},s.svgVerticalAlignment(p.has(d.a.Flag.supportsSVGDominantBaseline)),{fontSize:u,"data-name":e},(0,a.Sh)(x,n.counterContent)),t(r),c)))},e.MainMeter=({count:e,isChecking:t,className:o})=>{const s=0===e;return i.createElement("div",Object.assign({},(0,a.Sh)(H.meter,o)),i.createElement(n,{isChecking:t,type:s?"green":"red"}),0===e?i.createElement(p.JO.Grammarly,null):i.createElement(r,{count:e,type:"red",name:"toolbar-mistakes"}))},e.LensNavMeter=({count:e,isChecking:t})=>i.createElement("div",{className:H.lensNavMeter},i.createElement(n,{isChecking:t,type:"red"}),i.createElement(r,{count:e,type:"white",name:"toolbar-mistakes"})),e.PlagiarismMeter=({count:e,isChecking:t,className:r})=>i.createElement("div",Object.assign({},(0,a.Sh)(H.plagiarismMeter,r)),i.createElement(n,{isChecking:t,type:"violet",animateFade:!1}),i.createElement(o.F.div,{className:H.wrapper},e.pipe(y.a(t),f.U((([e,t])=>0===e?i.createElement(p.JO.NotificationInfo,{className:H.plagiarismIcon,key:"icon",width:20}):!t&&i.createElement(l,{count:e,type:"violet",key:"value",suffix:i.createElement("tspan",{fontSize:8,dominantBaseline:"center"},"%")}))),v.O(null)))),e.PlagiarismOutcomesMeter=({count:t,isChecking:r,className:s})=>i.createElement("div",Object.assign({},(0,a.Sh)(H.plagiarismMeter,s)),i.createElement(n,{isChecking:r,type:"cyan",animateFade:!1}),i.createElement(o.F.div,{className:H.wrapper},t.pipe(y.a(r),f.U((([t,n])=>b.g.isMin(t)?i.createElement(p.JO.CheckmarkOutcomes,{className:H.plagiarismOutcomeIcon,key:"icon",width:20}):!n&&i.createElement(e.OutcomeCounter,{count:b.g.prism.reverseGet(t),type:"cyan",key:"value",suffix:i.createElement("tspan",{fontSize:11},"%")}))),v.O(null))))}(r||(r={}));const w=1.25,_={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:c.u.percent(100),height:c.u.percent(100)},C={position:"absolute",width:c.u.percent(150),height:c.u.percent(150),transform:"translate(-17%, -17%)"},E={position:"relative",display:"inline-flex"},S={width:c.u.percent(100),height:c.u.percent(100)},I={minWidth:c.u.rem(2),width:c.u.percent(100),height:c.u.rem(w)},k={maxWidth:c.u.rem(2),height:c.u.rem(w)},A="counterText",x=c.u.joinClasses([A,c.u.style({fontWeight:"bold",textAnchor:"middle",fill:l.Il.CoreNeutral0})]),T={fill:u.zh,$nest:{"& .counterText":{fill:u.FW}}},O={fill:l.Il.CoreRed50,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},R={fill:l.Il.CoreGreen50,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},N={fill:l.Il.CoreBlue50,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},L={fill:"transparent",$nest:{"& .counterText":{fill:u.FW}}},P={fill:u.lh,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},M={fill:u.AX,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},D={fill:l.Il.CoreYellow20,$nest:{"& .counterText":{fill:l.Il.CoreYellow80}}},F={fill:l.Il.CoreYellow60,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},B={fill:l.Il.CoreCyan50,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},U={width:c.u.rem(1.5),height:c.u.rem(1.5)},$={margin:`0 ${c.u.rem(.25)}`},j={width:c.u.rem(2),height:c.u.rem(w)},W={margin:`${c.u.rem(-1)} 0`},G={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:l.Il.CoreCyan50}}},q={width:c.u.rem(2),height:c.u.rem(1.125),position:"relative"},H=c.u.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[_],loader:[C],wrapper:[E],roundCounter:[E,S],ovalCounter:[E,I],flexCounter:[E,k],gray:[T],red:[O],green:[R],blue:[N],white:[L],violet:[P],yellow:[M],yellowPremium:[D],orange:[F],cyan:[B],meter:[E,U],lensNavMeter:[E,U,$],plagiarismMeter:[E,j],plagiarismIcon:[W],plagiarismOutcomeIcon:[W,G],outcomeCounter:[E,{position:"absolute",left:0},q]})},29245:(e,t,n)=>{n.d(t,{d:()=>l});var r=n(27378),i=n(34685),o=n(63969);const a=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function s(e,t=c.emoji){return`<img alt="${e}" class="${t}" src="${function(e){return i.gK+function(e){return e.length<4?e.codePointAt(0).toString(16):e.codePointAt(0).toString(16)+"-"+e.codePointAt(2).toString(16)}(e)+".svg"}(e)}" onerror="this.replaceWith(this.alt)" draggable="false" />`}const l=({children:e,emojiClassName:t,className:n})=>{const i=r.useCallback((e=>{null!==e&&(e.innerHTML=e.innerHTML.replace(a,(e=>s(e,t))))}),[e]);return r.createElement("span",{ref:i,className:n},e)},c=o.u.stylesheet({emoji:[{display:"inline",marginRight:".25em",width:"1em",verticalAlign:"sub",lineHeight:1,transform:"scale(1.25)",transformOrigin:"bottom",userSelect:"none"}]})},49313:(e,t,n)=>{n.d(t,{u_:()=>ne,aV:()=>ee,ay:()=>te});var r=n(27378),i=n(57050),o=n(38983),a=n(5739),s=n(12187),l=n(25781),c=n(22232),u=n(90351),d=n(63969),p=n(24588),h=n(40219),m=n(7046),f=n(94793),g=n(29909),y=n(84347),v=n(81531),b=n(46680),w=n(85089),_=n(98403),C=n(10061),E=n(66081),S=n(66310),I=n(77176),k=n(67434),A=n(24209),x=n(49708),T=n(17343),O=n(28043),R=n(93508),N=n(95300),L=n(85985),P=n(2834),M=n(12126),D=n(2844),F=n(76974),B=n(13444),U=n(55935),$=n(55721);const j=(e,t)=>({transition:`background-color ${d.u.seconds(e)} linear ${d.u.seconds(t)}, opacity ${e} linear ${t}`}),W=()=>Object.assign(Object.assign({},j(.1,0)),{position:"absolute",display:"none",opacity:0}),G=(e,t)=>({transition:`background-color ${d.u.seconds(e)} linear ${d.u.seconds(t)}, height ${d.u.seconds(e)} linear ${d.u.seconds(t)}, width ${d.u.seconds(e)} ease-in-out ${d.u.seconds(t)}, border-radius ${d.u.seconds(e)} ease-in-out ${d.u.seconds(t)}`}),q=()=>Object.assign(Object.assign({},G(.1,0)),{position:"absolute",borderRadius:d.u.px(6),backgroundColor:"#3a3a3a"}),H=()=>({$nest:{"&.ps--in-scrolling":{$nest:{"&.ps--x > .ps__scrollbar-x-rail":Object.assign(Object.assign({},{backgroundColor:"#eee",opacity:.9}),{$nest:{"& > .ps__scrollbar-x":Object.assign(Object.assign({},{backgroundColor:"#7d7c7c"}),{height:d.u.px(11)})}}),"&.ps--y > .ps__scrollbar-y-rail":Object.assign(Object.assign({},{backgroundColor:"#eee",opacity:.9}),{$nest:{"& > .ps__scrollbar-y":Object.assign(Object.assign({},{backgroundColor:"#7d7c7c"}),{width:d.u.px(11)})}})}}}});d.u.cssRule(".ps",{overflow:d.u.important("hidden"),"-ms-touch-action":"auto",touchAction:"auto","-ms-overflow-style":"none",$nest:Object.assign(Object.assign({},H().$nest),{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{overflow:d.u.important("auto")},"@supports (-ms-overflow-style: none)":{overflow:d.u.important("auto")},"&.ps--active-x > .ps__scrollbar-x-rail, &.ps--active-y > .ps__scrollbar-y-rail":{display:"block",backgroundColor:"transparent"},"& > .ps__scrollbar-x-rail":Object.assign(Object.assign({},W()),{bottom:d.u.px(0),height:d.u.px(15),$nest:{"& > .ps__scrollbar-x":Object.assign(Object.assign({},q()),{bottom:d.u.px(2),height:d.u.px(6)}),"&:hover, &:active":{$nest:{"& > .ps__scrollbar-x":{height:d.u.px(11)}}}}}),"& > .ps__scrollbar-y-rail":Object.assign(Object.assign({},W()),{right:d.u.px(0),width:d.u.px(15),$nest:{"& > .ps__scrollbar-y":Object.assign(Object.assign({},q()),{right:d.u.px(2),width:d.u.px(7)}),"&:hover, &:active":{$nest:{"& > .ps__scrollbar-y":{width:d.u.px(11)}}}}})})},{$nest:{"& .ps__scrollbar-x-rail, & .ps__scrollbar-y-rail":{zIndex:h.$n,pointerEvents:"all"},"& .ps__scrollbar-x-rail":{display:d.u.important("none")},"&.ps-hidden":{$nest:{"&.ps--active-x > .ps__scrollbar-x-rail":{display:"none"},"&.ps--active-y > .ps__scrollbar-y-rail":{display:"none"}}},"&.ps-visible > .ps__scrollbar-y-rail":{opacity:.6},"&.ps-hovered":{$nest:Object.assign(Object.assign({},H().$nest),{"& > .ps__scrollbar-x-rail":{opacity:.6},"& > .ps__scrollbar-y-rail":{opacity:.6},"& > .ps__scrollbar-x-rail:hover":Object.assign(Object.assign({},{backgroundColor:"#eee",opacity:.9}),j(.2,.2)),"& > .ps__scrollbar-x":Object.assign(Object.assign({},{backgroundColor:"#eee",opacity:.9}),G(.2,.2)),"& > .ps__scrollbar-y-rail:hover":Object.assign(Object.assign({},{backgroundColor:"#eee",opacity:.9}),j(.2,.2)),"& > .ps__scrollbar-y":Object.assign(Object.assign({},{backgroundColor:"#eee",opacity:.9}),G(.2,.2))})},"&.ps-fast-transition":{$nest:{"& > .ps__scrollbar-x-rail, & > .ps__scrollbar-y-rail":Object.assign(Object.assign({},j(.05,0)),{$nest:{"& > .ps__scrollbar-x":Object.assign({},G(.05,0)),"& > .ps__scrollbar-y":Object.assign({},G(.05,0))}})}}}});class z extends r.Component{constructor(){super(...arguments),this._subs=[],this._classes={hidden:"ps-hidden",visible:"ps-hovered",fastTransition:"ps-fast-transition"},this._mount=e=>{this._el=e,this.props.onMount&&e&&this.props.onMount(e)},this._update=()=>{requestAnimationFrame((()=>{this._el&&y.update(this._el)}))}}componentDidMount(){const{name:e,update:t,showWhenScrollable:n,scrollTo:r,className:i}=this.props,o=this._el;y.initialize(o,{suppressScrollX:!0,minScrollbarLength:40,handlers:["click-rail","drag-scrollbar","keyboard","passiveWheel","touch"]}),this._update(),this._subs.push(...V.customize(o,{name:e,showWhenScrollable:n||!1,classes:this._classes})),this._subs.push(w.YC(this._el).pipe(E.e(200)).subscribe(this._update)),t&&this._subs.push(t.subscribe(this._update)),r&&this._subs.push(r.pipe(S.w(_.b2.rafScheduler)).subscribe((e=>{o.scrollTop=e,this._update()}))),i&&this._subs.push(_.Dx(i).pipe(I.U((e=>e?e.split(" "):[])),k.R(((e,t)=>(e&&o.classList.remove(...e),t&&o.classList.add(...t),t)),[])).subscribe())}componentWillUnmount(){y.destroy(this._el),this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}shouldComponentUpdate(){return!1}render(){const{children:e,onScroll:t,name:n,showWhenScrollable:i}=this.props;return r.createElement(a.F.div,Object.assign({},(0,s.Sh)(i&&this._classes.visible),{onScroll:t?()=>t.next():void 0,mount:this._mount,role:`scrollbar-${n}`}),e)}}var V,Y;!function(e){const t=["mousewheel","DOMMouseScroll","wheel","touchmove"];e.customize=(e,{name:n,showWhenScrollable:r,classes:i})=>{const o=v.Monitoring.Logging.getLogger(`scrollBarY.${n}`,b.LogLevel.DEBUG),a=e.querySelector(".ps__scrollbar-y"),s=e.querySelector(".ps__scrollbar-y-rail"),l=A.T(x.R(e,"mouseenter",{passive:!0}).pipe(T.h(!0)),x.R(e,"mouseleave",{passive:!0}).pipe(T.h(!1))).pipe(O.x(),R.O(!1)),u=A.T(x.R(s,"mouseenter",{passive:!0}).pipe(T.h(!0)),x.R(s,"mouseleave",{passive:!0}).pipe(T.h(!1))).pipe(O.x(),R.O(!1)),d=A.T(x.R(a,"mousedown",{passive:!0}).pipe(T.h(!0)),x.R(document,"mouseup",{passive:!0}).pipe(T.h(!1))).pipe(R.O(!1)),p=new N.X(!1),h=A.T(x.R(document,"paste",{passive:!0}),x.R(document,"mousedown",{passive:!0}).pipe(L.h((e=>{const t=e.target;return t!==a&&t!==s})),P.b((e=>o.trace("force hide event",e))))).pipe(S.w((()=>M.D([!0,!1]))),R.O(!1));return[A.T(...t.map((t=>x.R(e,t).pipe(I.U((e=>(e.preventDefault(),e.stopPropagation(),!0))))))).subscribe(p),D.aj(l,d,u,h).pipe(L.h((()=>!r)),S.w((([e,t,n,r])=>r?F.of("forceHide"):t||n?n&&!t?F.of("show").pipe(B.g(600)):F.of("show"):e?A.T(p.pipe(U.T(1),$.p(100),T.h("show")),p.pipe(T.h("hide"),$.p(100),S.w((()=>F.of("hide").pipe(B.g(600)))))):F.of("hide").pipe(B.g(600)))),O.x()).subscribe((t=>{switch(C.c.emit(t),o.trace("new scroll action",{action:t}),t){case"show":e.classList.remove(i.hidden,i.fastTransition),e.classList.add(i.visible);break;case"hide":e.classList.remove(i.visible);break;case"forceHide":e.classList.remove(i.visible),e.classList.add(i.fastTransition);break;default:(0,c.vE)(t)}return t}))]}}(V||(V={})),function(e){function t(e){let t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.deltaX/6,n=e.deltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.deltaY),[t,n]}e.verticalScrollByWhellEvent=e=>x.R(e,"wheel",{passive:!0}).pipe(I.U(t),I.U(g.Yg),P.b((t=>e.scrollTop-=t)))}(Y||(Y={}));var X=n(43743),J=n(28706),Z=n(85255),K=n(60797),Q=n(40151);class ee extends r.Component{constructor(){super(...arguments),this._overlayIndex=ee._index++,this._subs=[],this._visibilityState=o.h.create("hidden")}componentDidMount(){this._visibilityState.set(this.props.visible.get()?"visible":"hidden"),this._subs.push(this._visibilityState.pipe(I.U((e=>"visible"===e)),O.x()).subscribe((e=>ee._activeOverlays.modify((t=>{const n=new Set(t);return e?n.add(this._overlayIndex):n.delete(this._overlayIndex),n})))),this.props.visible.pipe(U.T(1)).subscribe((e=>{const t=this.props.animate?"fadeOut":"hidden";this._visibilityState.set(e?"visible":t)}))),this._subs.push(this._visibilityState.pipe(S.w((e=>"visible"===e?x.R(document,"keydown"):Q.E)),L.h((e=>e.keyCode===l.R.ESC_CODE))).subscribe((()=>{this.props.preventClose||this.props.visible.set(!1),this.props.onClose&&this.props.onClose()})))}componentWillUnmount(){ee._activeOverlays.modify((e=>{const t=new Set(e);return t.delete(this._overlayIndex),t})),this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}render(){return r.createElement(a.F.Fragment,null,this._visibilityState.view((e=>{switch(e){case"visible":case"fadeOut":return r.createElement(a.F.div,Object.assign({role:"overlay-wrapper"},(0,s.Sh)(this.props.animate?this._getAnimatedTypeClass(e):this._getTypeClass(e),this._getPositionType(this.props.positionType)),{onClick:()=>{this.props.preventClose||this.props.visible.set(!1),this.props.onClose&&this.props.onClose()},onTransitionEnd:()=>{"fadeOut"===e&&this._visibilityState.set("hidden")}}),r.createElement(a.F.div,Object.assign({},(0,s.Sh)(this.props.animate&&this._getContentClass(e))),r.createElement("div",{className:ve.scroll,role:"scrollbar-modal"},r.createElement(a.F.div,Object.assign({},(0,s.Sh)(this._getAlignmentClass(),this._getSmallResolutionClass())),this.props.children))));case"hidden":return null;default:return(0,c.vE)(e)}})))}_getSmallResolutionClass(){switch(this.props.smallResolution){case"resize":return ve.wrapperResize;case"cut":default:return""}}_getAlignmentClass(){switch(this.props.alignment){case"top-center":return ve.wrapperTopCenter;case"bottom-right":return ve.wrapperBottomRight;case"none":return"";case"center":default:return ve.wrapperCenter}}_getTypeClass(e){if("visible"!==e)return ve.wrapperTransparent;switch(this.props.overlayType){case"light":return ve.wrapperLight;case"transparent":return ve.wrapperTransparent;case"dark":default:return ve.wrapperDark}}_getPositionType(e){switch(e){case"absolute":return ve.wrapperAbsolute;case"fixed":return ve.wrapperFixed;default:return(0,c.vE)(e)}}_getAnimatedTypeClass(e){const t="visible"===e;switch(this.props.overlayType){case"light":return X.f.rafSequence(t?[ve.wrapperTransparent,ve.wrapperLight]:[ve.wrapperLight,ve.wrapperTransparent],!0);case"transparent":return F.of(ve.wrapperTransparent);case"dark":default:return X.f.rafSequence(t?[ve.wrapperTransparent,ve.wrapperDark]:[ve.wrapperDark,ve.wrapperTransparent],!0)}}_getContentClass(e){const{contentFaded:t,content:n}=this.props.theme||ve,r="visible"===e?[t,n]:[n,t];return X.f.rafSequence(r,!0)}}ee.defaultProps={visible:o.h.create(!0)},ee._activeOverlays=o.h.create(new Set),ee.activeCount=ee._activeOverlays.view((e=>e.size)),ee._index=0;const te=e=>r.createElement(ee,Object.assign({},e,{visible:o.h.create(!0),preventClose:!1}),e.children);function ne({children:e,className:t,close:n}){return r.createElement(a.F.div,Object.assign({},(0,s.Sh)(ve.modal,t),{onClick:J.UW(i.constVoid)}),e,n?r.createElement("div",{className:ve.closeIconButtonContainer},r.createElement(m.zx,{name:"modal-close",onClick:n},r.createElement(f.JO.Close,{className:ve.closeIcon,width:13}))):null)}!function(e){e.Header=({children:e,className:t})=>r.createElement(a.F.header,Object.assign({},(0,s.Sh)(ve.header,t)),e),e.Body=({children:e,className:t,wrapperClassName:n,name:i})=>{const{ref:o,onMount:l}=Z.P.useElWatcher();return r.createElement(z,Object.assign({name:i},(0,s.Sh)(ve.scrollBody,n),{showWhenScrollable:!0,update:o.pipe(K.oA,S.w(w.YC),T.h(_.PU))}),r.createElement(a.F.div,Object.assign({},(0,s.Sh)(ve.body,t),{mount:l}),e))},e.Footer=({children:e,className:t})=>r.createElement(a.F.div,Object.assign({},(0,s.Sh)(ve.footer,t))," ",e," ")}(ne||(ne={}));const re={top:0,left:0,display:"flex",flexDirection:"column",overflow:"hidden",width:d.u.percent(100),height:d.u.percent(100),transition:`background ${d.u.seconds(.2)}`,pointerEvents:"auto"},ie={position:"fixed",zIndex:h.DY},oe={margin:`${d.u.rem(-.5)} auto auto`},ae={background:"rgba(255, 255, 255, .7)"},se={background:"rgba(100, 107, 131, .4)"},le={position:"absolute",top:d.u.rem(.5),right:d.u.rem(.5)},ce={stroke:p.FW},ue={position:"relative",display:"flex",flexDirection:"column",overflow:"hidden",maxHeight:"90vh",borderRadius:d.u.rem(h.Jr),boxShadow:p.Re},de={position:"relative",overflow:"hidden",padding:`${d.u.rem(2.5)} ${d.u.rem(2)} ${d.u.rem(1)}`,borderTopLeftRadius:d.u.rem(h.Jr),borderTopRightRadius:d.u.rem(h.Jr),backgroundColor:u.Il.CoreNeutral1},pe={position:"absolute",top:d.u.px(10),right:"@top"},he={padding:d.u.rem(2),backgroundColor:u.Il.CoreNeutral0},me={display:"flex",padding:`0 ${d.u.rem(2)}`,height:d.u.rem(4),border:"0 solid transparent",borderWidth:"0 1px",borderBottomRightRadius:d.u.rem(h.Jr),borderBottomLeftRadius:d.u.rem(h.Jr),backgroundColor:u.Il.CoreNeutral1,alignItems:"center",justifyContent:"flex-end",$nest:{"& > *:not(:last-child)":{marginRight:d.u.rem(.5)}}},fe={transitionDuration:d.u.seconds(.2),transitionProperty:"opacity, transform",transformOrigin:"center"},ge={position:"relative",display:"flex",padding:`${d.u.rem(.5)} 0`,width:"100vw",height:"100vh"},ye={$nest:{[`@media (${h.pZ})`]:{margin:`${d.u.rem(2)} auto auto`}}},ve=d.u.prefixedStylesheet("modal",{wrapper:[re],wrapperFixed:[ie],wrapperAbsolute:[{position:"absolute"}],wrapperTopCenter:[oe],wrapperBottomRight:[{margin:"auto 0 0 auto"}],wrapperCenter:[{margin:"auto"}],wrapperLight:[re,ae],wrapperDark:[re,se],wrapperTransparent:[re,{overflow:"hidden",background:"transparent"}],closeIconButtonContainer:[le],closeIcon:[ce],modal:[ue],header:[de],closeBtn:[pe],body:[he],scrollBody:[{position:"relative",flexGrow:1}],footer:[me],contentBase:[fe],contentFaded:[fe,{opacity:0,transform:"scale(.8)"}],content:[fe,{opacity:1,transform:"none"}],scroll:[ge],wrapperResize:[ye]})},81301:(e,t,n)=>{n.d(t,{dC:()=>r,Iy:()=>i,EQ:()=>f});var r,i,o,a=n(57050),s=n(38983),l=n(5114),c=n(66310),u=n(18625),d=n(95300),p=n(76974),h=n(2834),m=n(40151);!function(e){e.SetGoals="SetGoals",e.Performance="Performance"}(r||(r={})),function(e){e.setGoals=e=>({type:r.SetGoals,source:e}),e.performance={type:r.Performance}}(i||(i={}));class f{constructor(e){this._modalViews=e,this.state=s.h.create(l.none),this._modalFactoryCache=new Map}show(e){return this.preload(e).pipe(c.w((e=>this.showPreloaded(e))))}showPreloaded(e){return u.P((()=>{const t=new d.X("opened");return this.state.set(l.some(e({onClose:()=>{this.state.set(l.none),t.next("closed"),t.complete()}}))),t}))}preload(e){const t=JSON.stringify(e);if(this._modalFactoryCache.has(t)){const e=this._modalFactoryCache.get(t);return p.of(e)}return u.P((()=>this._modalViews.load(e))).pipe(h.b((e=>{this._modalFactoryCache.set(t,e)})))}hideAll(){this.state.set(l.none)}}!function(e){e.Mock=class{constructor(){this.state=s.h.create(l.none),this.hideAll=a.constVoid}show(e){return m.E}showPreloaded(e){return m.E}preload(e){return m.E}}}(o||(o={}))},47861:(e,t,n)=>{n.d(t,{i:()=>f});var r=n(27378);if(75==n.j)var i=n(5739);if(75==n.j)var o=n(8125);var a=n(63969),s=n(40219);if(75==n.j)var l=n(49313);if(75==n.j)var c=n(2844);if(75==n.j)var u=n(28043);if(75==n.j)var d=n(77176);if(75==n.j)var p=n(14522);if(75==n.j)var h=n(5802);if(75==n.j)var m=n(50790);const f=({manager:e,views:t,onNotificationClose:n=o.ZT,theme:a={}})=>{const s=function(e,t,n={}){return i=>{const o=e[i.type],a=e=>()=>{i.actions.next(e)};return i.metadata.viewType===h.P.ViewType.standard?r.createElement(m.DI.Wrapper,{key:i.id,notification:i,onClose:()=>{i.actions.next("closedByUser"),t(i)},theme:n},o(i,a)):r.createElement(r.Fragment,{key:i.id},o(i,a))}}(t,n,a.view),f=void 0!==a.grid?Object.assign({},E,a.grid):E,y=e.state.view((e=>e.filter(g(h.P.Position.bottomLeft)))),v=e.state.view((e=>e.filter(g(h.P.Position.bottomRight)))),b=e.state.view((e=>e.filter(g(h.P.Position.top))));return r.createElement(i.F.div,{className:f.container},c.aj(b,v,b,(e=>e.some(p._.isHighPriority))).pipe(u.x(),d.U((e=>e&&r.createElement("div",{className:f.overlay},r.createElement(l.aV,{positionType:"absolute",key:"notificationOverlay",preventClose:!0,overlayType:"light",alignment:"top-center",animate:!0,theme:{content:C.overlayContent,contentFaded:C.overlayContentFaded}}))))),r.createElement(i.F.div,{className:f.bottomLeft},y.view((e=>e.map(s)))),r.createElement(i.F.div,{className:f.bottomRight},v.view((e=>e.map(s)))),r.createElement(i.F.div,{className:f.top},b.view((e=>e.map(s)))))};function g(e){return t=>t.metadata.position===e}const y={position:"fixed",top:0,left:0,zIndex:s.nt,width:a.u.percent(100),height:a.u.percent(100),pointerEvents:"none"},v={position:"absolute",zIndex:s.nt,display:"flex",flexDirection:"column",width:a.u.rem(27),pointerEvents:"auto",alignItems:"flex-end"},b={right:a.u.rem(s.Ig),bottom:a.u.rem(1.5)},w={bottom:a.u.rem(1.5),left:a.u.rem(2)},_={transition:"transform .1s",transformOrigin:"center"},C=a.u.stylesheet({notificationContainer:[y],notificationWrapper:[v],bottomRightNotificationWrapper:[v,b],bottomLeftNotificationWrapper:[v,w],topNotificationWrapper:[v,{top:0,right:0,left:0,margin:"0 auto"}],overlayContentBase:[_],overlayContent:[_,{transform:"none"}],overlayContentFaded:[_,{transform:"scale(.95)"}]}),E={container:C.notificationContainer,bottomLeft:C.bottomLeftNotificationWrapper,bottomRight:C.bottomRightNotificationWrapper,top:C.topNotificationWrapper}},41966:(e,t,n)=>{n.d(t,{r:()=>r});var r,i=n(32952);!function(e){e.createBuilder=function(){return{build:(e,n)=>{const r=t();return{make:(t,o)=>({metadata:e,data:n,args:o,id:r,type:t,actions:new i.xQ})}}}};const t=(()=>{let e=1;return()=>e++})()}(r||(r={}))},14522:(e,t,n)=>{n.d(t,{_:()=>r});var r,i=n(5802);!function(e){e.isHighPriority=function(e){return e.metadata.priority>i.P.Priority.average},e.isCloseAction=function(e){return"timeout"===e||"closedByUser"===e||"closedByNotificationWithMorePriority"===e||"closedByMaxNotificationOnScreen"===e}}(r||(r={}))},61813:(e,t,n)=>{if(n.d(t,{y:()=>w}),75==n.j)var r=n(8125);if(75==n.j)var i=n(81531);if(75==n.j)var o=n(46680);if(75==n.j)var a=n(18625);if(75==n.j)var s=n(80900);if(75==n.j)var l=n(17343);if(75==n.j)var c=n(40151);if(75==n.j)var u=n(95093);if(75==n.j)var d=n(2768);if(75==n.j)var p=n(85985);if(75==n.j)var h=n(8473);if(75==n.j)var m=n(50628);if(75==n.j)var f=n(2834);if(75==n.j)var g=n(9223);if(75==n.j)var y=n(38194);if(75==n.j)var v=n(14522);if(75==n.j)var b=n(5802);class w{constructor(e,t,n,r){this.state=e,this._factory=t,this._maxNotificationsOnScreen=n,this._defaultTimeout=r,this._log=i.Monitoring.Logging.getLogger("notificationsManager")}enqueue(e,t){const n=this._factory[e].make(e,t);return a.P((()=>{const t=n.metadata.timeout!==b.P.TimeoutDisabled?s.H(n.metadata.timeout===b.P.DefaultTimeout?this._defaultTimeout:n.metadata.timeout).pipe(l.h("timeout")):c.E;this.state.modify((e=>{const t=e.filter(((t,r)=>t.metadata.priority<n.metadata.priority?(this._log.debug(`closing ${t.type} notification, ${n.type} have higher priority`),t.actions.next("closedByNotificationWithMorePriority"),!1):t.id!==n.id&&(!(0===r&&e.length>=this._maxNotificationsOnScreen)||(this._log.debug(`closing ${t.type} notification, more than ${this._maxNotificationsOnScreen} notification on the screen`),t.actions.next("closedByMaxNotificationOnScreen"),!1))));return t.push(n),t}));const i=n.actions.pipe(u.T(t.pipe(d.R(n.actions.pipe(p.h(v._.isCloseAction))))));return i.pipe(h.o((0,r.ff)(v._.isCloseAction)),u.T(i.pipe(m.P(v._.isCloseAction))),f.b((t=>{this._log.log(v._.isHighPriority(n)?o.LogLevel.WARN:o.LogLevel.INFO,`Notification ${e} is ${t}`)})),g.x((()=>{this.state.modify((e=>e.filter((e=>e.id!==n.id))))})),y.B())}))}}},5802:(e,t,n)=>{var r;n.d(t,{P:()=>r}),function(e){let t,n,r,i;!function(e){e.sparkles="sparkles",e.priority="priority"}(t=e.Icon||(e.Icon={})),function(e){e[e.lowest=0]="lowest",e[e.low=1]="low",e[e.average=2]="average",e[e.high=3]="high",e[e.highest=4]="highest"}(n=e.Priority||(e.Priority={})),function(e){e.top="top",e.bottomLeft="bottomLeft",e.bottomRight="bottomRight"}(r=e.Position||(e.Position={})),function(e){e.standard="standard",e.custom="custom"}(i=e.ViewType||(e.ViewType={})),e.DefaultTimeout="DefaultTimeout",e.TimeoutDisabled="TimeoutDisabled"}(r||(r={}))},50790:(e,t,n)=>{n.d(t,{DI:()=>I,SJ:()=>k});var r=n(27378),i=n(12187),o=n(22232),a=n(90351),s=n(63969),l=n(24588),c=n(40219),u=n(7046),d=n(94793),p=n(3656),h=n(5802);const m={position:"relative",width:s.u.percent(100)},f={position:"relative",margin:`0 0 ${s.u.rem(.5)}`},g={display:"flex",boxSizing:"border-box",padding:`${s.u.rem(1)} ${s.u.rem(2)} ${s.u.rem(1)} ${s.u.rem(.75)}`,width:s.u.percent(100),borderRadius:s.u.rem(c.fx),background:a.Il.BackgroundNotification,color:a.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,alignItems:"flex-start"},y={width:s.u.percent(100)},v={display:"inline-block",width:s.u.percent(100)},b={margin:`${s.u.rem(-.5)} ${s.u.rem(.75)} ${s.u.rem(-.5)} 0`},w={position:"absolute",top:0,right:0,marginTop:s.u.rem(.5),marginRight:s.u.rem(.4),marginLeft:s.u.rem(.5)},_={stroke:l.FW},C={margin:`0 0 ${s.u.rem(.5)}`,color:a.Il.CoreNeutral0,wordBreak:"break-word",fontWeight:"bold",fontSize:s.u.rem(a.xv.BodySize),lineHeight:s.u.rem(1.25)},E={marginTop:s.u.rem(-.1),marginBottom:s.u.rem(-.25),color:a.Il.CoreNeutral0,fontSize:s.u.rem(a.xv.BodySize),lineHeight:s.u.rem(1.25)},S=s.u.prefixedStylesheet("notifications",{wrapper:[m],notification:[f],flexibleNotification:[f,{display:"flex",width:"auto"}],contentWrapper:[g],miniContentWrapper:[g,{position:"relative",width:"auto"}],fullWidthNotification:[f,g,y],content:[v],miniContent:[{flex:1}],alertIcon:[b],closeIconWrapper:[w],closeIcon:[_],header:[C],description:[E]});var I,k;!function(e){e.Wrapper=({notification:t,onClose:i,children:o,theme:a={}})=>{r.useEffect((()=>t.actions.next("shown")),[]);const s={wrapper:a.wrapper||n.wrapper,content:void 0!==a.content?Object.assign({},n.content,a.content):n.content};return r.createElement("div",{className:s.wrapper},r.createElement(e.Base,{metadata:t.metadata,onClose:i,theme:s.content},o))},e.Base=({metadata:n,onClose:i,theme:o,children:a})=>r.createElement("div",{className:o.wrapper},t(n,o.icon),r.createElement("div",{className:o.content},a),!function(e){return e.priority===h.P.Priority.high||e.priority===h.P.Priority.highest}(n)&&r.createElement(e.CloseButton,{onClick:i,className:o.close}));const t=(t,n)=>{switch(t.icon){case h.P.Icon.sparkles:return r.createElement(d.JO.Sparkles,{className:n});case void 0:case h.P.Icon.priority:return r.createElement(e.PriorityIcon,{priority:t.priority,className:n});default:return(0,o.vE)(t.icon)}};e.AdHoc=({title:t,children:o,className:a,onClose:s})=>r.createElement("div",Object.assign({},(0,i.Sh)(n.content.wrapper,a)),r.createElement("div",{className:n.content.content},r.createElement(e.TitledContent,{title:t},o)),r.createElement(e.CloseButton,{onClick:s,className:n.content.close})),e.PriorityIcon=({priority:e,className:t})=>{switch(e){case h.P.Priority.lowest:case h.P.Priority.low:return r.createElement(d.JO.NotificationInfo,{className:t});case h.P.Priority.average:return r.createElement(d.JO.NotificationWarning,{className:t});case h.P.Priority.high:case h.P.Priority.highest:return r.createElement(d.JO.NotificationError,{className:t});default:return(0,o.vE)(e)}},e.CloseButton=({onClick:e,className:t})=>r.createElement(u.zx,{name:"closeNotification",className:t,onClick:e},r.createElement(d.JO.Close,{className:S.closeIcon,width:12})),e.TitledContent=({title:t,children:n})=>n?r.createElement(r.Fragment,null,r.createElement(p.P1,{className:S.header},t),r.createElement(e.Content,null,n)):r.createElement(p.P1,{className:S.description},t),e.Content=({children:e})=>r.createElement(p.XY,{className:S.description},e);const n={wrapper:S.wrapper,content:{wrapper:S.fullWidthNotification,icon:S.alertIcon,content:S.content,close:S.closeIconWrapper}}}(I||(I={})),function(e){e.Wrapper=({notification:e,onClose:t,children:n})=>(r.useEffect((()=>e.actions.next("shown")),[]),r.createElement("div",{className:S.flexibleNotification},r.createElement(I.Base,{metadata:e.metadata,onClose:t,theme:{wrapper:S.miniContentWrapper,icon:S.alertIcon,content:S.miniContent,close:S.closeIconWrapper}},n)))}(k||(k={}))},29881:(e,t,n)=>{n.d(t,{t:()=>r});var r,i=n(59312),o=n(27378),a=n(57050),s=n(40327),l=n(5739),c=n(12187),u=n(77176),d=n(2844),p=n(28043),h=n(78738),m=n(19962),f=n(22232),g=n(83078),y=n(5114),v=n(8125),b=n(90351),w=n(63969),_=n(41488),C=n(85255),E=n(98403);!function(e){let t;!function(e){e.toSelector=function(e){switch(e){case"top":case"topCenter":return{align:"top",selector:h.A.Selector.preferBy("top",h.A.Selector.Placement.middle)};case"topRight":return{align:"top",selector:h.A.Selector.preferBy("top",h.A.Selector.Placement.right)};case"topLeft":return{align:"top",selector:h.A.Selector.preferBy("top",h.A.Selector.Placement.left)};case"bottom":case"bottomCenter":return{align:"bottom",selector:h.A.Selector.preferBy("bottom",h.A.Selector.Placement.middle)};case"bottomRight":return{align:"bottom",selector:h.A.Selector.preferBy("bottom",h.A.Selector.Placement.right)};case"bottomLeft":return{align:"bottom",selector:h.A.Selector.preferBy("bottom",h.A.Selector.Placement.left)};case"left":return{align:"left",selector:h.A.Selector.preferBy("left",h.A.Selector.Placement.middle)};case"right":return{align:"right",selector:h.A.Selector.preferBy("right",h.A.Selector.Placement.middle)};case"auto":case"center":return{align:m.Rect.Axis.vertical,selector:h.A.Selector.preferBy("top",h.A.Selector.Placement.middle)};default:return(0,f.vE)(e)}}}(t=e.Alignment||(e.Alignment={})),e.ByPoint=e=>{var{point:t,className:n}=e,r=(0,i.__rest)(e,["point","className"]);return o.createElement(l.F.div,Object.assign({role:"positioned-container",style:t.pipe(u.U(g.mapOrDefault(h.A.toCss,{})))},(0,c.Sh)(O.wrapper,n,t.pipe(u.U((e=>y.isNone(e)?O.hidden:"")))),r))};const n=t=>{const{rect:n,onMount:i}=C.P.useRectWatcher(),s=E.Dx(t.rect),l=E.Dx(t.pinTargetRect),c=b(t.align),d=r(s,n,c,t.selector||h.A.Selector.preferTopMiddle,l,"relative"===t.position);return o.createElement(e.ByPoint,{mount:i,className:t.className,point:d.pipe(u.U(y.map((e=>e.tangentialPoint))))},t.withPin&&d.pipe(u.U((0,a.flow)(y.chain((e=>e.median)),y.map((t=>o.createElement(e.Pin,{point:t,key:"pin"}))),y.toNullable))),t.children)};e.ByAbsoluteRect=e=>o.createElement(n,Object.assign({},e,{position:"absolute"})),e.ByRelativeRect=e=>o.createElement(n,Object.assign({},e,{position:"relative"})),e.Pin=e=>{const t=E.Dx(e.point).pipe(u.U((e=>e.side)),u.U((e=>T[e]))),n=E.Dx(e.point).pipe(u.U((e=>e.point)),u.U((({x:e,y:t})=>({top:t,left:e}))));return o.createElement(l.F.i,Object.assign({role:"pin",style:n},(0,c.Sh)(t,T.wrapper)))};const r=(e,t,n,r,i,a)=>d.aj(e,o.useContext(_.l.Context).pipe(u.U((e=>e.rect))),t.pipe(p.x(y.getEq(m.Box.eq).equals)),i).pipe(u.U((([e,t,i,o])=>(0,s.pipe)(i,y.map((i=>{const l=h.A.QualifiedVariants.build(t,i,n(e));let c=r(l).point;const u=(0,s.pipe)(h.A.toRect(i,c),y.fromEither,y.chain((t=>(0,s.pipe)(m.Rect.getMedian(e,t),y.map((e=>({anchorMedian:e,bodyRect:t})))))),y.chain((({anchorMedian:e,bodyRect:t})=>{if(o){const n=m.Rect.stickToSide(m.Rect.Side.invert(e.side),o)(t);return c=h.A.fromRect(n),(0,s.pipe)(m.Rect.getMedian(o,n),y.map((({side:e,point:t})=>({side:e,point:m.Rect.Point.relativeTo(t,n)}))))}return(0,s.pipe)(y.some(e),y.map((({side:e,point:n})=>({side:e,point:m.Rect.Point.relativeTo(n,t)}))))})));return{tangentialPoint:h.A.relativeTo(c,a?e:t),median:u}})))))),b=(e=m.Rect.Axis.both)=>(0,v.CI)(m.Rect.Axis,e)?t=>h.A.Variants.byAxis(e,t):t=>({[e]:h.A.Zone.bySide(e,t)})}(r||(r={}));const S={position:"absolute",border:`${w.u.px(7)} solid ${b.Il.BackgroundTooltip}`,transform:`translate(${w.u.px(-7)}, ${w.u.px(-7)})`},I={borderTopColor:"transparent",borderRightColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:`translateY(${w.u.px(7)})`}}},k={borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",$nest:{"& + *":{transform:`translateX(${w.u.px(-7)})`}}},A={borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:`translateY(${w.u.px(-7)})`}}},x={borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:`translateX(${w.u.px(7)})`}}},T=w.u.stylesheet({wrapper:[S],top:[I],right:[k],bottom:[A],left:[x]}),O=w.u.stylesheet({hidden:[{visibility:"hidden",opacity:0}],wrapper:[{position:"absolute",transition:"opacity .2s"}]})},63847:(e,t,n)=>{n.d(t,{P:()=>v});var r=n(27378),i=n(12187),o=n(22232),a=n(19962),s=n(90351),l=n(63969),c=n(24588),u=n(71284),d=n(94793);const p=2*Math.PI*32,h=36,m="#f1f2fa",f="#fff",g=(e,t,n)=>e<t?t:e>n?n:e,y=e=>{switch(e){case v.IconSize.pdf:return 110;case v.IconSize.normal:return 52;case v.IconSize.outcome:return 32;case v.IconSize.small:return 24;case v.IconSize.extraSmall:return 16;default:return(0,o.vE)(e)}};class v extends r.Component{render(){const{percentage:e,aimValue:t=100,colorType:n=v.ColorType.logan,fontSize:s=v.FontSize.normal,iconSize:l=v.IconSize.normal,description:c,theme:b=C}=this.props,w=[r.createElement("circle",{key:"circle",id:"circle",cx:h,cy:h,r:32,fill:"none"})],_=(e=>{switch(e){case v.FontSize.normal:return 32;case v.FontSize.small:return 24;default:return(0,o.vE)(e)}})(s),E=(e=>{switch(e){case v.IconSize.pdf:case v.IconSize.normal:case v.IconSize.outcome:return 5;case v.IconSize.small:return 3;case v.IconSize.extraSmall:return 10;default:return(0,o.vE)(e)}})(l),S=g(e,0,100),I=g(t,S,100),k=S*p/100,A=I*p/100,x=360*E/p,T=S?p-k-2*E:p;let O,R,N,L,P;const M=(e=>{switch(e){case v.ColorType.eggBlue:return{type:"gradient",value:{coordinates:{x1:"0%",y1:"50%",x2:"50%",y2:"50%"},start:"#0bc7c3",end:"#0fd5bf"},background:m,outline:f};case v.ColorType.dandelion:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"35%",y2:"100%"},start:"#ffde66",end:"#ffc148"},background:m,outline:f};case v.ColorType.radicalRed:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"50%",x2:"40%",y2:"100%"},start:"#ff4562",end:"#ff153e"},background:m,outline:f};case v.ColorType.lightVisteria:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"50%",y2:"100%"},start:"#e191e2",end:"#c770c8"},background:m,outline:f};case v.ColorType.royalBlue:return{type:"gradient",value:{coordinates:{x1:"17%",y1:"15%",x2:"50%",y2:"100%"},start:"#2a42ef",end:"#6391ff"},background:m,outline:f};case v.ColorType.logan:return{type:"plain",value:"#a6adc9",background:m,outline:f};case v.ColorType.electricViolet:return{type:"plain",value:"#913dcc",background:"#eed6ff"};case v.ColorType.crimson:return{type:"plain",value:"#ea1537",background:"#ffccd5"};case v.ColorType.blueRibbon:return{type:"plain",value:"#1a57ff",background:"#cdf"};case v.ColorType.green:return{type:"plain",value:"#15c39a",background:"#dcf6f6"};case v.ColorType.lightBlue:return{type:"plain",value:"#00bbcc",background:"#ccfbff"};case v.ColorType.orange:return{type:"plain",value:"#ffa600",background:"#fee8b4"};case v.ColorType.neoBlue:return{type:"plain",value:"#4A6EE0",background:"#DBEBFF"};case v.ColorType.white:return{type:"plain",value:"#fff",background:"#fff",backgroundOpacity:.2};default:return(0,o.vE)(e)}})(n);if("plain"===M.type)O=M.value,R=O,N=M.outline,L=M.background,P=void 0===M.backgroundOpacity?1:M.backgroundOpacity;else{const e=M.value;this._gradientId=this._gradientId||"pb-gradient-"+v._nextGradientId++,w.push(r.createElement("linearGradient",Object.assign({id:this._gradientId,key:this._gradientId,gradientUnits:"userSpaceOnUse"},e.coordinates),r.createElement("stop",{stopColor:e.start,offset:"0%"}),r.createElement("stop",{stopColor:e.end,offset:"100%"}))),O=`url(#${this._gradientId})`,R="#2b2d38",N=M.outline,L=M.background,P=void 0===M.backgroundOpacity?1:M.backgroundOpacity}return r.createElement(u.a.Context.Consumer,null,(e=>r.createElement(d.a1,Object.assign({},(0,i.Sh)(C.iconWrapper,b.radialProgressBar),{width:y(l),viewBox:"0 0 72 72"}),r.createElement("defs",null,w),r.createElement("g",null,r.createElement("use",{className:C.valueCircle,stroke:S>=94&&N?N:L,strokeOpacity:P,strokeWidth:E,strokeDasharray:p,strokeDashoffset:p-A,transform:"rotate(-90 36 36)",strokeLinecap:"round",xlinkHref:"#circle"}),N&&r.createElement("use",{className:C.valueCircle,stroke:N,strokeWidth:E,strokeDasharray:p,strokeDashoffset:T,transform:`rotate(${-90-x} 36 36)`,strokeLinecap:"round",xlinkHref:"#circle"}),r.createElement("use",{className:C.valueCircle,stroke:O,strokeDasharray:p,strokeDashoffset:p-k,strokeLinecap:"round",transform:"rotate(-90 36 36)",strokeWidth:E,xlinkHref:"#circle"}),r.createElement("text",Object.assign({className:b.radialProgressText,y:"38",x:"36",fill:R,fontSize:_,fontStyle:"normal",textAnchor:"middle"},a.svgVerticalAlignment(e.has(u.a.Flag.supportsSVGDominantBaseline))),S),c&&r.createElement("text",{className:b.radialProgressDescription,fill:R,x:"50%",y:"80%",fontStyle:"normal",textAnchor:"middle"},c)))))}}v._nextGradientId=0,function(e){let t,n,r;!function(e){e.eggBlue="eggBlue",e.dandelion="dandelion",e.radicalRed="radicalRed",e.lightVisteria="lightVisteria",e.royalBlue="royalBlue",e.logan="logan",e.electricViolet="electricViolet",e.crimson="crimson",e.blueRibbon="blueRibbon",e.green="green",e.lightBlue="lightBlue",e.orange="orange",e.white="white",e.neoBlue="neoBlue"}(t=e.ColorType||(e.ColorType={})),function(e){e.normal="normal",e.small="small"}(n=e.FontSize||(e.FontSize={})),function(e){e.normal="normal",e.small="small",e.extraSmall="extraSmall",e.outcome="outcome",e.pdf="pdf"}(r=e.IconSize||(e.IconSize={}))}(v||(v={}));const b={width:l.u.percent(100),height:l.u.percent(100),fontWeight:"bold",fill:s.Il.CoreNeutral90},w={fontSize:l.u.rem(2),fill:s.Il.CoreNeutral90},_={fontWeight:"normal",fontSize:l.u.px(11),fill:c.UE},C=l.u.stylesheet({radialProgressBar:[b],radialProgressText:[w],radialProgressDescription:[_],valueCircle:[{transition:"stroke-dashoffset .5s"}],iconWrapper:[{stroke:"none",fill:"none",$nest:{"&[data-hovered='true']":{stroke:"none",fill:"none"}}}]})},42329:(e,t,n)=>{n.d(t,{$:()=>p});var r=n(59312),i=n(27378),o=n(5739),a=n(12187),s=n(22232),l=n(90351),c=n(63969),u=n(24588),d=n(98403);function p(e){var{wrapperClassName:t,variation:n,isIdle:a,ref:s}=e,l=(0,r.__rest)(e,["wrapperClassName","variation","isIdle","ref"]);return i.createElement(o.F.span,{role:"spinner",className:t},d.ab(n,(e=>i.createElement(p.Svg,Object.assign({},l,{type:e,isIdle:a})))))}!function(e){e.getClassName=e=>t=>{switch(t){case"red":return e.red;case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"violet":return e.violet;case"yellow":return e.yellow;case"yellowPremium":return e.yellowPremium;case"orange":return e.orange;case"gray":return e.gray;case"cyan":return e.cyan;default:return(0,s.vE)(t)}},e.Svg=t=>{const{className:n,size:o=64,strokeWidth:l=2,type:c,name:u,isIdle:d}=t,p=(0,r.__rest)(t,["className","size","strokeWidth","type","name","isIdle"]),h=i.useRef(null),m=i.useRef(null);return i.useEffect((()=>((0,s.kG)(null!==h.current,"groupEl should be already created"),m.current=h.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),()=>m.current.cancel())),[]),i.useEffect((()=>{(0,s.kG)(null!==m.current,"groupAnimation should be already created");const e=m.current;e.play&&(d?e.pause():"running"!==e.playState&&e.play())})),i.createElement("svg",Object.assign({"data-role":u},(0,a.Sh)(n),{viewBox:"25 25 50 50",width:o,height:o},p),i.createElement("g",{transform:"translate(50 50)"},i.createElement("g",{ref:h},i.createElement("circle",Object.assign({},(0,a.Sh)(k.path,d&&f,e.getClassName(k)(c)),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:l,strokeMiterlimit:"10"})))))}}(p||(p={}));const h=200,m=c.u.keyframes({"0%":{strokeDasharray:`1px, ${c.u.px(h)}`,strokeDashoffset:c.u.px(1)},"50%":{strokeDasharray:`89px, ${c.u.px(h)}`,strokeDashoffset:c.u.px(-35)},"100%":{strokeDasharray:`89px, ${c.u.px(h)}`,strokeDashoffset:c.u.px(-124)}}),f="spinnerIdle",g={animation:`${m} 2s ease-in-out infinite`,strokeDasharray:`1px, ${c.u.px(h)}`,strokeDashoffset:c.u.px(1),strokeLinecap:"round",$nest:{[`&.${f}`]:{animationIterationCount:0}}},y={stroke:l.Il.CoreRed50},v={stroke:l.Il.CoreGreen50},b={stroke:l.Il.CoreBlue50},w={stroke:l.Il.CoreNeutral0},_={stroke:u.lh},C={stroke:u.AX},E={stroke:l.Il.CoreYellow60},S={stroke:u.FW},I={stroke:l.Il.CoreCyan50},k=c.u.stylesheet({path:[g],red:[y],green:[v],blue:[b],white:[w],violet:[_],yellow:[C],orange:[E],gray:[S],cyan:[I]})},53187:(e,t,n)=>{n.d(t,{X:()=>A});var r=n(27378),i=n(57050),o=n(19962),a=n(5114),s=n(90351),l=n(63969),c=n(40219),u=n(29881),d=n(40327),p=n(5739),h=n(25781),m=n(83078),f=n(10061),g=n(98403),y=n(49708),v=n(85985),b=n(41398),w=n(24209),_=n(17343),C=n(38194),E=n(598),S=n(50628),I=n(97528);class k extends r.Component{constructor(){super(...arguments),this._subs=[],this._outOfTarget=e=>t=>!o.Rect.hasPoint(t.getBoundingClientRect(),e)}componentDidMount(){this._listenTooltipAppearance()}componentWillUnmount(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[],this.context.hide()}render(){return r.createElement(p.F.div,{role:"tooltip"},this.context.state.view(this.props.children))}_listenTooltipAppearance(){const e=y.R(document,"keydown").pipe(v.h((e=>e.keyCode===h.R.ESC_CODE))),t=y.R(document,"mousedown").pipe(b.M(this.context.state),v.h((([e,t])=>(0,d.pipe)(t,a.map((e=>e.target)),a.filter((()=>o.isDisabled(e.target))),m.forAll(this._outOfTarget({x:e.clientX,y:e.clientY})))))),n=w.T(e,t,y.R(document,"scroll"),f.c.observe.pipe(v.h((e=>"show"===e.detail)))).pipe(_.h(g.PU),C.B());this._subs=[this.context.hasContent.pipe(v.h(Boolean),E.c(n.pipe(S.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(v.h(Boolean),E.c(w.T(g.gw(!0,500),n.pipe(_.h(!1))).pipe(S.P())),v.h(Boolean)).subscribe(this.context.show)]}}k.contextType=I.G.Context;const A=()=>r.createElement(k,null,(0,i.flow)(a.map((e=>r.createElement(u.t.ByAbsoluteRect,Object.assign({rect:o.Rect.fromEl(e.target),className:O.container},u.t.Alignment.toSelector(e.alignment),{withPin:!0}),r.createElement("div",{className:O.content},e.content)))),a.toNullable)),x={position:"fixed",zIndex:c.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},T={padding:`${l.u.rem(.25)} ${l.u.rem(1)}`,borderRadius:l.u.rem(c.fx),background:s.Il.BackgroundTooltip,color:s.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:l.u.px(.25),fontSize:l.u.rem(.75),lineHeight:l.u.rem(1)},O=l.u.stylesheet({container:[x],content:[T]})},6782:(e,t,n)=>{var r;n.d(t,{Q:()=>r}),function(e){e.group=function(e){return Object.values(e.reduce(((e,{group:t,category:n,categoryHuman:r,cost:i})=>(void 0===e[n]&&(e[n]={group:t,category:n,categoryHuman:r,count:0}),e[n].count+=i,e)),{})).sort(((e,t)=>t.count-e.count))}}(r||(r={}))},20869:(e,t,n)=>{n.d(t,{S:()=>Ne});var r,i=n(29909),o=n(57050),a=n(40327),s=n(38983),l=n(80358),c=n(84966),u=n(67394),d=n(89943),p=n(81670),h=n(8125),m=n(22232),f=n(5114),g=n(95195),y=n(19429),v=n(81531),b=n(46680),w=n(4390),_=n(7410),C=n(88570),E=n(92843),S=n(68983),I=n(51653),k=n(21729),A=n(67434),x=n(2834),T=n(77176);!function(e){function t(t){return o=>(0,a.pipe)(t,E.v.foldMap(e.group)(r,i,n),(0,S.W)(e.group.concat)(o))}e.group=k.dM.group,e.eq=k.dM.eq,e.applyDiff=t,e.fromAlerts=function(e){const n=v.Monitoring.Logging.getLogger("DocumentCounters");return e.pipe(A.R(((e,n)=>({alerts:n,counters:t(w.p.Diff.toRegistered(w.p.diff(e.alerts,n)))(e.counters)})),{alerts:w.p.empty,counters:k.dM.group.empty}),x.b((({counters:e})=>{k.dM.isValid(e)||n.error("Counters can not be below zero",k.dM.show.show(e))})),T.U((({counters:e})=>e)))};const n=e=>I.R.toUnmutedOnly(e.counters),r=(0,o.flow)(n,e.group.inverse),i=(t,i)=>e.group.concat(n(i),r(t))}(r||(r={}));var O,R=n(17771),N=n(45614),L=n(93756),P=n(90329),M=n(66896),D=n(2291),F=n(85985);!function(e){function t(e){const{left:t,right:n}=(0,a.pipe)(e,N.filterMap(f.fromNullable),N.filterWithIndex((e=>"GeneralScore"!==e)),N.mapWithIndex(((e,t)=>{return{lensId:(n=e,n===M.R.SpecialId.Plagiarism?g.right(M.R.SpecialId.Plagiarism):M.R.OutcomeId.toOutcomeId(n)),score:D.T.fromNumber(t)};var n})),N.partitionMap((0,R.Y)(g.either))),r=(0,a.pipe)(n,N.map((({lensId:e,score:t})=>(0,o.tuple)(e,t))),(e=>new Map(Object.values(e))));return(0,a.pipe)(L.Qp(f.fromPredicate((0,o.not)(N.isEmpty))(t),f.fromPredicate((0,o.not)(P.xb))(r)),f.getOrElse((()=>L.F2(new Map))))}e.empty=new Map,e.eq=P.Eh(M.R.Id.ord,D.T.ord),e.fromCapi=function(e){return e.pipe(F.h((0,h.Kg)(l.h.is("finish"),l.h.is("async_check_finished"),l.h.is("feedback_ack"))),T.U((e=>e.outcomeScores)),F.h(h.$K),T.U(t),x.b(L.Vn((e=>{N.isEmpty(e)||v.Monitoring.Logging.getLogger("LensesScores").error("failed to parse capi scores",e)}))),F.h((0,h.Kg)(L.WP,L.tO)),T.U((e=>e.right)))}}(O||(O={}));var B,U=n(95983),$=n(98403),j=n(32952),W=n(38194),G=n(77843),q=n(93508),H=n(95093),z=n(598),V=n(24209),Y=n(50628),X=n(17343),J=n(36919),Z=n(51374),K=n(11064),Q=n(23330),ee=n(64015),te=n(25938),ne=n(64450),re=n(37492),ie=n(61601),oe=n(51072),ae=n(71249),se=n(26328),le=n(70996),ce=n(32426),ue=n(36991),de=function(){function e(e){this._delta=e,this._cursor={index:0,operationOffset:0}}return e.prototype.next=function(e){(0,m.kG)(e>=0,"Length cannot be negative");var t=this._cursor.index;if(t>=this._delta.ops.length)return f.none;for(var n=ue.s.operationLength(this._delta.ops[t]),r=e-(n-this._cursor.operationOffset);r>0&&t<this._delta.ops.length-1;)t++,r-=n=ue.s.operationLength(this._delta.ops[t]);return r>0?(this._cursor={index:t+1,operationOffset:0},f.none):(this._cursor={index:t,operationOffset:n+r},f.some(this._delta.ops[t]))},e}();!function(e){const t=f.getMonoid((0,ce.getObjectSemigroup)());e.getEnrichedWithFormattingDelta=e=>n=>{const r=new de(e);return n.ops.reduce((([e,n],i)=>{const o=r.next(n);return ue.s.isInsert(i)?[e.insert(i.insert,f.toUndefined(t.concat(f.chain(ue.s.getAttrs)(o),ue.s.getAttrs(i)))),0]:[e.push(i),ue.s.operationLength(i)]}),[new ne.Delta,1])[0]}}(B||(B={}));var pe=n(40018);function he(e){switch(e._raw.point){case"AllCapsBoldification":return u.JJ.fromAlternativeBoldified;case"Lists":return u.JJ.fromAlternativeListified;default:return u.JJ.fromAlternative}}const me=(0,h.HP)(v.Monitoring.Logging.getLogger),fe=(0,o.flow)(ee.UI((({beingAppliedAlert:e,undo:t,reversedAlternative:n})=>Q.Y3((()=>{const r={action:c.PZ.ACCEPTED,commit:()=>me("AlertManager.ops").debug(`_applyTransformJson(${e.toLiteString()}):commit()`),undo:t,reversedAlternative:e.registerReversedAlternative(n)},i=e.switchToApplied(r),o=pe.xS.create(i.state.from,le.h.create(e));return[i.id,o]}),g.toError))),Q.mg);function ge(e){const t=u.r3.compose(e.alternatives.map(i.UI((e=>e.alternative))),e.currentFullText);return(0,a.pipe)(ue.s.nonEmpty(t.composedDelta)?f.some(t):f.none,f.map((({composedDelta:t,reversedAlternatives:n})=>({changeWithFormatting:(0,a.pipe)(t,B.getEnrichedWithFormattingDelta(e.currentFullText),(t=>te.RI.delta(t,e.originalTextLength))),correctRevAlternatives:(0,a.pipe)(n,p.T.tapFailure((({rejected:e})=>v.Monitoring.Logging.getLogger("AlertManager.ops").error("failed to generate reverse alternative",e))),p.T.foldSuccess(ae.map((t=>({reversedAlternative:t.reversedAlternative,alternative:i.li(e.alternatives[t.alternativeIndex]),alert:e.alerts[t.alternativeIndex].alert})))))}))))}var ye;!function(e){const t=(0,o.flow)(((e,t)=>g.tryCatch((()=>pe.xS.create(e,t)),g.toError)),g.map((e=>(0,o.tuple)(e[0].id,e))),K.of);e.prepare=K.tS((0,o.tupled)(t)),e.prepareFromAlert=Q.tS((e=>t(e.state.from,le.h.create(e))))}(ye||(ye={}));function ve(e,t){return g.fromPredicate(e,(e=>{const n=new m.ej(t,e.toString());return v.Monitoring.Logging.getLogger("AlertManager.ops").error(t,n),n}))}const be=e=>ve(pe.bZ.isNotDisposed,e);function we(e){return Q.tS(f.fold((0,o.constant)(Q.F2(void 0)),e))}class _e{constructor(e,t,n,r){this._positionManager=e,this._getContent=t,this._capiClient=n,this._alertsRepo=r,this._log=v.Monitoring.Logging.getLogger("AlertManager.ops"),this._sendUpdate=e=>Q.Y3((()=>this.events.next({updated:new Map(e)})),g.toError),this._sendSingleUpdate=Q.tS((e=>this._sendUpdate([e]))),this._flushChanges=Q.Y3((()=>this.changes.next(te.RI.flush())),g.toError),this.changes=new j.xQ,this.events=new j.xQ,this.undoApplied=(e,t)=>{return(0,a.pipe)((()=>this._positionManager.getTextLength()),K.tS((t=>{const r={alertsToUpdate:[],reversedDelta:new ne.Delta,undo:o.constVoid},i=e.filter(pe.bZ.isApplied).reduce(((e,t)=>{const r=t.state.undoable;return pe.VD.isWithAlternative(r)?(0,a.pipe)(r.reversedAlternative,f.fold((()=>{c.wQ.withTransformJson(t._raw)&&this._log.error("No reversed delta registered for alert",{alert:t.toLiteString()}),n(e,t)}),(0,o.flow)((e=>e()),g.map((e=>e.delta)),g.fold((e=>{this._log.error("Could not retrieve reversed delta",{e:e,alert:t.toLiteString()})}),(r=>{n(e,t),(0,a.pipe)(r,u.r3.fromRawDelta,(t=>t.rebase(e.reversedDelta)),f.fold((()=>{e.reversedDelta=e.reversedDelta.compose(r)}),(({delta:t})=>{e.reversedDelta=e.reversedDelta.compose(t)})))}))))):n(e,t),e}),r);return i.alertsToUpdate.length>0?(0,a.pipe)(Q.Y3((()=>{const e=(0,a.pipe)(i.reversedDelta,B.getEnrichedWithFormattingDelta(this._getContent()));this.changes.next(te.RI.delta(e,t))}),g.toError),Q.N(this._flushChanges),Q.N((0,a.pipe)(i.undo,K.UI(g.right))),Q.a1((0,a.pipe)(i.alertsToUpdate,Q.mg,Q.tS(this._sendUpdate)))):Q.F2(void 0)})));function n(e,n){e.undo=(0,o.flow)(e.undo,n.state.undoable.undo),e.alertsToUpdate.push(ye.prepare((()=>[le.h.create(n),le.h.create(n.changeState(t===pe.bZ.State.Applied.Method.ByCard?pe.bZ.State.init:pe.bZ.State.Removed.create(pe.bZ.State.Removed.Reason.bulkAcceptUserResponse)))])))}},this._dismissBatch=(e,t)=>(0,a.pipe)(this._flushChanges,Q.a1((0,a.pipe)(e,ae.map((0,o.flow)(K.of,K.UI(be("Cannot send feedback for already disposed")),Q.tS((e=>this._applyFeedbackToAlert(e,c.PZ.IGNORE,pe.l$.sidebar,this._commitFeedbackToCapi(e,{kind:c.PZ.IGNORE,subtype:t})))),ye.prepareFromAlert)),Q.mg,Q.tS(this._sendUpdate)))),this._applyAlert=({alert:e,replacementText:t,source:n,method:r,feedbackSubtype:i})=>(0,a.pipe)(e,ve(pe.bZ.isRegistered,"can not apply alert in non registered state"),K.of,Q.N(this._flushChanges),Q.tS((e=>this._switchToBeingApplied(e,n,r))),Q.tS((({beingAppliedAlert:e,undo:n})=>(0,a.pipe)(e.getReplaceEither.bind(e),Q.LF,Q.Pd((()=>new Error("Cannot apply alert with tJSON")),(r=>{this._log.debug(`_applyAlert(${e.toLiteString()}, rrange: ${r})`);const o=r.start,a=r.end-r.start,s=(new ne.Delta).retain(o).delete(t.length).insert(e.replaceText);return{alert:e,undo:n,reverseDelta:s,replacementText:t,removeLen:a,feedbackSubtype:i,pos:o}}))))),Q.tS(this._applyAlertData)),this._applySmartPhrasesAlert=({alerts:e,feedbackSubtype:t})=>(0,a.pipe)(this._flushChanges,Q.a1((0,a.pipe)(e,Q.pE((e=>(0,a.pipe)(e.alternative,Q.UI((t=>(0,o.tuple)({alternative:ie.Alternative.withoutOptionalOps(t.alternative.ops),alternativeIndex:t.alternativeIndex},he(e.alert))))))))),Q.tS((t=>Q.Y3((()=>({alternatives:t,alerts:e,originalTextLength:this._positionManager.getTextLength(),currentFullText:this._getContent()})),g.toError))),Q.UI(ge),we((e=>(0,a.pipe)(e.correctRevAlternatives,ae.map((({alert:e,alternative:n})=>(0,a.pipe)(Q.dk((()=>e)),Q.mU((e=>Q.dk(this._sendApplySmartPhrasesFeedback(e,n.alternativeIndex,t))))))),Q.mg,Q.tS((t=>(0,a.pipe)(Q.Y3((()=>this.changes.next(e.changeWithFormatting)),g.toError),Q.N(this._flushChanges),K.a1((0,a.pipe)((0,o.flow)(ee.UI((e=>Q.Y3((()=>{const t=le.h.create(e);e.bumpVersion();const n=pe.xS.create(t,le.h.create(e));return[e.id,n]}),g.toError))),Q.mg)(t),Q.tS(this._sendUpdate)))))))))),this._applyTransformJson=({alerts:e,source:t,method:n,feedbackSubtype:r,drilldownSuggestionIds:i})=>(0,a.pipe)(this._flushChanges,Q.a1((0,a.pipe)(e,Q.pE((e=>(0,a.pipe)(e.alternative,Q.UI((t=>(0,o.tuple)(t,he(e.alert))))))))),Q.tS((t=>Q.Y3((()=>({alternatives:t,alerts:e,originalTextLength:this._positionManager.getTextLength(),currentFullText:this._getContent()})),g.toError))),Q.UI(ge),we((e=>(0,a.pipe)(e.correctRevAlternatives,ae.map((({alert:e,alternative:o,reversedAlternative:s})=>(0,a.pipe)(this._switchToBeingApplied(e,t,n),Q.mU((e=>Q.dk(this._sendApplyTransformJsonFeedback(e.beingAppliedAlert,o.alternativeIndex,r,i)))),Q.UI((e=>Object.assign(Object.assign({},e),{reversedAlternative:s})))))),Q.mg,Q.tS((t=>(0,a.pipe)(Q.Y3((()=>this.changes.next(e.changeWithFormatting)),g.toError),Q.N(this._flushChanges),K.a1((0,a.pipe)(fe(t),Q.tS(this._sendUpdate)))))))))),this._alertFeedback=(e,t,n)=>{this._log.debug(`_alertFeedback(${e.toLiteString()}, feedbackType: ${t.kind}, source: ${n})`),pe.bZ.isHidden(e)&&this._log.error("Sending feedback for a hidden alert",{alert:e,feedbackType:t.kind});const r=this._commitFeedbackToCapi(e,t);return(0,a.pipe)(e,be("Cannot send feedback for already disposed"),K.of,Q.tS((e=>t.kind!==c.PZ.LOOKED||e.isRead?c.nw.willRemoveAlert(t.kind)?(0,a.pipe)(this._flushChanges,Q.a1(this._applyFeedbackToAlert(e,t.kind,n,r)),ye.prepareFromAlert,this._sendSingleUpdate):(0,a.pipe)(r,Q.dk):(0,a.pipe)(ye.prepare((()=>[le.h.create(e),(e.isRead=!0,le.h.create(e))])),this._sendSingleUpdate,K.N(r)))))},this._alertBatchFeedback=(e,t,n)=>(0,a.pipe)(e,ae.filterMap((e=>e.rawId)),se.nI,f.fold((0,o.constant)(o.constVoid),(e=>this._sendFeedback({kind:t,alertIds:e,subtype:n})))),this._notifyAlertUpdated=(0,o.flow)((e=>[[e[0].id,e]]),this._sendUpdate),this._releaseRef=(e,t)=>(0,a.pipe)(Q.Y3((()=>{this._log.debug(`_releaseRef ${e} on (${t.toLiteString()}) refs: ${t._refNames}`,{shouldBeRemoved:pe.bZ.shouldBeRemoved(t)}),pe.bZ.shouldBeRemoved(t)&&this.events.next({removed:new Map([[t.id,le.h.create(t)]])})}),g.toError)),this._changeMuteState=(e,t)=>{const n=(0,a.pipe)(e,p.T.fromArray((0,o.flow)(be("Cannot send Mute feedback for already disposed"),g.chain(ve((e=>f.isSome(e.muteCategory)||pe.bZ.belongsToAnySpecialCategory(e)),"Alert is not muting")))));return(0,a.pipe)(n,p.T.foldSuccess(ae.map((e=>ye.prepare((()=>[le.h.create(e),(e.mute=t,le.h.create(e))]))))),Q.mg,Q.UI(se.nI),we(this._sendUpdate),Q.UI((0,o.constant)(n)))},this._changeGapValue=(e,t)=>(0,a.pipe)(e,ve(pe.bZ.isOneGap,"can not change gap value for a non one gap alert"),K.of,Q.tS((e=>ye.prepare((()=>[le.h.create(e),le.h.create(e.changeGapValue(t))])))),this._sendSingleUpdate),this._confirmApplied=(0,o.flow)(ae.map((e=>ye.prepare((()=>[le.h.create(e),le.h.create(e.changeState(pe.bZ.State.Removed.create(pe.bZ.State.Removed.Reason.bulkAcceptUserResponse)))])))),Q.mg,Q.tS(this._sendUpdate)),this._changeTakeawayFeedback=(e,t)=>(0,a.pipe)(e,ve(pe.bZ.isTakeaway,"can not change feedback for non-takeaway alert"),K.of,Q.tS((e=>{const n=le.h.create(e),r=e.setFeedback(t),i=le.h.create(r);return(0,a.pipe)(ye.prepare((()=>[n,i])),this._sendSingleUpdate,Q.UI((()=>r)))}))),this._requestShortenItReplacements=e=>(0,a.pipe)(e,be("Cannot send shorten_it_submit message for already disposed"),g.chain(ve(pe.bZ.isShortenIt,"can not send shorten_it_submit for a non shorten-it alert")),K.of,Q.tS((e=>{const t=le.h.create(e),n=e.setSummariesRequestState(pe.vQ.SummariesRequestState.requested),r=le.h.create(n);return(0,a.pipe)(ye.prepare((()=>[t,r])),this._sendSingleUpdate,Q.UI((()=>n)),K.N(this._commitShortenItSubmitToCapi(e)))}))),this._changeSmartPhrasesFeedback=(e,t)=>(0,a.pipe)(e,ve(pe.bZ.isSmartPhrases,"Cannot change feedback for a non-SmartPhrases alert."),K.of,Q.tS((e=>Q.Y3((()=>{const n=[(0,o.tuple)(e.id,pe.xS.create(le.h.create(e),le.h.create(e.setFeedback(t))))];return this.events.next({updated:new Map(n)}),e}),g.toError)))),this._rotateSmartPhrasesReplacements=e=>(0,a.pipe)(e,ve(pe.bZ.isSmartPhrases,"Cannot rotate replacements for a non-SmartPhrases alert."),K.of,Q.tS((e=>Q.Y3((()=>{const t=[(0,o.tuple)(e.id,pe.xS.create(le.h.create(e),le.h.create(e.rotateReplacements())))];return this.events.next({updated:new Map(t)}),e}),g.toError)))),this._discardSmartPhrasesReplacement=(e,t)=>(0,a.pipe)(e,ve(pe.bZ.isSmartPhrases,"Cannot discard replacement for a non-SmartPhrases alert."),K.of,Q.tS((e=>Q.Y3((()=>{const n=[(0,o.tuple)(e.id,pe.xS.create(le.h.create(e),le.h.create(e.discardReplacement(t))))];return this.events.next({updated:new Map(n)}),e}),g.toError)))),this._changeSentenceLevelBrandTonesFeedback=(e,t)=>(0,a.pipe)(e,ve(pe.bZ.isSentenceLevelBrandTones,"Cannot change feedback for a non-Sentence Level Brand Tones alert."),K.of,Q.tS((e=>Q.Y3((()=>{const n=[(0,o.tuple)(e.id,pe.xS.create(le.h.create(e),le.h.create(e.setFeedback(t))))];return this.events.next({updated:new Map(n)}),e}),g.toError)))),this._handleCapiError=e=>t=>{re.EP.isDroppedError(t)?this._log.debug(`Stopped listening for ${e} message acknowledge`,t):re.YG.isNotConnectedError(t)?this._log.warn(`Failed to send ${e} as CAPI was not connected`,t):this._log.error(`Failed to send ${e}`,t)},this._applyAlertData=({pos:e,removeLen:t,reverseDelta:n,undo:r,replacementText:i,alert:o,feedbackSubtype:s})=>(0,a.pipe)(Q.Y3((()=>{let a=this._positionManager.getTextLength(),l=!1;const u={action:c.PZ.ACCEPTED,replacement:i,commit:()=>{l||this._log.debug(`_applyAlert(${o.toLiteString()}):commit()`)},reversedAlternative:f.none,undo:()=>{l=!0,this._log.debug(`_applyAlert(${o.toLiteString()}):undo()`);const e=this._positionManager.getTextLength();e!==a&&this._log.error(`Text has changed while uncommitted apply is present. Expected: ${a}, actual: ${e}`);const t=te.RI.delta(n,e);this.changes.next(t),this.changes.next(te.RI.flush()),r()}};return this._sendApplyTextFeedback(o,i,s)(),this.changes.next(te.RI.delta((new ne.Delta).retain(e).delete(t).insert(i),a)),this.changes.next(te.RI.flush()),a=this._positionManager.getTextLength(),u}),g.toError),Q.tS((e=>Q.Y3((()=>o.switchToApplied(e)),g.toError))),ye.prepareFromAlert,this._sendSingleUpdate),this._sendApplyFeedback=(e,t)=>e.state.method===pe.bZ.State.Applied.Method.ByCard?this._commitFeedbackToCapi(e,t):o.constVoid,this._sendApplyTextFeedback=(e,t,n)=>this._sendApplyFeedback(e,{kind:c.PZ.ACCEPTED,replacementText:t,subtype:n}),this._sendApplyTransformJsonFeedback=(e,t,n,r)=>{const i={kind:c.PZ.ACCEPTED,alternativeIndex:t,subtype:n,drilldownSuggestionIds:r},o=pe.bZ.isOneGap(e)?Object.assign(Object.assign({},i),{gapValue:e.gapValue}):i;return this._sendApplyFeedback(e,o)},this._sendApplySmartPhrasesFeedback=(e,t,n)=>{const r={kind:c.PZ.ACCEPTED,alternativeIndex:t,subtype:n};return this._commitFeedbackToCapi(e,r)}}_applyFeedbackToAlert(e,t,n,r){return Q.Y3((()=>{this._alertsRepo.removeFromCapiMapping(e);const i=this._createFeedbackUndoable(e,t,r);return e.changeState(pe.bZ.State.Applied.create(i,n,pe.bZ.State.Applied.Method.ByCard,le.h.create(e)))}),g.toError)}_createFeedbackUndoable(e,t,n){return{action:t,replacement:e.replaceText,commit:n,undo:()=>this._alertsRepo.addToCapiMapping(e)}}_commitFeedbackToCapi(e,t){return(0,a.pipe)(e.rawId,f.fold((0,o.constant)((()=>this._log.debug("skip feedback for local alert",e))),(e=>this._sendFeedback(Object.assign({id:e},t)))))}_sendFeedback(e){return()=>{oe.toPromise(this._capiClient.sendFeedback(e)).catch(this._handleCapiError("alert feedback"))}}_commitShortenItSubmitToCapi(e){return(0,a.pipe)(e.rawId,f.fold((0,o.constant)((()=>this._log.debug("skip shorten-it-submit for local alert",e))),(e=>this._shortenItSubmit(e))))}_shortenItSubmit(e){return()=>{oe.toPromise(this._capiClient.shortenItSubmit(e)).catch(this._handleCapiError("shorten-it-submit"))}}_switchToBeingApplied(e,t,n){return Q.Y3((()=>(this._alertsRepo.removeFromCapiMapping(e),e.switchToBeingAppliedState(t,n))),g.toError)}}var Ce,Ee,Se,Ie,ke,Ae=n(83078);!function(e){e.toString=g.fold((({id:e})=>`rid:${e}`),(e=>`aid:${e.toString()}`))}(Ce||(Ce={})),function(e){e.match=function(e){return t=>t instanceof pe.Ev?e.alertAddOrUpdate(t):t instanceof Map?e.rangeChange(t):"_tag"in t?e.alertRemove(t):e.alertChange(t)}}(Ee||(Ee={})),function(e){e.defaultValidator=pe.bZ.isDuplicatedBy}(Se||(Se={}));class xe{constructor(e,t,n){this._positionManager=e,this._alertsRepo=t,this._alertDuplicateValidator=n,this._log=v.Monitoring.Logging.getLogger("AlertManager.pipeline",b.LogLevel.DEBUG),this._heuristicallyRemovedAlerts=new Map,this.process=e=>(this._log.trace(`process, to process = ${e.length}`),this._collectChanges(this._processAlertsBatch(e))),this.reset=e=>(this._cleanupPendingAlerts(e),this._finishAlertsChecking()),this._processAlertsBatch=e=>{const{toAdd:t,toUpdate:n,toAddOrUpdate:r,toRemoveUnfiltered:i,toChangeUnfiltered:s,toDispose:c,rangeChanges:u}=this._processBatch(e),d=e=>(0,a.pipe)(this._alertsRepo.getByAlertId(e),f.getOrElse((()=>t.get(e)||n.get(e)||c.get(e))));s.forEach((e=>(0,a.pipe)(f.fromNullable(r.get(e.id)),f.fold((()=>(0,a.pipe)(this._alertsRepo.getByRawAlertId(e.id),f.map((t=>{const i=t.copy();i.patchWithRawAlert(xe._prepareUpdate(i,e)),n.set(i.id,i),r.set(e.id,i)})),f.getOrElse((()=>this._log.info("Change from CAPI: Cannot find internal AlertId."))))),(t=>{const r=xe._prepareUpdate(t,e);n.has(t.id)?t.patchWithRawAlert(r):t.updateAlertWithManagedData(r)})))));const p=i.reduce(((e,i)=>{const o=(0,a.pipe)(i,g.fold((({id:e})=>(0,a.pipe)(this._alertsRepo.getByRawAlertId(e),f.map((e=>pe.bZ.isRegistered(e)?e:void 0)),f.getOrElse((()=>this._heuristicallyRemovedAlerts.has(e)?void this._heuristicallyRemovedAlerts.delete(e):r.get(e))))),d));return void 0===o?(g.isLeft(i)?this._log.debug("Remove from CAPI: Cannot find internal AlertId. capiId: #"+JSON.stringify(i.left)):this._log.error("Cannot find existing alert by id",i.right),e):((0,a.pipe)(this._getMergeTarget(i,r),f.filter(Te((e=>e.lensId!==o.lensId?(this._log.warn("Trying to merge alerts from different lenses",{source:o,target:e}),!1):f.isNone(o.rawId)?(this._log.warn("Trying to merge into local alert",{source:o,target:e}),!1):o.references>e.references))),f.fold((()=>{e.set(o.id,{alert:o,reason:(0,a.pipe)(i,g.swap,f.fromEither,f.chain((e=>e.hint)),f.chain((e=>e===l.A.NotFixed?f.some(pe.bZ.State.Removed.Reason.capiDismiss):f.none)),f.getOrElse((()=>pe.bZ.State.Removed.Reason.capiDone)))})}),g.fold((e=>{this._log.debug("swap raw alerts with new alert",{source:o.toString(),newTarget:e.toString()}),this._alertsRepo.swapRaw(o,e);const i=Ae.unsafeGet(o.rawId);(0,m.kG)(void 0===n.get(e.id),"Added alert should not be present in the updated alerts map",(()=>n.get(e.id).toString()));const a=o.copy();n.set(a.id,a),r.set(i,a),t.delete(e.id),c.set(e.id,e)}),(t=>{this._log.debug("swap raw alerts with existing alert",{source:o.toString(),existingTarget:t.toString()}),this._alertsRepo.swapRaw(o,t),e.set(t.id,{alert:t,reason:pe.bZ.State.Removed.Reason.capiDismiss})})))),e)}),new Map),h=new Map;return u&&u.forEach(((e,t)=>{(0,a.pipe)(t,d,f.fromPredicate((r=>r?pe.bZ.isInteractable(r)?!n.has(r.id)||(this._log.debug("skip range change on updateHolder alert",r.toLiteString()),!1):(this._log.debug("skip range change on non-interactable alert",r.toLiteString()),!1):(this._log.warn("got range changes for unknown alert",{alertId:t,alertRanges:e}),!1))),f.chain((n=>(0,a.pipe)(n.onRangeChange(e),f.map((e=>{switch(e.state){case pe.bZ.Transition.State.Pending:return h.set(n.id,[n,e.removedRanges]);case pe.bZ.Transition.State.Dispose:return(0,a.pipe)(n.rawId,f.fold((()=>this._log.debug("dispose by range change on unknown rid",n.id)),(e=>this._heuristicallyRemovedAlerts.set(e,n)))),p.set(t,{alert:n,reason:pe.bZ.State.Removed.Reason.textChange});default:return(0,m.vE)(e)}}))))))})),p.forEach((({alert:e})=>{this._log.trace("check cancellations from toRemove: "+e.toLiteString()),(0,a.pipe)(e.rawId,f.fold((()=>{t.get(e.id)&&(this._log.debug("cancel add local alert for: "+e.toLiteString()),t.delete(e.id),p.delete(e.id),c.set(e.id,e)),(0,m.kG)(!1===n.has(e.id),"Added local alert should not be present in the updated alerts map",(()=>n.get(e.id).toString()))}),(i=>{const o=r.get(i);o&&(r.delete(i),t.delete(o.id)?(this._log.debug("cancel add for: "+o.toLiteString()),this._log.debug("cancel remove for: "+e.toLiteString()),p.delete(e.id),c.set(e.id,e),c.set(o.id,o)):n.delete(o.id)?(this._log.debug("cancel update for: "+o.toLiteString()),o.id!==e.id&&(this._log.debug("marking update to dispose: "+o.toLiteString()),c.set(o.id,o))):this._log.error("_addOrUpdateAlert toAdd || toUpdate mapping in unsync state!",o))}))),this._log.trace("check if local orphan toRemove: "+e.toLiteString()),(0,a.pipe)(this._alertsRepo.getByAlertId(e.id),f.fold((()=>{this._log.debug("cancel delete for: "+e.toLiteString()),p.delete(e.id)}),o.constVoid))})),c.size>0&&this._log.debug(`_cancelAlerts, to cancel = ${c.size}`,{alerts:Array.from(c.values()).map((e=>e.toLiteString()))}),c.forEach((e=>{h.delete(e.id)&&this._log.debug("cancel startChecking for: "+e.toLiteString());try{e.dispose()}catch(t){this._log.warn("unexpected error on disposing canceled alert",t,e)}})),{toAdd:t,toUpdate:n,toRemove:p,toStartChecking:h}},this._collectChanges=({toAdd:e,toUpdate:t,toRemove:n,toStartChecking:r})=>{const{alertsToAdd:i,alertsToUpdate:o,alertsToRemove:a}=this._addAlerts(Array.from(e.values()),n);return t.size>0&&this._updateAlerts(Array.from(t.values()),o),r.size>0&&this._startAlertsChecking(Array.from(r.values()),o,i),a.size>0&&this._removeAlerts(a,o),{added:i,updated:o}},this._validateAlertAdd=e=>{try{const t=!pe.bZ.isPremium(e)||void 0!==e.categoryHuman;return e._raw.impact!==c.wQ.Impact.Critical&&e._raw.impact!==c.wQ.Impact.Advanced&&f.isSome(e.rawId)&&this._log.warn("CAPI provides corrupted impact prop",{alert:e,raw:c.wQ.clearUserTextFields(e._raw)}),t||(this._log.error("CAPI provides corrupted alert",{alert:e,raw:c.wQ.clearUserTextFields(e._raw)}),e.dispose()),(0,a.pipe)(e.rawId,f.exists((e=>f.isSome(this._alertsRepo.getByRawAlertId(e)))))?(this._log.warn("unexpected overlap on rawId for non-updatable alert",{alert:e,raw:c.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):e.lensType===M.R.Type.Plagiarism&&D.T.isMax(e.progress)?(this._log.info("CAPI provides a Plagiarism alert with an invalid progress",{alert:e,raw:c.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):t}catch(t){this._log.error("Cannot validate alert",t);try{e.dispose()}catch(e){this._log.warn("Cannot dispose invalid alert",e)}return!1}},this._recheckedAlerts=new Set,this._terminateAlertChecking=({id:e})=>{this._recheckedAlerts.delete(e)&&this._log.debug("Stopped watching checking state for alert",e)},this._applyRemoveToAlert=({alert:e,reason:t})=>(this._alertsRepo.removeFromCapiMapping(e),t!==pe.bZ.State.Removed.Reason.textChange&&e.clearCapiId(),e.changeState(pe.bZ.State.Removed.create(t))),this._finishAlertChecking=e=>{(0,m.kG)(this._recheckedAlerts.delete(e.id),"tried to finish checking on alert which had not been marked as checking"),this._log.debug("Stopped watching checking state for alert",e.id);const t=le.h.create(e);return pe.xS.create(t,le.h.create(e.changeState(pe.bZ.State.Registered.create(pe.bZ.CheckingState.IDLE))))}}static _prepareUpdate(e,t){const n=Object.assign(Object.assign({},e.toRawAlert()),{rev:t.rev});return c.wQ.withTransformJson(n)&&(0,a.pipe)(t.transformJson,Ae.tap((e=>n.transformJson=e))),(0,a.pipe)(t.extraProperties,Ae.tap((e=>n.extra_properties=e))),(0,a.pipe)(t.muted,Ae.tap((e=>n.muted=e))),n}_processBatch(e){return e.reduce(((e,t)=>(Ee.match({alertAddOrUpdate:t=>{(0,a.pipe)(t.rawId,f.fold((()=>{e.toAdd.set(t.id,t)}),(n=>{(0,a.pipe)(this._alertsRepo.getByRawAlertId(n),f.filter((e=>e.allowUpdate)),f.map((()=>{(0,a.pipe)(f.fromNullable(e.toAddOrUpdate.get(n)),f.map((t=>{this._log.debug("got overlap in batch on update"),e.toUpdate.delete(t.id),e.toDispose.set(t.id,t)}))),e.toUpdate.set(t.id,t)})),f.getOrElse((()=>{(0,a.pipe)(f.fromNullable(e.toAddOrUpdate.get(n)),f.map((t=>{this._log.info("got overlap in batch on add"),e.toAdd.delete(t.id),e.toDispose.set(t.id,t)}))),e.toAdd.set(t.id,t)}))),e.toAddOrUpdate.set(n,t)})))},rangeChange:t=>{(0,m.kG)(void 0===e.rangeChanges,"unexpected rangeChanges duplicate"),e.rangeChanges=t},alertRemove:t=>{e.toRemoveUnfiltered.push(t)},alertChange:t=>{e.toChangeUnfiltered.push(t)}})(t),e)),{toAdd:new Map,toRemoveUnfiltered:[],toChangeUnfiltered:[],toUpdate:new Map,toAddOrUpdate:new Map,rangeChanges:void 0,toDispose:new Map})}_getMergeTarget(e,t){return(0,a.pipe)(e,g.swap,f.fromEither,f.chain((e=>e.mergedIn)),f.chain((e=>{const n=(0,a.pipe)(this._alertsRepo.getByRawAlertId(e),f.map((e=>g.right(e))),f.alt((()=>(0,a.pipe)(f.fromNullable(t.get(e)),f.map((e=>g.left(e)))))));return f.isNone(n)&&this._log.warn("Merge from CAPI: Cannot find alert to merge into.",{capiId:e}),n})),f.filter(Te((e=>!!e.allowUpdate||(this._log.warn("Merge from CAPI: Trying to merge in a non-updatable alert, skipping. ",{target:e.toLiteString()}),!1)))))}_addAlerts(e,t){return e.length>0&&this._log.debug("_addAlerts, count = "+e.length,{alerts:e.map((e=>e.toLiteString()))}),(0,a.pipe)(e,ae.filter(this._validateAlertAdd),ae.reduce({alertsToAdd:new Map,alertsToUpdate:new Map,alertsToRemove:t},((e,t)=>{this._log.trace("Adding alert: "+t.toLiteString());const n=this._getAlertsWithMatchingRanges(t.getHighlightRanges()[0]),r=this._tryToMatchInvalid(t,n);switch(this._log.trace("Adding alert match result",{inc:t.id,match:r}),r.type){case Ie.Type.Merged:{const n=r.result[1];pe.bZ.isNotRegistered(n.alert)?pe.bZ.isRemoved(n.alert)&&this._log.warn("unexpected merge into removed alert",{alert:n,newAlert:t}):this._alertsRepo.addToCapiMapping(n.alert),e.alertsToUpdate.set(n.id,r.result);break}case Ie.Type.Restored:{const t=r.result[1];(0,m.kG)(!e.alertsToRemove.has(t.id),"can't update alert which we wanted to remove earlier"),this._alertsRepo.addToCapiMapping(t.alert),e.alertsToUpdate.set(t.id,r.result);break}case Ie.Type.Unmatched:{const i=r.result,o=n.filter((t=>pe.bZ.isDuplicateCandidate(t)&&this._alertDuplicateValidator(i,t)&&!e.alertsToRemove.has(t.id)));(0,m.kG)(i.allowDuplicates||pe.bZ.isApplicableAlert(i),"BaseAlertImpl must allow duplicates or be an ApplicableAlert type"),o.length>0&&this._log.info("Trying to add a duplicated alert",{newAlert:t.toString(),duplicates:o.map((e=>e.toString()))});const s=i.allowDuplicates?{result:ke.Add,toRemove:f.none}:this._tryAddAlert(i,o);switch(s.result){case ke.Add:case ke.OverwriteExisting:this._log.debug("AllAlerts: Append alert to all alerts",i.toLiteString()),this._alertsRepo.addToCapiMapping(i),(0,m.kG)(!e.alertsToRemove.has(i.id),"can't add alert which we wanted to remove earlier",(()=>i.toLiteString())),this._alertsRepo.add(i),e.alertsToAdd.set(i.id,le.h.create(i)),(0,a.pipe)(s.toRemove,Ae.tap((t=>{if(e.alertsToAdd.has(t.id)){this._alertsRepo.removeFromCapiMapping(t);const e=t.changeState(pe.bZ.State.Removed.create(pe.bZ.State.Removed.Reason.canceled));this._terminateAlertChecking(e),this._alertsRepo.remove(e)}else this._log.debug("schedule to remove duplicate",t.toLiteString()),e.alertsToRemove.set(t.id,{alert:t,reason:pe.bZ.State.Removed.Reason.duplicated});e.alertsToAdd.delete(t.id),e.alertsToUpdate.delete(t.id)})));break;case ke.Skip:this._log.debug("Skip alert with low priority",i.id);break;default:(0,m.vE)(s.result)}break}default:(0,m.vE)(r)}return e})))}_updateAlerts(e,t){this._log.debug(`_updateAlerts, to update = ${e.length}`,{alerts:e.map((e=>e.toLiteString()))}),(0,a.pipe)(e,ae.reduce(t,((e,t)=>(this._log.trace("Updating alert: "+t.toLiteString()),(0,a.pipe)(this._alertsRepo.getByRawAlertId(Ae.unsafeGet(t.rawId)),f.fold((()=>this._log.warn("tried to update unknown alert",t)),(n=>{const r=t._raw;t.dispose();const i=e.has(n.id)?e.get(n.id)[0]:le.h.create(n);n.enqueueRawAlertForUpdate(r),e.set(n.id,pe.xS.create(i,le.h.create(n)))}))),e))))}_startAlertsChecking(e,t,n){this._log.debug(`_startAlertsChecking, to update = ${e.length}`,{alerts:e.map((([e,t])=>[e.toLiteString(),t]))});const r=(e,t)=>{const n=e.changeState(pe.bZ.State.Registered.create(pe.bZ.CheckingState.CHECKING));return this._recheckedAlerts.add(e.id),le.h.create(t.size>0?n.enqueueRangesRemove(t):n)};(0,a.pipe)(e,ae.reduce({updatedAlerts:t,addedAlerts:n},((e,[t,n])=>((0,a.pipe)(this._alertsRepo.getByAlertId(t.id),f.fold((()=>{this._log.warn("tried to start checking unknown alert",{alert:t,ranges:n})}),(()=>{if(e.addedAlerts.has(t.id))e.addedAlerts.set(t.id,r(t,n));else{const i=e.updatedAlerts.has(t.id)?e.updatedAlerts.get(t.id)[0]:le.h.create(t);e.updatedAlerts.set(t.id,pe.xS.create(i,r(t,n)))}}))),e))))}_removeAlerts(e,t){e.forEach(((e,n)=>{(0,a.pipe)(this._alertsRepo.getByAlertId(n),f.fold((()=>{this._log.warn("tried to remove unknown alert",e)}),(()=>{const r=t.has(n)?t.get(n)[0]:le.h.create(e.alert),i=this._applyRemoveToAlert(e);this._terminateAlertChecking(i),t.set(n,pe.xS.create(r,le.h.create(i)))})))}))}_getAlertsWithMatchingRanges(e){return(0,a.pipe)(this._positionManager.findIntersections(e),ae.filter((0,h.W9)(Z.P.is,Z.x.isVisible)),ae.filterMap((e=>this._alertsRepo.getByAlertId(e.meta.alertId))),ae.filter((e=>!(pe.bZ.isApplied(e)&&e.getAppliedRanges().length>0))))}_tryToMatchInvalid(e,t){return(0,m.kG)(!e.isValid,"added alert should be invalid"),(0,m.kG)(pe.bZ.isRegistered(e),"added alert should be in registered state",(()=>e.toString())),(0,a.pipe)(f.fromNullable(t.find((t=>!t.isValid&&t.canBeMergedWith(e)))),f.fold((()=>({result:e,type:Ie.Type.Unmatched})),(t=>{(0,m.kG)((0,a.pipe)(t.rawId,Ae.forAll((0,o.flow)(this._alertsRepo.getByRawAlertId,f.isNone))),"CAPI mapping should not contain invalid alerts"),this._log.debug(`Merging new alert (${e}) into the existing one aid(${t})`);const n=le.h.create(t);return t.patchWithRawAlert(e._raw),e.dispose(),t.allowUpdate&&pe.bZ.isCapiDone(t)?{result:pe.xS.create(n,le.h.create(t.changeState(pe.bZ.State.init))),type:Ie.Type.Restored}:{result:pe.xS.create(n,le.h.create(t)),type:Ie.Type.Merged}})))}_tryAddAlert(e,t){return(0,a.pipe)(se.nI(t),f.map((t=>{(0,m.kG)(1===t.length,"Only one visible alert to one range is expected while _tryEnqueueAlert",`got ${t.map((e=>e.toString()))} with input (${e.toString()})`);const n=t[0];return n.extraProperties.priority<=e.extraProperties.priority?{result:ke.OverwriteExisting,toRemove:f.some(n)}:(e.dispose(),{result:ke.Skip,toRemove:f.none})})),f.getOrElse((()=>({result:ke.Add,toRemove:f.none}))))}_cleanupPendingAlerts(e){e.removed.forEach((e=>{this._heuristicallyRemovedAlerts.delete(e)&&this._log.info("unexpected alert remove from finish msg",e)})),this._heuristicallyRemovedAlerts.size>0&&this._log.info("we had heuristically removed alerts which were not confirmed by capi",{size:this._heuristicallyRemovedAlerts.size}),this._heuristicallyRemovedAlerts.clear()}_finishAlertsChecking(){return(0,a.pipe)(Array.from(this._recheckedAlerts.values()),ae.filterMap((e=>{const t=this._alertsRepo.getByAlertId(e);f.isNone(t)&&(this._log.error("tried to finish checking on missing alert",e),this._recheckedAlerts.delete(e));const n=(0,a.pipe)(t,f.filter((e=>pe.bZ.isRegistered(e))),f.map((e=>(0,o.tuple)(e.id,this._finishAlertChecking(e)))));return f.isNone(n)&&this._log.error("tried to update checking state on non-registered alert",e),n})),(e=>({updated:new Map(e)})))}}function Te(e){return g.fold(e,e)}!function(e){let t;!function(e){e.Unmatched="Unmatched",e.Merged="Merged",e.Restored="Restored"}(t=e.Type||(e.Type={}))}(Ie||(Ie={})),function(e){e.Skip="Skip",e.Add="Add",e.OverwriteExisting="OverwriteExisting"}(ke||(ke={}));class Oe{constructor(){this._log=v.Monitoring.Logging.getLogger("AlertManager.repository",b.LogLevel.DEBUG),this._allAlerts=new Map,this._capiAlertsIdMapping=new Map,this.add=e=>{this._allAlerts.set(e.id,e)},this.remove=e=>{this._log.trace("AllAlerts: Clean alert from all alerts",e.toLiteString()),(0,m.kG)(0===e.references,"can not dispose alert in use",(()=>e.toString())),(0,m.kG)(!1===e.isValid,"can not dispose valid alert",(()=>e.toString())),(0,m.kG)(this._allAlerts.delete(e.id),"alert should exist in alerts list",(()=>e.toString())),e.dispose()},this.addToCapiMapping=e=>{e.isValid||(0,a.pipe)(e.rawId,f.fold((()=>this._log.debug("skip register of local alert in capi mapping",e)),(t=>{this._log.trace("register alert in capi mapping",e.toLiteString()),(0,m.kG)(void 0===this._capiAlertsIdMapping.get(t),"unexpected overlap of rawid alert",(()=>e.toString())),e.validate(),this._capiAlertsIdMapping.set(t,e.id)})))},this.removeFromCapiMapping=e=>{e.isValid&&((0,a.pipe)(e.rawId,Ae.tap((t=>{this._log.trace("clean valid alert capi mapping for: "+e.toLiteString()),(0,m.kG)(this._capiAlertsIdMapping.delete(t),"valid alert should had valid raw id",(()=>e.toString()))}))),e.invalidate())},this.getByAlertId=e=>f.fromNullable(this._allAlerts.get(e)),this.getByRawAlertId=e=>(0,a.pipe)(f.fromNullable(this._capiAlertsIdMapping.get(e)),f.chain(this.getByAlertId)),this.swapRaw=(e,t)=>{const n=(0,a.pipe)(e.rawId,f.exists((e=>this._capiAlertsIdMapping.has(e)))),r=(0,a.pipe)(e.rawId,f.exists((e=>this._capiAlertsIdMapping.has(e))));(0,m.kG)(n||r,"At least one of the swapped alerts should be registered in the system");const i=e._raw;e.silentPatchWithRawAlert(t._raw),t.silentPatchWithRawAlert(i),n&&this._capiAlertsIdMapping.set(Ae.unsafeGet(e.rawId),e.id),r&&this._capiAlertsIdMapping.set(Ae.unsafeGet(t.rawId),t.id)},this.toArray=()=>Array.from(this._allAlerts.values()),this.toMap=()=>this._allAlerts,this.toJSON=()=>({allAlerts:Array.from(this._allAlerts.entries()),idMapping:Array.from(this._capiAlertsIdMapping.entries())})}}var Re=n(96021);class Ne{constructor(e,t,n,c,u,m,E,S=Se.defaultValidator){this._positionManager=e,this._alternativeManager=t,this._getContent=n,this._capiEvents=c,this._capiClient=u,this._documentCounters=m,this._transformRawAlert=E,this._alertDuplicateValidator=S,this._state=s.h.create(C.r.empty),this.state=this._state.view(C.r.toCheckingResult),this.lensesScores=s.h.create(O.empty),this._log=v.Monitoring.Logging.getLogger("AlertManager",b.LogLevel.TRACE),this._subs=[],this._addAlerts=new j.xQ,this._removeAlerts=new j.xQ,this._changeAlerts=new j.xQ,this._flush=new j.xQ,this._alertsPerRevision=0,this._alertsRepository=new Oe,this._pipeline=new xe(this._positionManager,this._alertsRepository,this._alertDuplicateValidator),this._invalidateAlerts=()=>{this.flushAlerts();const[e,t]=d.partition(this._getAllAlertsAsArray(),(e=>e.isValid));this._log.debug("Invalidate alerts...",{valid:e.length,invalid:t.length}),e.forEach((e=>{this._alertsRepository.removeFromCapiMapping(e),e.clearCapiId()})),t.forEach((e=>e.clearCapiId()))},this._removeInvalidAlerts=e=>{this._log.debug(`Removing invalid alerts by type '${e}'...`);const t=this._getTypeFilter(e),n=this._getAllAlertsAsArray().filter((e=>!e.isValid&&pe.bZ.isRegistered(e)&&t(e)));n.forEach((e=>this._removeAlertBuffered(g.right(e.id)))),this._log.debug(`${n.length} invalid alerts removed`),this.flushAlerts(),this._log.isEnabled(b.LogLevel.TRACE)&&this._log.trace("Removed alerts",n.map((e=>e.toString())))},this._onCapiEvent=e=>{try{switch("alert_received"===e.kind&&this._alertsPerRevision++,e.kind){case"alert_received":case"plagiarism_alert_received":if(!1===e.alert.hidden&&void 0===e.alert.cardLayout)return void this._log.warn("got alert with empty mapping",{pname:e.alert.pname});this._addAlertBuffered(pe.bZ.create(this._transformRawAlert(e.alert),this._ops,this._positionManager,this._alternativeManager));break;case"alert_removed":this._log.debug(`Remove from capi #${e.alertId}, merged in #${f.getOrElse((()=>"None"))(e.mergedIn)}, hint: ${f.getOrElse((()=>"None"))(e.hint)}`);(0,a.pipe)(this._alertsRepository.getByRawAlertId(e.alertId),f.exists(pe.bZ.isBulkApplied))||this._removeAlertBuffered(g.left({id:e.alertId,mergedIn:e.mergedIn,hint:e.hint}));break;case"alert_changed":this._log.debug("Alert change from capi #"+e.alertId),this._changeAlertBuffered({id:e.alertId,rev:e.rev,extraProperties:f.fromNullable(e.extraProperties),transformJson:f.fromNullable(e.transformJson),muted:f.fromNullable(e.muted)});break;case"finish":this._log.debug(`Alerts per revision (#${e.revision}): ${this._alertsPerRevision}`),this._alertsPerRevision=0,"idle"===this._capiClient.checkingState&&this._emitDomainEvent(this._pipeline.reset(e))}}catch(t){this._log.warn("Cannot handle alert event "+e.kind,t)}},this._emitDomainEvent=e=>{(0,a.pipe)(e,this._prepareDiff,_.v.createDiff,p.T.recover((e=>this._log.error("conflicts on diff creating",e))),(e=>(this._log.debug("_emitDomainEvent",w.p.Diff.show.show(e)),e)),C.r.applyDiff,y.UI(p.T.recover((e=>this._log.error("conflicts on diff apply",e)))),(e=>this._state.modify(e)))},this._prepareDiff=({added:e,updated:t=new Map,removed:n=new Map})=>(t.forEach(((e,r)=>{(0,a.pipe)(e,i.Yg,pe.bZ.fromAlertModel,pe.bZ.shouldBeRemoved)&&(t.delete(r),n.set(r,e[0]))})),n.forEach((0,o.flow)(pe.bZ.fromAlertModel,this._disposeAlert)),{added:e,updated:t,removed:n}),this._disposeAlert=e=>{if(pe.bZ.isApplied(e)&&e.state.undoable.commit(),pe.bZ.isNotRegistered(e))try{this._alertsRepository.remove(e)}catch(t){this._log.error("can not remove alert",t),pe.bZ.isNotDisposed(e)&&e.dispose()}else this._log.error("unexpected remove of registered alert",e.toString())},this._ops=new _e(this._positionManager,this._getContent,this._capiClient,this._alertsRepository),this.loadScores=e=>{this.lensesScores.set(e)},this.undoApplied=this._ops.undoApplied,this.changes=this._ops.changes;const I=e.rangeChanged.pipe(T.U((({affected:e})=>e)),F.h((e=>e.length>0)),T.U((e=>U.vM((e=>e.meta.alertId),e.filter(Z.P.is)))),F.h((e=>e.size>0)),x.b((e=>this._log.debug("Range[s] changed",e))),W.B()),k=G.F(250).pipe(q.O(0),H.T(this._flush)),A=$.RX(this._log);this._subs.push(A("_alertsInvalidation",this._capiEvents.pipe(F.h(l.h.is("session_started")),x.b(this._invalidateAlerts),z.c(V.T(this._capiEvents.pipe(F.h(l.h.is("finish")),Y.P(),X.h("alert")),this._capiEvents.pipe(F.h(l.h.is("async_check_finished")),Y.P(),X.h("plagiarism")))),x.b(this._removeInvalidAlerts))),A("_capiEvents",this._capiEvents.pipe(x.b(this._onCapiEvent))),A("_alertsProccesing",this._addAlerts.pipe(H.T(this._removeAlerts),H.T(this._changeAlerts),H.T(I),J.f(k),F.h(h.Dw),T.U(this._pipeline.process),x.b(this._emitDomainEvent))),A("_alertsBuffer",I.pipe(H.T(this._capiEvents.pipe(F.h(l.h.is("before_finish","before_async_check_finish","async_check_finished")))),X.h($.PU),x.b(this._flush))),A("_alertOpsAlertChanges",this._ops.events.pipe(x.b(this._emitDomainEvent))),A("_lensesScoresChanges",O.fromCapi(this._capiEvents).pipe(x.b($.wW(this.lensesScores)))),A("documentCountersChanges",r.fromAlerts(this._state.view(_.v.iso.wrap)).pipe(x.b($.wW(this._documentCounters))))),(0,h.iR)("alerts",(()=>this.toString())),(0,h.iR)("triggerRemove",(e=>{this._removeAlertBuffered(g.right(e))}))}flushAlerts(){this._flush.next()}loadAlerts(e){const t=new Map;return(0,h.Dw)(e)&&(this._log.debug(`${e.length} external alert(s) where loaded`),e.map(Re.I.splitById).map((({id:e,local:t})=>({id:e,alert:pe.bZ.create((0,a.pipe)(t,c.wQ.matchBy(o.identity,(e=>Object.assign(Object.assign({},e),{transformJson:{highlights:e.transformJson.highlights,alternatives:(0,a.pipe)(e.transformJson.alternatives,f.map(u.r3.Group.fromSerialized))}})),o.identity),this._transformRawAlert),this._ops,this._positionManager,this._alternativeManager)}))).forEach((({id:e,alert:n})=>{this._addAlertBuffered(n),e&&t.set(e,n.id)}))),t}toString(){return JSON.stringify(this,void 0,2)}toJSON(){return{repo:this._alertsRepository}}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_getTypeFilter(e){switch(e){case"alert":return e=>!pe.bZ.isPlagiarism(e);case"plagiarism":return e=>pe.bZ.isPlagiarism(e);default:return(0,m.vE)(e)}}_addAlertBuffered(e){this._log.trace(`_addAlert(${e.toLiteString()})`),this._addAlerts.next(e)}_changeAlertBuffered(e){this._log.trace(`_changeAlert(${e.id})`),this._changeAlerts.next(e)}_removeAlertBuffered(e){this._log.trace(`_removeAlert(${Ce.toString(e)})`),this._removeAlerts.next(e)}_getAllAlertsAsArray(){return this._alertsRepository.toArray().filter(pe.bZ.isNotRemoved)}}},6488:(e,t,n)=>{n.d(t,{e:()=>r});var r,i=n(40327),o=n(5114),a=n(4390),s=n(40018);!function(e){e.create=function(e){const t=t=>(0,i.pipe)(e.get(),a.p.get(t),o.map(s.bZ.fromAlertModel)),n=e=>(0,i.pipe)(t(e),o.filter(s.bZ.isInteractable)),r=e=>(0,i.pipe)(t(e),o.filter(s.bZ.isRegistered));return{getById:t,getRegistered:r,getInteractable:n,isRegistered:e=>(0,i.pipe)(r(e),o.isSome),isInteractable:e=>(0,i.pipe)(n(e),o.isSome)}}}(r||(r={}))},79227:(e,t,n)=>{n.d(t,{J:()=>r,k:()=>v});var r,i=n(71249),o=n(95195),a=n(23330),s=n(35214),l=n(64015),c=n(57050),u=n(40327),d=n(84966),p=n(5114),h=n(95574),m=n(81670),f=n(81531),g=n(40018),y=n(66896);!function(e){e.getSubTypeFromLens=e=>y.R.isPriority(e)||y.R.isPriorityOutcomeId(e)?d.e3.SidebarPriority:d.e3.Sidebar}(r||(r={}));class v{constructor(e,t){this._alertsReader=e,this._ops=t,this._log=f.Monitoring.Logging.getLogger("AlertsServiceImpl"),this._findAlert=e=>(0,u.pipe)(e,this._alertsReader.getById,o.fromOption((()=>new Error(`alert ${e} not found in the repo`)))),this.undoBulk=(0,c.flow)(l.DZ((0,c.flow)(this._alertsReader.getById,p.filter(g.bZ.isBulkApplied))),(e=>this._ops.undoApplied(e,g.bZ.State.Applied.Method.Bulk)()),o.getOrElse((e=>{throw this._log.error("Could not undo bulk-applied alerts",e),e}))),this.getHighlightRanges=(0,c.flow)(this._findAlert,o.map((e=>e.getHighlightRanges()))),this.hasNewRangesForUpdate=(0,c.flow)(this._findAlert,o.map((e=>e.hasNewRangesForUpdate))),this.applyPendingRangesUpdate=(0,c.flow)(this._findAlert,o.map((e=>e.applyPendingRangesUpdate()))),this.getAppliedRanges=(0,c.flow)(this._alertsReader.getById,o.fromOption((()=>new Error("alert not found in the repo"))),o.filterOrElse(g.bZ.isApplicableAlert,(e=>new Error(`alert is not applicable: ${e.alertType}`))),o.map((e=>e.getAppliedRanges())))}apply(e,t){const{alternativeIndex:n,source:r}=t;return this._log.trace("apply",e),(0,u.pipe)(this._findAlert(e),o.chain(o.fromPredicate(g.bZ.isApplicableAlert,(()=>new Error("cannot apply not applicable alert")))),o.chain((e=>(0,u.pipe)(h.tryCatchError((()=>e.apply(t))),o.mapLeft((t=>(this._log.error("apply single alert error",{error:t,alert:e.toLiteAlert(),alternativeIndex:n,source:r}),t)))))))}applyBulk(e,t){this._log.trace("applyBulk",e),this.sendBatchFeedback(e,d.DI.BULK_ACCEPTED,t);const n=(0,u.pipe)(e,m.T.fromArray((e=>(0,u.pipe)(this._findAlert(e),o.mapLeft((t=>(0,c.tuple)(t,{id:e}))),o.chain(o.fromPredicate(g.bZ.isRegisteredApplicableAlert,(e=>(0,c.tuple)(new Error("cannot apply not applicable or non-registered alert"),e.toLiteAlert())))),o.chain(o.fromPredicate((e=>d.wQ.withTransformJson(e._raw)),(e=>(0,c.tuple)(new Error("Only alerts with transformJSON can be bulk applied"),e.toLiteAlert())))),o.mapLeft((([e,t])=>(this._log.error(e.message,t),e)))))));return(0,u.pipe)(n,m.T.flatMap(i.getMonoid(),(e=>(0,u.pipe)(this._ops._applyTransformJson({alerts:e.map((e=>({alert:e,alternative:g.bZ.getApplicableAlternative(e,0)}))),source:g.l$.api,method:g.bZ.State.Applied.Method.Bulk,feedbackSubtype:t}),a.g_((t=>()=>(this._log.error("applyBulk error",t),m.T.of([],e.map((e=>e.id))))),(()=>()=>m.T.of(e.map((e=>e.id))))))())))}confirmApplied(e){return this._log.trace("commitApplied",e),(0,u.pipe)(e,m.T.fromArray((0,c.flow)(this._findAlert,o.map(g.Ev.castApplied))),o.mapLeft((e=>new Error(`Error on trying to confirm applied alerts: ${e.rejected.join(",")}`))),o.chain((e=>this._ops._confirmApplied(e)())))}dismissBatch(e,t){return this._log.trace("dismissBatch",e),(0,u.pipe)(e.map((0,c.flow)(this._findAlert,o.map((e=>[e])))),(0,s.fold)(w),o.chain((e=>this._ops._dismissBatch(e,t)())))}applyFeedback(e,t,n){return this._log.trace("sendFeedback",{alertId:e,type:t.kind}),(0,u.pipe)(this._findAlert(e),o.chain((e=>this._ops._alertFeedback(e,t,n)())))}sendBatchFeedback(e,t,n){return this._log.trace("sendBatchFeedback",{alertIds:e,type:t}),(0,u.pipe)(e,m.T.fromArray(this._findAlert),m.T.tapFailure((e=>this._log.error("Cannot send batch feedback for alerts",e.rejected))),m.T.foldSuccess((e=>o.right(this._ops._alertBatchFeedback(e,t,n)()))))}takeReference(e,t){return this._log.trace("takeReference",{alertId:e.id,from:t}),(0,u.pipe)(this._findAlert(e.id),o.chain((e=>e.takeReference(t))))}changeMuteState(e,t){return this._log.trace("changeMuteState",e),(0,u.pipe)(e,m.T.fromArray((e=>this._findAlert(e.id))),m.T.flatMap(i.getMonoid(),(e=>(0,u.pipe)(this._ops._changeMuteState(e,t)(),o.mapLeft((e=>(this._log.error("Can not change mute state",e),e))),h.unsafeGet))))}changeGapValue(e,t){return(0,u.pipe)(this._findAlert(e),o.chain((e=>this._ops._changeGapValue(e,t)())))}changeSmartPhrasesFeedback(e,t){return(0,u.pipe)(this._findAlert(e),o.chain((e=>this._ops._changeSmartPhrasesFeedback(e,t)())))}rotateSmartPhrasesReplacements(e){return(0,u.pipe)(this._findAlert(e),o.chain((e=>this._ops._rotateSmartPhrasesReplacements(e)())))}discardSmartPhrasesReplacement(e,t){return(0,u.pipe)(this._findAlert(e),o.chain((e=>this._ops._discardSmartPhrasesReplacement(e,t)())))}changeTakeawayFeedback(e,t){return(0,u.pipe)(this._findAlert(e),o.chain((e=>this._ops._changeTakeawayFeedback(e,t)())))}changeSentenceLevelBrandTonesFeedback(e,t){return(0,u.pipe)(this._findAlert(e),o.chain((e=>this._ops._changeSentenceLevelBrandTonesFeedback(e,t)())))}requestShortenItReplacements(e){return(0,u.pipe)(this._findAlert(e),o.chain((e=>this._ops._requestShortenItReplacements(e)())))}}const b=i.getMonoid(),w=(0,o.getApplyMonoid)(b)},43320:(e,t,n)=>{n.d(t,{R:()=>a});var r=n(12738),i=n(51072),o=n(32952);class a{constructor(e,t,n,i,o,s,l,c){const u=a.NamedChangesSink.factory(c),d={pm:u(a.Receiver.PM,o),dm:u(a.Receiver.PM,s),capi:u(a.Receiver.CAPI,i),dox:u(a.Receiver.DOX,n),userTextSilent:u(a.Receiver.UserText,a._duplexToSync(e,r.$.Mode.silent)),userTextEcho:u(a.Receiver.UserText,a._duplexToSync(e,r.$.Mode.echo))};a.Producer.create(a.Producer.UserText,{changes:e.changes})(d.dm,d.pm,d.capi,d.dox),a.Producer.create(a.Producer.ALERT_APPLY,l)(d.userTextEcho),a.Producer.create(a.Producer.DOX,n)(d.dm,d.pm,d.userTextSilent,d.capi),t.subscribe((t=>{"before_alert"===t.kind&&e.flushChanges()}))}static init(e,t,n,r,i,s,l){const c=new o.xQ;return new a(e,t,n,r,i,s,l,c),c}}a._duplexToSync=(e,t)=>({pushChanges:n=>{e.pushChanges(n,t)}}),function(e){let t,n,r;!function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.ALERT_APPLY="alert_synonyms_manager"}(t=e.Producer||(e.Producer={})),function(e){e.create=function(e,t){return(...n)=>t.changes.subscribe((t=>{n.forEach((n=>n.pushChanges(e,t)))}))}}(t=e.Producer||(e.Producer={})),function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.CAPI="checking_service",e.PM="position_manager"}(n=e.Receiver||(e.Receiver={})),function(e){function t(e,t,n){return{pushChanges:(r,o)=>{try{let a=t.pushChanges(o);"function"==typeof a&&(a=i.toPromise(a)),void 0!==a&&a.catch((t=>n.next({exception:t,details:{from:r,to:e}})))}catch(t){n.next({exception:t,details:{from:r,to:e}})}}}}e.factory=function(e){return(n,r)=>t(n,r,e)},e.create=t}(r=e.NamedChangesSink||(e.NamedChangesSink={}))}(a||(a={}))},6956:(e,t,n)=>{n.d(t,{$:()=>M});var r,i,o=n(40327),a=n(49524),s=n(59312),l=n(99950),c=n(25938),u=n(64450),d=n(83078),p=n(36991),h=n(5114),m=n(32952),f=n(95300),g=n(66310),y=n(24209),v=n(50628),b=n(77176),w=n(76974),_=n(2834),C=n(85985),E=n(95093),S=n(62962),I=n(95343),k=n(25656),A=n(18625),x=n(13444),T=n(22232),O=n(95195),R=n(81531),N=n(46680),L=n(12738),P=function(){function e(e){var t=this;this._primarySourceChangeProcessor=e,this._log=R.Monitoring.Logging.getLogger("DuplexImpl",N.LogLevel.DEBUG),this._maybePrimarySourceContent=h.none,this._secondarySourceContent=c.RI.unsafeRes(new u.Delta),this._syncFlash=new m.xQ,this._syncTimer=i.getImmediateTimer(),this.state=new f.X("idle"),this._changesToSecondarySource=new m.xQ,this._changesToSecondarySourceSync=new m.xQ,this.changesToPrimarySource=new m.xQ,this.changesToSecondarySource=this._changesToSecondarySource.pipe(g.w((function(e){switch(e.kind){case"reset":return t._maybePrimarySourceContent=h.some(e.reset),y.T(t._syncTimer.timer,t._syncFlash).pipe(v.P(),b.U((function(){var n=t._secondarySourceContent.delta.diff(e.reset.delta);return{fullText:e.reset,change:c.RI.delta(n,t._secondarySourceContent.length)}})));case"change":return t._syncTimer.reset(),w.of({fullText:e.fullText,change:e.change});default:return(0,T.vE)(e)}})),_.b((function(e){var n=e.fullText;"syncing"===t.state.getValue()&&(t._log.debug("Back to consistent state"),t.state.next("idle")),t._maybePrimarySourceContent=h.none,t._secondarySourceContent=n})),b.U((function(e){return e.change})),C.h((function(e){return e.delta.ops.length>0})),E.T(this._changesToSecondarySourceSync),_.b((function(){t._log.debug("Emit change to secondary source")})),S.n(),I.x())}return Object.defineProperty(e.prototype,"flush",{get:function(){return this._flush(),l.of(void 0)},enumerable:!1,configurable:!0}),e.prototype._flush=function(){this._syncFlash.next(void 0)},e.prototype.getSecondarySourceContents=function(){return this._secondarySourceContent},e.prototype.getPrimarySourceContents=function(){var e=this;return(0,o.pipe)(this._maybePrimarySourceContent,h.getOrElse((function(){return e._secondarySourceContent})))},e.prototype.pushChanges=function(e){switch(e.from){case"primary":return this._pushChangesFromPrimarySource(e.change);case"secondary":return this._pushChangesFromSecondarySource(e.change,e.mode);default:(0,T.vE)(e)}},e.prototype._pushChangesFromPrimarySource=function(e){var t=this;return this._log.debug("Got change from primary source"),(0,o.pipe)(this._primarySourceChangeProcessor(this._secondarySourceContent,this._maybePrimarySourceContent,e),O.map((function(e){"flush"===e.kind?(t._flush(),t._changesToSecondarySourceSync.next(c.RI.flush())):t._changesToSecondarySource.next(e)})))},e.prototype._pushChangesFromSecondarySource=function(e,t){var n=this;switch(this._log.debug("Got change from secondary source",{source:t}),e.kind){case"delta":return h.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=h.some(this._secondarySourceContent)),(0,o.pipe)(this._secondarySourceContent,(function(t){return e.prevLen===t.length?(0,o.pipe)(c.RI.res(t.delta.compose(e.delta)),O.fold((function(){return O.left(new Error("Got non-document delta after apply"))}),(function(t){return O.right([e,t])}))):O.left(new Error("Got delta for wrong text, document length: "+t.length+", got change for "+e.prevLen))}),O.fold((function(e){return n._changesToSecondarySourceSync.next(n._secondarySourceContent),O.left(e)}),(function(e){var r=e[0],i=e[1];return n._secondarySourceContent=i,t===L.$.Mode.echo&&n._changesToSecondarySourceSync.next(r),n.changesToPrimarySource.next(r),O.right(void 0)})));case"reset":return h.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=h.some(this._secondarySourceContent)),this._secondarySourceContent=e,"echo"===t&&this._changesToSecondarySourceSync.next(e),this.changesToPrimarySource.next(e),O.right(void 0);case"flush":return this.changesToPrimarySource.next(e),O.right(void 0);default:(0,T.vE)(e)}},e}();!function(e){var t;!function(e){e.reset=function(e){return O.right({kind:"reset",reset:e})},e.change=function(e){return O.right((0,s.__assign)({kind:"change"},e))},e.error=function(e){return O.left(new Error(e))}}(t||(t={})),e.deltaChangeProcessor=function(e,n,r){if(c.RI.isFlush(r))return O.right(r);if(0===e.length)return c.RI.isReset(r)?t.change({fullText:r,change:r}):0===r.prevLen?(0,o.pipe)(c.RI.res(r.delta),O.fold((function(){return t.error("Cannot apply non-document delta to an empty text")}),(function(e){return t.change({fullText:e,change:r})}))):t.error("Cannot apply delta to text. Expected change for len 0, but got "+r.prevLen);if(h.isNone(n))return c.RI.isDelta(r)&&e.length!==r.prevLen?t.error("Cannot apply delta for wrong text length, expected "+e.length+", but got "+r.prevLen):(0,o.pipe)(c.RI.res(e.delta.compose(r.delta)),O.fold((function(){return t.error("Cannot apply invalid delta")}),(function(e){return t.change({fullText:e,change:r})})));if(c.RI.isDelta(r)&&d.unsafeGet(n).length!==r.prevLen)return t.error("Cannot apply delta for wrong text length");var i=c.RI.isReset(r)?r.delta:d.unsafeGet(n).delta.compose(r.delta);return p.s.deltaEq.equals(i,e.delta)?t.change({fullText:e,change:c.RI.delta(new u.Delta,e.length)}):(0,o.pipe)(c.RI.res(i),O.fold((function(){return t.error("Cannot apply invalid delta")}),t.reset))},e.fullTextProcessor=function(e,n,r){var i=c.RI.unsafeRes((new u.Delta).insert(r));if(0===e.length)return t.change({fullText:i,change:i});if(h.isNone(n)){var o=e.delta.diff(i.delta);return t.change({fullText:i,change:c.RI.delta(o,e.length+p.s.calcDiffLength(o))})}return p.s.deltaEq.equals(i.delta,e.delta)?t.change({fullText:i,change:c.RI.delta(new u.Delta,e.length)}):t.reset(i)}}(r||(r={})),function(e){e.getImmediateTimer=function(){return{timer:w.of(void 0),reset:k.Z}},e.getAuditTimer=function(e){var t=h.none;return{timer:A.P((function(){var n=(0,o.pipe)(t,h.fold((function(){return e}),(function(t){var n=Date.now()-t;return n>e?0:n})));return t=(0,o.pipe)(t,d.orElse(h.some(Date.now()))),w.of(void 0).pipe(x.g(n),_.b((function(){t=h.none})))})),reset:function(){return t=h.none}}}}(i||(i={}));var M,D=n(95574),F=n(8125),B=n(43320);!function(e){e.connectAsPrimarySourceToDuplex=e=>{const t=new m.xQ,n=R.Monitoring.Logging.getLogger("DenaliEditorToDuplexConnector",N.LogLevel.DEBUG),i=new P(r.deltaChangeProcessor),s=B.R.NamedChangesSink.factory(t),l=B.R.Producer.create(B.R.Producer.UserText,{changes:i.changesToPrimarySource})(s(B.R.Receiver.DEd,{pushChanges:t=>{e.pushChanges(t,"user")}})),c=B.R.Producer.create(B.R.Producer.DEd,e)(s(B.R.Receiver.UserText,{pushChanges:t=>{const r=i.pushChanges({from:"primary",change:t});(0,o.pipe)(r,D.chainLeft((r=>(n.error("Cannot pass invalid change from master",r,t),i.pushChanges({from:"primary",change:e.getContents()})))),O.fold((e=>{n.fatal("Cannot reset duplex with full context",e)}),a.y))}}));return{duplex:i,fails:t,dispose:()=>{l.unsubscribe(),c.unsubscribe()}}},e.duplexAsUserSource=e=>({changes:e.changesToSecondarySource,pushChanges:(t,n)=>e.pushChanges({from:"secondary",change:t,mode:n}),flushChanges:F.ZT,getContents:()=>e.getSecondarySourceContents()}),e.connectAsPrimarySourceWithoutDuplex=e=>({changes:e.changes,pushChanges(t,n){e.pushChanges(t,n===L.$.Mode.echo?"user":"api")},getContents:()=>e.getContents(),flushChanges:()=>e.flushChanges()})}(M||(M={}))},5008:(e,t,n)=>{n.d(t,{n:()=>r,A:()=>i});var r,i,o=n(57050),a=n(25938),s=n(36991),l=n(8125),c=n(62965),u=n(24209);!function(e){e.noopSync={pushChanges:l.ZT},e.ignoreResult=function(e){return{pushChanges:t=>{e.pushChanges(t)}}},e.ignoreTEResult=function(e){return{pushChanges:(0,o.flow)(e.pushChanges,c.UI(l.ZT))}},e.pushDeleteThenInsert=function(e){return{pushChanges:t=>{(a.RI.isDelta(t)?a.RI.fromArrayOfDeltas(s.s.splitToDeleteThenInsert(t.delta).filter(s.s.nonEmpty),t.prevLen):[t]).forEach((t=>e.pushChanges(t)))}}}}(r||(r={})),function(e){e.merge=function(e){return{changes:u.T(...e.map((e=>e.changes)))}}}(i||(i={}))},4390:(e,t,n)=>{n.d(t,{p:()=>r});var r,i=n(22690),o=n(57050),a=n(40327),s=n(64681),l=n(92843),c=n(93756),u=n(81670),d=n(19429),p=n(70996),h=n(7410),m=n(88570);!function(e){let t;!function(e){e.show=l.v.getShow(i._3,p.h.show),e.eq=l.v.getEq(p.h.Id.ord,p.h.ord),e.empty=()=>l.v.empty(),e.toRegistered=function(e){return l.v.fromMutation((t=>{(0,a.pipe)(e,l.v.forEach(((e,n)=>p.h.isRegistered(e)&&t.set(n,c.t$(e))),((e,n,r)=>{p.h.isRegistered(e)?p.h.isRegistered(n)?t.set(r,c.Hk(e,n)):t.set(r,c.t$(e)):p.h.isRegistered(n)&&t.set(r,c.F2(n))}),((e,n)=>p.h.isRegistered(e)&&t.set(n,c.F2(e)))))}))},e.filter=function(e){return l.v.filter(e,((t,n)=>e(t)&&e(n)),e)}}(t=e.Diff||(e.Diff={})),e.empty=h.v.iso.wrap(h.v.empty),e.eq=s.Eh(h.v.eqShow),e.get=function(e){return(0,o.flow)(h.v.iso.unwrap,h.v.get(e))},e.reduce=function(e,t){return(0,o.flow)(h.v.iso.unwrap,h.v.reduce(e,t))},e.diff=function(e,t){return h.v.diff(h.v.iso.unwrap(e),h.v.iso.unwrap(t))},e.isEmpty=function(e){return 0===h.v.iso.unwrap(e).entries.size},e.find=function(e){return(0,o.flow)(h.v.iso.unwrap,h.v.find(e))},e.size=function(){return(0,o.flow)(h.v.iso.unwrap,h.v.size)},e.from=function(e){return(0,a.pipe)(h.v.createDiff({added:e.reduce(((e,t)=>e.set(t.id,p.h.create(t))),new Map)}),u.T.recover(o.constVoid),m.r.applyDiff,d.UI((0,o.flow)(u.T.recover(o.constVoid),h.v.iso.wrap)))(h.v.empty)}}(r||(r={}))},7410:(e,t,n)=>{n.d(t,{v:()=>r});var r,i=n(71249),o=n(22690),a=n(40327),s=n(64681),l=n(92843),c=n(5114),u=n(22232),d=n(95574),p=n(43675),h=n(95195),m=n(93756),f=n(90329),g=n(73975),y=n(20976),v=n(70996);!function(e){function t(e,t){return n=>n.order.reduce(((e,r)=>((0,u.kG)(n.entries.has(r),"got corrupted state"),t(e,n.entries.get(r)))),e)}function n({added:e=new Map,updated:t=new Map,removed:n=new Map}){const r=new Map,i=l.v.fromMutation((i=>{n.forEach(((e,t)=>{i.set(t,m.t$(e))})),e.forEach(((e,t)=>{i.has(t)?r.set(t,`alert add overlaps with alert remove: toAdd(${v.h.show.show(e)} overlapWith(${m.ZN(v.h.show,v.h.show).show(i.get(t))}))`):i.set(t,m.F2(e))})),t.forEach((([e,t],n)=>{i.has(n)?r.set(n,`alert update overlaps with unexpected alert add/remove: toUpdate(${v.h.show.show(t)}) overlapWith(${m.ZN(v.h.show,v.h.show).show(i.get(n))}))`):i.set(n,m.Hk(e,t))}))}));return r.size>0?h.left({recovered:i,rejected:r}):h.right(i)}e.iso=s.k4(),e.empty={entries:new Map,order:[],latestChangeDiff:l.v.empty(),diffVersion:0},e.get=function(e){return t=>c.fromNullable(t.entries.get(e))},e.find=function(e){return t(c.none,((t,n)=>(0,a.pipe)(t,c.alt((()=>c.fromPredicate(e)(n))))))},e.reduce=t,e.size=e=>e.entries.size,e.diff=function(e,t){return 0===e.diffVersion?d.unsafeGet(n({added:t.entries})):e.diffVersion+1===t.diffVersion?t.latestChangeDiff:p.symmetricDiff(v.h.ord)(e.entries,t.entries)},e.applyDiff=function(e){return t=>{const n=p.leftToRight(p.Merger.createStrict(v.h.ordShow),t.entries,e);return(0,a.pipe)(n,h.bimap((n=>{const r=l.v.fromMutation((t=>{(0,a.pipe)(e,l.v.forEach(((e,r)=>!n.rejected.has(r)&&t.set(r,m.t$(e))),((e,r,i)=>!n.rejected.has(i)&&t.set(i,m.Hk(e,r))),((e,r)=>!n.rejected.has(r)&&t.set(r,m.F2(e)))))}));return{recovered:w(n.recovered,r,t.diffVersion),rejected:n.rejected}}),(n=>w(n,e,t.diffVersion))))}},e.applyDiffLoose=function(e){return t=>{const n=p.leftToRight(p.Merger.createLoose(v.h.ordShow),t.entries,e);return(0,a.pipe)(n,h.bimap((n=>({recovered:w(n.recovered,e,t.diffVersion),rejected:n.rejected})),(n=>w(n,e,t.diffVersion))))}},e.createDiff=n,e.toJSON=function(e){return{entries:Array.from(e.entries),order:e.order,latestChangeDiff:l.v.toJSON(e.latestChangeDiff),diffVersion:e.diffVersion}},e.diffEqShow=Object.assign(Object.assign({},l.v.getEq(v.h.Id.ord,v.h.ord)),l.v.getShow(v.h.Id.show,v.h.show));const r=Object.assign(Object.assign({},f.Eh(v.h.Id.ord,v.h.ord)),f.ZN(v.h.Id.show,v.h.show)),b=Object.assign(Object.assign({},i.getEq(v.h.Id.ord)),i.getShow(v.h.Id.show));function w(e,t,n){return{entries:e,order:(0,a.pipe)(e,f.VO(v.h.ord),i.map((e=>e.id))),latestChangeDiff:t,diffVersion:n+1}}e.contentEqShow=Object.assign(Object.assign({},g.getStructEq({entries:r,order:b,latestChangeDiff:y.eqEmpty,diffVersion:y.eqEmpty})),o.aM({entries:r,order:b,latestChangeDiff:e.diffEqShow,diffVersion:o.yt})),e.eqShow=Object.assign(Object.assign({},g.getStructEq({entries:r,order:b,latestChangeDiff:e.diffEqShow,diffVersion:g.eqNumber})),o.aM({entries:r,order:b,latestChangeDiff:e.diffEqShow,diffVersion:o.yt}))}(r||(r={}))},88570:(e,t,n)=>{n.d(t,{r:()=>r});var r,i=n(57050),o=n(95195),a=n(7410);!function(e){e.empty=a.v.empty,e.applyDiff=function(e){return(0,i.flow)(a.v.applyDiffLoose(e),o.mapLeft((e=>({recovered:e.recovered,rejected:e.rejected}))))},e.toCheckingResult=function(e){return a.v.iso.wrap(e)}}(r||(r={}))},89772:(e,t,n)=>{n.d(t,{w:()=>i});var r,i,o=n(57050),a=n(40327),s=n(92843),l=n(68983),c=n(5114),u=n(90329),d=n(66896),p=n(51653),h=n(70996);!function(e){e.modelToCounters=function(e){return h.h.isRegistered(e)?e.counters:p.R.empty}}(r||(r={})),function(e){e.monoid=u.uZ(d.R.Id.ord,d.R.Meta.group),e.eq=u.Eh(d.R.Id.ord,d.R.Meta.eq),e.isEmpty=u.xb,e.lookup=u.P5(d.R.Id.ord),e.applyDiff=t=>r=>c=>(0,a.pipe)(r,s.v.foldMap(e.monoid)(i(t),p(t),n(t)),(0,l.W)(e.monoid.concat)(c),u.hX((0,o.not)(d.R.Meta.isEmpty))),e.updatePercentiles=e=>t=>{let n=t;return e.forEach(((e,t)=>{n=(0,a.pipe)(n,u.cq(d.R.Id.ord)(t,d.R.Meta.ratioToPercentile(e)),c.fold((()=>(0,a.pipe)(n,u.ZQ(d.R.Id.ord)(t,d.R.Meta.fromPercentile(e)))),o.identity))})),n};const t=(0,o.flow)(r.modelToCounters,d.R.Meta.fromAlertCounters),n=e=>n=>h(e)(n,t),i=e=>n=>h(e)(n,(0,o.flow)(t,d.R.Meta.group.inverse)),p=t=>(r,o)=>e.monoid.concat(n(t)(o),i(t)(r)),h=e=>(t,n)=>(0,a.pipe)(e,u.hX((e=>e(t.alert))),u.UI((()=>n(t))))}(i||(i={}))},13313:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(38983),o=n(4390),a=n(54216),s=n(93508),l=n(57091),c=n(67434),u=n(98403),d=n(89772);!function(e){e.defaultState={alerts:o.p.empty,lenses:d.w.monoid.empty},e.get=(r,i,a)=>i.pipe(s.O(new Map),l.a(r.pipe(s.O(o.p.empty),c.R(((e,n)=>t(n,a.lensFilters)(e)),e.defaultState)),n)),e.getMock=(t,n)=>{const r=i.h.create(e.defaultState);return e.get(t,n,a.t.create(a.t.defaultLensFilters,a.t.defaultTextFilters)).subscribe(u.wW(r)),r};const t=(e,t)=>n=>{const r=o.p.Diff.toRegistered(o.p.diff(n.alerts,e));return{alerts:e,lenses:d.w.applyDiff(t)(r)(n.lenses)}},n=(e,t)=>Object.assign(Object.assign({},t),{lenses:d.w.updatePercentiles(e)(t.lenses)})}(r||(r={}))},35301:(e,t,n)=>{n.d(t,{J:()=>r});var r,i=n(71249),o=n(22690),a=n(57050),s=n(40327),l=n(38983),c=n(84966),u=n(80358),d=n(45701),p=n(90329),h=n(5114),m=n(43675),f=n(62965),g=n(95195),y=n(8125),v=n(81531),b=n(40018),w=n(32952),_=n(45586),C=n(85985),E=n(77176),S=n(2834),I=n(98403),k=n(16118),A=n(40151),x=n(85654);!function(e){let t,n,r;!function(e){let t;!function(e){e.ord=d.ordString,e.show=o._3,e.create=e=>e}(t=e.Id||(e.Id={})),e.isSpecial=e=>Object.values(c.JW.SpecialCategory).includes(e),e.specialCategoryDescription="Special category"}(t=e.Category||(e.Category={})),function(e){e.filter=e=>p.hX((t=>e(t.id))),e.filterWithCount=(e,t)=>n=>{const r=Array.from(n.keys()),i=x.k.getAlerts(t,r).byCategory;return(0,s.pipe)(n,p.DZ((t=>e(t.id)?h.some(Object.assign(Object.assign({},t),{alertsCount:i.get(t.id).filter(b.bZ.isRegistered).length})):h.none)))}}(n=e.BaseMutedCategories||(e.BaseMutedCategories={})),function(e){let r,o;!function(e){let t;!function(e){e.CategoriesChanged="CategoriesChanged"}(t=e.Type||(e.Type={})),e.isChangedEvent=function(e){return e.type===t.CategoriesChanged}}(r=e.Events||(e.Events={})),e.create=function(e,o,d,p,y){const A=v.Monitoring.Logging.getLogger("MutedAlertsModel"),T=l.h.create(new Map),O=new w.xQ,R=new _.w.Keeper;return R.push(e.pipe(C.h(u.h.is("session_started")),E.U((e=>function(e){const t=e.map((e=>[e.userMuteCategory,{id:e.userMuteCategory,description:e.userMuteCategoryDescription,scope:e.userMuteScope}]));return new Map(t)}(e.userMutedCategories))),S.b(I.wW(T)),S.b((()=>O.next({type:r.Type.CategoriesChanged})))).subscribe(),T.pipe(k.G(),E.U((([e,n])=>function(e,n){return{muted:m.diffKeys(t.Id.ord)(e,n),unmuted:m.diffKeys(t.Id.ord)(n,e)}}(e,n))),E.U(function(e){return({muted:t,unmuted:n})=>({toMute:x.k.getAlerts(e,t).all.filter((e=>e.mute!==b.bZ.MuteStateType.Muted)),toUnmute:x.k.getAlerts(e,n).all.filter((e=>e.mute!==b.bZ.MuteStateType.Unmuted))})}(d)),S.b((({toMute:e,toUnmute:t})=>{e.length>0&&p.changeMuteState(e,b.bZ.MuteStateType.Muted),t.length>0&&p.changeMuteState(t,b.bZ.MuteStateType.Unmuted)}))).subscribe()),{events:O,mutedCategories:T,muteCategories:e=>{(0,s.pipe)(o.sendFeedback({kind:c.Mw.MUTE,userMuteScope:y,userMuteCategories:e}),f.Vn((e=>{A.warn("Alerts could not be muted on CAPI",e)})))();const n=x.k.getAlerts(d,e);0===n.all.filter((e=>e.mute!==b.bZ.MuteStateType.Muted)).length&&A.warn("No alerts were muted on category mute",{categoryIds:e});const a=function(e,n,r){return o=>{const a=new Map(o);return e.forEach(((e,o)=>{t.isSpecial(o)?a.set(o,{id:o,scope:n,description:t.specialCategoryDescription}):(0,s.pipe)(i.lookup(0,e),h.chain((e=>e.muteCategory)),h.fold((()=>r.error("No alerts to mute",o)),(e=>a.set(o,{id:e.id,description:e.description,scope:n}))))})),a}}(n.byCategory,y,A)(T.get());return T.set(a),O.next({type:r.Type.CategoriesChanged}),g.right(void 0)},unmuteCategories:e=>{(0,s.pipe)(o.sendFeedback({kind:c.Mw.UNMUTE,userMuteScope:y,userMuteCategories:e}),f.Vn((e=>{A.warn("Alerts could not be un-muted on CAPI",e)})))();return 0===x.k.getAlerts(d,e).all.filter((e=>e.mute!==b.bZ.MuteStateType.Unmuted)).length&&A.warn("No alerts were unmuted on category unmute",{categoryIds:e}),T.modify(function(e,t){return n=>{const r=new Map(n);return e.forEach((e=>{n.has(e)?r.delete(e):t.error("Tried to unmute a category which is not muted",e)})),r}}(e,A)),O.next({type:r.Type.CategoriesChanged}),g.right(void 0)},getMutedCategories:()=>(0,s.pipe)(T.get(),n.filterWithCount((0,a.not)(t.isSpecial),d)),getMutedSpecialCategories:()=>(0,s.pipe)(T.get(),n.filter(t.isSpecial)),loadCachedMutedCategories:e=>{T.set(e)},dispose:()=>R.dispose()}},function(e){e.create=function(){return{events:A.E,mutedCategories:l.h.create(new Map),getMutedCategories:()=>new Map,getMutedSpecialCategories:()=>new Map,muteCategories:e=>g.right(void 0),unmuteCategories:e=>g.right(void 0),loadCachedMutedCategories:y.ZT,dispose:y.ZT}}}(o=e.Mock||(e.Mock={}))}(r=e.CategoriesModel||(e.CategoriesModel={}))}(r||(r={}))},85654:(e,t,n)=>{n.d(t,{k:()=>r});var r,i=n(40327),o=n(5114),a=n(40018),s=n(4390);!function(e){e.create=e=>({getAlertMuteCategory:t=>(0,i.pipe)(e.getById(t),o.chain((e=>e.muteCategory)))}),e.getAlerts=function(e,t){const n={byCategory:new Map(t.map((e=>[e,[]]))),all:[]};return(0,i.pipe)(e.get(),s.p.reduce(n,((e,{alert:n})=>(0,i.pipe)(n.muteCategory,o.filter((e=>t.includes(e.id))),o.map((e=>e.id)),o.alt((()=>o.fromNullable(t.find(a.bZ.belongsToSpecialCategory(n))))),o.fold((()=>e),(t=>(e.byCategory.get(t).push(n),e.all.push(n),e)))))))}}(r||(r={}))},21729:(e,t,n)=>{n.d(t,{dM:()=>r,j:()=>i});var r,i,o,a,s=n(73975),l=n(22690),c=n(40327),u=n(38983),d=n(73353),p=n(48837),h=n(5114),m=n(83078);!function(e){e.group=p.getStructGroup({critical:p.groupSum,advanced:p.groupSum,free:p.groupSum,paid:p.groupSum,criticalPriority:p.groupSum,advancedPriority:p.groupSum,freePriority:p.groupSum,paidPriority:p.groupSum,unread:p.groupSum,muted:p.groupSum}),e.eq=s.getStructEq({critical:s.eqNumber,advanced:s.eqNumber,free:s.eqNumber,paid:s.eqNumber,unread:s.eqNumber,criticalPriority:s.eqNumber,advancedPriority:s.eqNumber,freePriority:s.eqNumber,paidPriority:s.eqNumber,muted:s.eqNumber}),e.show=l.aM({critical:l.yt,advanced:l.yt,free:l.yt,paid:l.yt,criticalPriority:l.yt,advancedPriority:l.yt,freePriority:l.yt,paidPriority:l.yt,unread:l.yt,muted:l.yt}),e.isValid=function(e){return e.critical>=0&&e.advanced>=0&&e.unread>=0},e.isEmpty=function(t){return e.eq.equals(t,e.group.empty)}}(r||(r={})),function(e){e.MIN_GOALS=3,e.TOTAL_GOALS=e.MIN_GOALS+2,e.calculateCompleteness=function(t){const n=(0,c.pipe)(t.goals,h.exists((e=>e.size>0))),r=(0,c.pipe)(t.emotions,h.exists((e=>e.size>0)));return d.R$.equals(t,d.R$.unset)||(0,c.pipe)(t.domain,m.forAll((e=>"general"===e)))&&!(h.isSome(t.audience)||h.isSome(t.style)||n||r)?0:Number(n||0)+Number(r||0)+e.MIN_GOALS}}(i||(i={})),function(e){e.zero={full:0,trimmed:0}}(o||(o={})),function(e){let t;!function(e){e[e.Document=0]="Document",e[e.Plagiarism=1]="Plagiarism"}(t=e.CheckingKind||(e.CheckingKind={})),e.Mock={getCheckingForState:()=>u.h.create({kind:e.CheckingKind.Document,type:"idle"})}}(a||(a={}))},51006:(e,t,n)=>{var r;n.d(t,{X:()=>r}),function(e){let t;!function(e){e.Step1="step1",e.Step2="step2",e.Step3="step3",e.Step4="step4",e.Step5="step5",e.Step6="step6",e.Step7="step7",e.Step8="step8",e.Step9="step9",e.Step10="step10",e.Step11="step11",e.Step12="step12",e.Step13="step13",e.Step14="step14",e.Step15="step15",e.Step16="step16",e.DocumentTitle="documentTitle",e.Synfony="synfony"}(t=e.StepId||(e.StepId={})),e.isValid=function(e){return!(e===t.Step2||e===t.Step3||e===t.Step5||e===t.Step6||e===t.Step7)}}(r||(r={}))},54286:(e,t,n)=>{n.d(t,{_:()=>i});var r,i,o=n(38983),a=n(73353),s=n(5114),l=n(20817);!function(e){e.unwrap=function(e){return l.Ri.create(s.getOrElse((()=>e)),s.some)}}(r||(r={})),function(e){e.create=function(e,t,n,i){const l=r.unwrap(t.style),c=r.unwrap(t.audience),u=r.unwrap(t.domain),d=o.h.create(e),p=d.lens("style").lens(l),h=d.lens("domain").lens(u),m={audience:{items:a.R$.audiences,current:d.lens("audience").lens(c),default:s.some(t.audience)},formality:{items:a.R$.formalityLevels,current:p,default:s.some(t.style),shouldDisable:e=>h.view((t=>!!t&&!a.R$.isStyleValidWithDomain(t,e)))},domain:{items:a.R$.domains,current:h,default:s.some(t.domain),shouldDisable:e=>p.view((t=>n.isFree?"general"!==e:!a.R$.isStyleValidWithDomain(e,t)))},intent:{items:a.R$.goals,current:d.lens("goals")},tone:{items:a.R$.tone,current:d.lens("emotions")}};return{localContext:d,blocks:m,showSetGoalsLoader:o.h.create(!n.demoMode&&i)}}}(i||(i={}))},7910:(e,t,n)=>{n.d(t,{sJ:()=>y,Pv:()=>v});var r=n(57050),i=n(40327),o=n(5114),a=n(86474),s=n(34442),l=n(26027),c=n(48521),u=n(35416),d=n(93494),p=n(2844),h=n(77176),m=n(93508),f=n(28043),g=n(57091);function y(e){return(t,n,r,i,o,s)=>a.Z.composeKnot({content:a.Z.fromSideEffect((n=>{b(t)(n);const r=n.action.action;"item"===r.key&&e(r.action)}),_(n,o,s)),root:w(n,r,i)})}function v(e,t){return{viewState:(n,r,a)=>l=>{const u=(0,i.pipe)(n,o.exists((e=>e===l.id)));return{cell:{item:t(r)(l),root:{height:{value:l.positionState.height,watched:l.positionState.watched&&!e.isScheduledToDispose(l),isValid:l.positionState.isHeightValid},position:{top:l.positionState.absTop,animationInProgress:l.positionState.animationInProgress},layer:u||c.o.isAnimatable(l)&&l.visualState.incomplete&&!(0,i.pipe)(l.visualState.from,o.exists((e=>"focused"===e)))?s.H.Layer.front:s.H.Layer.back}},root:l.id,hashCode:l.hashCode.bind(l),equals:e=>l.equals(e.cell.item.view),compare:e=>a.compare(l,e.cell.item.view)}}}}function b(e){return t=>{switch(t.action.action.action.kind){case s.H.ActionKind.changePosition:e.changePosition.next({id:t.key,height:t.action.action.action.height});break;case s.H.ActionKind.completePositionAnimation:e.completePositionAnimation.next(t.key)}}}const w=(e,t,n)=>a.Z.fromSideEffect((e=>{t.next(e.element)}),p.aj(n,e.view("cardsHeight")).pipe(h.U((([e,t])=>({disableUserActions:e,height:t}))),m.O({disableUserActions:!1,height:0}))),_=(e,t,n)=>{const a=e.view(d.v.Prism.items),s=e.pipe(h.U((e=>e.itemsOrd))),c=e.pipe(h.U((0,r.flow)(u.In.getActiveItem,o.map(l.X.getId)),f.x())),p=e.view(t.getActiveAlertsCount).view((e=>0===e));return a.pipe(g.a(c,p,s),h.U((([e,r,a,s])=>{const l=e.getAt(0);return e.filter((e=>e.positionState.visible||e.positionState.watched&&((e,t)=>!!(0,i.pipe)(t,o.exists((t=>t.id===e.id)))||(0,i.pipe)(t,o.exists((e=>e.positionState.isHeightValid))))(e,l))).map(t.viewState(r,a,s),n(s))})))}},68579:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(27378),o=n(5739),a=n(12187),s=n(8125),l=n(5114),c=n(86474),u=n(63969),d=n(34442),p=n(95983),h=n(77176);!function(e){let t;function n(e){return c.UI.List.make(p.aW.getFoldableWithIndex(),r(e))}function r(t){return c.UI.Knot.make(e.IdProvider,{cell:c.UI.Knot.make(d.H.Cell,{item:c.UI.Composite.make(e.CardStyleProvider,t)})})}!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.cardListContent=n,e.cardList=function(t){return c.UI.Knot.make(e.ScrollableBox,{content:n(t)})},e.ScrollableBox=c.UI.Grid.make((({notify:e,view:n,slots:r})=>i.createElement(o.F.div,Object.assign({},(0,a.Sh)(n("disableUserActions").pipe(h.U((0,s.RN)(f.disableUserActions,void 0))),f.scrollContent),{"data-purpose":"scrollable-box",style:{height:n("height")},mount:n=>e({kind:t.onMount,element:l.fromNullable(n)})()}),r.content))),e.cell=r,e.CardStyleProvider=c.UI.Grid.make((({slots:e})=>i.createElement("div",{className:f.cardWrapper},e.children))),e.IdProvider=c.UI.Grid.make((({slots:e,state:t})=>i.createElement(o.F.div,{"data-id":t},e.cell)))}(r||(r={}));const m={margin:`${u.u.rem(.5)} 0`,background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:u.u.rem(-.5),width:u.u.rem(.5),height:u.u.percent(100),background:"none",content:"''"}}},f=u.u.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[m]})},84246:(e,t,n)=>{n.d(t,{Q:()=>m});var r,i=n(27378),o=n(5739),a=n(86474),s=n(77610),l=n(18031),c=n(50225),u=n(35108),d=n(40111),p=n(77176),h=n(19157);!function(e){e.Mini=({card:e,actions:t,useBundleContainer:n=!1,twoLined:r=!1})=>i.createElement(o.F.Fragment,null,e.pipe(p.U((e=>i.createElement(h.P.SmartPhrases,{card:e,actions:t,useBundleContainer:n,twoLined:r})))))}(r||(r={}));var m,f=n(28043);!function(e){e.Card=e=>a.UI.Node.make((({view:t})=>{const n=t("view");return i.createElement(o.F.Fragment,null,n.pipe(f.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),p.U((o=>i.createElement(c.b.Card,{miniCard:s.C.isSmartPhrasesItem(o)?i.createElement(r.Mini,{card:n,actions:e,useBundleContainer:!0}):i.createElement(d.A.Mini,{card:n,actions:e}),fullCard:s.C.isSmartPhrasesItem(o)?i.createElement(l.A.Full,{card:n,actions:e}):i.createElement(d.A.Full,{card:n,actions:e}),successCard:i.createElement(l.A.Success,{isLastCard:t("isLastCard"),actions:e}),feedbackForm:i.createElement(l.A.FeedbackForm,{cardData:o,actions:e}),mutedCard:i.createElement(l.A.MutedAlert,{cardData:o,actions:e}),actions:e,card:o,transitionClassMapper:u.a})))))}))}(m||(m={}))},22373:(e,t,n)=>{n.d(t,{p:()=>r});var r,i=n(27378),o=n(5739),a=n(86474),s=n(18031),l=n(50225),c=n(28043),u=n(77176);!function(e){e.Card=e=>a.UI.Node.make((({view:t})=>{const n=t("view");return i.createElement(o.F.Fragment,null,n.pipe(c.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),u.U((r=>i.createElement(l.b.Card,{miniCard:i.createElement(s.A.Mini,{card:n,actions:e}),fullCard:i.createElement(s.A.Full,{card:n,actions:e}),successCard:i.createElement(s.A.Success,{isLastCard:t("isLastCard"),actions:e}),feedbackForm:i.createElement(s.A.FeedbackForm,{cardData:r,actions:e}),actions:e,card:r,mutedCard:i.createElement(s.A.MutedAlert,{cardData:r,actions:e})})))))}))}(r||(r={}))},84974:(e,t,n)=>{n.d(t,{z:()=>N});var r=n(27378),i=n(5739),o=n(86474),a=n(57050),s=n(5114),l=n(63969),c=n(30763),u=n(26027),d=n(15646),p=n(86718),h=n(4890),m=n(74754),f=n(66346),g=n(1883),y=n(55636),v=n(7046),b=n(94793),w=n(3656),_=n(28706),C=n(77176),E=n(30522),S=n(54126);const I=({item:e,layoutDensity:t})=>{const n=(0,a.pipe)(t,h.j.Density.matchOrDefault(h.j.Density.minimal)((()=>R.minimalDescription),(()=>R.description)));return(0,a.pipe)(e.cardMeta.details,s.fold((()=>null),(t=>r.createElement(f.G3,{key:"card-actions-details",visualState:e.visualState,className:R.more},r.createElement(w.XY,Object.assign({className:n},m.y.renderToHtml(t)))))))},k=({wordCount:e,checked:t})=>r.createElement(w.H3,{className:t?R.wordCountChecked:R.wordCountUnchecked},e," ",r.createElement(w.XY,{className:R.words},"words")),A=({item:e,layoutDensity:t,actions:n})=>{const i=p.f.isTextLengthCard(e.cardMeta)?e.cardMeta.wordCount:null;return r.createElement(r.Fragment,null,null!==i?r.createElement(k,{wordCount:i,checked:e.itemMeta.checked}):null,r.createElement(y.dk,{className:null!==i?R.descriptionWithHeader:void 0,description:e.cardMeta.explanation,actions:n,layoutDensity:t}))},x=({item:e,actions:t})=>(0,a.pipe)(e.cardMeta.details,s.fold((()=>null),(()=>r.createElement(T,{key:"card-actions-button",actions:t,item:e})))),T=({item:{id:e,visualState:t},actions:n,className:i})=>{const o=r.useContext(c.m.Context);return r.createElement(v.zx.Tertiary,{key:"toggle-more",name:(0,f.hC)(t,o),title:(0,f.hC)(t,o),className:i,onClick:_.hz((()=>{n.next({type:d.eI.Kind.startTransitionTo,id:e,transition:{type:u.X.isCardOpen(t)?"focused":"expanded",clockwise:!0}})}))},u.X.isCardOpen(t)?r.createElement(b.JO.Arrow,{key:"more",className:R.lessIcon}):r.createElement(b.JO.QuestionMark,{key:"expand"}),(0,f.hC)(t,o))},O=e=>o.UI.Knot.make((e=>o.UI.Grid.make((({state:t,slots:n})=>r.createElement(i.F.div,{className:R.expanded},t.pipe(C.U((t=>{return r.createElement(g.Z,{header:r.createElement(i.F.Fragment,null,n.header),visualState:t.visualState,onFocus:a.constVoid,theme:(o=t.renderOptions.layoutDensity,{wrapper:(0,a.pipe)(o,h.j.Density.matchOrDefault(h.j.Density.minimal)((()=>R.wrapper),(()=>{})))}),body:r.createElement(A,{item:t,actions:e,layoutDensity:t.renderOptions.layoutDensity}),mainActions:null,footer:r.createElement(I,{item:t,layoutDensity:t.renderOptions.layoutDensity}),subActions:r.createElement(x,{item:t,actions:e})});var o})))))))(e),{header:E.r}),R=l.u.stylesheet({wrapper:[S.kX],lessIcon:[S.A2],more:[y.IH],description:[y.LM],minimalDescription:[y.LM,y.Gq],descriptionWithHeader:[S.H4],wordCountChecked:[S.NR],wordCountUnchecked:[S.Lp],words:[S.ht],expanded:[S.TX]});var N,L=n(34190),P=n(3303),M=n(70100),D=n(50225),F=n(19751);!function(e){e.Card=e=>o.UI.Node.make((({view:t})=>{const n=t("view"),a=(0,L.cp)(n,e),s=(0,L.Hu)(n,e);return r.createElement(i.F.Fragment,null,n.pipe(F.$f(M.X.eq),C.U((t=>r.createElement(D.b.Card,{miniCard:o.UI.mount(P.m,a),fullCard:o.UI.mount(O(e),s),actions:e,card:t})))))}))}(N||(N={}))},98752:(e,t,n)=>{n.d(t,{fw:()=>r});var r,i=n(27378),o=n(57050),a=n(5739),s=n(5114),l=n(95195),c=n(8125),u=n(86474),d=n(81531),p=n(34190),h=n(30522),m=n(3303),f=n(26027),g=n(77610),y=n(47306),v=n(18031),b=n(50225),w=n(85287),_=n(22800),C=n(35108),E=n(40111),S=n(25819),I=n(76720),k=n(28043),A=n(77176),x=n(85985);function T(e){return e.incomplete?(0,o.pipe)(e.from,s.filter((e=>"expanded"===e||"focused"===e)),s.filter((()=>"removed"===e.transition.type)),s.map((()=>({main:w.$4.focused2renderedMain,shade:e.transition.clockwise?w.$4.focused2renderedShadeClockwise:w.$4.focused2renderedShade}))),s.getOrElse((()=>(0,C.SA)(e)))):{}}function O(e){return e.incomplete?(0,o.pipe)(e.from,s.filter((e=>"expanded"===e||"focused"===e)),s.filter((()=>"removed"===e.transition.type)),s.map((()=>({main:_.S.focused2renderedBundleMain,shade:e.transition.clockwise?_.S.focused2renderedBundleShadeClockwise:_.S.focused2renderedBundleShade}))),s.getOrElse((()=>(0,C.a)(e)))):{}}!function(e){const t=e=>g.C.isTakeawayItem(e.card)?i.createElement(I.o.Full,{card:e.card,actions:e.actions,isChecklistItem:!0,isChecklistBundleItem:!!e.isBundle,cardHeader:e.cardHeader}):i.createElement(S.J,{card:e.card,actions:e.actions,isChecking:e.isChecking,transform:e.transform,isCheckingGlobal:e.isCheckingGlobal}),n=e=>(0,o.pipe)(e.card,g.C.match({super:(0,o.constant)(s.none),smartPhrases:(0,o.constant)(s.none),sentenceLevelBrandTones:(0,o.constant)(s.none),takeaway:s.some,synfony:s.some,shortenIt:s.some,default:s.some}),s.fromEither,s.chain(o.identity),s.fold((()=>(r("ChecklistBundleCard").error("rendering fallback for card",e.card),i.createElement(i.Fragment,null))),(n=>i.createElement(t,Object.assign({},e,{card:n,isBundle:!0})))));e.Card=e=>u.UI.Node.make((({view:s})=>{const c=s("view"),d=(0,p.cp)(c,e),g=(0,p.Mt)(c,e),w=e=>(r("ChecklistAlertCard").error("rendering fallback for card",e),null),{isChecking:_,isCheckingGlobal:C,transform:S}=f.X.useCardStates(c),I=n=>i.createElement(t,{card:n,actions:e,isChecking:_,isCheckingGlobal:C,transform:S,cardHeader:u.UI.mount(h.r,g),isBundle:!1});return i.createElement(a.F.Fragment,null,c.pipe(k.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type&&e.viewKind===t.viewKind)),A.U((t=>i.createElement(b.b.Card,{miniCard:u.UI.mount(m.m,d),fullCard:y.J.isBundle(t)?i.createElement(E.A.Full,{card:c.pipe(x.h(y.J.isBundle)),actions:e,renderCard:n}):(0,o.pipe)(t,f.X.match({super:w,smartPhrases:w,sentenceLevelBrandTones:w,synfony:I,shortenIt:I,takeaway:I,default:I}),l.getOrElse((e=>(r("ChecklistAlertCard").error("Got an unexpected card type",e),i.createElement(i.Fragment,null))))),feedbackForm:i.createElement(v.A.FeedbackForm,{cardData:t,actions:e}),mutedCard:i.createElement(v.A.MutedAlert,{cardData:t,actions:e}),actions:e,card:t,transitionClassMapper:"bundle"===t.viewKind?O:T,removedCard:u.UI.mount(m.m,d)})))))}));const r=(0,c.HP)(d.Monitoring.Logging.getLogger)}(r||(r={}))},34190:(e,t,n)=>{n.d(t,{Hu:()=>s,cp:()=>l,Mt:()=>u});var r=n(57050),i=n(86474),o=n(24713),a=n(77176);const s=(e,t)=>i.Z.composeKnot({root:i.Z.fromSideEffect(r.constVoid,e),header:u(e,t)}),l=(e,t)=>i.Z.composeKnot({root:i.Z.fromSideEffect((e=>t.next(e)),e.pipe(o.j("id"))),header:c(e)}),c=e=>i.Z.composeKnot({title:i.Z.fromSideEffect(r.constVoid,e.pipe(a.U((e=>Object.assign(Object.assign({},e.itemMeta),{isMinimized:!0}))))),label:i.Z.fromSideEffect(r.constVoid,e)}),u=(e,t)=>i.Z.composeKnot({title:i.Z.fromSideEffect(r.constVoid,e.pipe(o.j("itemMeta"),a.U((e=>Object.assign(Object.assign({},e),{isMinimized:!1}))))),controls:i.Z.fromSideEffect((e=>t.next(e)),e.pipe(a.U((e=>e.id))))})},30522:(e,t,n)=>{n.d(t,{y:()=>w,r:()=>_});var r=n(27378),i=n(57050),o=n(5739),a=n(77176),s=n(5114),l=n(86474),c=n(63969),u=n(15215),d=n(39210),p=n(7046),h=n(94793),m=n(3656),f=n(54126);const g=({checked:e})=>r.createElement(o.F.Fragment,null,e.pipe(a.U((e=>e?r.createElement(h.JO.ValidationOk,{width:16}):r.createElement(h.JO.ValidationWarning,{width:16}))))),y=l.UI.Node.make((({state:e})=>r.createElement(r.Fragment,null,r.createElement(g,{checked:e.pipe(a.U((({miniChecked:e,checked:t})=>(0,i.pipe)(e,s.getOrElse((()=>t))))))}),r.createElement(o.F.div,{className:C.titleContainer},e.pipe(a.U((e=>e.isMinimized?r.createElement(m.XY,{className:C.title},(0,i.pipe)(e.miniTitle,s.getOrElse((()=>e.title)))):r.createElement(m.H4,{className:C.title},e.title)))))))),v=l.UI.Node.make((({state:e})=>r.createElement(o.F.Fragment,null,e.pipe(a.U((e=>(0,i.pipe)(e.itemMeta.miniLabel,s.fold((()=>(0,i.pipe)(u.d.getAlertsCount(e),s.fold(i.constNull,(e=>r.createElement(m.x4,{className:C.counter,"data-name":"checklist-item/count"},e))))),(t=>r.createElement(m.x4,{className:(0,i.pipe)(e.itemMeta.miniChecked,s.getOrElse((()=>e.itemMeta.checked)))?C.labelChecked:C.labelUnchecked},t)))))))))),b=({left:e,right:t,showActivateButton:n})=>r.createElement(o.F.div,{className:C.headerContainer},e,r.createElement(o.F.div,{className:f.Sc},t),n?r.createElement("div",{className:f.Tu},r.createElement(h.JO.Arrow,{className:C.activeTopIcon}),r.createElement(h.JO.Arrow,{className:C.activeBottomIcon})):null),w=l.UI.Knot.make(l.UI.Grid.make((({slots:e})=>r.createElement(b,{left:e.title,right:e.label,showActivateButton:!0}))),{title:y,label:v}),_=l.UI.Knot.make(l.UI.Grid.make((({slots:e})=>r.createElement(b,{left:e.title,right:e.controls,showActivateButton:!1}))),{title:y,controls:l.UI.Node.make((({notify:e,state:t})=>r.createElement(o.F.Fragment,null,t.pipe(a.U((t=>r.createElement(p.zx.Ghost,{name:"collapse",onClick:e({type:d.C.Type.collapseButtonClick,id:t})},r.createElement(h.JO.Arrow,{direction:h.n4.up}))))))))}),C=c.u.stylesheet({headerContainer:[f.lZ],titleContainer:[f.XE],title:[f.Cx],labelChecked:[f.i0],labelUnchecked:[f.D],counter:[f.e],activeTopIcon:[f.Lf],activeBottomIcon:[f.rx]})},3303:(e,t,n)=>{n.d(t,{m:()=>d});var r=n(27378),i=n(5739),o=n(86474),a=n(63969),s=n(15646),l=n(77176),c=n(30522),u=n(54126);const d=o.UI.Knot.make(o.UI.Grid.make((({slots:e,notify:t,state:n})=>r.createElement(i.F.div,{className:p.mini,onClick:n.pipe(l.U((e=>t({type:s.lY.Type.miniItemClick,id:e}))))},e.header))),{header:c.y}),p=a.u.stylesheet({mini:[u.oH]})},54126:(e,t,n)=>{n.d(t,{TX:()=>s,kX:()=>l,A2:()=>c,NR:()=>u,Lp:()=>d,ht:()=>p,H4:()=>h,lZ:()=>m,Sc:()=>g,XE:()=>y,Cx:()=>v,i0:()=>b,D:()=>w,e:()=>_,Tu:()=>E,Lf:()=>S,rx:()=>I,oH:()=>k});var r=n(90351),i=n(63969),o=n(40219);const a={display:"flex",boxSizing:"border-box",borderRadius:i.u.rem(o.Jr),boxShadow:r.uc.Z100,userSelect:"none",transform:"translateY(0)",background:r.Il.CoreNeutral0,overflow:"hidden"},s=Object.assign(Object.assign({},a),{flexDirection:"column"}),l={padding:`0 ${i.u.rem(.5)} ${i.u.rem(.5)} ${i.u.rem(1)}`},c={transform:"rotate(180deg)"},u={color:r.Il.CoreGreen60},d={color:r.Il.CoreRed50},p={display:"inline-block"},h={marginTop:i.u.rem(.5)},m={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",height:i.u.rem(2.5),width:i.u.percent(100),padding:`0 ${i.u.rem(.5)} 0 0`,boxSizing:"border-box",position:"relative"},f="checklistMiniRight",g=i.u.joinClasses([f,i.u.style({display:"flex",alignItems:"center",flexShrink:0,flexGrow:1,alignSelf:"stretch",justifyContent:"flex-end"})]),y={minWidth:0},v={fontSize:i.u.rem(r.xv.BodySize),whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",marginRight:i.u.rem(.5)},b={color:r.Il.CoreGreen70},w={color:r.Il.CoreRed50},_={color:r.Il.CoreNeutral40,display:"flex",alignItems:"center",justifyContent:"center",width:i.u.rem(1)},C="checklistMiniActivateBtn",E=i.u.joinClasses([C,i.u.style({position:"absolute",right:i.u.rem(.5),width:i.u.rem(1),transform:`translate(${i.u.rem(-.5)})`,opacity:0})]),S={display:"flex",margin:`${i.u.rem(.05)} 0 ${i.u.rem(-1.25)}`,transform:"rotate(180deg)"},I={display:"flex",height:"auto"},k=Object.assign(Object.assign({},a),{cursor:"pointer",$nest:{"&:hover":{background:r.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:i.u.seconds(.2)},[`&:hover .${C}`]:{opacity:1},"&:hover .checklistMiniRight":{opacity:0}}})},92569:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(27378),o=n(5739),a=n(8125),s=n(86474),l=n(90351),c=n(63969),u=n(66896),d=n(87380),p=n(94793),h=n(77176),m=n(57091),f=n(85985);!function(e){e.DefaultCounter=s.UI.Node.make((({state:e})=>i.createElement(o.F.Fragment,null,e.pipe(h.U((({count:e,fontSize:t,lensId:n})=>i.createElement(d.x.OutcomeCounter,{count:e,theme:{counterWrapper:S.get(n),counterContent:E.counterContent},type:"gray",fontSize:t}))))))),e.ZeroCounter=s.UI.Node.make((()=>i.createElement(p.JO.CheckmarkOutcomes,{className:E.zeroCounter}))),e.PlagiarismCounter=s.UI.Node.make((({state:e})=>i.createElement(o.F.Fragment,null,e.pipe(h.U((({count:e,fontSize:t})=>i.createElement(d.x.OutcomeCounter,{count:e,theme:{counterWrapper:E.plagiarismCounterWrapper,counterContent:E.plagiarismCounterContent},suffix:"%",type:"gray",fontSize:t}))))))),e.Component=s.UI.Union.make("kind",{plagiarism:e.PlagiarismCounter,default:e.DefaultCounter,zero:e.ZeroCounter});const t=e=>!u.R.isPlagiarismId(e);e.createLensCounterFlow=(e,n,r)=>s.Z.composeUnion({plagiarism:s.Z.fromSideEffect(a.ZT,n.pipe(h.U((e=>({count:e,fontSize:r}))))),default:s.Z.fromSideEffect(a.ZT,n.pipe(m.a(e.pipe(f.h(t))),h.U((([e,t])=>({count:e,lensId:t,fontSize:r}))))),zero:s.Z.fromSideEffect(a.ZT,null)},(()=>e.pipe(m.a(n),h.U((([e,t])=>({kind:0===t?"zero":e===u.R.SpecialId.Plagiarism?"plagiarism":"default"}))))));const n={fill:c.u.important(l.Il.CoreNeutral0)},r={fill:c.u.important(l.Il.CoreNeutral50)},g={fill:c.u.important(l.Il.CoreRed50)},y={fill:c.u.important(l.Il.CoreBlue50)},v={fill:c.u.important(l.Il.CoreGreen50)},b={fill:c.u.important(l.Il.CorePurple50)},w={fill:c.u.important(l.Il.CoreNeutral50)},_={fill:c.u.important(l.Il.CoreCyan50)},C={fill:l.Il.CoreGreen50,minHeight:0,minWidth:c.u.rem(1)},E=c.u.stylesheet({counterWrapper:[],counterContent:[n],zeroCounter:[C],allAlertsCounter:[r],priorityAlertsCounter:[r],correctnessCounter:[g],clarityCounter:[y],engagementCounter:[v],deliveryCounter:[b],voxCounter:[w],plagiarismCounterWrapper:[_],plagiarismCounterContent:[n,{}]}),S=new Map([[u.R.SpecialId.AllAlerts,E.allAlertsCounter],[u.R.SpecialId.Priority,E.priorityAlertsCounter],[u.R.SpecialId.Correctness,E.correctnessCounter],[u.R.SpecialId.Clarity,E.clarityCounter],[u.R.SpecialId.Engagement,E.engagementCounter],[u.R.SpecialId.Delivery,E.deliveryCounter],[u.R.SpecialId.Vox,E.voxCounter],[u.R.SpecialId.CorrectnessPriority,E.correctnessCounter],[u.R.SpecialId.ClarityPriority,E.clarityCounter],[u.R.SpecialId.EngagementPriority,E.engagementCounter],[u.R.SpecialId.DeliveryPriority,E.deliveryCounter],[u.R.SpecialId.VoxPriority,E.voxCounter]])}(r||(r={}))},40743:(e,t,n)=>{n.d(t,{C:()=>g});var r=n(27378),i=n(40327),o=n(5739),a=n(5114),s=n(86474),l=n(90351),c=n(63969),u=n(40219),d=n(66896),p=n(7046),h=n(24811),m=n(3656),f=n(77176);const g=s.UI.Node.make((({state:e,notify:t})=>r.createElement(o.F.Fragment,null,e.pipe(f.U((({previews:e,disabled:n,activeLensId:s})=>r.createElement(o.F.div,{className:A.lensNavigation},e.map((e=>r.createElement(p.zx.Flat,{name:e.id,key:e.id,className:A.lensButton,active:(0,i.pipe)(s,a.exists((t=>t===e.id))),disabled:n,title:e.description,titleAlign:"bottomCenter",onClick:t({kind:"lensClicked",lens:e})},r.createElement(h.B,{value:e.progress,wrapperClass:A.progressBarWrapper,progressClass:y(e.id)}),r.createElement(m.XY,{className:A.lensButtonText},e.title)))))))))));function y(e){switch(e){case d.R.SpecialId.Correctness:return A.correctnessProgressBar;case d.R.SpecialId.Clarity:return A.clarityProgressBar;case d.R.SpecialId.Engagement:return A.engagementProgressBar;case d.R.SpecialId.Delivery:return A.deliveryProgressBar;case d.R.SpecialId.Vox:return A.voxProgressBar;default:return}}const v={display:"flex",height:c.u.percent(100),justifyContent:"space-between",alignItems:"center"},b={display:"flex",flexDirection:"column",marginRight:c.u.rem(.3125),padding:`${c.u.rem(.375)} ${c.u.rem(.25)} 0`,borderRadius:c.u.rem(u.fx),$nest:{"&:last-child":{marginRight:0},"&:hover:not([data-disabled='true'])":{backgroundColor:l.Il.CoreNeutral10},"&[data-active='true']":{backgroundColor:l.Il.CoreNeutral10,color:l.Il.CoreNeutral90}}},w={textTransform:"uppercase",fontSize:c.u.px(8)},_={width:c.u.rem(2),backgroundColor:l.Il.CoreNeutral20},C={backgroundColor:l.Il.CoreRed50},E={backgroundColor:l.Il.CoreBlue50},S={backgroundColor:l.Il.CoreGreen50},I={backgroundColor:l.Il.CorePurple50},k={backgroundColor:l.Il.CoreNeutral50},A=c.u.stylesheet({lensNavigation:[v],lensButton:[b],lensButtonText:[w],progressBarWrapper:[_],correctnessProgressBar:[C],clarityProgressBar:[E],engagementProgressBar:[S],deliveryProgressBar:[I],voxProgressBar:[k]})},34442:(e,t,n)=>{n.d(t,{H:()=>A});var r=n(27378),i=n(5739),o=n(12187),a=n(19962),s=n(86474),l=n(63969),c=n(40219),u=n(16782),d=n(41398),p=n(66310),h=n(24209),m=n(49708),f=n(85985),g=n(17343),y=n(76974),v=n(13444),b=n(50628),w=n(40151),_=n(2834),C=n(85089),E=n(28043),S=n(85255),I=n(77176),k=n(93508);var A;!function(e){let t,n;!function(e){e.front="front",e.back="back"}(t=e.Layer||(e.Layer={})),function(e){e.completePositionAnimation="completePositionAnimation",e.changePosition="changePosition"}(n=e.ActionKind||(e.ActionKind={})),e.Cell=s.UI.Grid.make((({slots:e,state:s,notify:l})=>{const c=new u.t,A=s.pipe(d.M(c),p.w((([e,t])=>e.position.animationInProgress?h.T(m.R(t,"transitionend").pipe(f.h((e=>e.target===t&&"transform"===e.propertyName)),g.h(void 0)),y.of(void 0).pipe(v.g(200))).pipe(b.P()):w.E)),_.b(l({kind:n.completePositionAnimation}))),x=s.pipe(d.M(c),p.w((([e,t])=>e.height.watched?C.YC(t).pipe(f.h((t=>e.height.value!==t.height||!e.height.isValid||t.height>0))):w.E)),E.x(),_.b((({height:e})=>l({kind:n.changePosition,height:e})())));S.P.useSubscriptionTo(h.T(A,x));const T=s.pipe(I.U((e=>e.position.top)),I.U((e=>a.CSS.translateY(e))),E.x()),R=s.pipe(I.U((e=>e.layer===t.front?1:0)),E.x()),N=s.pipe(I.U((({position:e})=>e)),E.x(((e,t)=>e.top===t.top)),I.U((({animationInProgress:e})=>e?O.animate:void 0)),k.O(void 0));return r.createElement(i.F.div,Object.assign({},(0,o.Sh)(O.item,N),{style:{transform:T,zIndex:R},mount:e=>{null!==e&&c.next(e)}}),e.item)}))}(A||(A={}));const x={position:"absolute",boxSizing:"border-box",width:l.u.percent(100),contain:"layout"},T={transition:`transform ${l.u.seconds(c.v4/1e3)} linear`},O=l.u.stylesheet({item:[x],animate:[T]})},52249:(e,t,n)=>{if(n.d(t,{A:()=>d}),75==n.j)var r=n(22232);var i=n(86474);if(75==n.j)var o=n(66896);if(75==n.j)var a=n(40018);if(75==n.j)var s=n(85985);if(75==n.j)var l=n(77176);if(75==n.j)var c=n(28043);if(75==n.j)var u=n(15774);function d(e,t,n,d){const p=t.pipe(s.h((e=>e!==o.R.SpecialId.Premium)),l.U((e=>e===o.R.SpecialId.Priority?u.H.LensMode.priority:u.H.LensMode.all)),c.x());return i.Z.fromSideEffect((t=>{switch(t.kind){case u.H.Action.Kind.select:e.events.next({type:"switchToLens",id:t.selected===u.H.LensMode.priority?o.R.SpecialId.Priority:o.R.SpecialId.AllAlerts,focusFirst:!1,actionSource:a.l$.sidebar});break;default:(0,r.vE)(t.kind)}}),p.pipe(l.U((e=>({ord:"priority"===n?u.H.Order.priorityFirst:u.H.Order.allFirst,layoutMode:d,lensMode:e})))))}},15774:(e,t,n)=>{n.d(t,{H:()=>A});var r=n(27378),i=n(5739),o=n(12187),a=n(22232),s=n(45701),l=n(86474),c=n(30763),u=n(7046),d=n(94793),p=n(16951),h=n(77176),m=n(90351),f=n(63969),g=n(40219),y=n(2040);const v=f.u.style({display:"inline-flex",overflow:"visible",border:`2px solid ${m.Il.CoreNeutral10}`,borderRadius:f.u.rem(g.fx),backgroundColor:m.Il.CoreNeutral10}),b=f.u.joinClasses([f.u.style({padding:`0 ${f.u.rem(.5)} 0 ${f.u.rem(.5)}`,display:"inline-flex",justifyContent:"space-around",textAlign:"center",$nest:{"&:first-child":{marginRight:f.u.px(2)}}}),y.base]),w=f.u.style({fontSize:f.u.rem(m.xv.SmallSize)}),_=f.u.style({width:f.u.rem(2.5)}),C=f.u.style({width:f.u.rem(9.5)}),E=f.u.joinClasses([f.u.style({width:f.u.rem(2.25)}),w]),S=f.u.joinClasses([f.u.style({width:f.u.rem(8.75)}),w]),I=f.u.joinClasses([f.u.style({borderRadius:f.u.rem(g.fx),backgroundColor:m.Il.CoreNeutral0,boxShadow:m.uc.Z100,fontWeight:600,$nest:{"&[data-disabled='true']":{backgroundColor:m.Il.CoreNeutral0}}}),b]),k=f.u.style({display:"inline-flex",width:f.u.rem(1.25),minWidth:0,minHeight:0,fill:m.Il.CoreNeutral50,stroke:m.Il.CoreNeutral50,$nest:{"&[data-disabled='true']":{fill:m.Il.CoreNeutral50,stroke:m.Il.CoreNeutral50}}});var A;!function(e){let t,n,m;!function(e){e.priority="priority",e.all="all"}(t=e.LensMode||(e.LensMode={})),function(e){let t;!function(e){e.select="select"}(t=e.Kind||(e.Kind={}))}(n=e.Action||(e.Action={})),function(t){t.priorityFirst=s.fromCompare((t=>t===e.LensMode.priority?-1:1)),t.allFirst=s.fromCompare((t=>t===e.LensMode.all?-1:1))}(m=e.Order||(e.Order={})),e.Component=l.UI.Node.make((({state:e,notify:a})=>r.createElement(i.F.div,{key:"feedModeSelector",className:v},e.pipe(h.U((({lensMode:e,layoutMode:i,ord:s})=>[t.all,t.priority].sort(s.compare).map((t=>r.createElement(u.zx,Object.assign({name:`${t}-lens`,key:`${t}-lens`,disabled:e===t,onClick:()=>a({kind:n.Kind.select,selected:t})()},(0,o.Sh)(e===t?I:b,g(t,i))),r.createElement(f,{selected:t}))))))))));const f=({selected:e})=>{const n=r.useContext(c.m.Context).feedModeSelector;switch(e){case t.all:return r.createElement(r.Fragment,null,n.all);case t.priority:return r.createElement(r.Fragment,null,n.priority,r.createElement(p.u,{align:"bottomCenter",title:n.priorityDescription},r.createElement(d.JO.Info,{width:10,className:k})));default:(0,a.vE)(e)}},g=(e,n)=>{switch(e){case t.all:return"compact"===n?E:_;case t.priority:return"compact"===n?S:C;default:(0,a.vE)(e)}}}(A||(A={}))},84317:(e,t,n)=>{n.d(t,{HP:()=>s});var r=n(86474);if(75==n.j)var i=n(92569);if(75==n.j)var o=n(66310);if(75==n.j)var a=n(52249);function s(e,t,n,s,l,c){return r.Z.composeKnot({info:i.A.createLensCounterFlow(t,t.pipe(o.w((e=>l.getLens(e).view("count")))),c),switcher:(0,a.A)(e,t,n,s)})}},89186:(e,t,n)=>{n.d(t,{B:()=>b});var r=n(27378),i=n(5739),o=n(86474),a=n(92569),s=n(7046),l=n(94793),c=n(77176),u=n(15774),d=n(63969),p=n(2040);const h=d.u.style({display:"inline-flex",verticalAlign:"middle",marginRight:d.u.rem(.75),alignItems:"center"}),m=d.u.joinClasses([d.u.style({fontWeight:"bold"}),p.base]),f=d.u.style({minHeight:d.u.rem(1.5)}),g=d.u.style({$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:"transparent"}}}),y=d.u.style({display:"flex",justifyContent:"space-between",alignItems:"center"}),v=d.u.style({marginTop:d.u.rem(.35)});var b;!function(e){let t,n;e.Grid=o.UI.Grid.make((({slots:e})=>r.createElement(r.Fragment,null,r.createElement("span",{className:h},e.info),e.switcher))),e.GridWithBulkAccept=o.UI.Grid.make((({slots:e})=>r.createElement("div",{className:y},r.createElement("span",{className:v},e.headerContent),e.bulkAccept))),function(e){let t;!function(e){let t;!function(e){e.switchBack="switchBack"}(t=e.Kind||(e.Kind={}))}(t=e.Action||(e.Action={})),e.Component=o.UI.Node.make((({state:e,notify:n})=>r.createElement(i.F.Fragment,null,e.pipe(c.U((({lensTitle:e})=>r.createElement(r.Fragment,null,r.createElement("span",{className:m},e),r.createElement(s.zx.Flat,{name:"switch-back",title:"Back to all suggestions",className:g,onClick:()=>n({kind:t.Kind.switchBack})()},r.createElement(l.JO.Close,{className:f})))))))))}(t=e.LensFilter||(e.LensFilter={})),function(e){e.Component=o.UI.Grid.make((({slots:e})=>r.createElement(r.Fragment,null,r.createElement("span",{className:h},e.counter),e.filter)))}(n||(n={})),e.DefaultHeader=o.UI.Knot.make(e.Grid,{info:a.A.Component,switcher:u.H.Component}),e.LensInfoComponent=o.UI.Knot.make(n.Component,{counter:a.A.Component,filter:t.Component}),e.WithFilterHeader=o.UI.Knot.make(e.Grid,{info:e.LensInfoComponent,switcher:u.H.Component}),e.Component=o.UI.Union.make("kind",{withFilter:e.WithFilterHeader,withoutFilter:e.DefaultHeader})}(b||(b={}))},92644:(e,t,n)=>{if(n.d(t,{i:()=>h}),75==n.j)var r=n(22232);var i=n(86474);if(75==n.j)var o=n(66896);if(75==n.j)var a=n(40018);if(75==n.j)var s=n(24713);if(75==n.j)var l=n(28043);if(75==n.j)var c=n(85985);if(75==n.j)var u=n(77176);if(75==n.j)var d=n(57091);if(75==n.j)var p=n(87667);function h(e,t,n){const h=e.getLens(o.R.SpecialId.AllAlerts).pipe(s.j("count"),l.x()),m=e.getLens(o.R.SpecialId.Priority).pipe(s.j("count"),l.x()),f=n.pipe(c.h((e=>e!==o.R.SpecialId.Premium)),u.U((e=>e===o.R.SpecialId.Priority?"priority":"all")),l.x());return i.Z.fromSideEffect((e=>{switch(e){case p.n.Actions.switchToAll:t.events.next({type:"switchToLens",id:o.R.SpecialId.AllAlerts,focusFirst:!1,actionSource:a.l$.sidebar});break;case p.n.Actions.switchToPriority:t.events.next({type:"switchToLens",id:o.R.SpecialId.Priority,focusFirst:!1,actionSource:a.l$.sidebar});break;case p.n.Actions.openSetGoals:t.events.next({type:"setGoals"});break;default:(0,r.vE)(e)}}),f.pipe(d.a(h,m,((e,t,n)=>({allAlertsCount:t,priorityAlertsCount:n,selectedLens:e})))))}},87667:(e,t,n)=>{n.d(t,{n:()=>r});var r,i=n(27378),o=n(38983),a=n(5739),s=n(86474),l=n(90351),c=n(63969),u=n(40219),d=n(30763),p=n(7046),h=n(95286),m=n(94793),f=n(77176);!function(e){let t;!function(e){e.switchToPriority="switchToPriority",e.switchToAll="switchToAll",e.openSetGoals="openSetGoals"}(t=e.Actions||(e.Actions={}));e.Switch=s.UI.Node.make((({state:e,notify:n})=>{const r=i.useContext(d.m.Context).priorityLens,s=o.h.create(!1);return i.createElement(a.F.Fragment,null,e.pipe(f.U((({allAlertsCount:e,priorityAlertsCount:o,selectedLens:l})=>{const c="priority"===l,u=c?o:e;return i.createElement(h.L,{name:"priorityLensSwitch",appearanceBehavior:"mouseClick",showDelay:0,closeDelay:100,vAlign:"bottom",theme:{dropdownContainer:x.dropdownContainer,dropdownList:x.dropdownContent},onVisibilityChange:e=>s.set(e),label:i.createElement(a.F.Fragment,null,s.pipe(f.U((e=>i.createElement("div",{className:e?x.labelOpened:x.labelClosed},c?r.prioritySuggestion:r.allSuggestion,u>0&&i.createElement("span",{className:x.alertCount}," ","· ",u," "),i.createElement(m.JO.Arrow,{direction:e?m.n4.up:m.n4.down,className:x.labelArrow}))))))},i.createElement(p.zx.Flat,{name:"priorityAlerts",className:c?x.boldLensButton:x.lensButton,onClick:n(t.switchToPriority)},i.createElement(m.JO.Star,{width:12}),r.prioritySuggestion,c?i.createElement(m.JO.Yes,{className:x.checkMarkIcon}):null),c&&o===e?i.createElement("div",{className:x.disabledLensButton},i.createElement(m.JO.Formatting.BulletList,{width:21}),r.disabledAllSuggestion):i.createElement(p.zx.Flat,{name:"allAlerts",className:c?x.lensButton:x.boldLensButton,onClick:n(t.switchToAll)},i.createElement(m.JO.Formatting.BulletList,{width:21}),r.allSuggestion,c?null:i.createElement(m.JO.Yes,{className:x.checkMarkIcon})),i.createElement("div",{className:x.separator}),i.createElement("div",{className:x.description},i.createElement(m.JO.Info,{className:x.descriptionIcon}),i.createElement("div",null,r.description)))}))))}))}(r||(r={}));const g={display:"flex",width:c.u.rem(16)},y={zIndex:u.FY,marginTop:0,fontSize:c.u.rem(.875),lineHeight:c.u.rem(1.3125)},v={display:"flex",boxSizing:"border-box",padding:`${c.u.rem(.1875)} ${c.u.rem(.25)} ${c.u.rem(.1875)} ${c.u.rem(.25)}`,height:c.u.rem(1.5),borderRadius:c.u.rem(u.fx),color:l.Il.CoreNeutral90,textTransform:"uppercase",letterSpacing:c.u.rem(.025),fontSize:c.u.rem(.625),lineHeight:c.u.rem(1.125),cursor:"pointer",userSelect:"none",$nest:{"&:hover":{backgroundColor:l.Il.CoreNeutral20}}},b={backgroundColor:l.Il.CoreNeutral10},w={color:l.Il.CoreNeutral50,whiteSpace:"pre"},_={minWidth:c.u.rem(1),minHeight:c.u.rem(1),marginLeft:c.u.rem(.5625)},C={padding:`0 ${c.u.rem(.5)}`,color:l.Il.CoreNeutral90,$nest:{"& i:first-child":{margin:0}}},E={display:"flex",padding:`0 ${c.u.rem(.5)}`,height:c.u.rem(2),color:l.Il.CoreNeutral50,alignItems:"center",cursor:"not-allowed"},S={margin:`${c.u.rem(.5)} ${c.u.rem(1)}`,width:`calc(100% - ${c.u.rem(2)})`,height:c.u.px(1),backgroundColor:l.Il.CoreNeutral20},I={display:"flex",padding:`0 ${c.u.rem(.5)} ${c.u.rem(.5)} ${c.u.rem(.5)}`,fontSize:c.u.rem(.75),lineHeight:c.u.rem(1.125),alignItems:"center"},k={marginBottom:"auto",minHeight:c.u.rem(1.25)},A={color:l.Il.CoreBlue60,cursor:"pointer"},x=c.u.stylesheet({dropdownContainer:[g],dropdownContent:[y],labelClosed:[v],labelOpened:[v,b],alertCount:[w],labelArrow:[_],lensButton:[C],disabledLensButton:[E],boldLensButton:[C,{fontWeight:"bold"}],checkMarkIcon:[{marginLeft:"auto"}],separator:[S],description:[I],descriptionIcon:[k],descriptionLink:[A]})},22621:(e,t,n)=>{n.d(t,{R:()=>ce});var r=n(27378),i=n(5739),o=n(86474),a=n(49313),s=n(40327),l=n(38983),c=n(12187),u=n(5114),d=n(71284),p=n(30763),h=n(7046),m=n(77797),f=n(29245),g=n(3656),y=n(90351),v=n(63969),b=n(24588),w=n(40219),_=n(94793);const C=({upgradeAction:e,size:t,title:n,className:i})=>{const o=r.useContext(p.m.Context).goPremium,a=n||o;return r.createElement(h.zx,Object.assign({name:"upgrade"},(0,c.Sh)(i,"big"===t?M.baseBig:"link"===t?M.link:M.baseSmall),{onClick:e}),"link"===t?r.createElement(_.JO.PaidLink,{width:14,className:M.linkIcon}):r.createElement(_.JO.Paid,{className:"big"===t?M.bigIcon:M.icon}),a)},E={background:y.Il.CoreGreen60,borderRadius:v.u.rem(w.fx),boxShadow:`0 2px 5px ${v.u.color(b.UE).fade(.35).toRGBA().toString()}`,color:y.Il.CoreNeutral0,textTransform:"uppercase",letterSpacing:v.u.rem(w.rX),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:v.u.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:v.u.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},S={padding:`0 ${v.u.rem(3)} 0 ${v.u.rem(2)}`,fontSize:v.u.rem(.8125),lineHeight:v.u.rem(3)},I={padding:`0 ${v.u.rem(2)} 0 ${v.u.rem(.5)}`,fontSize:v.u.rem(.6875),lineHeight:v.u.rem(2)},k={background:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:v.u.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:v.u.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},A={padding:`0 ${v.u.rem(3)} 0 ${v.u.rem(2)}`,fontSize:v.u.rem(.8125),lineHeight:v.u.rem(3)},x={padding:`0 ${v.u.rem(2)} 0 ${v.u.rem(.5)}`,fontSize:v.u.rem(.6875),lineHeight:v.u.rem(2)},T={fill:y.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:y.Il.CoreNeutral0}}},O={marginRight:v.u.rem(.2)},R={color:y.Il.CoreGreen60,fontSize:v.u.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},N={color:y.Il.CoreGreen60},L={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},P={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},M=v.u.stylesheet({base:[E],baseBig:[E,S],baseSmall:[E,I],baseUpHookRedesign:[E,k],baseBigUpHookRedesign:[S,k,A],baseSmallUpHookRedesign:[I,k,x],icon:[T],bigIcon:[T,O],link:[R],linkUpHookRedesign:[R,N],linkIconUpHookRedesign:[L],linkIcon:[P]});var D=n(85255),F=n(2834),B=n(57050);const U=.8125,$={display:"flex",flexDirection:"column",maxHeight:"90vh",width:v.u.rem(41.5),backgroundColor:y.Il.CoreNeutral0,textAlign:"left"},j={padding:`${v.u.rem(1.125)} ${v.u.rem(2)} ${v.u.rem(1)}`,paddingBottom:v.u.rem(1)},W={paddingBottom:0,backgroundColor:y.Il.CoreNeutral0,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:`calc(100% - ${v.u.rem(4)})`,height:v.u.px(1),background:y.Il.CoreNeutral20,content:"''"}}},G={display:"block",margin:`${v.u.rem(U)} 0`,color:y.Il.CoreNeutral90,fontWeight:y.xv.SmallLightWeight,lineHeight:v.u.rem(1.5)},q={minHeight:v.u.rem(4)},H={display:"flex",$nest:{"&:not(:last-child)":{marginBottom:v.u.rem(1.25),borderBottom:`1px solid ${y.Il.CoreNeutral20}`}}},z="setGoalsToneButton",V={marginBottom:v.u.rem(-.5),maxWidth:v.u.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:{[`& > .${z}`]:{margin:`0 0 ${v.u.rem(.5)}`,marginLeft:v.u.important(0),$nest:{"&:not(:last-child)":{marginRight:v.u.rem(.5)}}}}},Y={width:v.u.rem(7),textTransform:"capitalize",lineHeight:v.u.rem(2)},X={marginTop:v.u.rem(U)},J={margin:`0 0 ${v.u.rem(1.5)} ${v.u.rem(7)}`},Z={margin:`0 0 ${v.u.rem(1.5)} ${v.u.rem(7)}`},K={display:"flex",width:v.u.percent(100),justifyContent:"space-between"},Q={color:y.Il.CoreNeutral90,fontWeight:300,fontSize:v.u.rem(.8125)},ee=v.u.stylesheet({wrapper:[$],modalBody:[j],modalHeader:[W],itemDescription:[G],modalFooter:[q],row:[H],toneButtons:[V],rowHeader:[Y],extraContent:[X],title:[J],description:[Z],image:[{position:"absolute"}],footerWrapper:[K],checkboxText:[Q]}),te=({name:e,items:t,sticky:n,theme:i={},extraContent:o,children:a})=>r.createElement("div",{className:ee.row},r.createElement("div",null,r.createElement(g.H3,{className:ee.rowHeader},e),o),r.createElement("div",null,r.createElement(h.zx.Group,{sticky:n,className:i.buttonsGroup},t.map((t=>r.createElement(h.zx.White,Object.assign({className:i.button,name:`context-${e}-${t.key}`},t))))),r.createElement(g.x4,{className:ee.itemDescription},a))),ne=({items:e,current:t,shouldDisable:n,itemTitle:r=B.identity})=>({sticky:!0,items:e.map((e=>({key:e,active:t.view((t=>t===e)),onClick:()=>t.set(e),disabled:n&&n(e),children:r(e)})))}),re=({items:e,current:t},n)=>({items:e.map((e=>({key:e,active:t.view((t=>(0,s.pipe)(t,u.exists((t=>t.has(e)))))),onClick:()=>t.modify((t=>{const n=(0,s.pipe)(t,u.fold((()=>new Set),(e=>new Set(e))));return n.has(e)?n.delete(e):n.add(e),u.some(n)})),children:n(e)})))}),ie=({blocks:e,features:t,showOnLoad:n,close:i,upgrade:o,reset:s,showOnLoadChanged:l})=>{const c=r.useContext(d.a.Context);return r.createElement(a.u_,{className:ee.wrapper},r.createElement(a.u_.Header,{className:ee.modalHeader},r.createElement(ae,null)),r.createElement(a.u_.Body,{name:"goalsBody",className:ee.modalBody},r.createElement(oe,{features:t,upgradeAction:o,blocks:e})),r.createElement(a.u_.Footer,{className:ee.modalFooter},r.createElement(se,{supportsSetGoalsLoader:!t.demoMode&&c.has(d.a.Flag.supportsSetGoalsLoader),onDone:i,reset:s,showOnLoad:n,showOnLoadChanged:l})))},oe=({blocks:e,features:t,upgradeAction:n})=>{const o=r.useContext(p.m.Context).goals,{audience:a,formality:l,domain:c,tone:d,intent:h}=e;return r.createElement(r.Fragment,null,r.createElement(te,Object.assign({name:"audience"},ne(a)),a.current.view((t=>t&&o.sections.audience[t]((0,s.pipe)(e.audience.default,u.exists((e=>e===t))))))),r.createElement(te,Object.assign({name:"formality"},ne(l)),l.current.view((e=>e?o.sections.formality[e]:""))),r.createElement(te,Object.assign({name:"domain"},ne(Object.assign(Object.assign({},c),{itemTitle:e=>"mail"===e?"email":e})),{extraContent:r.createElement(i.F.div,{className:ee.extraContent},t.isFree?r.createElement(C,{size:"link",upgradeAction:n}):null)}),c.current.view((e=>t.isFree?o.sections.domain.free:e?o.sections.domain[e]:""))),r.createElement(te,Object.assign({name:"tone",theme:{buttonsGroup:ee.toneButtons,button:z}},re(d,(e=>r.createElement(f.d,{key:e},o.sections.tone.options[e])))),o.sections.tone.experimental),r.createElement(te,Object.assign({name:"intent"},re(h,(e=>o.sections.intent.options[e]))),o.sections.intent.experimental))},ae=()=>{const e=r.useContext(p.m.Context).goals;return r.createElement(r.Fragment,null,r.createElement(le,null),r.createElement(g.H1,{className:ee.title},e.title),r.createElement(g.XY,{className:ee.description},e.header))},se=({supportsSetGoalsLoader:e,showOnLoad:t,showOnLoadChanged:n,reset:i,onDone:o})=>{const a=r.useContext(p.m.Context),s=l.h.create(t);return D.P.useSubscriptionTo(s.pipe(F.b(n))),r.createElement("div",Object.assign({},(0,c.Sh)(e&&ee.footerWrapper)),e&&r.createElement(m.Ys,{checked:s,name:"set-goals"},r.createElement(g.x4,{className:ee.checkboxText},a.goals.footer.showModalOnStart)),r.createElement(h.zx.Group,null,r.createElement(h.zx.Ghost,{name:"reset",onClick:i},a.goals.footer.reset),r.createElement(h.zx.Primary,{name:"closeSetContext",onClick:o},a.done)))},le=()=>r.createElement("svg",{className:ee.image,width:"69",height:"80",viewBox:"0 0 69 80"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:"#4C7AF1"}),r.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:"#BCDBFB"}),r.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),r.createElement("path",{stroke:"#4C7AF1",strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),r.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:"#4C7AF1"}),r.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:"#FFF",strokeWidth:"1.3"})));var ce,ue=n(50628),de=n(77176);!function(e){let t;e.Modal=o.UI.Node.make((({state:e,notify:n})=>(D.P.useSubscriptionTo(e.pipe(ue.P(),F.b((e=>n({kind:t.open,source:e.source})())))),r.createElement(i.F.Fragment,null,e.pipe(de.U((e=>{const i=n({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad});return r.createElement(a.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:i},r.createElement(ie,{blocks:e.blocks,features:e.features,close:i,upgrade:n({kind:t.upgrade}),reset:n({kind:t.reset}),showOnLoad:e.showOnLoad,showOnLoadChanged:e=>n({kind:t.showOnLoadChanged,value:e})()}))}))))))),function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(ce||(ce={}))},39321:(e,t,n)=>{n.d(t,{q:()=>xe});var r=n(27378),i=n(5739),o=n(22232),a=n(86474),s=n(30763),l=n(25970),c=n(7046),u=n(49313);const d=()=>r.createElement("svg",{width:"128",height:"177"},r.createElement("defs",null,r.createElement("rect",{id:"a",y:"14",width:"128",height:"128",rx:"64"})),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("ellipse",{fill:"#F1F2FA",cx:"64",cy:"173",rx:"48",ry:"4"}),r.createElement("path",{d:"M27 0h62a5 5 0 0 1 5 5v91a5 5 0 0 1-5 5H24a5 5 0 0 1-5-5V8a8 8 0 0 1 8-8z",fill:"#F1F2FA"}),r.createElement("mask",{id:"b",fill:"#fff"},r.createElement("use",{xlinkHref:"#a"})),r.createElement("use",{fill:"#A2BCFF",xlinkHref:"#a"}),r.createElement("path",{d:"M116.708 48.783a4.144 4.144 0 0 1 5.672-1.465 4.138 4.138 0 0 1 1.466 5.667l-17.955 30.462a4.141 4.141 0 0 1-3.57 2.039 4.145 4.145 0 0 1-2.879-1.164l-12.527-12.1a4.138 4.138 0 0 1-.099-5.855 4.144 4.144 0 0 1 5.858-.099l8.747 8.45 15.287-25.935zm-63.446 45.53h58.877a4.141 4.141 0 0 1 4.142 4.139 4.141 4.141 0 0 1-4.142 4.14H53.262a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zM8.793 17.33h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm0 17.526h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm4.99 68.985a4.74 4.74 0 0 1-4.686 4.794 4.74 4.74 0 0 1-.111-9.477 4.74 4.74 0 0 1 4.798 4.683zm16.757 16.106a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14c0 9.416-7.665 17.076-17.087 17.076S4.65 129.363 4.65 119.947a4.141 4.141 0 0 1 4.143-4.14 4.141 4.141 0 0 1 4.143 4.14c0 4.85 3.948 8.796 8.802 8.796 4.853 0 8.802-3.946 8.802-8.796zM8.793 76.46c-1.06 0-2.12-.405-2.93-1.213a4.138 4.138 0 0 1 0-5.855l4.274-4.27-4.273-4.27a4.138 4.138 0 0 1 0-5.855 4.145 4.145 0 0 1 5.859 0l4.273 4.27 4.273-4.27a4.144 4.144 0 0 1 5.858 0 4.138 4.138 0 0 1 0 5.855l-4.273 4.27 4.274 4.27a4.138 4.138 0 0 1-2.93 7.068c-1.06 0-2.12-.405-2.929-1.213l-4.273-4.27-4.273 4.27a4.133 4.133 0 0 1-2.93 1.213zm87.342 44.285l13.678 9.075a4.138 4.138 0 0 1 1.16 5.739 4.144 4.144 0 0 1-5.743 1.159l-11.387-7.555-11.386 7.555a4.143 4.143 0 0 1-4.378.128l-12.844-7.478-11.078 7.35c-.705.468-1.5.691-2.288.691a4.14 4.14 0 0 1-2.295-7.589l13.227-8.776a4.144 4.144 0 0 1 4.377-.128l12.844 7.478 11.53-7.65a4.145 4.145 0 0 1 4.583 0zM31.23 86.814a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14v19.402a4.141 4.141 0 0 1-4.143 4.14 4.141 4.141 0 0 1-4.142-4.14V86.814z",fill:"#BDCFFF",mask:"url(#b)"}),r.createElement("path",{d:"M36 12h65a5 5 0 0 1 5 5v88a8 8 0 0 1-8 8H36a5 5 0 0 1-5-5V17a5 5 0 0 1 5-5z",fill:"#7CA1FF",mask:"url(#b)"}),r.createElement("rect",{fill:"#FFF",x:"25",y:"6",width:"75",height:"101",rx:"5"}),r.createElement("path",{d:"M38 21h49a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm0 13h32a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z",fill:"#F1F2FA"})));var p,h=n(42329),m=n(3656),f=n(77176),g=n(12187),y=n(76024);!function(e){function t(e,t){var n=t/60,r=y.secondsToTime(e/n);return r.s=r.h>0&&r.m>10?0:Math.floor(r.s),r}e.calculateReadingTime=function(e){return t(e,250)},e.calculateSpeakingTime=function(e){return t(e,130)},e.generateStats=function(t,n){var r={words:t,chars:n,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return r.readingTime=e.calculateReadingTime(r.words),r.speakingTime=e.calculateSpeakingTime(r.words),r}}(p||(p={}));var v=n(18208),b=n(5114),w=n(90351),_=n(63969),C=n(24588),E=n(40219),S=n(94793),I=n(40327),k=n(38983),A=n(2844),x=n(66310),T=n(93508),O=n(16118),R=n(76974),N=n(13444);const L=e=>{const{score:t,documentIsEmpty:n,sidebarOpen:o=k.h.create(!0),successIcon:a,progressIcon:s,zeroIcon:l=null}=e,c=t.pipe(f.U(b.map((e=>e.rank)))),u=A.aj(t,n,((e,t)=>(0,I.pipe)(e,b.fold((()=>!1),(({rank:e})=>100===e&&!t))))),d=o.pipe(x.w((e=>e?c.pipe(T.O(b.none),O.G(),x.w((([e,t])=>(0,I.pipe)(t,b.fold((()=>R.of(l)),(t=>u.pipe(T.O(!1),O.G(),x.w((([n,r])=>r?R.of(a):(0,I.pipe)(e,b.filter((()=>!n)),b.fold((()=>R.of(s(t)).pipe(N.g(1),T.O(s(0)))),(()=>R.of(s(t)))))))))))))):R.of(null))),T.O(null));return r.createElement(i.F.Fragment,null,d)};var P=n(98403);function M({value:e,className:t,leftCustomClass:n,rightCustomClass:o}){const a=k.h.create(!1);requestAnimationFrame((()=>requestAnimationFrame((()=>a.set(!0)))));const s=A.aj(P.Dx(e),a,((e,t)=>t?`${Math.max(5,Math.abs(e-50))}%`:0)),l=(e,t,n)=>P.Dx(e).pipe(f.U((e=>e<50?t:n)));return r.createElement(i.F.div,Object.assign({},(0,g.Sh)((e=>P.Dx(e).pipe(f.U((e=>e<50?$.leftSideWrapper:$.rightSideWrapper))))(e),t)),r.createElement(i.F.div,Object.assign({},(0,g.Sh)(l(e,$.leftSideProgress,$.rightSideProgress),n&&o&&l(e,n,o)),{style:{width:s}})))}!function(e){e.Label=({value:e,className:t})=>{const n=r.useContext(s.m.Context).performance,i=e>66?n.aboveAverage:e>50?n.average:n.belowAverage;return r.createElement(m.x4,{className:t},i)}}(M||(M={}));const D={position:"relative",zIndex:1,display:"flex",width:_.u.percent(100),height:_.u.rem(.25),borderRadius:_.u.rem(E.fx)},F={height:_.u.percent(100),backgroundColor:C.FW,transition:"width .8s ease-in-out 0s"},B={marginRight:_.u.percent(50),borderTopLeftRadius:_.u.rem(.25),borderBottomLeftRadius:_.u.rem(.25)},U={marginLeft:_.u.percent(50),borderTopRightRadius:_.u.rem(.25),borderBottomRightRadius:_.u.rem(.25)},$=_.u.stylesheet({wrapper:[D],leftSideWrapper:[D,{justifyContent:"flex-end"}],rightSideWrapper:[D,{justifyContent:"flex-start"}],progress:[F],leftSideProgress:[F,B],rightSideProgress:[F,U]});var j=n(63847);const W={display:"flex",flexDirection:"column",maxHeight:"90vh",width:_.u.rem(32),height:_.u.rem(41),background:w.Il.CoreNeutral0},G={padding:`${_.u.rem(2.75)} ${_.u.rem(1)} 0 ${_.u.rem(2)}`,minHeight:_.u.rem(5.1),height:_.u.rem(5.1),backgroundColor:w.Il.CoreNeutral0},q={marginRight:_.u.rem(1),paddingBottom:_.u.rem(.3),borderBottom:`1px solid ${C.xO}`},H={padding:`0 ${_.u.rem(1)} ${_.u.rem(1)} ${_.u.rem(2)}`},z={padding:`0 ${_.u.rem(1.9)}`,minHeight:_.u.rem(4),height:_.u.rem(4)},V={position:"absolute",top:_.u.rem(-5.15),right:0,bottom:0,left:0,margin:"auto"},Y={display:"flex",flexDirection:"column",marginTop:_.u.rem(7.15),marginBottom:_.u.rem(2),paddingRight:_.u.rem(1),alignItems:"center"},X={wordSpacing:_.u.rem(.05),fontSize:_.u.rem(.875),lineHeight:_.u.rem(1.5)},J={padding:`${_.u.rem(1.3)} ${_.u.rem(2.6)}`,textAlign:"center"},Z=_.u.prefixedStylesheet("statistics",{wrapper:[W],modalHeader:[G],modalHeaderUnderline:[q],modalReady:[{transition:"opacity .2s"}],modalEmpty:[{opacity:0}],modalBody:[H],modalFooter:[z],loader:[V],zeroStateContainer:[Y],performanceText:[X],zeroStateText:[X,J]});var K;!function(e){e.number="number",e.time="time",e.percentage="percentage"}(K||(K={}));const Q=e=>{switch(e){case K.number:case K.percentage:return ke.numberRowData;case K.time:return ke.timeRowData;default:return(0,o.vE)(e)}},ee=({type:e,value:t,info:n,children:i,dataName:a})=>r.createElement("div",{className:ke.row,"data-name":a},r.createElement("div",{className:Q(e)},r.createElement("div",{className:ke.metricTitle},i),r.createElement("div",{className:ke.metric},((e,t)=>{switch(e){case K.number:return(Math.round(10*t)/10).toLocaleString();case K.time:return y.convertTimeToShortString(t);case K.percentage:return Math.round(t)+"%";default:return(0,o.vE)(e)}})(e,t))),n&&r.createElement(c.RZ,{title:n})),te=({state:e})=>{const t=r.useContext(s.m.Context).performance,{stats:n,score:o,documentIsEmpty:a}=e;return r.createElement(r.Fragment,null,r.createElement("section",{className:ke.titleSection},r.createElement("div",{className:ke.titleColumns},r.createElement(i.F.div,Object.assign({},(0,g.Sh)(Z.performanceText,ke.headerDescription)),100===o.rank?t.score100:t.scoreUnder100(o.rank)),r.createElement(L,{score:R.of(b.some(o)),documentIsEmpty:R.of(a),successIcon:r.createElement(S.JO.CheckmarkAnimated,{key:"modal-checkmark",width:50,className:ke.checkmark}),progressIcon:e=>r.createElement(j.P,{key:"modal-performance-progress",colorType:j.P.ColorType.royalBlue,fontSize:j.P.FontSize.small,percentage:e,theme:Ae})}))),r.createElement("section",{className:ke.wordCountSection},r.createElement(m.H2,{className:ke.sectionHeaderUnderline},t.wordCount),r.createElement("div",{className:ke.wordCountColumns},r.createElement("div",{className:ke.firstColumn},r.createElement(ee,{type:K.number,value:Math.max(n.chars-1,0)},t.characters),r.createElement(ee,{type:K.number,value:n.words},t.words),r.createElement(ee,{type:K.number,value:n.sentences},v.pluralize(n.sentences,t.sentence,t.sentences))),r.createElement("div",{className:ke.secondColumn},r.createElement(ee,{type:K.time,value:p.calculateReadingTime(n.words)},t.readingTime),r.createElement(ee,{type:K.time,value:p.calculateSpeakingTime(n.words)},t.speakingTime)))),r.createElement("section",{className:ke.readabilitySection},r.createElement("div",{className:ke.sectionHeaderWrapper},r.createElement(m.H2,null,t.readability),r.createElement(m.CL,null,t.sectionTitleDescription)),r.createElement("div",{className:ke.readabilityColumns},r.createElement("div",{className:ke.firstColumn},r.createElement(ee,{type:K.number,value:n.wordLength},t.wordLengthTitle),r.createElement(ee,{type:K.number,value:n.sentenceLength},t.sentenceLengthTitle),r.createElement(ee,{type:K.number,value:n.readabilityScore,info:t.readabilityDescription,dataName:"readability"},t.readabilityScore)),r.createElement("div",{className:ke.secondColumn},r.createElement("div",{className:ke.row},r.createElement(M,{value:n.wordLengthIndex,className:ke.progressBar,leftCustomClass:ke.leftProgress,rightCustomClass:ke.rightProgress}),r.createElement(M.Label,{value:n.wordLengthIndex,className:ke.progressLabel})),r.createElement("div",{className:ke.row},r.createElement(M,{value:n.sentenceLengthIndex,className:ke.progressBar,leftCustomClass:ke.leftProgress,rightCustomClass:ke.rightProgress}),r.createElement(M.Label,{value:n.sentenceLengthIndex,className:ke.progressLabel})),r.createElement("div",{className:ke.verticalPillar}))),r.createElement(m.CL,{className:ke.readabilityDescr},n.readabilityDescription)),r.createElement("section",null,r.createElement("div",{className:ke.sectionHeaderWrapper},r.createElement(m.H2,null,t.vocabulary),r.createElement(m.CL,null,t.sectionTitleDescription)),r.createElement("div",{className:ke.vocabularyColumns},r.createElement("div",{className:ke.firstColumn},r.createElement(ee,{type:K.percentage,value:n.uniqueWords,info:t.uniqueWords},t.uniqueWordsTitle),r.createElement(ee,{type:K.percentage,value:n.rareWords,info:t.rareWords},t.rareWordsTitle)),r.createElement("div",{className:ke.secondColumn},r.createElement("div",{className:ke.row},r.createElement(M,{value:n.uniqueWords,className:ke.progressBar,leftCustomClass:ke.leftProgress,rightCustomClass:ke.rightProgress}),r.createElement(M.Label,{value:n.uniqueWords,className:ke.progressLabel})),r.createElement("div",{className:ke.row},r.createElement(M,{value:n.rareWords,className:ke.progressBar,leftCustomClass:ke.leftProgress,rightCustomClass:ke.rightProgress}),r.createElement(M.Label,{value:n.rareWords,className:ke.progressLabel})),r.createElement("div",{className:ke.verticalPillar})))))},ne={marginBottom:_.u.rem(2.4)},re={display:"flex",marginTop:_.u.rem(.9),marginRight:_.u.rem(1),justifyContent:"space-between"},ie={marginBottom:_.u.rem(1.5)},oe={display:"flex",marginTop:_.u.rem(.8)},ae={marginBottom:_.u.rem(2.4)},se={display:"flex",marginTop:_.u.rem(.8)},le={display:"flex",marginTop:_.u.rem(.8)},ce={flexBasis:_.u.percent(50)},ue={position:"relative",paddingLeft:_.u.rem(.5),flexBasis:_.u.percent(50)},de={display:"flex",height:_.u.rem(2),alignItems:"center"},pe={display:"flex",justifyContent:"space-between"},he={width:_.u.rem(10),fontFeatureSettings:`${E.Q9}, ${E.g_}`},me={width:_.u.rem(13)},fe={marginRight:_.u.rem(1),paddingBottom:_.u.rem(.5),borderBottom:`1px solid ${C.xO}`},ge={width:_.u.percent(80),whiteSpace:"pre-line"},ye={display:"inline-block",color:w.Il.CoreBlue50,textAlign:"right",fontWeight:"bold",fontSize:_.u.rem(.875),lineHeight:_.u.rem(2)},ve={display:"inline-block",color:w.Il.CoreNeutral90,fontSize:_.u.rem(.875),lineHeight:_.u.rem(2)},be={width:_.u.rem(3.2),height:_.u.rem(3.2),fontWeight:"bold"},we={width:_.u.rem(6),backgroundColor:C.xO},_e={marginLeft:_.u.rem(1.125)},Ce={backgroundImage:C.BZ},Ee={backgroundImage:C.Xd},Se={display:"block",paddingTop:_.u.rem(.5)},Ie={position:"absolute",top:_.u.rem(.5),left:_.u.rem(3.5),width:_.u.rem(.0625),height:_.u.rem(3),backgroundColor:C.jj},ke=_.u.stylesheet({titleSection:[ne],titleColumns:[re],wordCountSection:[ie],wordCountColumns:[oe],readabilitySection:[ae],readabilityColumns:[se],vocabularyColumns:[le],firstColumn:[ce],secondColumn:[ue],row:[de],rowData:[pe],numberRowData:[pe,he],timeRowData:[pe,me],sectionHeaderUnderline:[fe],sectionHeaderWrapper:[fe,{display:"flex",alignItems:"baseline",justifyContent:"space-between"}],headerDescription:[ge],metric:[ye],metricTitle:[ve],checkmark:[{alignItems:"center"}],circleProgressBar:[be],progressBar:[we],progressLabel:[_e],leftProgress:[Ce],rightProgress:[Ee],readabilityDescr:[Se],verticalPillar:[Ie]}),Ae={radialProgressBar:ke.circleProgressBar};var xe;!function(e){let t;e.ModalView=a.UI.Grid.make((({slots:n,state:i,notify:o})=>{const a=o({kind:t.close});return r.createElement(u.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:a},r.createElement(e.ModalContent,{state:i,downloadButton:n.downloadButton,onClose:a}))})),function(e){e.close="close"}(t=e.ActionsKind||(e.ActionsKind={})),e.ModalContent=({state:t,downloadButton:n,onClose:i})=>r.createElement(u.u_,{className:Z.wrapper},r.createElement(u.u_.Header,{className:Z.modalHeader},r.createElement(e.Header,{state:t})),r.createElement(u.u_.Body,{name:"performanceBody",className:Z.modalBody,wrapperClassName:t.pipe(f.U((e=>e.type===l.g.State.Type.EMPTY?Z.modalEmpty:Z.modalReady)))},r.createElement(e.Body,{state:t})),r.createElement(u.u_.Footer,{className:Z.modalFooter},r.createElement(g,{downloadButton:n,onClose:i})));const n=()=>{const e=r.useContext(s.m.Context);return r.createElement("div",{className:Z.zeroStateContainer},r.createElement(d,null),r.createElement("div",{className:Z.zeroStateText},e.performance.notEnoughTextToCalculateStats))};e.Header=({state:e})=>{const t=r.useContext(s.m.Context);return r.createElement(i.F.Fragment,null,e.pipe(f.U((e=>r.createElement(m.H2,{key:"statisticsHeader",className:e.type===l.g.State.Type.READY?Z.modalHeaderUnderline:""},t.performance.title)))))};const p=()=>r.createElement(h.$,{size:64,className:Z.loader,variation:"blue"});e.Body=({state:e})=>r.createElement(i.F.Fragment,null,e.pipe(f.U((e=>{switch(e.type){case l.g.State.Type.EMPTY:return null;case l.g.State.Type.LOADING:case l.g.State.Type.ERROR:return r.createElement(p,{key:"statisticsLoading"});case l.g.State.Type.SHORT_CONTENT:return r.createElement(n,{key:"statisticsEmpty"});case l.g.State.Type.READY:return r.createElement(te,{key:"statisticsContent",state:e});default:return(0,o.vE)(e)}}))));const g=({downloadButton:e,onClose:t})=>r.createElement(r.Fragment,null,e,r.createElement(c.zx.Primary,{name:"close-stats",onClick:t},"Close"))}(xe||(xe={}))},89379:(e,t,n)=>{n.d(t,{wK:()=>h,JT:()=>m,hM:()=>f});var r=n(40327),i=n(5114),o=n(8125),a=n(22232),s=n(93756),l=n(86474),c=n(27125),u=n(77176);function d(e){return{title:e.title,firstLine:i.fromNullable(e.firstLine)}}function p(e){switch(e){case c.g.SuccessType.applied:case c.g.SuccessType.large:return"growComplete";default:return"growStart"}}function h(e,t){return()=>e.pipe(u.U((e=>{const n=((e,t)=>{const n=t.successLens;switch(e){case c.g.SuccessType.zero:return n.emptyText;case c.g.SuccessType.small:return n.smallText;case c.g.SuccessType.large:return n.largeText;case c.g.SuccessType.applied:return{title:n.fixedText.titles[(0,o.TN)(9)]};default:return(0,a.vE)(e)}})(e,t);return{kind:p(e),caption:i.some(d(n))}})))}function m(e){return()=>e.pipe(u.U((e=>({kind:p(e),caption:i.none}))))}function f(e){return l.Z.animatingFlow(e,(e=>(0,r.pipe)(e,i.fold((()=>i.some(s.F2("fadein"))),(()=>i.some(s.Hk("fadeout","fadein")))))))}},28378:(e,t,n)=>{n.d(t,{q:()=>T});var r=n(27378),i=n(40327),o=n(5739),a=n(83078),s=n(86474),l=n(90351),c=n(63969),u=n(3656),d=n(77176);const p=s.UI.Node.make((()=>r.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{clipPath:"url(#clip0)"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#D7F7F0"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",fill:"#D1CEF4"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094-1.495 11.206 1.495-11.206z",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094zm0 0l-1.495 11.206",stroke:"#0E101A",strokeMiterlimit:"10"})),r.createElement("path",{d:"M54.822 50.297c0 1.948-1.496 3.59-3.49 3.59-1.995 0-3.49-1.54-3.49-3.59 0-2.052 1.495-5.231 3.49-5.231 1.994 0 3.49 3.282 3.49 5.23z",fill:"#F6DF6C",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M58.411 32.86s-2.194-4.307 1.596-7.897c3.09-2.974 8.276-4.41 10.07-4.923.3-.102.6.205.6.513-.1 1.436-.5 5.026-1.995 7.795-1.695 3.18-6.183 6.359-10.27 4.513zM54.123 37.066s3.49-8.41-9.273-13.334c-.3-.102-.698.206-.599.513.2 1.026.5 3.077.699 5.026.398 4.82 1.396 10.462 9.173 7.795z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M51.431 45.066c.598-4.41 2.393-9.334 7.28-12.513",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("defs",null,r.createElement("clipPath",{id:"clip0"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#fff"})))))),h=s.UI.Node.make((()=>r.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{x:"28",y:"26.25",width:"56",height:"73.5",rx:"28",fill:"#DBEBFF"}),r.createElement("path",{d:"M78.5 103.284S73.702 64.99 25.9 42.79",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M73.797 88.742s-4.895-9.307 4.512-21.619c0 0 6.91 7.465-4.512 21.619z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M73.701 88.839S69.958 78.95 54.696 77.98c0 0 .96 10.082 19.005 10.858zM63.239 71.195s-6.335-6.496-1.728-19.001c0 .096 7.583 4.362 1.728 19z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M63.143 71.292s-5.567-7.174-18.43-4.072c0 0 3.36 8.143 18.43 4.072zM50.089 57.526s-5.952-4.363-3.84-15.027c0 0 6.623 2.52 3.84 15.026z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M49.993 57.623s-5.376-5.042-15.358-.873c0 0 3.743 6.108 15.358.873z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.314 52.097c-4.8-3.297-10.27-6.399-16.414-9.21",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M36.65 48.413s-4.607-2.327-4.319-9.986c0-.097 4.895.97 4.32 9.986z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M36.65 48.51S32.331 45.6 25.9 49.673c0-.097 3.264 3.78 10.75-1.163z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.778 85.615c0-2.917-2.194-5.216-4.978-5.216 2.785 0 4.978-2.298 4.978-5.216 0 2.918 2.194 5.216 4.979 5.216-2.785 0-4.979 2.299-4.979 5.216z",fill:"#D1CEF4",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M56.597 42.094c0-2.652-1.994-4.742-4.525-4.742 2.531 0 4.525-2.09 4.525-4.741 0 2.652 1.995 4.742 4.526 4.742-2.531 0-4.526 2.09-4.526 4.741z",fill:"#FCF5D0",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M80.06 61.062c0-3.13-2.354-5.596-5.341-5.596 2.987 0 5.34-2.465 5.34-5.595 0 3.13 2.354 5.595 5.341 5.595-2.987 0-5.34 2.466-5.34 5.596z",fill:"#F8C6DA",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M77 43.212c5.412 0 9.8-4.43 9.8-9.895 0-5.464-4.388-9.894-9.8-9.894-5.412 0-9.8 4.43-9.8 9.894 0 5.465 4.388 9.895 9.8 9.895z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M83.037 29.695c-.35-.353-1.05-.353-1.487 0l-6.125 6.184-2.625-2.65c-.35-.353-1.05-.353-1.487 0-.175.177-.263.442-.263.707 0 .265.088.53.263.706l3.412 3.446c.175.176.438.265.7.265.263 0 .525-.089.7-.265l6.825-6.89c.438-.443.438-1.061.087-1.503z",fill:"#fff"})))),m=s.UI.Node.make((({view:e})=>r.createElement("div",{"data-name":"success-lens-text",className:A.newSuccessText},r.createElement(u.H4,{key:"title"},e("title")),r.createElement("div",{className:A.newSuccessDescription},r.createElement(o.F.div,{className:A.newSuccessDescriptionText},(0,i.pipe)(e("firstLine"),d.U(a.orNull))))))),f=s.UI.Union.asOption(m),g=s.UI.Grid.make((({slots:e})=>r.createElement(o.F.div,{className:A.newSuccessContainer},e.image,e.caption))),y=s.UI.Knot.make(g,{image:p,caption:f}),v=s.UI.Knot.make(g,{image:h,caption:f}),b=s.UI.Union.make("kind",{growStart:y,growComplete:v}),w=c.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),_=c.u.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),C={animation:`${w} 300ms linear forwards`},E={position:"absolute",top:0,width:c.u.percent(100),animation:`${_} 200ms linear forwards`},S={width:c.u.percent(100),marginTop:c.u.rem(.5)},I={marginTop:c.u.rem(.25)},k={fontSize:c.u.rem(l.xv.NewSuccessDescriptionSize),color:l.Il.CoreNeutral50,letterSpacing:l.xv.NewSuccessDescriptionLetterSpacing,lineHeight:c.u.rem(l.xv.NewSuccessDescriptionLineHeight),fontWeight:l.xv.NewSuccessDescriptionWeight},A=c.u.stylesheet({success_fadein:[C],success_fadeout:[E],newSuccessContainer:[{textAlign:"center"}],newSuccessText:[S],newSuccessDescription:[I],newSuccessDescriptionText:[k]}),x=s.UI.Transition.make({fadein:A.success_fadein},{fadeout:A.success_fadeout}),T=s.UI.Animated.make(x,b)},38819:(e,t,n)=>{n.d(t,{r:()=>g});var r=n(27378),i=n(40327),o=n(5114),a=n(86474),s=n(63969),l=n(61903),c=n(30763),u=n(94793),d=n(3656);const p=a.UI.Grid.make((({slots:e})=>r.createElement("div",{className:w.grid},r.createElement("div",{className:w.iconWrapper},e.icon),r.createElement("div",{className:w.titleWrapper},e.title),r.createElement("div",{className:w.bottomWrapper},e.bottom)))),h=a.UI.Node.make((()=>{const e=r.useContext(c.m.Context).successLens.paidView;return r.createElement(d.H4,null,e.title)})),m=a.UI.Node.make((()=>r.createElement(u.JO.GreenOk,{width:32}))),f=a.UI.Knot.make(p,{icon:m,title:h,bottom:a.UI.Union.make("kind",{[l.n.State.hidden]:a.UI.Node.empty,[l.n.State.expanded]:l.n.TogglableExpandedPanel})}),g=(0,i.pipe)(a.UI.squash(f),a.UI.contramapState((e=>(0,i.pipe)(e,o.fold((()=>({bottom:{kind:l.n.State.hidden}})),(e=>({bottom:{kind:l.n.State.expanded,showCloseButton:!1,alertsState:e}}))))))),y={marginTop:s.u.rem(3.5)},v={marginTop:s.u.rem(1.375)},b={marginTop:s.u.rem(2.675)},w=s.u.stylesheet({grid:[{display:"flex",flexDirection:"column",alignItems:"center"}],iconWrapper:[y],titleWrapper:[v],bottomWrapper:[b]})},70023:(e,t,n)=>{n.d(t,{d:()=>d});var r=n(57050),i=n(5114),o=n(22232),a=n(77176),s=n(60797),l=n(93508),c=n(66310),u=n(61903);function d(e){return(0,r.flow)(a.U((e=>{switch(e.key){case u.n.State.expanded:switch(e.action.kind){case"collapse":return i.some(u.n.State.minimized);case"upgrade":case"onUpgradeButtonMount":return i.none;default:return(0,o.vE)(e.action)}case u.n.State.minimized:switch(e.action.action){case"onClick":return i.some(u.n.State.expanded);default:return(0,o.vE)(e.action.action)}default:return(0,o.vE)(e)}})),s.oA,l.O(u.n.State.minimized),c.w((t=>e.pipe(a.U(i.fold((()=>({kind:u.n.State.hidden})),(e=>{switch(t){case u.n.State.minimized:return{kind:u.n.State.minimized,alertsCount:e.count};case u.n.State.expanded:return{kind:u.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}};case u.n.State.hidden:return{kind:u.n.State.hidden};default:return(0,o.vE)(t)}})))))))}},61903:(e,t,n)=>{n.d(t,{n:()=>q});var r=n(86474),i=n(27378),o=n(40327),a=n(5739),s=n(22232),l=n(5114),c=n(30763),u=n(7046),d=n(87380),p=n(94793),h=n(3656),m=n(77176),f=n(90351),g=n(63969),y=n(40219);const v={position:"relative",borderRadius:g.u.rem(y.fx),boxShadow:"0 1px 7px 0 rgba(129, 137, 169, .2)",userSelect:"none",backgroundColor:f.Il.CoreNeutral0},b={padding:`${g.u.rem(1)} ${g.u.rem(2)}`},w={position:"absolute",top:g.u.rem(.75),left:g.u.rem(.5)},_={display:"flex",boxSizing:"border-box",padding:g.u.rem(.5),height:g.u.rem(2.5),cursor:"pointer",justifyContent:"flex-start",alignItems:"center"},C={marginLeft:g.u.rem(.8),fontSize:g.u.rem(.85),lineHeight:g.u.rem(1)},E={display:"flex",width:g.u.percent(100),alignItems:"center",justifyContent:"space-between"},S={position:"absolute",top:g.u.rem(.2),right:g.u.rem(.3),cursor:"pointer"},I={paddingRight:g.u.rem(1),textAlign:"left",fontSize:g.u.rem(.75),lineHeight:g.u.rem(1.15)},k={marginTop:g.u.rem(.6),fontSize:g.u.rem(.875),flexShrink:0},A={display:"flex",marginBottom:g.u.rem(.6),justifyContent:"flex-end",flexShrink:0},x={marginRight:"auto",lineHeight:g.u.rem(1.3125)},T={marginTop:g.u.rem(.21),minWidth:g.u.rem(1.5),flexShrink:0},O={marginTop:g.u.rem(1)},R={display:"flex",justifyContent:"center",alignItems:"center",height:g.u.rem(2),backgroundColor:f.Il.CoreGreen60,borderRadius:g.u.rem(.25),fontSize:g.u.rem(.875),fontWeight:700,color:f.Il.CoreNeutral0,lineHeight:g.u.rem(2),$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:g.u.color(f.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:g.u.color(f.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},N=g.u.stylesheet({wrapper:[v],maximizedWrapper:[b],minimizedWrapper:[_],maximizedWrapperIcon:[w],shadowWrapper:[{position:"relative",zIndex:1}],minimizedText:[C],minimizedContent:[E],maximizedCloseButtonContainer:[S],maximizedHeader:[I],alertCategoryContainer:[k],alertCategory:[A],categoryHumanContainer:[x],alertCounterContainer:[T],premiumButtonContainer:[O],premiumButton:[R]});var L=n(12187);const P=(e,t)=>r.UI.Grid.make((({slots:n})=>i.createElement(a.F.div,Object.assign({},(0,L.Sh)(N.wrapper,e)),i.createElement(p.JO.UpgradeHookPanel.TitleDiamond,{className:t}),n.body))),M=r.UI.Node.make((({notify:e})=>i.createElement(a.F.div,{className:N.maximizedCloseButtonContainer},i.createElement(h.zx,{name:"close",onClick:e("onClick")},i.createElement(p.JO.Arrow,{width:11,direction:p.n4.up})))));var D;!function(e){let t;!function(e){e.onUpgrade="onUpgrade",e.onUpgradeButtonMount="onUpgradeButtonMount"}(t=e.ActionsKind||(e.ActionsKind={}))}(D||(D={}));const F=r.UI.Node.make((({state:e,notify:t})=>{const n=i.useContext(c.m.Context);return i.createElement(i.Fragment,null,i.createElement("div",{className:N.maximizedHeader},i.createElement(a.F.Fragment,null,e.pipe(m.U((({count:e})=>e>0?e>1?i.createElement(i.Fragment,{key:"plural"},n.sidebar.content.premiumIssues.foundTitlePlural.description1," ",e," ",n.sidebar.content.premiumIssues.foundTitlePlural.description2):i.createElement(i.Fragment,{key:"singular"},n.sidebar.content.premiumIssues.foundTitleSingular.description1," ",e," ",n.sidebar.content.premiumIssues.foundTitleSingular.description2):null))))),i.createElement(a.F.div,{className:N.alertCategoryContainer},e.pipe(m.U((({alerts:e})=>e.map((e=>i.createElement("div",{key:e.category,className:N.alertCategory},i.createElement("div",{className:N.categoryHumanContainer},e.categoryHuman),i.createElement("div",{className:N.alertCounterContainer},i.createElement(d.x.Counter,{count:e.count,type:"yellowPremium"}))))))))),i.createElement("div",{className:N.premiumButtonContainer},i.createElement("div",{ref:e=>{t({kind:D.ActionsKind.onUpgradeButtonMount,element:l.fromNullable(e)})()}},i.createElement(u.zx,{name:"upgrade",className:N.premiumButton,onClick:t({kind:D.ActionsKind.onUpgrade})},i.createElement(p.JO.UpgradeHookPanel.ButtonDiamond,null),n.goPremium))))})),B=r.UI.Composite.make(P(N.maximizedWrapper,N.maximizedWrapperIcon),r.UI.Group.make({closeButton:r.UI.Union.make("kind",{hidden:r.UI.Node.empty,visible:M}),content:F})),U=(0,o.pipe)(r.UI.squash(B),r.UI.mapAction((e=>{switch(e.key){case"content":switch(e.action.kind){case D.ActionsKind.onUpgrade:return{kind:"upgrade"};case D.ActionsKind.onUpgradeButtonMount:return{kind:"onUpgradeButtonMount",element:e.action.element};default:return(0,s.vE)(e.action)}case"closeButton":switch(e.action.action){case"onClick":return{kind:"collapse"};default:return(0,s.vE)(e.action.action)}default:return(0,s.vE)(e)}})),r.UI.contramapState((e=>({closeButton:{kind:e.showCloseButton?"visible":"hidden"},content:e.alertsState})))),$=r.UI.Node.make((({state:e})=>{const t=i.useContext(c.m.Context);return i.createElement(a.F.div,{className:N.minimizedContent},i.createElement("div",{className:N.minimizedText},t.premiumSuggestions),e.pipe(m.U((({alertsCount:e})=>e>0&&i.createElement(d.x.Counter,{type:"yellowPremium",key:"advancedCounter-counter",count:e})))))})),j=r.UI.Grid.make((({slots:e,notify:t})=>i.createElement("div",{className:N.shadowWrapper,onClick:t("onClick")},e.body))),W=r.UI.Knot.make(j,{body:r.UI.Composite.make(P(N.minimizedWrapper),$)}),G=(0,o.pipe)(r.UI.squash(W),r.UI.contramapState((e=>({body:e}))));var q;!function(e){let t;!function(e){e.hidden="hidden",e.minimized="minimized",e.expanded="expanded"}(t=e.State||(e.State={})),e.TogglableExpandedPanel=r.UI.Union.make("kind",{[t.hidden]:r.UI.Node.empty,[t.expanded]:U}),e.TogglablePanel=r.UI.Union.make("kind",{[t.hidden]:r.UI.Node.empty,[t.minimized]:G,[t.expanded]:U})}(q||(q={}))},43743:(e,t,n)=>{n.d(t,{f:()=>r});var r,i=n(49708),o=n(77176),a=n(93508),s=n(85985),l=n(17343),c=n(36303),u=n(24209),d=n(83840),p=n(8473),h=n(15789),m=n(2768),f=n(50628),g=n(44586),y=n(28043),v=n(32952),b=n(66310),w=n(76974);!function(e){class t{static get observable(){return this._obs||(this._obs=i.R(document,"visibilitychange").pipe(o.U((()=>document.hidden)),a.O(document.hidden),s.h(Boolean),l.h(void 0),c.r(1)))}}function n(...e){return u.T(...e.map((e=>e.pipe(d.i())))).pipe(p.o((e=>e.hasValue)),h.D())}e.Hidden=t,e.mergeUntilAnyCompletes=n,e.createAnimationObservable=function(e,r,i){return n(function(e,t,n){return g.y.create((r=>{let i,o=self.requestAnimationFrame(a);function a(s){i||(i=s);const l=s-i;l<n?(r.next(Math.round(e+l/n*(t-e))),o=self.requestAnimationFrame(a)):(r.next(t),r.complete())}return()=>self.cancelAnimationFrame(o)})).pipe(y.x())}(e,r,i).pipe(m.R(t.observable)),t.observable.pipe(l.h(r),f.P()))},e.fadeOutState=function(e){const t=new v.xQ;return{state:e.pipe(b.w((e=>e?w.of("inProgress"):u.T(w.of("fadeOut"),t.pipe(l.h("end")))))),complete:()=>t.next(!0)}},e.rafSequence=function(e,t=!1){return g.y.create((n=>{let r;function i(){n.next(e.shift()),e.length&&(r=requestAnimationFrame(i))}return t?i():r=requestAnimationFrame(i),()=>cancelAnimationFrame(r)}))}}(r||(r={}))},10061:(e,t,n)=>{n.d(t,{c:()=>r});var r,i=n(18625),o=n(49708);!function(e){const t="scrollaction";e.emit=e=>self.dispatchEvent(new CustomEvent(t,{detail:e})),e.observe=i.P((()=>o.R(self,t)))}(r||(r={}))},85255:(e,t,n)=>{n.d(t,{P:()=>r});var r,i=n(27378),o=n(38983),a=n(66310),s=n(76974),l=n(85089),c=n(93508),u=n(77176),d=n(22232),p=n(5114),h=n(19962);!function(e){e.useSubscriptionTo=function(e){i.useEffect((()=>{const t=e.subscribe();return()=>t.unsubscribe()}),[e])};const t=new Set;function n(){return i.useMemo((()=>{const e=o.h.create(p.none);return{ref:e,onMount:t=>e.set(p.fromNullable(t))}}),[])}e.useSingleton=function(e){i.useEffect((()=>((0,d.kG)(!t.has(e),`Component ${e} can be mounted only once!`),t.add(e),()=>{t.delete(e)})),[])},e.useElWatcher=n,e.useRectWatcher=()=>{const{ref:e,onMount:t}=n();return{rect:e.pipe(a.w(p.fold((()=>s.of(p.none)),(e=>l.YC(e).pipe(c.O(h.Rect.fromEl(e)),u.U(p.some)))))),onMount:t}},e.useEffectOnDidMount=e=>{i.useEffect(e,[])},e.useEffectOnWillUnmount=e=>{i.useEffect((()=>e),[])},e.useMemoOnDidMount=e=>i.useMemo(e,[]),e.useAtomOf=function(t){const n=e.useMemoOnDidMount((()=>o.h.create(t)));return i.useEffect((()=>{n.set(t)}),[t,n]),n}}(r||(r={}))},95983:(e,t,n)=>{n.d(t,{vM:()=>p,aW:()=>r});var r,i=n(71249),o=n(57050),a=n(40327),s=n(22232),l=n(83078),c=n(5114),u=n(95195),d=n(89943);function p(e,t){return t.reduce(((t,n)=>{const r="function"==typeof e?e(n):n[e];let i=t.get(r);return i||(i=[],t.set(r,i)),i.push(n),t}),new Map)}!function(e){e.URI="ImmutableSortedMap",e.create=function(t,n,r){const i=Array.isArray(t)?new Map(t.map((e=>[n(e),e]))):t,o=e.orderKeys(i,r);return i.forEach((e=>(0,s.kG)(m(e),"init value should implement IEquals",(()=>JSON.stringify(e))))),new h(i,o,r,n)},e.empty=function(e,t){return new h(new Map,[],t,e)},e.diff=function(e,t){const n=e.clear();return e.reduce((({added:e,preserved:n,removed:r,changed:i},o,a)=>{const s=e.has(a)?e.remove(a):e;if(t.has(a)){const e=o.equals(l.unsafeGet(t.get(a)).value);return{removed:r,added:s,preserved:e?n.add(o):n,changed:e?i:i.add(o)}}return{removed:r.add(o),added:s,preserved:n,changed:i}}),{removed:n,added:t,preserved:n,changed:n})},e.unsafeGet=function(e,t){return l.unsafeGet(t.get(e)).value},e.unsafeGetBy=function(e){return t=>l.unsafeGet(t.get(e)).value},e.unsafeGetAt=function(e,t){return l.unsafeGet(t.getAt(e))},e.unsafeGetAtBy=function(e){return t=>l.unsafeGet(t.getAt(e))},e.nonEmpty=function(e){return e.size>0},e.lowerBound=function(e,t){let n=-1,r=e.size;for(;n+1!==r;){const i=n+(r-n>>1);t(l.unsafeGet(e.getAt(i)))?n=i:r=i}return n+1},e.createKeySorter=function(e,t){return(n,r)=>t(e(n),e(r))},e.orderKeys=function(t,n){return Array.from(t.keys()).sort(e.createKeySorter((e=>t.get(e)),n))},e.takeByKey=function(e,t,n){const r=(0,a.pipe)(n,i.findIndex((t=>t===e))),o=c.fromNullable(t.get(e));return(0,s.kG)(c.isNone(r)&&c.isNone(o)||c.isSome(r)&&c.isSome(o),"unsynced hash&order"),l.map2(((e,t)=>({index:e,value:t})))(r,o)},e.getFoldableWithIndex=function(){return{URI:e.URI,_E:void 0,reduce:(e,t,n)=>e.reduce(n,t),foldMap:e=>(t,n)=>t.reduce(((t,r)=>e.concat(t,n(r))),e.empty),reduceRight:(e,t,n)=>e.reduce(((e,t)=>n(t,e)),t),reduceWithIndex:(e,t,n)=>e.reduce(((e,t,r)=>n(r,e,t)),t),reduceRightWithIndex:(e,t,n)=>e.reduce(((e,t,r)=>n(r,t,e)),t),foldMapWithIndex:e=>(t,n)=>t.reduce(((t,r,i)=>e.concat(t,n(i,r))),e.empty)}}}(r||(r={}));class h{constructor(e,t,n,r){this._hash=e,this._order=t,this._comp=n,this._getKey=r,(0,s.kG)(e.size===t.length,"every hash entry should has order")}get(e){return r.takeByKey(e,this._hash,this._order)}getIndex(e){return c.fromPredicate((e=>e>-1))(this._order.indexOf(e))}getAt(e){return c.fromNullable(this._hash.get(this._order[e]))}has(e){return this._hash.has(e)}find(e,t=0){if(t<0)return c.none;for(let n=t;n<this._order.length;n++){const t=this._order[n],r=this._hash.get(t);if(e(r))return c.some({index:n,value:r})}return c.none}findFrom(e,t){return this.find(e,t)}findRight(e,t){if(t&&t>=this._order.length)return c.none;for(let n=t||this._order.length-1;n>=0;n--){const t=this._order[n],r=this._hash.get(t);if(e(r))return c.some({index:n,value:r})}return c.none}findRightFrom(e,t){return this.findRight(e,t)}map(e,t=this._comp){const n=new Map;this._order.forEach(((t,r)=>{const i=this._hash.get(t),o=e(i,t,r);(0,s.kG)(m(o),"transformed value should implement IEquals",(()=>JSON.stringify(o))),n.set(t,o)}));const i=r.orderKeys(n,t);return new h(n,i,t,this._getKey)}mapTo(e){return this._order.map(((t,n)=>e(this._hash.get(t),t,n)))}filter(e){const t=new Map,n=this._order.filter((n=>{const r=this._hash.get(n),i=e(r,n);return i&&t.set(n,r),i}));return new h(t,n,this._comp,this._getKey)}reduce(e,t){return this._order.reduce(((t,n,r)=>e(t,this._hash.get(n),n,r)),t)}modifyWith(e,t){const n=new Map(this._hash),i=this._order.slice(),o=(e,o)=>{const a=r.takeByKey(o,n,i),l=t(o,e,a);(0,s.kG)(m(l),"modified value should implement IEquals",(()=>JSON.stringify(l))),n.set(o,l),c.isNone(a)&&i.push(o)};return e instanceof Array?e.forEach((([e,t])=>o(t,e))):e.forEach(o),i.sort(r.createKeySorter((e=>n.get(e)),this._comp)),new h(n,i,this._comp,this._getKey)}patchWith(e,t){const n=new Map(this._hash),i=this._order.slice(),u=(e,u)=>{const d=r.takeByKey(u,n,i),p=t(u,e,d);(0,s.kG)(l.forAll(m)(p),"patched value should implement IEquals",(()=>JSON.stringify(p))),(0,a.pipe)(p,c.fold((()=>{(0,a.pipe)(d,c.fold(o.constVoid,(({index:e})=>{n.delete(u),i.splice(e,1)})))}),(e=>{n.set(u,e),c.isNone(d)&&i.push(u)})))};return e instanceof Array?e.forEach((([e,t])=>u(t,e))):e.forEach(u),i.sort(r.createKeySorter((e=>n.get(e)),this._comp)),new h(n,i,this._comp,this._getKey)}add(e){const t=new Map(this._hash),n=this._order.slice();return(Array.isArray(e)?e:[e]).forEach((e=>{const r=this._getKey(e);(0,s.kG)(m(e),"added value should implement IEquals",(()=>JSON.stringify(e))),t.set(r,e),-1===n.indexOf(r)&&n.push(r)})),n.sort(r.createKeySorter((e=>t.get(e)),this._comp)),new h(t,n,this._comp,this._getKey)}update(e,t){return(0,a.pipe)(this.get(e),c.fold((()=>u.left(`Provided key ${e} not found in the map`)),(({value:n})=>{const i=new Map(this._hash),o=this._order.slice();return i.set(e,t(n)),o.sort(r.createKeySorter((e=>i.get(e)),this._comp)),u.right(new h(i,o,this._comp,this._getKey))})))}remove(e){(0,s.kG)(this.has(e),`can not remove unknown key: ${e}`);const t=new Map(this._hash);t.delete(e);const n=d.omit(e,this._order);return new h(t,n,this._comp,this._getKey)}clear(){return new h(new Map,[],this._comp,this._getKey)}hashCode(){let e=7;return this._hash.forEach((t=>e+=t.hashCode())),e}equals(e){return this.hashCode()===e.hashCode()&&this.size===e.size&&this.values().every(((t,n)=>t.equals(l.unsafeGet(e.getAt(n)))))}values(){return this._order.map((e=>this._hash.get(e)))}keys(){return this._order}get size(){return this._order.length}}function m(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}},5920:(e,t,n)=>{n.d(t,{l:()=>r});var r,i=n(40327),o=n(5114);!function(e){e.update=function(e,t,n){return e.update(t,n)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,n){return(0,i.pipe)(e.get(t),o.filter((e=>n(e.value))))},e.find=function(e,t){return e.find(t)}}(r||(r={}))},21619:(e,t,n)=>{n.d(t,{m:()=>S});var r,i=n(71249),o=n(57050),a=n(40327),s=n(38983),l=n(5114),c=n(45701),u=n(89943),d=n(8125),p=n(55415),h=n(83078),m=n(66896),f=n(32952),g=n(98403),y=n(77176),v=n(67434),b=n(28043),w=n(41398),_=n(19751),C=n(17594),E=n(35416);!function(e){e.Mock=class{constructor(){this.alertHovered=new f.xQ,this.alertClicked=new f.xQ,this.highlightedAlert=s.h.create(l.none)}}}(r||(r={}));class S{constructor(e,t,n,r,s){this._ded=e,this._state=t,this._markAlertMapper=n,this._alertsReader=r,this._getActiveItemWithAlert=s,this._focusedItem=this._state.view(E.nL.getActiveItem(this._getActiveItemWithAlert)),this._focusedLens=this._state.view("currentLens"),this._marksToAlertTupleArray=e=>(0,a.pipe)(e,l.map((0,o.flow)(i.filterMap((e=>this._markAlertMapper.getAlertByMark(e))),i.sort(c.contramap((({alert:{lensType:e,lensPriority:t}})=>({type:e,priority:t})))(m.R.ord))))),this.alertHovered=g.b2.inRaf(this._ded.hoveredMarks).pipe(y.U(this._marksToAlertTupleArray),y.U(l.map(i.map((({alert:e})=>e)))),v.R(((e,t)=>(0,a.pipe)(t,l.chain((t=>(0,a.pipe)(e,l.filter((e=>-1!==t.indexOf(e))),l.fold((()=>l.fromNullable(t[0])),l.some)))))),l.none),y.U(l.filter((e=>this._alertsReader.isInteractable(e.id)&&!C.$.isPlagiarism(e)))),b.x()),this.alertClicked=g.b2.inRaf(this._ded.activeMarks).pipe(y.U(this._marksToAlertTupleArray),w.M(this._focusedItem,this._focusedLens),v.R(((e,[t,n,r])=>{const i=t=>(0,a.pipe)(e,l.exists((e=>e.alert.id===t.alert.id))),o=e=>(0,a.pipe)(n,l.exists((t=>t.activeAlert.id===e.alert.id))),s=e=>r.meta.filter(e.alert);return(0,a.pipe)(t,l.chain((e=>(0,a.pipe)(e,u.findByPredicateList([(0,d.W9)(i,o),o,(0,d.W9)(i,s),s,i]),l.fold((()=>l.fromNullable(e[0])),l.some),l.map((e=>p.update(e,{highlightIndex:e.alert.hasNestedHighlights?0:e.highlightIndex})))))))}),h.empty()),_.d({refCount:!0,bufferSize:1}))}}},54216:(e,t,n)=>{n.d(t,{t:()=>c});var r=n(57050),i=n(8125),o=n(40018),a=n(66896);const s=(0,i.W9)(o.bZ.isRegistered,(0,r.not)(o.bZ.isMuted)),l=e=>t=>(0,i.W9)(s,e(t));var c;!function(e){e.create=function(e,t){const n=l((t=>e[t]));return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:(e,n)=>(0,i.W9)(l((e=>t[e]))(e),(e=>t=>e||o.bZ.isPriority(t))(n)),alertVisibleInSidebar:n,getLensesFilter:t=>e[t],alertCanBeDisplayed:s,alertIsBulkAcceptable:e=>(0,i.W9)(n(e),o.bZ.isBulkAcceptable)}};const t=e=>t=>e===t.lensId,n=e=>(0,i.W9)(t(a.R.OutcomeId.fromPriorityOutcomeId(e)),o.bZ.isPriority);e.defaultLensFilters={[a.R.SpecialId.Clarity]:t(a.R.SpecialId.Clarity),[a.R.SpecialId.Correctness]:t(a.R.SpecialId.Correctness),[a.R.SpecialId.Delivery]:t(a.R.SpecialId.Delivery),[a.R.SpecialId.Engagement]:t(a.R.SpecialId.Engagement),[a.R.SpecialId.Vox]:t(a.R.SpecialId.Vox),[a.R.SpecialId.ClarityPriority]:n(a.R.SpecialId.ClarityPriority),[a.R.SpecialId.CorrectnessPriority]:n(a.R.SpecialId.CorrectnessPriority),[a.R.SpecialId.DeliveryPriority]:n(a.R.SpecialId.DeliveryPriority),[a.R.SpecialId.EngagementPriority]:n(a.R.SpecialId.EngagementPriority),[a.R.SpecialId.VoxPriority]:n(a.R.SpecialId.VoxPriority),[a.R.SpecialId.Plagiarism]:t(a.R.SpecialId.Plagiarism),[a.R.SpecialId.DraftAI]:r.constFalse,[a.R.SpecialId.Premium]:t(a.R.SpecialId.Premium),[a.R.SpecialId.AllAlerts]:o.bZ.belongsToAllAlerts,[a.R.SpecialId.Closed]:r.constFalse,[a.R.SpecialId.Priority]:o.bZ.belongsToPriorityLens,[a.R.SpecialId.PredictionTakeaways]:o.bZ.belongsToPredictionTakeaways,[a.R.SpecialId.PredictionEmogenie]:o.bZ.belongsToPredictionEmogenie,[a.R.SpecialId.RealTimeProofit]:t(a.R.SpecialId.RealTimeProofit)},e.defaultTextFilters=Object.assign(Object.assign({},e.defaultLensFilters),{[a.R.SpecialId.Closed]:o.bZ.isCriticalImpact,[a.R.SpecialId.Premium]:(0,i.Kg)(e.defaultLensFilters[a.R.SpecialId.Premium],o.bZ.belongsToAllAlerts)}),e.priorityTextFilters=e=>({[a.R.SpecialId.Premium]:(0,i.W9)(e[a.R.SpecialId.Premium],o.bZ.isPriority)})}(c||(c={}))},59368:(e,t,n)=>{n.d(t,{Oe:()=>r,rG:()=>i,Bd:()=>o});var r,i,o,a=n(73975),s=n(40018);!function(e){e.eq=(0,a.contramap)((e=>e.alert))(s.h$.ordId),e.isPending=e=>null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate),e.isOneOf=(...e)=>t=>e.some((e=>e===t.state.current.visualState)),e.notAnyOf=(...e)=>t=>e.every((e=>e!==t.state.current.visualState)),e.canBeChanged=t=>n=>t&&o.applied===n.state.current.visualState?t===o.disposed:s.bZ.State.isBulkApplied(n.alert.state)||e.notAnyOf(o.applied,o.disposed)(n),e.isOrWillBe=e=>t=>null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e,e.willBe=e=>t=>null!==t.state.scheduled&&t.state.scheduled.visualState===e}(r||(r={})),function(e){e.updateRanges=function(e,t){return Object.assign(Object.assign({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return Object.assign(Object.assign({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return Object.assign(Object.assign({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(i||(i={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(o||(o={})),function(e){e.isApplied=function(t){return t===e.applied}}(o||(o={}))},16746:(e,t,n)=>{n.d(t,{v:()=>C});var r=n(71249),i=n(57050),o=n(40327),a=n(49524),s=n(25656),l=n(24645),c=n(51996),u=n(95195),d=n(5114),p=n(22232),h=n(83078),m=n(89943),f=n(68983),g=n(8125),y=n(81531),v=n(40018),b=n(17594),w=n(36156),_=n(59368);class C{constructor(e,t,n,r,s,l,c,p){this._alert=e,this._alertsService=t,this._alertRangeService=n,this._changeMarksInDEd=r,this._create=s,this._update=l,this._remove=c,this._onTransitionEnd=p,this._currentState=_.rG.from(_.Bd.initial),this._scheduledState=_.rG.from(_.Bd.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=e=>{if(!e.to.updateRanges||!(0,o.pipe)(this._alertRangeService.hasNewRangesForUpdate(this.id),u.fold(i.constFalse,a.y)))return d.none;const t=(0,o.pipe)(this._alertRangeService.applyPendingRangesUpdate(this.id),u.mapLeft((e=>E("markAlert").error("cannot apply pending ranges",e))),d.fromEither,d.chain(a.y),d.filter((({addedHighlightedRanges:e,removedHighlightedRanges:t})=>e.length>0||t.length>0)));return(0,o.pipe)(t,d.map((e=>({commit:()=>e.removedHighlightedRanges[1](),ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}}))))},this._dispose=()=>{this._marksMap.clear(),u.either.map(this._alertRef,(e=>e.dispose()))},this._disposeIfEmpty=()=>{0===this._marksMap.size&&this._dispose()},u.either.mapLeft(this._alertRef,(e=>E("markAlert").warn("can not take alertRef",e)))}get state(){return{current:this._currentState,scheduled:this._scheduledState}}get alert(){return this._alert()}scheduleApply(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),(0,p.kG)(e!==_.Bd.initial,`Cannot schedule change ${this.id} from ${this._currentState.visualState} to initial state`),this._currentState.visualState!==_.Bd.initial||e!==_.Bd.disposed&&!_.Bd.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=_.rG.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=_.rG.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=_.rG.from(_.Bd.disposed),this._dispose()),this}scheduleUpdate(){this._throwWhenInFinaleState(),this._scheduledState=_.rG.updateRanges(this._scheduledState||this._currentState,!0)}scheduleForceUpdate(){this._throwWhenInFinaleState(),this._scheduledState=_.rG.forceUpdate(this._scheduledState||this._currentState,!0)}apply(){if(!_.Oe.isPending(this))return;this._throwWhenInFinaleState();const e=this._getTransition();(0,o.pipe)(this.change(),d.filter((e=>e.rawMark.length>0)),d.map((t=>{this._handleBasicEvent(t.rawMark),t.commit(),this._onTransitionEnd(e,this)})))}applyWith(e){const t=[this,...e];this._handleMultipleHighlights(t,(e=>e.change()))}markByIndex(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return d.none}}get mark(){return this.markByIndex(0)}_iterateOverMarkAlerts(e,t){e.forEach((({change:e,ma:n})=>{e.rawMark.forEach((e=>{"create"===e.action?n._setMarkAndCheckFinaleState(e.id,(0,o.pipe)(t.created.get(e.id)||u.left(new Error("Cannot get unknown mark")),d.fromEither)):"remove"===e.action&&n._removeMark(e.id)})),e.commit(),n._disposeIfEmpty()}))}_handleMultipleHighlights(e,t){const n=e.map((e=>[e,t(e)])).filter((([e,t])=>(0,o.pipe)(t,d.filter((t=>0!==t.rawMark.length||(E("markAlert").warn("rawAction must have rawMark array",{rawAction:t.action,state:Object.assign(Object.assign({},e.toJSON()),{alert:void 0})}),!1))),d.isSome))).map((([e,t])=>({ma:e,change:h.unsafeGet(t)})));if(0===n.length)return;const r=m.flatMap(n.map((e=>e.change.rawMark))),i=this._changeMarksInDEd(r);this._iterateOverMarkAlerts(n,i)}get _mark(){return this._markbyIndex(0)}_markbyIndex(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:d.none}_setMarkAndCheckFinaleState(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)}_setMark(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)}_removeMark(e){this._marksMap.delete(e)}change(){(0,p.kG)(_.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id})));const e=this._commitTransition();return e.from.visualState!==e.to.visualState||e.to.forceUpdate||e.to.updateRanges?d.some(this._getRawActionForApply(e)):d.none}_handleBasicEvent(e){const t=this._changeMarksInDEd(e);e.forEach((e=>{if(e.action===l.v.Change.ActionType.remove)this._removeMark(e.id);else{const n=(0,o.pipe)(d.fromNullable(this._marksMap.get(e.id)),d.chain(a.y),d.alt((()=>(0,o.pipe)((e.action===l.v.Change.ActionType.create?t.created.get(e.id):t.updated.get(e.id))||u.left(new Error("Cannot get unknown mark")),d.fromEither))));this._setMark(e.id,n)}})),this._disposeIfEmpty()}_getTransition(){return(0,p.kG)(_.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id}))),{from:this._currentState,to:this._scheduledState}}_commitTransition(){const e=this._getTransition();return this._currentState=Object.assign(Object.assign({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e}_getRawActionForApply(e){switch(e.from.visualState){case _.Bd.initial:return(0,o.pipe)(this._tryToUpdateRangesInAlert(e),d.map((e=>e.commit()))),{action:"create",commit:s.Z,rawMark:this._getHighlightRanges((t=>this._create((()=>t),e)(t.meta.id)))};default:switch(e.to.visualState){case _.Bd.disposed:const t=_.Bd.isApplied(e.from.visualState)||v.bZ.State.isRemoved(this.alert.state)&&b.$.isApplicableAlert(this.alert)&&this._getAppliedRanges(i.constVoid).length>0?this._getAppliedRanges(((e,t)=>({id:t().meta.id,range:t}))):this._getHighlightRanges((e=>({id:e.meta.id,range:()=>e})));return{action:"remove",commit:(0,o.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:e})=>e)),d.getOrElse((()=>i.constVoid))),rawMark:t.map((e=>this._remove(e.range)(e.id)))};case _.Bd.applied:const n=this._getHighlightRanges((e=>this._remove((()=>e))(e.meta.id)));return{action:"replace",commit:(0,o.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:e})=>e)),d.getOrElse((()=>i.constVoid))),rawMark:[...n,...this._getAppliedRanges(((t,n)=>this._create(n,e)(n().meta.id)))]};default:const r=()=>v.bZ.State.isBulkApplied(this._alert("_getRawActionForApply").state)?this._getAppliedRanges(((e,t)=>t())):this._getHighlightRanges(a.y);return(0,o.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:t,ranges:n})=>this._getReplaceAction(e,r(),n.removed,t))),d.getOrElse((()=>({action:"update",commit:s.Z,rawMark:r().map((t=>this._update((()=>t),e)(t.meta.id)))}))))}}}_getReplaceAction(e,t,n,r){return{action:"replace",commit:r,rawMark:[...n.map((e=>this._remove((()=>e))(e.meta.id))),...t.map((t=>this._create((()=>t),e)(t.meta.id)))]}}_getAppliedRanges(e){return(0,o.pipe)(this._alertRangeService.getAppliedRanges(this.id),u.fold((e=>(E("markAlert").error("cannot get applied ranges",{error:e.message,alert:b.$.snapshot(this._alert("_getAppliedRanges"))}),[])),r.mapWithIndex(e)))}_getHighlightRanges(e){return(0,o.pipe)(this._alertRangeService.getHighlightRanges(this.id),u.fold((t=>(E("markAlert").warn("cannot get highlight ranges via range service",{error:t,alert:this._alert("_getHighlightRanges")}),(0,o.pipe)(this._alert("_getHighlightRanges_Fallback").getHighlightRanges(),r.map(e)))),r.map(e)))}_throwWhenNotAllowedState(e){const t=this._alert("_throwWhenNotAllowedState");(0,p.kG)(!(!b.$.isDefault(t)&&!b.$.isSuper(t))||(!e||v.bZ.State.isBulkApplied(t.state)||!_.Bd.isApplied(e)),`Applied state isn't allowed for ${this.id}`)}_throwWhenInFinaleState(e){(0,p.kG)(e&&_.Oe.isOneOf(_.Bd.applied)(this)?e===_.Bd.disposed||v.bZ.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):_.Oe.notAnyOf(_.Bd.disposed)(this),`'${this._currentState.visualState}' MarkAlert '${this.id}' cannot be changed${e?` to '${e}' `:""}`)}toJSON(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:(0,o.pipe)(this._mark,d.map((e=>e.id)),d.toUndefined),range:(0,o.pipe)(this._mark,d.map((e=>e.range)),d.toUndefined)},alert:this._alert("toJSON")}}equals(e){return _.Oe.eq.equals(this,e)}hashCode(){return(0,w.AC)(this.id)}}!function(e){e.compareTo=e=>{const t=(0,f.W)(c.SV.distanceFrom)(e);return(e,n)=>(0,g.qu)(Math.min(...e.alert.getHighlightRanges().map(t)),Math.min(...n.alert.getHighlightRanges().map(t)))}}(C||(C={}));const E=(0,g.HP)(y.Monitoring.Logging.getLogger)},25980:(e,t,n)=>{n.d(t,{v:()=>r});var r,i=n(57050),o=n(59443),a=n(95574),s=n(5114),l=n(81531),c=n(18625),u=n(76974),d=n(60797),p=n(66310),h=n(28043),m=n(17343),f=n(98403),g=n(91224),y=n(40151),v=n(38194),b=n(77176),w=n(24209),_=n(74238),C=n(4890);!function(e){let t;!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(t=e.Animation||(e.Animation={})),e.alignMarkToItem=function(e,n){return({animation:r,suggestedPosition:b})=>({id:w,renderOptions:{features:E},activeHighlightIndex:S,activeAlert:I})=>c.P((()=>u.of(e.getMarkAlertPosition({alert:I,highlightIndex:S})))).pipe(d.oA,p.w((e=>{const t=a.unsafeGet(n.getCardSuggestedPositionInViewport(w,E.has(C.j.Features.showLabel),s.none,"cardContentTop"));return n.setCardPosition(w,E.has(C.j.Features.showLabel),!1,_.r.FromWindowTop.ISO.modify(_.L.concatC(-t.contentOffset))(e)).pipe(h.x(),m.h((0,i.pipe)(b,s.filter((e=>n.willFitViewport(w,_.r.FromWindowTop.ISO.modify(_.L.concatC(-t.contentOffset))(e)))),s.getOrElse((()=>_.r.FromWindowTop.ISO.modify(_.L.concatC(t.contentOffset))(t.top))))))})),p.w((n=>e.moveAlertHighlightInViewport({alert:I,highlightIndex:S},n,r===t.ANIMATE_ALL?o.uq.fake:o.uq.none))),m.h(f.PU),g.K((e=>(l.Monitoring.Logging.root.getLogger("AlignmentViewModel").error("Cannot align mark to card",e),y.E))),v.B())},e.alignItemToMark=function(t,n){return({animation:r,fitCardIntoViewport:i})=>({id:d,renderOptions:{features:h},activeAlert:E,activeHighlightIndex:S})=>c.P((()=>u.of(t.getMarkAlertPosition({alert:E,highlightIndex:S})))).pipe(p.w(s.fold((()=>y.E),(e=>u.of(e)))),b.U((e=>({mark:e,card:a.unsafeGet(n.getCardSuggestedPositionInViewport(d,h.has(C.j.Features.showLabel),s.some(e),"cardContentTop"))}))),p.w((({card:a,mark:s})=>w.T(n.setCardPosition(d,h.has(C.j.Features.showLabel),r===e.Animation.ANIMATE_ALL,_.r.FromWindowTop.ISO.modify(_.L.concatC(-a.contentOffset))(s)),f.Ft(t.moveAlertHighlightInViewport({alert:E,highlightIndex:S},_.r.FromWindowTop.ISO.modify(_.L.concatC(a.contentOffset))(a.top),r===e.Animation.ANIMATE_ALL?o.uq.initial:o.uq.none))(i)))),m.h(f.PU),g.K((e=>(l.Monitoring.Logging.root.getLogger("AlignmentViewModel").error("Cannot align card to mark",e),y.E))),v.B())}}(r||(r={}))},58562:(e,t,n)=>{n.d(t,{eZ:()=>q,UC:()=>H});var r=n(57050),i=n(40327),o=n(49524),a=n(12447),s=n(95574),l=n(22232),c=n(83078),u=n(8125),d=n(55415),p=n(5114),h=n(95195),m=n(40018),f=n(66896),g=n(60797),y=n(98403),v=n(85089),b=n(76974),w=n(77176),_=n(17343),C=n(93508),E=n(28043),S=n(40151),I=n(66310),k=n(598),A=n(83401),x=n(41398),T=n(55721),O=n(95093),R=n(24209),N=n(16118),L=n(85985),P=n(25980),M=n(15646),D=n(91402),F=n(35416),B=n(74238),U=n(14990),$=n(99116);var j,W,G;!function(e){e.CARD_CONTENT_OFFSET_REM=3.4,e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=e.CARD_CONTENT_OFFSET_REM+1,e.contentOffsetGetter=(t=e.CARD_CONTENT_OFFSET_REM,n=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM)=>(e,r)=>Math.round((e?n:t)*r)}(j||(j={})),function(e){e.cardPositionGetter=(e,t)=>(n,o)=>{const a=new U.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return s.tryCatchError((()=>(0,i.pipe)(e.view(F.nL.getLens).get(),p.chain((({items:e})=>(0,i.pipe)(e.get(n),p.map((({value:e})=>(0,i.pipe)(o,p.fold((()=>(0,r.flow)(B.L.AbsTop.ISO.wrap,a.converters.absTopToViewportTop,a.converters.viewportToWindow)(e.positionState.absTop)),r.identity))))))),c.unsafeGet)))},e.cardPositionInViewportGetter=(e,t)=>(n,o)=>{const a=new U.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(F.nL.getLens).get(),h.fromOption((()=>new Error("Current lens is not WithItemsLensState"))),h.chain((({items:e,id:t})=>(0,i.pipe)(e.get(n),h.fromOption((()=>new Error(`The item with id: ${n} does not exist in lens ${t}`))),h.chain((({value:t})=>{return(0,i.pipe)(o,p.map(a.converters.windowToViewport),p.alt((()=>p.some((0,r.flow)(B.L.AbsTop.ISO.wrap,a.converters.absTopToViewportTop)(t.positionState.absTop)))),p.map((s=t,l=((e,t)=>(0,i.pipe)(t.get(e),p.map((({index:e})=>({before:(0,i.pipe)(t.getAt(e-1),p.map((e=>e.positionState.height)),p.getOrElse((()=>0))),after:(0,i.pipe)(t.getAt(e+1),p.map((e=>e.positionState.height)),p.getOrElse((()=>0)))}))),p.getOrElse((()=>({before:0,after:0})))))(n,e),c=a.viewport,e=>{const t=(0,$.v_)({cardTop:e,cardHeight:s.positionState.height,viewportHeight:c.height,padding:l});return B.L.FromViewportTop.ISO.modify(B.L.concatC(-t))(e)})),p.map(a.converters.viewportToWindow),h.fromOption((()=>new Error("Cannot get card position in viewport"))));var s,l,c}))))))}}(W||(W={})),function(e){const t=(e,t,n,r)=>{const o=r.viewport.get(),a=r.scrollTop.get(),c=B.L.converters(a,B.r.FromWindowTop.ISO.unwrap(o.top),r.paddingTop.get());return s.tryCatchError((()=>(0,i.pipe)(F.nL.getLens(n),p.chain((t=>t.items.get(e))),p.map((e=>B.L.AbsTop.ISO.wrap(e.value.positionState.absTop))),p.map((e=>c.absTopToViewportTop(e))),p.fold((()=>{throw new l.ej("Cannot get offset for unknown card")}),(e=>{const n=c.windowToViewport(t);return B.L.FromViewportTop.ISO.unwrap(e)-B.L.FromViewportTop.ISO.unwrap(n)})))))};e.moveCardToPositionSyncGetter=(e,n)=>r=>(0,i.pipe)(t(r.id,r.position,e.get(),n),h.chain((e=>n.moveCardsBy(e,"moveCardToPositionAnimated")))),e.moveCardToPositionAnimatedGetter=(e,n)=>r=>(0,i.pipe)(t(r.id,r.position,e.get(),n),h.fold((e=>D._(e)),(e=>n.moveCardsByAnimated(e,"moveCardToPositionAnimated"))))}(G||(G={}));var q,H,z,V,Y=n(71841);!function(e){e.cardSuggestedPositionGetter=(e,t)=>(n,r,o,a)=>{const s="cardTop"===a?0:t(r);return(0,i.pipe)(e(n,(0,i.pipe)(o,p.map(B.r.FromWindowTop.ISO.modify(B.L.concatC(-s))))),h.map((e=>({top:e,contentOffset:s}))))},e.getSuperScrollMapper=(t,n,r)=>{const o=G.moveCardToPositionAnimatedGetter(t,n),a=G.moveCardToPositionSyncGetter(t,n),l=j.contentOffsetGetter();return{setCardPosition:(e,t,n,i)=>{const c={top:i,contentOffset:l(t,r.get())};return(n?o({id:e,position:i}):b.of(a({id:e,position:i})).pipe(w.U(s.unsafeGet))).pipe(_.h(c),C.O(c),E.x())},getCardSuggestedPosition:e.cardSuggestedPositionGetter(W.cardPositionGetter(t,n),(e=>l(e,r.get()))),getCardSuggestedPositionInViewport:e.cardSuggestedPositionGetter(W.cardPositionInViewportGetter(t,n),(e=>l(e,r.get()))),willFitViewport:(e,r)=>(0,i.pipe)(t.get(),(t=>!!F.nL.hasItems(t)&&((e,t)=>(n,r)=>{const o=new U.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.currentLens.items,(e=>(0,i.pipe)(e.get(n),p.map((({value:e})=>0===(0,$.v_)({cardTop:o.converters.windowToViewport(r),cardHeight:e.positionState.height,viewportHeight:o.viewport.height,padding:{before:0,after:0}}))))),c.unsafeGet)})(t,n)(e,r))),isAboveViewportTop:(u=n,e=>B.r.FromWindowTop.ISO.modify(B.L.concatC(u.scrollTop.get()+u.paddingTop.get()))(e)<u.viewport.get().top)};var u}}(q||(q={})),function(e){e.getMapper=(e,t,n)=>({moveAlertHighlightInViewport:(t,n,r)=>e.ensureAlertHighlightInViewport(t,B.r.FromWindowTop.ISO.unwrap(n),r),getMarkAlertPosition:r=>(0,i.pipe)(e.getMarkByAlert(r),p.chain((o=>(0,i.pipe)(o.getRect(),h.map(a.n.relativeToViewport),h.map((e=>p.some(e.top))),h.getOrElse((()=>(n.debug("Cached alert is missing, falling back to flush"),(n=>(t.flushChanges(),(0,i.pipe)(e.getMarkByAlert(n),p.chain((e=>(0,i.pipe)(p.fromEither((0,i.pipe)(e.getRect(),h.map(a.n.relativeToViewport),h.map((e=>e.top))))))))))(r)))),p.map(B.r.FromWindowTop.ISO.wrap)))))})}(H||(H={}));!function(e){e.Mock=class{constructor(){this.alignCardToMark=()=>S.E,this.alignCardTo=()=>S.E,this.alignMarkTo=()=>S.E,this.alignMarkToCard=()=>S.E}}}(z||(z={})),function(e){let t,n;!function(e){let t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={})),e.getRelativePosition=(e,n,r)=>n.top+r>e.bottom?t.below:e.top>n.bottom?t.above:t.intersects}(t||(t={})),e.createAlignmentOnTypingEffect=(e,t,n,r,o)=>{const a=e.view(F.nL.mapper((({currentLens:e})=>(0,i.pipe)(p.some(e),p.filter((0,$.Bk)(o)))))).pipe(w.U(p.chain(r),p.filter(o.isValidToAlign)),g.cp((e=>n.pipe(I.w(y.b2.rafScheduler),I.w((()=>t.alignCardToMark(e,P.v.Animation.NO_ANIMATION,!1)))))));return{id:"alignmentOnTyping",when:f.R.isWithAlertsId,what:F.nL.Effect.Applicator.create(a.pipe(k.c(A.C)))}},e.createAlignOnDisjointedAreasEffect=(e,n,a,s)=>{const u=e.view((0,r.flow)(F.nL.getLens,p.filter((e=>p.isNone(F.In.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0)))),d=u.pipe(w.U(p.isSome),E.x(),I.w(y.Ft(a.changes.pipe(C.O(y.PU),I.w(y.b2.rafScheduler),w.U((()=>p.some((e=>{const t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}})(a)))),w.U(p.filter((e=>e.top-e.bottom!=0)))))),x.M(u.pipe(w.U(p.map((({items:e})=>e)))),c.map2(((r,o)=>(0,i.pipe)(Y.YA(e,s),p.map((e=>({top:B.r.FromWindowTop.ISO.unwrap(e.top),bottom:B.r.FromWindowTop.ISO.unwrap(e.bottom)}))),p.chain((e=>(0,i.pipe)(((e,n,r)=>{const o=(0,i.pipe)(e.getAt(0),p.map((e=>e.positionState.height)),p.getOrElse((()=>0))),a=t.getRelativePosition(n,r,o);switch(a){case t.RelativePosition.above:return(0,i.pipe)(e.getAt(0),p.map((e=>({card:e,top:n.top}))));case t.RelativePosition.below:return(0,i.pipe)(e.getAt(0),p.map((e=>({card:e,top:n.bottom-e.positionState.height}))));case t.RelativePosition.intersects:return p.none;default:return(0,l.vE)(a)}})(o,r,e),p.map((({card:e,top:t})=>n.alignCardTo(e,B.r.FromWindowTop.ISO.wrap(t),P.v.Animation.NO_ANIMATION)))))),p.getOrElse((()=>S.E)))))),I.w(p.fold((()=>S.E),o.y)));return{id:"alignOnDisjointedAreas",when:f.R.isWithAlertsId,what:F.nL.Effect.Applicator.create(d.pipe(k.c(A.C)))}},e.createAlignOnResizeSideEffect=(e,t,n,r,o,a=y.b2.rafScheduler)=>{const s=e.view(F.nL.mapper((({currentLens:e,alertSource:t})=>p.some({currentLens:e,alertSource:t})))).view(p.filter((({currentLens:e})=>(0,$.Bk)(o)(e)))).view(p.chain((({currentLens:e,alertSource:t})=>(0,i.pipe)(r(e),p.filter(o.isValidToAlign),p.map((n=>({item:n,source:t,lensId:e.id}))))))),l=v.Qr.pipe(T.p(100),O.T(n),x.M(s,((e,t)=>t)),I.w(a),I.w(p.fold((()=>S.E),(({item:e})=>t.alignCardToMark(e,P.v.Animation.NO_ANIMATION,!1)))));return{id:"alignOnResizeSideEffect",when:f.R.isWithAlertsId,what:F.nL.Effect.Applicator.create(l.pipe(k.c(A.C)))}},function(e){e.skip="skip"}(n=e.SkipAlertActionSource||(e.SkipAlertActionSource={})),e.createAlignmentSideEffect=(t,n,r=((e,t)=>t),i,o,a,s,l=y.b2.rafScheduler)=>{const c=e._createAlignmentSource(t,n,r,i,o,a,s,l);return{id:"alignmentSideEffect",when:f.R.isWithAlertsId,what:F.nL.Effect.Applicator.create(c.pipe(k.c(S.E)))}},e._createAlignmentSource=(e,t,a=((e,t)=>t),s,l,h,f,g=y.b2.rafScheduler)=>{const v=(0,u.Kg)(M.lY.isAlertMinicardButtonClick,M.lY.isSwitchToClosestByViewport,M.lY.isAlertCardShow,M.eI.isCardExpand,M.lY.isBulkAcceptItemShow,M.lY.isBulkHighlight),b=R.T(e.pipe(w.U(F.nL.mapper((({currentLens:e,alertSource:t})=>p.some({currentLens:e,alertSource:t})))),C.O(p.none),w.U(p.map((e=>e.currentLens.id))),N.G(),L.h((([e,t])=>(0,i.pipe)(c.map2(((e,t)=>e!==t))(e,t),p.exists(o.y)))),_.h(p.none)),e.pipe(w.U(F.nL.mapper((({currentLens:e,alertSource:t})=>p.some({currentLens:e,alertSource:t})))),L.h(p.exists((({currentLens:e})=>(0,$.Bk)(l)(e)))),w.U(p.chain((({currentLens:e,alertSource:t})=>(0,i.pipe)(s(e),p.filter(l.isValidToAlign),p.map((n=>({item:n,source:t,lensId:e.id}))))))))).pipe(E.x((0,r.flow)(c.map2(((e,t)=>e.lensId===t.lensId&&e.source===t.source&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),p.exists(o.y)))),k=(0,u.Kg)(M.lY.isBulkHighlight,M.lY.isAlertMinicardButtonClick),T=t.pipe(L.h(v),w.U(p.some),C.O(p.none),N.G(),L.h((0,r.flow)((0,r.tupled)(c.map2(((e,t)=>!M.lY.isAlertCardShow(t)||!M.lY.isAlertMinicardButtonClick(e)))),p.getOrElse(r.constFalse))),w.U((([,e])=>(0,i.pipe)(e,p.filter(k)))),C.O(p.none)).pipe(I.w((e=>b.pipe(L.h(p.exists((e=>e.source===m.l$.sidebar))),w.U(p.chain((t=>p.some(Object.assign(Object.assign({},t),{clickPoint:(0,i.pipe)(e,p.map(d.pick("clickPoint")))}))))))))),O=b.pipe(L.h(p.exists((e=>e.source!==m.l$.sidebar))),w.U((e=>(0,i.pipe)(e,p.chain((e=>p.some(Object.assign(Object.assign({},e),{clickPoint:p.none}))))))));return R.T(T,O).pipe(C.O(p.none),N.G(),w.U((([e,t])=>(0,i.pipe)(t,p.map((n=>({lensId:n.lensId,card:n.item,source:n.source,animate:(0,i.pipe)(e,c.forAll((({lensId:e})=>e===n.lensId))),clickPoint:(0,i.pipe)(t,p.chain(d.pick("clickPoint")),p.map((0,r.flow)(d.pick("y"),B.r.FromWindowTop.ISO.wrap)))})))))),I.w(p.fold((()=>S.E),g)),x.M(e),I.w((([{card:e,source:t,animate:r,clickPoint:o,lensId:s},l])=>(0,i.pipe)(a(e,t),(t=>F.nL.hasItems(l)&&l.currentLens.items.has(e.id)&&s===l.currentLens.id&&t!==n.skip?((e,t,n,r)=>{if(n===m.l$.text)return(0,i.pipe)(e,f({animation:t?P.v.Animation.ANIMATE_ALL:P.v.Animation.NO_ANIMATION,fitCardIntoViewport:!0}));if(n===F.h8.forceText)return(0,i.pipe)(e,f({animation:P.v.Animation.NO_ANIMATION,fitCardIntoViewport:!1}));{const o=n===m.l$.sidebar?t?P.v.Animation.ANIMATE_ALL:P.v.Animation.ANIMATE_MARK:P.v.Animation.NO_ANIMATION;return(0,i.pipe)(e,h({animation:o,suggestedPosition:r}))}})(e,r,t,o):A.C)))))}}(V||(V={}))},88643:(e,t,n)=>{n.d(t,{dv:()=>S,Xx:()=>ee});var r=n(11064),i=n(57050),o=n(40327),a=n(32952),s=n(38983),l=n(84966),c=n(22232),u=n(83078),d=n(8125),p=n(95574),h=n(39160),m=n(5114),f=n(71249),g=n(95195),y=n(81531),v=n(46680),b=n(40018),w=n(79227),_=n(66896),C=n(15646);class E{constructor(e,t=new URLSearchParams){this.base=e,this.params=t;const n=E._toString(e,t).length;(0,c.kG)(n<E.MAX_URL_LENGTH,"url exceeded length limit",String(n))}addParams(e){const t=Object.entries(e).reduce(((e,[t,n])=>(e.append(t,n),e)),(n=this.params,new URLSearchParams(n.toString())));var n;return new E(this.base,t)}toString(){return E._toString(this.base,this.params)}static _toString(e,t){const n=t.toString();return`${e}${n.length?`?${n}`:""}`}}E.MAX_URL_LENGTH=2083;var S,I,k=n(45586),A=n(95983),x=n(598),T=n(40151),O=n(76974),R=n(66310),N=n(91402),L=n(77176),P=n(44586),M=n(83401),D=n(77843),F=n(93508),B=n(95093),U=n(85985),$=n(36919),j=n(2834),W=n(67434),G=n(38194),q=n(49524),H=n(5920),z=n(25980),V=n(17594),Y=n(26027),X=n(20594),J=n(16892),Z=n(48521),K=n(35416),Q=n(93494);!function(e){e.changeAlertEffect=(e,t,n,r,i,a,s,l)=>({id:"changeAlertEffect",when:_.R.isWithAlertsId,what:K.nL.Effect.SwitchAlert.create(t.actionEvents.pipe(R.w((t=>{const d=e.get();if(!K.nL.hasCards(d))return N._(new c.ej("Cannot update state without cards"));switch(t.type){case C.lY.Type.alertMinicardButtonClick:return(0,o.pipe)(i.getRegistered(t.alertHighlight.alert.id),m.fold((()=>(l.error("somehow we got click on non registered alert",{alert:V.$.snapshot(t.alertHighlight.alert),alertInRepo:(0,o.pipe)(i.getById(t.alertHighlight.alert.id),m.map(V.$.fromModel),m.map(V.$.snapshot)),state:K.nL.snapshot(X.Mq.snapshot,r)(d)}),T.E)),(()=>O.of(t.alertHighlight))));case C.lY.Type.cardMatchesNavigationButtonClick:const e=t.transitionTo;switch(e.kind){case"anotherAlert":return(0,o.pipe)("right"===t.direction?n.nextAlert(e.card):(0,o.pipe)(n.prevAlert(e.card),u.orElse(n.anyRegisteredAlert(e.card))),m.fold((()=>T.E),(e=>O.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,o.pipe)(i.getRegistered(e.card.activeAlert.id),m.fold((()=>T.E),(()=>O.of({alert:e.card.activeAlert,highlightIndex:e.highlightIndex}))));default:return(0,c.vE)(e)}case C.lY.Type.switchToClosestByViewport:return((e,t,n,r)=>{const i=e=>(0,o.pipe)(t,m.map((t=>t.alignMarkToCard(e,z.v.Animation.ANIMATE_ALL,m.none).pipe(x.c(T.E)))),m.getOrElse((()=>T.E)));return(0,o.pipe)(r((t=>(t.lensId===e.id||_.R.isMainLens(e.id))&&!b.bZ.isPremium(t)),"middleOfTheViewport"),m.fold((()=>T.E),(t=>(0,o.pipe)(n(e),m.filter((e=>e.activeAlert.id===t.alert.id)),m.fold((()=>O.of(t)),i)))))})(d.currentLens,a,r,s);default:return T.E}})),L.U((e=>({alertHighlight:e,alertSource:b.l$.sidebar,options:{order:"lensOrder"}})))))}),e.createSendActiveAlertFeedbacksEffect=function(e,t,n,r,a){const s=e.view(K.nL.getActiveAlert(t)).pipe(L.U(m.filter((e=>m.isSome(r.getRegistered(e.id))&&!b.bZ.isInPremiumLens(e)))),R.w(m.fold((()=>T.E),(t=>P.y.create((()=>((0,o.pipe)(n.applyFeedback(t.id,{kind:l.PZ.LOOKED,subtype:w.J.getSubTypeFromLens(e.get().currentLens.id)},b.l$.sidebar),g.fold(a.handler("Failed to send LOOKED feedback").error,i.constVoid)),()=>{m.isSome(r.getRegistered(t.id))&&(0,o.pipe)(n.applyFeedback(t.id,{kind:l.PZ.CLOSED,subtype:w.J.getSubTypeFromLens(e.get().currentLens.id)},b.l$.sidebar),g.fold(a.handler("Failed to send CLOSED feedback: ").error,i.constVoid))})))))));return{id:"sendActiveAlertFeedbacksEffect",when:i.constTrue,what:K.nL.Effect.Applicator.create(s.pipe(x.c(M.C)))}}}(S||(S={}));class ee{constructor(e,t,n,r,s,p,h,f,_,E,S,x){this._ops=e,this._navigationEvents=t,this._cardFactory=n,this._alertsService=r,this._markOnboardingAsSeen=s,this._markMuteQuotedAdviceAsDismissed=p,this._sendToSignInExperiment=f,this._getActiveItemWithAlert=E,this._checksFeedCapabilities=S,this._lensState=x,this._log=y.Monitoring.Logging.getLogger("CardsViewModelImpl",v.LogLevel.DEBUG),this._subs=new k.w.Keeper,this._flushCompleteTransition=new a.xQ,this._flushPositionAnimation=new a.xQ,this.actionEvents=new a.xQ,this.completePositionAnimation=new a.xQ,this.changePosition=new a.xQ,this._transitionBuffer=D.F(100).pipe(F.O(0),B.T(this._flushCompleteTransition)),this._positionAnimationBuffer=D.F(100).pipe(F.O(0),B.T(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(U.h(C.eI.isStartTransitionTo),L.U((e=>t=>I.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,e.transition]]),t)))),this._completeTransitionStateChanges=this.actionEvents.pipe(U.h(C.eI.isCompleteTransitionTo),$.f(this._transitionBuffer),U.h(d.Dw),L.U((e=>t=>{const n=t.currentLens,r=this._applyCompleteVSChange(n,e.map((e=>[e.id,e.transitionId])));return this._log.isEnabled(v.LogLevel.TRACE)&&this._log.trace("batch transition complete",{events:e,diff:A.aW.diff(n.items,r.items)}),K.nL.Prism.getLens().set(r,t)}))),this._changePositionEffect=this.changePosition.pipe(L.U((({id:e,height:t})=>n=>{const r=(0,o.pipe)(H.l.update(n.currentLens.items,e,(e=>this._checksFeedCapabilities.changePosition(J.s.PositionState.changeHeight(e.positionState,t))(e))),g.fold((()=>n.currentLens.items),i.identity));return I.itemsLens.set(r,n)}))),this._transitionEndStateChanges=this.completePositionAnimation.pipe($.f(this._positionAnimationBuffer),U.h(d.Dw),L.U((e=>t=>{const n=t.currentLens.items,r=e.map((e=>[e,!1])).reduce(((e,[t,n])=>(0,o.pipe)(H.l.update(e,t,(e=>this._checksFeedCapabilities.changePosition(J.s.PositionState.changeAnimationInProgress(e.positionState,n))(e))),g.fold((()=>e),i.identity))),n);return I.itemsLens.set(r,t)}))),this._switchToNextChanges=this.actionEvents.pipe(U.h((e=>e.type===C.lY.Type.switchToNext)),L.U((()=>e=>e.patch({currentLens:(0,o.pipe)(K.nL.hasItems(e)?this._checksFeedCapabilities.findNextAlert(e.currentLens):m.none,m.fold((()=>(0,o.pipe)(K.nL.getActiveAlert(this._getActiveItemWithAlert)(e),m.fold((()=>{throw new c.ej("Can not switch from non-existing card")}),(t=>this._checksFeedCapabilities.release(t)(e.currentLens))))),(t=>K.nL.hasItems(e)?this._checksFeedCapabilities.selectItemByAlert(t)(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:b.l$.sidebar})))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(U.h(C.lY.isDismissMuteQuotedAdvice),j.b(this._markMuteQuotedAdviceAsDismissed),L.U((()=>e=>{const t=e.currentLens.items.filter((0,i.flow)(this._checksFeedCapabilities.hasActiveAlert,m.exists(V.$.isInQuotes))).keys().map((e=>[e,!1])).reduce(((e,[t])=>(0,o.pipe)(H.l.update(e,t,this._cardFactory.hideMuteQuotedAdvice),g.fold((()=>e),i.identity))),e.currentLens.items);return I.itemsLens.set(t,e)}))),this._changeUserInput=this.actionEvents.pipe(U.h(C.lY.isChangeUserInput),j.b((({alertId:e,userInput:t})=>{this._alertsService.changeGapValue(e,t)})),L.U((({cardId:e,userInput:t})=>n=>{const r=(0,o.pipe)(n.currentLens.items.update(e,this._checksFeedCapabilities.updateUserInput(t?m.some(t):m.none)),g.fold((()=>n.currentLens.items),i.identity));return I.itemsLens.set(r,n)}))),this._focusChecksFeedItem=this.actionEvents.pipe(U.h(C.lY.isMiniItemClick),L.U((e=>t=>t.patch({currentLens:(0,o.pipe)(t.currentLens.items.find((t=>t.id===e.id)),m.fold((()=>(this._log.error("Can not switch from non-existing item"),t.currentLens)),(()=>(0,i.unsafeCoerce)((0,o.pipe)(t.currentLens,this._checksFeedCapabilities.selectItemById(e.id)))))),switchOrder:"lensOrder",alertSource:b.l$.sidebar})))),this._collapseChecklistItem=this.actionEvents.pipe(U.h(C.lY.isChecklistItemCollapseButtonClick),L.U((()=>e=>e.patch({currentLens:K.nL.hasItems(e)?this._checksFeedCapabilities.unselectItem()(e.currentLens):e.currentLens,switchOrder:"lensOrder",alertSource:b.l$.sidebar})))),this._requestShortenItReplacements=this.actionEvents.pipe(U.h(C.lY.isRequestShortenItReplacementsAction),L.U((({alertId:e,itemId:t})=>(0,o.pipe)(this._alertsService.requestShortenItReplacements(e),g.map((e=>({newAlert:e,itemId:t})))))),L.U((e=>this._updateShortenItCard(e)))),this._smartPhrasesFeedback=this.actionEvents.pipe(U.h(C.lY.isSmartPhrasesFeedbackAction),L.U((({cardId:e,alertId:t,feedbackType:n})=>(0,o.pipe)(this._alertsService.changeSmartPhrasesFeedback(t,n),g.map((t=>({newAlert:t,cardId:e})))))),j.b((e=>this._sendSmartPhrasesUpdateStateAction(e))),L.U((e=>this._updateSmartPhrasesCard(e)))),this._smartPhrasesShowMoreIdeas=this.actionEvents.pipe(U.h(C.lY.isSmartPhrasesShowMoreIdeasAction),L.U((({cardId:e,alertId:t})=>(0,o.pipe)(this._alertsService.rotateSmartPhrasesReplacements(t),g.map((t=>({newAlert:t,cardId:e})))))),j.b((e=>this._sendSmartPhrasesUpdateStateAction(e))),L.U((e=>this._updateSmartPhrasesCard(e)))),this._smartPhrasesApply=this.actionEvents.pipe(U.h(C.lY.isSmartPhrasesApplyAction),L.U((({cardId:e,alertId:t,replacementIndex:n})=>(0,o.pipe)(this._alertsService.discardSmartPhrasesReplacement(t,n),g.map((t=>({newAlert:t,cardId:e})))))),j.b((e=>this._sendSmartPhrasesUpdateStateAction(e))),L.U((e=>this._updateSmartPhrasesCard(e)))),this._synfonyDrilldown=this.actionEvents.pipe(U.h(C.GM.isDrilldown),L.U((({cardId:e,wordIndex:t})=>n=>(0,o.pipe)(H.l.update(n.currentLens.items,e,(e=>{const n=e;return Y.X.changeSynfonySelection((0,o.pipe)(n.synfonySelection,m.getOrElse((()=>[])),(e=>m.some(e.concat([t])))))(n)})),g.fold((()=>n),(e=>K.nL.Prism.getLens().compose(Q.v.Prism.items).set(e,n))))))),this._synfonyBack=this.actionEvents.pipe(U.h(C.GM.isBack),L.U((({cardId:e})=>t=>(0,o.pipe)(H.l.update(t.currentLens.items,e,(e=>{const t=e;return Y.X.changeSynfonySelection((0,o.pipe)(t.synfonySelection,m.map((e=>e.slice(0,-1)))))(t)})),g.fold((()=>t),(e=>K.nL.Prism.getLens().compose(Q.v.Prism.items).set(e,t))))))),this._sendToSignIn=(0,o.pipe)(this._sendToSignInExperiment,m.map((e=>e(this.actionEvents)))),this._sendFeedback=(0,i.flow)(((e,t)=>this._alertsService.applyFeedback(e,Object.assign(Object.assign({},t),{subtype:w.J.getSubTypeFromLens(this._lensState.get().currentLens.id)}),b.l$.sidebar)),g.fold(this._log.handler("error calling alert service to send a feedback").error,i.constVoid)),this._showIgnoreForm=new a.xQ,this._showIgnoreFormEffect=(0,o.pipe)(this._showIgnoreForm,L.U((e=>t=>I.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"feedback_form",clockwise:!0,options:e.options}]]),t)))),this._showMutedAlertSuccessEffect=this.actionEvents.pipe(U.h(C.lY.isMuteCategoryAction),L.U((e=>t=>I.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"muted",clockwise:!0}]]),t)))),this._undoMutedAlertEffect=this.actionEvents.pipe(U.h(C.lY.isUndoMuteCategoryAction),L.U((e=>t=>I.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"focused",clockwise:!0}]]),t)))),this._handleAlertIgnore=(0,i.flow)(te((({alertId:e,drilldownSuggestionIds:t})=>()=>this._sendFeedback(e,{kind:l.PZ.IGNORE,drilldownSuggestionIds:t})),(e=>()=>this._showIgnoreForm.next(e))),(e=>this.actionEvents.pipe(U.h(C.lY.isAlertIgnoreAction)).subscribe((t=>e(t)())))),this.hovered=this.actionEvents.pipe(U.h(C.lY.isHoverAction),j.b((()=>this._ops.flush())),W.R(((e,t)=>"hover"===t.kind?m.some(t.id):(0,o.pipe)(e,m.filter((e=>e!==t.id)))),m.none),G.B()),this.flushTransitionTo=()=>this._flushCompleteTransition.next(),this.flushPositionAnimation=()=>this._flushPositionAnimation.next(),this._subs.push(this._handleAlertFeedbacks(),this._applyTakeawayFeedbacks(),this._sendTakeawayFeedbacks(),this._handleIgnoreFormSubmit(),this._handleAlertIgnore(_),this._handleAlertResolve(),this._applyAlerts(),this._dismissAlertsBatch(),this._newFeatureSeen(),this._handleSmartPhrasesDone(),this._handleSmartPhrasesApplyLast(),this._handleSentenceLevelBrandTonesFeedback(),this._handleDrilldown()),(0,o.pipe)(h,u.tap((({model:e,openSuggestionsManagement:t})=>this._subs.push(this._handleCommitMuteCategories(e),this._handleSuggestionsManagementClick(t)))))}_applyStartVSChange(e,t){return t.reduce(((e,[t,n])=>(0,o.pipe)(H.l.update(e,t,(e=>this._checksFeedCapabilities.transitionTo(n)(e))),g.fold((()=>e),i.identity))),e)}_applyCompleteVSChange(e,t){return t.reduce(((e,[t,n])=>(0,o.pipe)(e.items.get(t),m.map((({value:e})=>e)),m.fold((()=>e),(r=>Z.o.isAnimatable(r)&&"removed"===r.visualState.transition.type?this._checksFeedCapabilities.removeItemById(t)(e):(0,o.pipe)(H.l.update(e.items,t,(e=>Z.o.isAnimatable(e)&&e.visualState.transitionId===n?this._checksFeedCapabilities.completeTransition(n)(e):e)),g.fold((()=>e),(t=>Q.v.Prism.items.set(t,e)))))))),e)}_handleSentenceLevelBrandTonesFeedback(){return this.actionEvents.pipe(U.h(C.lY.isSentenceLevelBrandTonesFeedbackAction)).subscribe((({alertId:e,feedbackType:t})=>(this._alertsService.changeSentenceLevelBrandTonesFeedback(e,t),this._sendFeedback(e,{kind:t===b.id.accurate?l.fA.EMOTION_SENTENCE_LIKE:l.fA.EMOTION_SENTENCE_DISLIKE}))))}_sendSmartPhrasesUpdateStateAction(e){return(0,o.pipe)(e,g.map((({newAlert:e})=>e?this.actionEvents.next({type:C.lY.Type.smartPhrasesUpdateState,alertId:e.id,state:e.getAlertState()}):void 0)))}_updateSmartPhrasesCard(e){return t=>(0,o.pipe)(e,g.chain((({newAlert:e,cardId:t})=>p.tryCatchError((()=>((0,c.kG)(void 0!==e,"SmartPhrases alert should exist when updating SmartPhrases card."),{newAlert:e,cardId:t}))))),g.chainW((({newAlert:e,cardId:n})=>H.l.update(t.currentLens.items,n,this._checksFeedCapabilities.updateWithAlerts([e])))),g.fold((e=>(this._log.error("Error updating SmartPhrases card.",e),I.itemsLens.set(t.currentLens.items,t))),(e=>I.itemsLens.set(e,t))))}_updateShortenItCard(e){return t=>(0,o.pipe)(e,g.chainW((({newAlert:e,itemId:n})=>H.l.update(t.currentLens.items,n,this._checksFeedCapabilities.updateWithAlerts([e])))),g.fold((e=>(this._log.error("Error updating card with ShortenIt alert.",e),t)),(e=>K.nL.Prism.getLens().compose(Q.v.Prism.items).set(e,t))))}_handleAlertFeedbacks(){return this.actionEvents.pipe(U.h(C.lY.isAlertFeedbackAction)).subscribe((({alertId:e,feedbackType:t})=>this._sendFeedback(e,{kind:t})))}_applyTakeawayFeedbacks(){return this.actionEvents.pipe(U.h(C.lY.isTakeawayDetectionFeedbackOrDoneAction)).subscribe((({alertId:e,type:t})=>this._alertsService.changeTakeawayFeedback(e,t===C.lY.Type.takeawayCorrectlyDetected?b.TO.correctlyDetected:t===C.lY.Type.takeawayCorrectlyDetectedAndDone?b.TO.correctlyDetectedAndDone:t===C.lY.Type.takeawayIncorrectlyDetected?b.TO.incorrectlyDetected:(0,c.vE)(t))))}_sendTakeawayFeedbacks(){return this.actionEvents.pipe(U.h(C.lY.isTakeawayFeedbackAction)).subscribe((e=>{switch(e.type){case C.lY.Type.takeawayCorrectlyDetected:return this._sendFeedback(e.alertId,{kind:l.PZ.ACCEPTED,replacementText:e.takeawayText});case C.lY.Type.takeawayIncorrectlyDetected:return this._sendFeedback(e.alertId,{kind:l.PZ.IGNORE});case C.lY.Type.takeawayDismiss:return this._sendFeedback(e.alertId,{kind:l.PZ.IGNORE,pnameQualifier:e.isLikelyToBeRead?l.N_.likelyToBeReadTakeaway:l.N_.unlikelyToBeReadTakeaway});case C.lY.Type.takeawayResolve:return this._sendFeedback(e.alertId,{kind:l.PZ.ACKNOWLEDGED,pnameQualifier:e.isLikelyToBeRead?l.N_.likelyToBeReadTakeaway:l.N_.unlikelyToBeReadTakeaway});default:(0,c.vE)(e)}}))}_handleSmartPhrasesDone(){return this.actionEvents.pipe(U.h(C.lY.isSmartPhrasesDoneAction)).subscribe((({alertId:e})=>this._sendFeedback(e,{kind:l.PZ.HIDE})))}_handleSmartPhrasesApplyLast(){return this.actionEvents.pipe(U.h(C.lY.isSmartPhrasesUpdateStateAction),U.h((e=>0===e.state.replacementsLength))).subscribe((({alertId:e})=>this.actionEvents.next({type:C.lY.Type.smartPhrasesDone,alertId:e,source:"auto"})))}_handleAlertResolve(){return this.actionEvents.pipe(U.h(C.lY.isAlertResolveAction)).subscribe((({alertId:e})=>this._sendFeedback(e,{kind:l.PZ.ACKNOWLEDGED})))}_handleIgnoreFormSubmit(){return this.actionEvents.pipe(U.h(C.lY.isAlertIgnoreFeedbackFormSubmit)).subscribe((({alertId:e,reason:t})=>this._sendFeedback(e,{kind:l.PZ.IGNORE,reason:t})))}_handleCommitMuteCategories(e){return this.actionEvents.pipe(U.h(C.lY.isMutedAlertCardDismissedAction)).subscribe((t=>(0,o.pipe)(e.muteCategories([t.categoryId]),g.fold(this._log.handler("error calling categories model to commit muted category").error,i.constVoid))))}_handleSuggestionsManagementClick(e){return this.actionEvents.pipe(U.h(C.lY.isMutedAlertSuggestionsManagementClick)).subscribe(e)}_applyAlerts(){return this.actionEvents.pipe(U.h(C.lY.isAlertApplyAction)).subscribe((e=>(0,o.pipe)(this._alertsService.apply(e.alertId,{alternativeIndex:e.alternativeIndex,source:b.l$.sidebar,feedbackSubtype:w.J.getSubTypeFromLens(this._lensState.get().currentLens.id),drilldownSuggestionIds:e.drilldownSuggestionIds}),g.fold(this._log.handler("error calling alert service to apply an alert").error,i.constVoid))))}_handleDrilldown(){return this.actionEvents.pipe(U.h(C.GM.isDrilldown)).subscribe((e=>this._sendFeedback(e.alertId,{kind:l.P2.DRILLDOWN,drilldownSuggestionIds:e.drilldownSuggestionIds,alternativeIndex:e.alternativeId})))}_dismissAlertsBatch(){return this.actionEvents.pipe(U.h(C.FG.isDismissAlertsBatchAction)).subscribe((e=>(0,o.pipe)(this._alertsService.dismissBatch(e.alerts,w.J.getSubTypeFromLens(this._lensState.get().currentLens.id)),g.fold(this._log.handler("error calling alert service to dismiss alerts batch").error,i.constVoid))))}_newFeatureSeen(){return this.actionEvents.pipe(U.h(C.lY.isOnboardingClose)).subscribe((e=>(0,o.pipe)(this._markOnboardingAsSeen(e.value))))}getApplicatorEffects(){return(0,o.pipe)([[this._startTransitionStateChanges,"startTransitionStateChanges"],[this._completeTransitionStateChanges,"completeTransitionStateChanges"],[this._changePositionEffect,"changePositionEffect"],[this._transitionEndStateChanges,"transitionEndStateChanges"],[this._switchToNextChanges,"switchToNextChanges"],[this._dismissMuteQuotedAdvice,"dismissMuteQuotedAdvice"],[this._changeUserInput,"changeUserInput"],[this._smartPhrasesFeedback,"smartPhrasesFeedback"],[this._smartPhrasesShowMoreIdeas,"smartPhrasesShowMoreIdeas"],[this._smartPhrasesApply,"smartPhrasesApply"],[this._synfonyDrilldown,"synfonyDrilldown"],[this._synfonyBack,"synfonyBack"],[this._requestShortenItReplacements,"requestShortenItReplacements"],[this._focusChecksFeedItem,"focusChecksFeedItem"],[this._collapseChecklistItem,"collapseChecklistItem"],[this.actionEvents.pipe(U.h(C.lY.isNavigation),j.b(this._navigationEvents),x.c(T.E)),"navigationEvents"],[(0,o.pipe)(this._sendToSignIn,m.fold((()=>T.E),q.y)),"sendToSignIn"],[this._showIgnoreFormEffect,"showIgnoreFormEffect"],[this._showMutedAlertSuccessEffect,"showMutedAlertSuccessEffect"],[this._undoMutedAlertEffect,"undoMutedAlertEffect"]],f.map((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:_.R.isWithAlertsId,what:K.nL.Effect.Applicator.create(e)}))))}dispose(){this._subs.dispose()}}!function(e){e.itemsLens=K.nL.Prism.getLens().compose(Q.v.Prism.items);let t;e.Mock=class{constructor(){this.animate=s.h.create(!0),this.clockwise=s.h.create(!0),this.toggleAnimations=()=>this.animate.modify((e=>!e)),this.completePositionAnimation=new a.xQ,this.actionEvents=new a.xQ,this.flushTransitionTo=i.constVoid,this.sideEffect={id:"cardsViewModelMock",when:_.R.isWithAlertsId,what:K.nL.Effect.Applicator.create(T.E)},this.changePosition=new a.xQ,this.dispose=d.ZT}},function(e){e.sendToSignIn=(e,t)=>n=>n.pipe(U.h((e=>e.type===C.lY.Type.toSignIn)),L.U((()=>n=>(e.actions.openUrl(new E(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),n))))}(t=e.Experiments||(e.Experiments={}))}(I||(I={}));const te=(e,t)=>n=>i=>(0,o.pipe)(i.eligibleForDismissSurvey,r.of,h.p.chain((e=>(0,o.pipe)(n,r.UI((t=>t?m.none:m.some(e)))))),h.p.fold((()=>e(i)),(e=>t({id:i.id,options:e}))))},48052:(e,t,n)=>{n.d(t,{$:()=>X});var r,i=n(71249),o=n(57050),a=n(40327),s=n(36991),l=n(67394),c=n(5114),u=n(95195),d=n(26328),p=n(40018),h=n(22232),m=n(17771),f=n(64450),g=n(84966),y=n(95574),v=n(2291),b=n(98637);function w(e,{text:t,ops:n}){n.reduce(((t,n,r)=>l.JU.isInsertString(n)?(e.insertString(n.insert,n,r),t):l.JU.isInsertGap(n)?(e.insertGap("",n,r),t):l.JU.isInsert(n)?t:l.JU.isDelete(n)?(e.remove(t.slice(0,n.delete),n,r),t.slice(n.delete)):l.JU.isRetain(n)?(e.retain(t.slice(0,n.retain),n,r),t.slice(n.retain)):(0,h.vE)(n)),t)}function _(e){return 0===e.replace(/ /g,"").length}function C(e,t){(0,a.pipe)(e,i.last,c.fold((()=>{_(t.text)||e.push(t)}),(n=>{n.type===t.type?n.text+=t.text:e.push(t)})))}function E(e){return(0,a.pipe)(y.tryCatchError((()=>(0,a.pipe)(e,d.UI((t=>{const n=[];return w({insertString(t,{type:n}){if(n===l.JU.Type.Main)throw new F("Remove transform contains main insert",e)},insertGap(){throw new F("Remove transform contains gap insert",e)},retain(e,{type:t}){l.JU.isOptionalType(t)||C(n,{type:b.GP.Text,text:e})},remove(e,{type:t}){C(n,{type:t!==l.JU.Type.Main||_(e)?b.GP.Text:b.GP.Delete,text:e})}},t),n})),i.flatten))),u.chain((0,o.flow)(u.fromPredicate((e=>e.length>0),(()=>new F("Remove transform contains no data",e))),u.map((e=>({type:r.Type.Remove,remove:e}))))))}function S(e){return(0,a.pipe)(y.tryCatchError((()=>(0,a.pipe)(e,d.UI((t=>{const n=[];return w({insertString(t,{type:n}){if(n===l.JU.Type.Main)throw new F("Multi-remove transform contains main insert",e)},insertGap(){throw new F("Multi-remove transform contains gap insert",e)},retain(e,{type:t}){l.JU.isOptionalType(t)||C(n,{type:b.GP.Text,text:e})},remove(e,{type:t}){C(n,{type:t!==l.JU.Type.Main||_(e)?b.GP.Text:b.GP.Delete,text:e})}},t),n}))))),u.chain((0,o.flow)(u.fromPredicate((e=>e.length>=2&&e.every((e=>e.length>=2))),(()=>new F("Incomplete multi-remove",e))),u.map((e=>({type:r.Type.RemoveOr,removes:e}))))))}function I(e){return(0,a.pipe)(y.tryCatchError((()=>(0,a.pipe)(e,d.UI((t=>{const n=[];return w({insertString(e,{type:t}){C(n,{type:l.JU.isOptionalType(t)?b.GP.Text:b.GP.Insert,text:e})},insertGap(){throw new F("Insert transform contains gap insert",e)},retain(e,{type:t}){(!l.JU.isOptionalType(t)||n.length>0)&&C(n,{type:b.GP.Text,text:e})},remove(t,{type:n}){if(n===l.JU.Type.Main)throw new F("Insert transform contains main delete",e)}},t),n}))))),u.chain((0,o.flow)(d.nI,u.fromOption((()=>new F("Incomplete insert",e))),u.map((e=>({type:r.Type.Insert,inserts:e}))))))}function k(e){const{substitutions:t,longestSubstitution:n,inserts:o}=e.reduce(((e,[t,n])=>{const r=t.map((e=>e.text)).join("");return e.substitutions.push(r),e.inserts.push(n),r.length>e.longestSubstitution.length&&(e.longestSubstitution=r),e}),{substitutions:[],inserts:[],longestSubstitution:""}),s=(0,a.pipe)(t,d.UI((e=>n.split(e).join(""))));return(0,a.pipe)(i.zipWith(o,s,((e,t)=>(t&&e.push({type:b.GP.Text,text:t}),e))),d.nI,u.fromOption((()=>new Error("Substitution processing error"))),u.map((e=>({type:r.Type.Substitution,remove:[{type:b.GP.Delete,text:n}],inserts:e}))))}function A(e,t){return(0,a.pipe)(x(e),u.chain((n=>(0,a.pipe)(y.tryCatchError((()=>{(0,h.kG)(t.length>0,"Drilldown transform - empty drilldown tree");return{inserts:(0,a.pipe)(t,d.UI((function e([t,r]){return(0,h.kG)(void 0!==n.inserts[t],"Drilldown transform - alternative insert not found"),{alternativeId:t,label:n.inserts[t],subLabels:r.map(e)}}))),remove:n.remove,type:r.Type.Drilldown}})),u.mapLeft(F.fromError(e))))))}function x(e){return(0,a.pipe)(y.tryCatchError((()=>(0,a.pipe)(e,d.UI((t=>{const n=[[],[]];return w({insertString(e){C(n[1],{type:b.GP.Insert,text:"\n"===e?"¶ ":e})},insertGap(){throw new F("Substitution transform contains gap insert",e)},remove(e){C(n[0],{type:b.GP.Delete,text:e})},retain(e,{type:t}){if(!l.JU.isOptionalType(t)||0!==n[0].length){const t={type:b.GP.Text,text:e};n[0].push(t),n[1].push(t)}}},t),(0,h.kG)(n[0].length>0,"Substituted part is empty"),(0,h.kG)(n[1].length>0,"Inserts are empty"),n}))))),u.chain(k),u.mapLeft(F.fromError(e)))}function T(e){if(!("list"in e))return c.none;switch(e.list){case"bullet":case"dashed":case"ordered":return c.some({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return c.none}}function O(e){return(0,a.pipe)(e,u.fromPredicate((e=>1===e.length),(()=>new F("Expected full-sentence transform to have 1 alternative",e))),u.map((0,o.flow)(d.YM,(t=>{let n={blockStart:0,ops:[],kind:b._k.PlainText};return w({insertString(e,t){const r=e.split("\n");if(1===r.length)n.ops.push({type:b.GP.Insert,text:e,shouldBeCollapsed:!1});else{const e=(0,a.pipe)(t.attributes,T,c.fold((()=>o.constVoid),(({kind:e,indent:t})=>()=>{n.ops.splice(n.blockStart,1,{type:b.GP.List,kind:e,indent:t}),n={kind:b._k.WithFormatting,ops:n.ops,blockStart:n.blockStart}})));for(let t=0,i=r.length-1;t<=i;t++){const o=r[t];o&&n.ops.push({type:b.GP.Insert,text:o}),t<i&&(e(),n.blockStart=n.ops.length,n.ops.push({type:b.GP.Insert,text:"\n"}))}}},insertGap(){throw new F("Full sentence transform contains gap insert",e)},retain(e,t){n.ops.push({type:b.GP.Text,text:e,shouldBeCollapsed:R(t.type,e)})},remove(e,t){n.ops.push({type:b.GP.Delete,text:e,shouldBeCollapsed:R(t.type,e)})}},t),n}))),u.chain((0,o.flow)(c.fromPredicate((e=>e.ops.length>0)),u.fromOption((()=>new F("Got empty full sentence transform",e))),u.map((({ops:e,kind:t})=>({type:r.Type.FullSentence,ops:e,kind:t}))))))}!function(e){let t;!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.Drilldown=4]="Drilldown",e[e.FullSentence=5]="FullSentence",e[e.SmartPhrases=6]="SmartPhrases",e[e.OneGap=7]="OneGap",e[e.ShortenIt=8]="ShortenIt"}(t=e.Type||(e.Type={})),function(e){e.parse=function(t,n){const r=t[0];if(r.isFullSentence)return e.FullSentence;if(r.isSmartPhrases)return e.SmartPhrases;if(c.isSome(n.drilldown))return e.Drilldown;if(r.isShortenIt)return e.ShortenIt;switch(r.type){case l.r3.Type.Insert:return e.Insert;case l.r3.Type.Remove:return t.length>1?e.RemoveOr:e.Remove;case l.r3.Type.Substitution:return r.ops.find(l.JU.isInsertGap)?e.OneGap:e.Substitution;default:return(0,h.vE)(r.type)}}}(t=e.Type||(e.Type={})),e.create=function(t){return n=>{const r=e.Type.parse(n,t);switch(r){case e.Type.Remove:return E(n);case e.Type.RemoveOr:return S(n);case e.Type.Insert:return I(n);case e.Type.Substitution:return x(n);case e.Type.Drilldown:return A(n,(0,a.pipe)(t.drilldown,c.getOrElse((()=>g.H5.empty))));case e.Type.FullSentence:return O(n);case e.Type.SmartPhrases:return N(n);case e.Type.OneGap:return L(n);case e.Type.ShortenIt:return P(n);default:return(0,h.vE)(r)}}}}(r||(r={}));const R=(e,t)=>e===l.JU.Type.Optional&&t.length>3;function N(e){return(0,a.pipe)(y.tryCatchError((()=>(0,a.pipe)(e,d.UI((t=>{const n=s.s.normalizeDelta(new f.Delta(t.ops));if(2!==n.ops.length)throw new F("SmartPhrases transform must contain exactly 2 operations",e);if(!s.s.isRetain(n.ops[0]))throw new F("SmartPhrases transform first operation must be a retain",e);if(!s.s.isInsertString(n.ops[1]))throw new F("SmartPhrases transform second operation must be an insert",e);const r=[];return w({insertString(t,{type:n}){if(n!==l.JU.Type.Main)throw new F("SmartPhrases transform insert operation must be of type MAIN",e);C(r,{type:b.GP.Insert,text:t})},insertGap(){throw new F("SmartPhrases transform contains gap insert",e)},retain(){},remove(){throw new F("SmartPhrases transform contains delete",e)}},t),r}))))),u.chain((0,o.flow)(d.nI,u.fromOption((()=>new F("Incomplete SmartPhrases transform",e))),u.map((e=>({type:r.Type.SmartPhrases,inserts:e}))))))}function L(e){return(0,a.pipe)(y.tryCatchError((()=>((0,h.kG)(1===e.length,"One gap transform does not contain exactly one alternative"),(0,a.pipe)(e,d.YM,(e=>{const t=[],n=[];let r=!1;return w({insertString(e,{type:i}){C(r?n:t,{type:l.JU.isOptionalType(i)?b.GP.Text:b.GP.Insert,text:e})},insertGap(){(0,h.kG)(!r,"One gap transform does not contain exactly one gap insert"),r=!0},retain(e,{type:i}){const o=r?n:t;(!l.JU.isOptionalType(i)||o.length>0)&&C(o,{type:b.GP.Text,text:e})},remove:o.constVoid},e),(0,h.kG)(r,"One gap transform does not contain exactly one gap insert"),(0,h.kG)(t.length>0||n.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:n}}))))),u.bimap(F.fromError(e),(({left:e,right:t})=>({type:r.Type.OneGap,left:e,right:t}))))}function P(e){return(0,a.pipe)(e,u.fromPredicate((e=>1===e.length||3===e.length),(()=>new F("Expected shorten-it transform to have 1 or 3 alternatives",e))),u.chain(d.fw(u.either)(D)),u.map((e=>({type:r.Type.ShortenIt,summaries:e}))))}function M(e){const t=e.reduce(((e,t)=>t.type===b.GP.Text||t.type===b.GP.Delete?e+t.text:e),""),n=e.reduce(((e,t)=>t.type===b.GP.Text||t.type===b.GP.Insert?e+t.text:e),""),r=Math.max(t.length-n.length,0);return(0,a.pipe)(v.T.fromNumber(r/t.length),u.mapLeft((e=>new Error(e))))}function D(e){const t=[];return w({insertString(e){t.push({type:b.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){throw new F("ShortenIt transform contains gap insert",[e])},retain(e){t.push({type:b.GP.Text,text:e,shouldBeCollapsed:!1})},remove(e){t.push({type:b.GP.Delete,text:e,shouldBeCollapsed:!0})}},e),m.Y(u.either)({replacement:(0,a.pipe)(t,u.fromPredicate((e=>e.length>0),(()=>new F("Got empty ShortenIt transfrom",[e])))),compressionRatio:M(t)})}class F extends h.sH{constructor(e,t){super(e),this.alternatives=t}static fromError(e){return t=>{const n=new F(t.message,e);return n.stack=t.stack,n}}toString(){return`Hydration error: ${this.message}\n  ops: ${this.alternatives.map((e=>e.ops.map(l.JU.anonymize)))}`}}var B=n(8125),U=n(81531);const $=(e,t)=>{switch(e.kind){case"replacement":return function(e,t){(0,h.kG)((0,B.Dw)(e),"transforms should have at least one element");const[n]=e;return j(n)>-1?b.nV.create(W(n),e.map(G),t,!0):b.zE.create(e,t)}(e.content.map((e=>[{type:b.GP.Insert,text:e}])),t);case"transform":return function(e,t){(0,h.kG)((0,B.Dw)(e),"transforms should have at least one element");const[n]=e;return j(n)>-1?b.nV.create(W(n),e.map(G),t):function(e){return 2===e.length&&H(e)}(e)?b.fi.create(e[0],e[1],t):H(e)?b.zE.create(e,t):b.n6.create(e,t)}(e.content.map(Y),t);default:return(0,h.vE)(e.kind)}};function j(e){return e.findIndex((e=>"arrow"===e.type))}function W(e){return e.slice(0,j(e))}function G(e){return e.slice(j(e)+1)}function q(e){return e.every((e=>"delete"!==e.type))}function H(e){return e.every(q)}function z(e,t){return{re:new RegExp(`^(${e})([\\s\\S]*)$`),createResult:t}}const V=[z("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:b.GP.Delete,text:e[2]}))),z("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:b.GP.Insert,text:e[2]}))),z("(→)",(e=>({type:b.GP.Arrow}))),z("([^<>→]+)",(e=>({type:b.GP.Text,text:e[1]})))];function Y(e){function t(e){for(const t of V){const n=e.match(t.re);if(null!==n)return[t.createResult(n),n[n.length-1]]}}function n(t){let n=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>","→"].map((e=>t.indexOf(e)));if(n.findIndex((e=>0===e))>0)throw new Error(`Couldn't parse transform: ${e}`);if(n=n.filter((e=>e>0)),(0,B.Dw)(n)){const e=Math.min(...n);return[{type:b.GP.Text,text:t.substring(0,e)},t.substring(e)]}return[{type:b.GP.Text,text:t},""]}const r=[];let i,o=e,a=!1,s=0;for(;(0,B.Dw)(o);){const e=t(o);void 0===e&&(a=!0);const[l,c]=e||n(o);i&&i.type===b.GP.Text&&l.type===b.GP.Text?i.text+=l.text:(i&&i.type===b.GP.Delete&&l.type===b.GP.Insert&&(r.push({type:b.GP.Arrow}),s++),r.push(l)),l.type===b.GP.Arrow&&s++,i=r[r.length-1],o=c}return(a||!(0,B.Dw)(r)||s>1)&&U.Monitoring.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:r.length,arrowCount:s}),r}const X=(0,o.flow)((function(e){return t=>(0,a.pipe)(t.alternatives,J(e,{isFullSentence:p.eT.isFullSentence(t.cardType),isSmartPhrases:p.eT.isSmartPhrases(t.cardType),isShortenIt:p.eT.isShortenIt(t.cardType)}),u.chain(r.create({drilldown:t.drilldown})))}),(e=>t=>(0,a.pipe)(t.content,u.fold((e=>u.right($(e,t.todo))),(0,o.flow)(e,u.map((e=>function(e,t){switch(e.type){case r.Type.Drilldown:return b.ey.create(e.remove,e.inserts,t);case r.Type.Substitution:return b.nV.create(e.remove,e.inserts,t);case r.Type.Insert:return 2===e.inserts.length?b.fi.create(e.inserts[0],e.inserts[1],t):b.zE.create(e.inserts,t);case r.Type.Remove:return b.n6.create([e.remove],t);case r.Type.RemoveOr:return b.fz.create(e.removes,t);case r.Type.FullSentence:return function(e,t){switch(e.kind){case b._k.WithFormatting:return b.i3.createWithFormatting(e.ops,t);case b._k.PlainText:return b.i3.createPlainText(e.ops,t);default:return(0,h.vE)(e)}}(e,t);case r.Type.SmartPhrases:return b.zE.create(e.inserts,t);case r.Type.OneGap:return b.G7.create(e,t);case r.Type.ShortenIt:return function(e,t){return{type:b.b$.Type.ShortenIt,tooltipText:t,labels:e.summaries}}(e,t);default:return(0,h.vE)(e)}}(e,t.todo))))))));function J(e,t){const n=(0,o.flow)(e,(e=>e.delta.reduce(((e,t)=>s.s.isInsertString(t)?e+t.insert:e),"")));return(0,o.flow)(function(e,{isFullSentence:t,isSmartPhrases:n,isShortenIt:r}){return o=>(0,a.pipe)(o,i.filterMap((i=>(0,a.pipe)(i.type,c.map((o=>{if(l.r3.hasOptionalContext(i.ops)){const[a,...s]=i.ops,c=l.JU.length(a);return{text:e(c,i.lengthAffected-c),ops:s,type:o,isFullSentence:t,isSmartPhrases:n,isShortenIt:r}}return{text:e(0,i.lengthAffected),ops:i.ops,type:o,isFullSentence:t,isSmartPhrases:n,isShortenIt:r}}))))),d.nI)}(n,t),u.fromOption((()=>new Error("Alternative array is empty"))))}},98637:(e,t,n)=>{n.d(t,{GP:()=>r,b$:()=>i,zE:()=>o,n6:()=>a,fz:()=>s,fi:()=>l,ey:()=>c,nV:()=>u,_k:()=>d,i3:()=>p,G7:()=>h,q6:()=>m});var r,i,o,a,s,l,c,u,d,p,h,m,f=n(57050),g=n(73975),y=n(8125),v=n(45701),b=n(2291);!function(e){e.Delete="delete",e.Insert="insert",e.Text="text",e.List="list",e.Arrow="arrow"}(r||(r={})),function(e){let t;!function(e){e[e.InsertList=0]="InsertList",e[e.DeleteList=1]="DeleteList",e[e.DeleteOr=2]="DeleteOr",e[e.InsertOr=3]="InsertOr",e[e.Arrow=4]="Arrow",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap",e[e.Drilldown=7]="Drilldown",e[e.ShortenIt=8]="ShortenIt"}(t=e.Type||(e.Type={})),e.eq=g.fromEquals(((e,t)=>e.type===t.type&&e.tooltipText===t.tooltipText&&JSON.stringify(e.labels)===JSON.stringify(t.labels))),e.isFullSentence=t=>t.type===e.Type.FullSentence,e.isOneGap=t=>t.type===e.Type.OneGap,e.isShortenIt=t=>t.type===e.Type.ShortenIt,e.isRegular=t=>(0,f.not)((0,y.Kg)(e.isFullSentence,e.isOneGap,e.isShortenIt))(t)}(i||(i={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.InsertList})}(o||(o={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.DeleteList})}(a||(a={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.DeleteOr})}(s||(s={})),function(e){e.create=(e,t,n)=>({type:i.Type.InsertOr,labels:[e,t],tooltipText:n})}(l||(l={})),function(e){e.create=function(e,t,n){return{type:i.Type.Drilldown,original:e,labels:t,tooltipText:n}},e.getSelectedItems=(e,t)=>{if(!t||0===t.length)return{activeLabels:e.labels,original:e.original};const n=t.slice(1).reduce(((e,t)=>e.subLabels[t]),e.labels[t[0]]);return{activeLabels:n.subLabels,original:n.label}}}(c||(c={})),function(e){function t(e,t){return[...e,...t].map((e=>e.text.length)).reduce(y.Sm,0)>30}e.create=function(e,n,r,o){return{type:i.Type.Arrow,original:e,labels:n,tooltipText:r,onlyReplacements:o||t(e,n[0])}}}(u||(u={})),function(e){e.WithFormatting="WithFormatting",e.PlainText="PlainText"}(d||(d={})),function(e){e.createPlainText=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:d.PlainText}},e.createWithFormatting=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:d.WithFormatting}}}(p||(p={})),function(e){e.create=function(e,t){return{type:i.Type.OneGap,labels:{left:e.left.map((e=>Object.assign(Object.assign({},e),{type:r.Text}))),right:e.right.map((e=>Object.assign(Object.assign({},e),{type:r.Text})))},tooltipText:t}}}(h||(h={})),function(e){e.ord=v.contramap((e=>e.compressionRatio))(v.getDualOrd(b.T.ord))}(m||(m={}))},26027:(e,t,n)=>{n.d(t,{X:()=>S});var r=n(35214),i=n(57050),o=n(40327),a=n(5114),s=n(22232),l=n(95195),c=n(45701),u=n(73975),d=n(8125),p=n(81531),h=n(40018),m=n(98637),f=n(77176),g=n(28043),y=n(19751),v=n(85985),b=n(36156),w=n(17594),_=n(55567),C=n(77610),E=n(4890);class S{constructor(e,t,n,r,i,s,l,c,u,d,p,h,m,f,g,y){this.id=e,this.alerts=t,this.activeAlertIndex=n,this.activeHighlightIndex=r,this.positionState=i,this.visualState=s,this.meta=l,this.lensId=c,this.renderOptions=u,this.muteCategory=d,this.order=p,this.initialAlertId=h,this.removedAlertsIds=m,this.cachedTransform=f,this.userInput=g,this.synfonySelection=y,this.kind=S.Kind,this.activeAlert=C.C.getActiveAlert(this),this.transform=(0,o.pipe)(this.cachedTransform,a.map((e=>e.labels)))}get activeAlertRemoved(){return C.C.activeAlertRemoved(this)}get scheduledToDispose(){return C.C.willBeDisposed(this,this.removedAlertsIds)}hashCode(){return S.hashCode(this)}equals(e){return S.eq.equals(this,e)}toJSON(){return Object.assign(Object.assign({},this),{renderOptions:E.j.toJSON(this.renderOptions)})}}!function(e){let t,n;function E(e){return e.activeAlert.alertType===h.bZ.Type.Synfony}function S(e){return e.activeAlert.type===w.$.Type.default}e.Kind="AlertCard",e.isPriority=e=>w.$.isPriority(e.activeAlert),e.updateAlerts=(t,n,r,i)=>o=>new e(o.id,t,r,i,o.positionState,o.visualState,o.meta,o.lensId,o.renderOptions,o.muteCategory,o.order,o.initialAlertId,n,o.cachedTransform,o.userInput,o.synfonySelection),e.updateUserInput=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,t,n.synfonySelection),e.changeVisualState=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,t,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,n.synfonySelection),e.changePosition=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,t,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,n.synfonySelection),e.changeMeta=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,t,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,n.synfonySelection),e.changeTransform=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,t,n.userInput,n.synfonySelection),e.changeSynfonySelection=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,t),e.canHydrate=e=>!(e.meta.checking!==_.n.CheckingState.Idle||C.C.activeAlertRemoved(e)),e.getId=function(e){return e.id},function(e){e.getRemoveAlerts=(e,t)=>(n,r)=>s=>{const l=new Set(n.map((e=>e.id)));return C.C.hasAnyOfAlerts(l)(s)?e.remove(s,[s.activeAlert],(0,o.pipe)(r,a.map((e=>t.compare(s,e)>0)),a.getOrElse(i.constTrue))):s},e.getChangePosition=function(e){return{changePosition:t=>n=>e.changePosition(n,t)}},e.getTransitionTo=function(e){return{transitionTo:t=>n=>e.transitionTo(n,t)}},e.getCompleteTransition=function(e){return{completeTransition:t=>n=>e.completeTransition(n,t)}},e.getRemove=function(e){return{remove:(t,n)=>r=>t(r)?e.remove(r,[r.activeAlert],n(r)):r}},e.getUpdateWithAlert=function(e){return{updateWithAlerts:t=>n=>e.updateWith(n,t)}},e.getSelect=function(e){return{select:(t,n)=>r=>e.selectFirstAlert(r,t,n),selectByAlert:(t,n,r)=>i=>e.select(i,n,t,r),unselect:(t,n)=>r=>e.unselect(r,t,n)}}}(t=e.Capabilities||(e.Capabilities={})),function(e){e.default="default",e.super="super",e.takeaway="takeaway"}(n=e.Type||(e.Type={})),(0,s.L0)(null),e.isSynfonyView=E,e.isDefaultView=S,e.match=function(e){return t=>{if(function(e){return e.activeAlert.type===w.$.Type.super}(t))return l.right(e.super(t));if(function(e){return e.activeAlert.type===w.$.Type.smartPhrases}(t))return l.right(e.smartPhrases(t));if(function(e){return e.activeAlert.type===w.$.Type.takeaway}(t))return l.right(e.takeaway(t));if(function(e){return e.activeAlert.type===w.$.Type.sentenceLevelBrandTones}(t))return l.right(e.sentenceLevelBrandTones(t));if(E(t))return l.right(e.synfony(t));if(function(e){return e.activeAlert.type===w.$.Type.shortenIt}(t))return l.right(e.shortenIt(t));if(S(t))return l.right(e.default(t));const n={lensId:t.activeAlert.lensId,lensType:t.activeAlert.lensType};return l.left(new Error(`Cannot render unknown card type with alert: [${JSON.stringify(n,null,2)}]`))}},e.eq=C.C.eq,e.hashCode=e=>(0,b.NO)({itemHashCode:C.C.hashCode(e),synfonySelection:(0,o.pipe)(e.synfonySelection,a.getOrElse((()=>[])),(e=>e.join(",")))});const I=c.getMonoid();let k;e.ord=(0,r.fold)(I)([(0,o.pipe)(c.ordNumber,c.contramap((e=>e.order))),(0,o.pipe)(c.ordString,c.contramap((e=>e.initialAlertId)))]),e.isCardOpen=function(e){return"expanded"===e.transition.type||(0,o.pipe)(e.from,a.exists((t=>"expanded"===t&&"rendered"===e.transition.type)))},e.isCardPresuccess=function(e){return"presuccess"===e.transition.type},function(e){e.eq=u.fromEquals(((e,t)=>e.type===t.type&&e.clockwise===t.clockwise))}(k=e.Transition||(e.Transition={})),e.hasTransform=function(e){return a.isSome(e.transform)},e.hasFullSentenceTransform=function(e){return h.eT.isFullSentence(e.activeAlert.extraProperties.cardType)},e.hasOneGapTransform=function(e){return(0,o.pipe)(e.transform,a.exists(m.b$.isOneGap))},e.hasSynfonyTransform=function(e){return h.eT.isSynfony(e.activeAlert.extraProperties.cardType)},e.isSmartPhrases=function(e){return w.$.isSmartPhrases(e.activeAlert)},e.isTakeaway=function(e){return w.$.isTakeaway(e.activeAlert)},e.isSimple=function(e){return h.eT.isSimple(e.activeAlert.extraProperties.cardType)},e.isEligibleForDismissSurvey=function(e){return e.activeAlert.dismissSurvey},e.miniTitle=function(e,t){return w.$.isTakeaway(e.activeAlert)&&a.isNone(e.activeAlert.takeawayFeedback)?t.card.takeaway.defaultTitle:e.activeAlert.miniCardTitle},e.useCardStates=e=>({isChecking:e.pipe(f.U((e=>e.meta.checking===_.n.CheckingState.Checking)),g.x(),y.d({bufferSize:1,refCount:!0})),isCheckingGlobal:e.pipe(f.U((e=>e.meta.checking===_.n.CheckingState.Full)),g.x(),y.d({bufferSize:1,refCount:!0})),transform:e.pipe(f.U((({transform:e})=>e)),v.h(a.isSome),y.$f(a.getEq(m.b$.eq)))}),e.foldCard=l.getOrElse((e=>(A("CardComponent").error("Got an unexpected card type",e),null)));const A=(0,d.HP)(p.Monitoring.Logging.getLogger)}(S||(S={}))},55567:(e,t,n)=>{n.d(t,{n:()=>r});var r,i=n(2291),o=n(36156);!function(e){let t;!function(e){e.Idle="idle",e.Checking="checking",e.Full="full"}(t=e.CheckingState||(e.CheckingState={}));class n{constructor(e,t,n,r,i){this.percentile=e,this.explanation=t,this.checking=n,this.ranges=r,this.showMuteQuotedAdvice=i}equals(e){return this.hashCode()===e.hashCode()}hashCode(){return(0,o.NO)({percentile:i.g.prism.reverseGet(this.percentile),explanation:this.explanation,checking:this.checking,ranges:this.ranges.map((e=>e.meta.id)).join(),showMuteQuotedAdvice:this.showMuteQuotedAdvice})}}e.Impl=n,e.empty=(e="",r=i.g.MIN,o=t.Idle,a=[])=>new n(r,e,o,a,!1),e.create=({explanation:e="",percentile:r=i.g.MIN,checking:o=t.Idle,ranges:a=[]})=>new n(r,e,o,a,!1)}(r||(r={}))},91549:(e,t,n)=>{n.d(t,{R:()=>r});var r,i=n(57050),o=n(40327),a=n(45701),s=n(5114),l=n(22232),c=n(73975),u=n(40018),d=n(17594),p=n(26027),h=n(55567),m=n(20594),f=n(77610),g=n(48521);!function(e){let t;e.Kind="AlertsBundle",e.getId=function(e){return e.id},e.bundleTitle=function(e){return e.bundleInfo.title},e.ord=(0,o.pipe)(a.ordNumber,a.contramap((0,i.flow)((e=>e.activeAlert.bundleInfo),s.fold((()=>Number.MAX_SAFE_INTEGER),(e=>e.rank))))),e.isExtendableWithAlerts=e=>{switch(e.visualState.transition.type){case"added":case"expanded":case"focused":case"hidden":case"rendered":return!0;case"feedback_form":case"removed":case"presuccess":case"success":case"muted":return!1;default:return(0,l.vE)(e.visualState.transition.type)}},e.getAlertOutcomeBundle=e=>(0,o.pipe)(e.bundleInfo,s.fold((()=>({id:"other",title:"Other"})),(e=>({id:e.title.toLowerCase().split(" ").join("_"),title:e.title})))),e.eq={equals:(e,t)=>f.C.eq.equals(e,t)&&s.getEq(c.eqString).equals(e.lensId,t.lensId)},function(t){const i=t=>(n,r)=>Object.assign({id:n,kind:e.Kind,bundleInfo:t,activeAlert:f.C.getAlertByIndex(r.activeAlertIndex,r.alerts),transform:(0,o.pipe)(r.cachedTransform,s.map((e=>e.labels))),equals(t){return e.eq.equals(this,t)},hashCode(){return f.C.hashCode(this)}},r);t.create=function(t,a,c,p){const h=r(t),y=e=>m.Mq.getCreate(i(e),a,h,p,c),v=n(c);return{create:e=>(t,n,r,i,o,a,l)=>y(o)(t,n,r,i,m.Mq.getApplicableCardMeta(n[r],a,c),e,s.some(a),l),createAdded:e=>(t,n,r,i)=>{const o=g.o.VisualState.initial({type:"added",clockwise:!0},!0);return y(n)(t,r,0,0,m.Mq.getApplicableCardMeta(r[0],o,c),e,s.some(o),i)},createFocused:e=>(t,n,r,i,o)=>{const a=g.o.VisualState.initial({type:"focused",clockwise:!0},!0);return y(n)(t,r,i,0,m.Mq.getApplicableCardMeta(r[i],a,c),e,s.some(a),o)},createRendered:e=>(t,n,r,i)=>{const o=g.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return y(n)(t,r,0,0,m.Mq.getApplicableCardMeta(r[0],o,c),e,s.some(o),i)},updateWith:(n,r)=>i=>{(0,l.kG)(n.every((e=>u.bZ.isRegistered(e))),"cannot add non registered alerts");const a=new Set(n.map((e=>e.id))),s=new Set(i.removedAlertsIds);a.forEach((e=>{s.delete(e)}));const c=i.alerts.filter((e=>!a.has(e.id))).concat(n.map(d.$.fromModel)).sort(r.compare);return(0,o.pipe)(i,v(c,s,f.C.getIndexByAlert(i.activeAlert.id,c)),e.getCardHydrator(t))}}}}(t=e.ItemFactory||(e.ItemFactory={}));const n=e=>(t,n,r)=>i=>{const o=f.C.getAlertByIndex(r,t),a=d.$.isApplicableAlert(o)?m.Mq.getApplicableCardMeta(o,i.visualState,e):h.n.empty(void 0);return Object.assign(Object.assign({},i),{alerts:t,activeAlert:o,meta:a,removedAlertsIds:n,activeAlertIndex:r})};e.changePosition=e=>t=>Object.assign(Object.assign({},t),{positionState:e}),e.changeVisualState=e=>t=>Object.assign(Object.assign({},t),{visualState:e}),e.getCardHydrator=e=>m.Mq.getCardHydrator((e=>e.cachedTransform),p.X.canHydrate,y,e);const r=t=>m.Mq.getChangeVisualState(e.changeVisualState,e.getCardHydrator(t));e.changeUserInput=e=>t=>Object.assign(Object.assign({},t),{userInput:e});const y=e=>t=>Object.assign(Object.assign({},t),{cachedTransform:e,transform:(0,o.pipe)(e,s.map((e=>e.labels)))});e.transitionTo=m.Mq.getTransitionTo(e.changeVisualState,e.changePosition),e.completeTransition=t=>n=>e.changeVisualState(g.o.VisualState.complete(n.visualState,t))(n),e.getRemove=t=>m.Mq.getRemove(n(t),e.transitionTo);const v=e=>t=>Object.assign(Object.assign({},t),{meta:e});e.unselect=m.Mq.getUnselect(e.changeVisualState,e.changePosition),e.getSelectByAlert=(t,r,i)=>m.Mq.getSelect(n(r),e.changeUserInput,e.changeVisualState,e.changePosition,v,i,t,r),e.getSelect=(t,n,r)=>m.Mq.getSelectFirstAlert(e.getSelectByAlert(t,n,r)),e.getRemoveAlertsCapability=(t,n,r,a)=>(l,c)=>{const u=e.getSelectByAlert(t,n,e.getCardHydrator(r)),d=m.Mq.getSelectNextAlert(m.Mq.getCardSelections(t),u);return t=>{const r=new Set(l.map((e=>e.id)));if(!f.C.hasAnyOfAlerts(r)(t))return t;const u=e.getRemove(n)(l,(0,o.pipe)(c,s.map((e=>a.compare(t,e)>0)),s.getOrElse(i.constTrue)))(t);return(0,o.pipe)(c,s.exists((e=>e.id===t.id)))?d(a)(u):u}},e.getUpdatableWithAlertsCapability=t=>n=>(0,i.flow)(t.updateWith(n,u.h$.ord),(t=>e.isExtendableWithAlerts(t)?t:e.transitionTo({type:"added",clockwise:!0})(t)))}(r||(r={}))},83167:(e,t,n)=>{n.d(t,{Dv:()=>O,VC:()=>R,u0:()=>N,vM:()=>P,Py:()=>M});var r=n(35214),i=n(57050),o=n(40327),a=n(38983),s=n(5114),l=n(22232),c=n(8125),u=n(83078),d=n(95195),p=n(81531),h=n(40018),m=n(66896),f=n(16118),g=n(50628),y=n(77176),v=n(93508),b=n(85985),w=n(66310),_=n(19751),C=n(45586),E=n(24209),S=n(2834),I=n(98403),k=n(41398),A=n(35416),x=n(93494),T=n(73841);const O=(e,t,n,r=(()=>s.none))=>i=>{if(!e(i))return t(i);const{currentLens:a}=i;return a.kind===A._L.abstract?s.none:(0,o.pipe)(s.fromPredicate(A.nL.hasItems)(i),s.chain((e=>n.findNextAlert(e.currentLens))),s.alt((()=>r(i))),s.map(T.l.toLensAlert))},R=(e,t,n,r,i,a=x.v.WithSuccess.State.isInGlobalSuccess(i),l=(()=>!0))=>c=>{const{currentLens:u}=c;return u.kind===A._L.abstract?s.none:u.kind===A._L.persistent?(0,o.pipe)(A.nL.getActiveAlertHighlight(r)(c),s.fold((()=>A.nL.hasItems(c)?i.findNextAlert(c.currentLens):s.none),(t=>e.findNextAlertInTextByLens(t,u.id,x.v.WithPriority.nonPriorityAlertsVisible(c)))),s.alt((()=>l()&&(a(c)||m.R.isOutcomeId(c.currentLens.id)&&e.hasZeroFreeAlerts(n))?e.findPremiumAlert():s.none)),s.map(T.l.toLensAlert)):(0,o.pipe)((a=>(0,o.pipe)(s.fromPredicate(A.nL.hasItems)(a),s.chain((e=>i.findNextAlert(e.currentLens))),s.map(T.l.toLensAlert),s.alt((()=>(0,o.pipe)(A.nL.getActiveAlertHighlight(r)(a),s.fold((()=>t(h.bZ.isRegisteredApplicableAlert,"cursor")),(t=>e.findNextAlertInText(t,h.bZ.isApplicableAlert))),s.map((({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:n.get()}))))))))(c),s.alt((()=>(0,o.pipe)(e.findPremiumAlert(),s.map(T.l.toLensAlert)))))};function N(e,t){return(n,r)=>t.findClosestAlertHighlight(e(r),n)}const L=e=>e.pipe(f.G(),g.P((([e,t])=>"idle"!==e&&"idle"===t)),y.U((()=>{})));class P{constructor(e,t){this._subs=new C.w.Keeper,this.firstOpeningOfDocumentWithAlerts=a.h.create(!1);const n=L(e),r=(e=>(0,o.pipe)(e,b.h((e=>A.nL.hasCards(e)&&s.isSome(A.In.getActiveItem(e.currentLens)))),y.U((()=>{}))))(t);this._subs.push((0,o.pipe)(t,g.P((e=>A.nL.hasCards(e))),w.w((()=>(0,o.pipe)(E.T(r,n),y.U(i.constFalse),v.O(!0)))),S.b(I.wW(this.firstOpeningOfDocumentWithAlerts))).subscribe())}dispose(){this._subs.dispose()}}var M;!function(e){const t=(0,c.HP)(p.Monitoring.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,n,r,i,a)=>{const l=L(n),c=n.pipe(v.O("idle"),f.G(),g.P((([e,t])=>"idle"===t)),b.h((([e])=>"full"===e)),y.U((()=>{})));const u=((e,t)=>{const n=L(e);return t.bigPaste.pipe(w.w((()=>n)),y.U((()=>{})),_.d({bufferSize:1,refCount:!0}))})(n,i);return(0,o.pipe)(E.T(l,c,u),k.M(e,a,r),b.h((([e,t,n,r])=>r&&!n&&A.nL.hasCards(t)&&s.isNone(A.In.getActiveItem(t.currentLens)))),y.U((()=>A.nL.Effect.FocusBehavior.focusFirst)),S.b((e=>t("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e))))},e.getSideEffect=(e,t)=>{const n=(0,o.pipe)(e,y.U((e=>t=>n=>{switch(t.kind){case A.nL.Effect.FocusBehaviorType.noFocus:return n;case A.nL.Effect.FocusBehaviorType.unFocus:return A.nL.Prism.getLensWithItems().modify(e.unselectItem(),n);case A.nL.Effect.FocusBehaviorType.focusFirst:return(0,o.pipe)(e.findFirstAlert(n.currentLens),s.fold((()=>n),(t=>A.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),n))));case A.nL.Effect.FocusBehaviorType.focusNext:return(0,o.pipe)(e.findNextAlert(n.currentLens),s.fold((()=>n),(t=>A.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),n))));case A.nL.Effect.FocusBehaviorType.focusAlert:return A.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),n);default:(0,l.vE)(t)}})(t)));return{id:"autoFocusEffect",when:m.R.isWithAlertsId,what:A.nL.Effect.ItemsApplicator.create(n)}},e.whenFirstOpeningDocumentWithAlerts=e=>()=>e.firstOpeningOfDocumentWithAlerts.get(),e.whenShouldVerifyCurrentLens=(e,n)=>r=>{const i="AutoFocus.stateValidator.whenShouldVerifyCurrentLens";return!(!A.nL.hasItems(r)||!n.shouldVerify(r.currentLens))&&((0,o.pipe)(A.nL.getActiveAlert(e)(r),s.filter(h.bZ.isInDuplicatedState),s.fold((()=>t(i).debug("Current alert removed, should verify current lens...")),(e=>t(i).info("Current alert removed as it's a duplicate, should verify current lens...",e.toString())))),!0)},e.whenNoActiveCard=e=>e.currentLens.items.size>0&&s.isNone(A.In.getActiveItem(e.currentLens)),e.behaviorToEffect=e=>n=>r=>(0,o.pipe)(n(r)?e(r):s.none,u.tap((e=>t("AutoFocus.stateValidator").debug(`'behavior triggered: ${e.kind}`)))),e.getDefaultBehavior=(t,n)=>(0,o.pipe)([(0,o.pipe)(e.whenShouldVerifyCurrentLens(t,n),e.behaviorToEffect((()=>s.some(A.nL.Effect.FocusBehavior.focusNext))))],(0,r.fold)((0,r.getFunctionMonoid)(s.getFirstMonoid())())),e.getFocusFromCacheBehavior=(t,n,a,l,u,d)=>(0,o.pipe)([(0,o.pipe)(e.whenShouldVerifyCurrentLens(l,u),e.behaviorToEffect((()=>s.some(A.nL.Effect.FocusBehavior.focusNext)))),(0,o.pipe)((0,c.W9)((()=>n.get()),(0,c.W9)((0,c.W9)((0,c.W9)(e.whenFirstOpeningDocumentWithAlerts(a),(()=>t)),e.whenNoActiveCard),(0,o.pipe)(d,s.map((e=>(0,i.not)(e.willShowBulkAccept))),s.getOrElse((()=>i.constTrue))))),e.behaviorToEffect((()=>s.some(A.nL.Effect.FocusBehavior.focusFirst))))],(0,r.fold)((0,r.getFunctionMonoid)(s.getFirstMonoid())())),e.getFirstApiAlignmentOverride=function(){const e=a.h.create(!0);return(t,n)=>{let r=n;return e.get()&&n===h.l$.api&&(r=h.l$.text),e.set(!1),r}},e.getShouldAutoFocus=(e,t,n)=>r=>e.get()&&(0,o.pipe)(r,A.nL.getActiveAlert(n),s.chain((({id:e})=>t.getById(e))),s.filter((0,c.Kg)((e=>"APPLIED"===e.state.type&&"ByCard"===e.state.method),h.bZ.isDuplicated)),s.isSome),e.getStateTransformer=(e,n,r,i,a,c,u)=>({state:p,metadata:h})=>{const m=t("AutoFocus.stateTransformer");if(!A.nL.hasCards(p)||!A.nL.hasItems(p))return m.trace("state has no items, returning original state"),d.left({state:p,metadata:h});const f=e(p);if(m.trace("effect: ",{state:p,metadata:h,effect:f}),s.isNone(f))return m.trace("no effect selected, returning original state"),d.left({state:p,metadata:h});if(c(f.value),f.value.kind===A.nL.Effect.FocusBehaviorType.unFocus||f.value.kind===A.nL.Effect.FocusBehaviorType.noFocus)return d.left({state:A.nL.Prism.getLensWithItems().modify(i.unselectItem(),p),metadata:h});const g=a(p);return m.trace("shouldAutoFocus",{alertSource:p.alertSource,shouldAutoFocus:g}),(0,o.pipe)(f,s.chain((e=>{switch(e.kind){case A.nL.Effect.FocusBehaviorType.noFocus:case A.nL.Effect.FocusBehaviorType.unFocus:return s.none;case A.nL.Effect.FocusBehaviorType.focusFirst:return(0,o.pipe)(i.findFirstAlert(p.currentLens),s.map((e=>Object.assign(Object.assign({},e),{lensId:p.currentLens.id}))));case A.nL.Effect.FocusBehaviorType.focusNext:return n(p);case A.nL.Effect.FocusBehaviorType.focusAlert:return s.some(Object.assign(Object.assign({},e.alertHighlight),{lensId:p.currentLens.id}));default:(0,l.vE)(e)}})),s.map((e=>((0,l.kG)(s.isSome(r.getRegistered(e.alert.id)),"lens alert should be in registered state",(()=>e.alert.toString())),e))),s.fold((()=>p.currentLens.kind===A._L.active?d.right(d.right({lensId:u.get(),alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:A.nL.Effect.FocusBehavior.noFocus}})):d.left({state:p,metadata:h})),(({alert:e,highlightIndex:t,lensId:n})=>p.currentLens.meta.filter(e)?d.left(g?{state:A.nL.Prism.getLensWithItems().modify(i.selectItemByAlert({alert:e,highlightIndex:t}),p),metadata:{sourceId:"LSM.updateActiveState"}}:{state:p,metadata:h}):d.right(g?d.left({alertHighlight:{alert:e,highlightIndex:t},alertSource:p.alertSource,options:{lensId:n,order:p.switchOrder,toFocus:A.nL.Effect.FocusBehavior.focusFirst}}):d.right({lensId:n,alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:A.nL.Effect.FocusBehavior.noFocus}})))))}}(M||(M={}))},20594:(e,t,n)=>{n.d(t,{Ls:()=>E,IG:()=>r,Mq:()=>k});var r,i=n(57050),o=n(40327),a=n(51996),s=n(5114),l=n(22232),c=n(83078),u=n(95195),d=n(89943),p=n(81531),h=n(40018),m=n(66896),f=n(2291),g=n(17594),y=n(26027),v=n(55567),b=n(48521),w=n(77610),_=n(16892),C=n(4890);function E(e,t,n,r,i){const o=k.getCardSelections(t),a=k.getCardHydrator((e=>e.cachedTransform),y.X.canHydrate,y.X.changeTransform,e),c=k.getChangeVisualState(y.X.changeVisualState,a),u=k.getSelect(y.X.updateAlerts,y.X.updateUserInput,c,y.X.changePosition,y.X.changeMeta,a,t,n),d=k.getUnselect(c,y.X.changePosition),p=k.getTransitionTo(c,y.X.changePosition),m=k.getRemove(y.X.updateAlerts,p);const f=k.getCreate(I,i,c,r,n);const w=k.getSelectFirstAlert(u);return Object.assign(Object.assign({shouldAnimateAlertApply:n.shouldAnimateAlertApply,create:f,createFromAlert:e=>t=>f(t.id,[t],0,0,v.n.empty(h.bZ.isApplicableAlert(t)?t.explanation:void 0),e,s.none),createFocused:function(e){const t=b.o.VisualState.initial({type:"focused",clockwise:!0},!0);return(r,i,o)=>f(r,[i],0,o,k.getApplicableCardMeta(i,t,n),e,s.some(t))},createRendered:function(e){const t=b.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return(r,i)=>f(r,[i],0,0,k.getApplicableCardMeta(i,t,n),e,s.some(t))},createAdded:function(e){const t=b.o.VisualState.initial({type:"added",clockwise:!0},!0);return(r,i)=>f(r,[i],0,0,k.getApplicableCardMeta(i,t,n),e,s.some(t))}},o),{select:(e,t,n,r)=>u(t,n,r)(e),selectFirstAlert:(e,t,n)=>w(t,n)(e),selectNextAlert:(e,t)=>k.getSelectNextAlert(o,u)(t)(e),unselect:(e,t,n)=>d(t,n)(e),remove:(e,t,n)=>m(t,n)(e),updateWith(e,t){(0,l.kG)(1===t.length,"AlertCard can only handle update with a single alert");const r=t[0];(0,l.kG)(void 0!==e.alerts.find((e=>e.id===r.id)),"can not receive updates for unknown alert",(()=>r.toString()));const i=function(e,t){const r=k.getApplicableCardMeta(t,e.visualState,n);return new y.X(e.id,e.alerts.map((e=>e.id===t.id?g.$.fromModel(t):e)),e.activeAlertIndex,k.getAHI(e,r),e.positionState,e.visualState,r,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection)}(e,r);switch(r.state.type){case h.bZ.State.Type.REGISTERED:{const e="focused"===i.visualState.transition.type||"expanded"===i.visualState.transition.type?a(i):i;return"success"===i.visualState.transition.type||"presuccess"===i.visualState.transition.type?p({type:"focused",clockwise:i.visualState.transition.clockwise})(e):e}case h.bZ.State.Type.REMOVED:return"focused"!==i.visualState.transition.type&&"expanded"!==i.visualState.transition.type||!i.alerts.every((e=>h.bZ.isCapiDone(e)&&e.allowUpdate&&h.bZ.isRated(i.activeAlert)))?m(t,!0)(i):p({type:"presuccess",clockwise:i.visualState.transition.clockwise})(i);case h.bZ.State.Type.APPLIED:case h.bZ.State.Type.BEING_APPLIED:return m(t,!0)(i);default:return(0,l.vE)(r.state)}},changePosition:(e,t)=>y.X.changePosition(t)(e),changeVisualState:(e,t)=>c(t)(e),transitionTo:(e,t)=>p(t)(e),completeTransition:(e,t)=>c(b.o.VisualState.complete(e.visualState,t))(e),hideMuteQuotedAdvice:e=>new y.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,new v.n.Impl(e.meta.percentile,e.meta.explanation,e.meta.checking,e.meta.ranges,!1),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection),updateUserInput:(e,t)=>y.X.updateUserInput(t)(e),updateSynfonySelection:(e,t)=>y.X.changeSynfonySelection(t)(e),updateSmartPhrasesAlert:(e,t)=>new y.X(e.id,e.alerts.map(((n,r)=>r===e.activeAlertIndex&&g.$.isSmartPhrases(n)?g.$.updateSmartPhrasesAlert(n,t):n)),e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection)})}function S(e){return h.bZ.isOneGap(e)&&""!==e.gapValue?s.some(e.gapValue):s.none}!function(e){let t;e.toCardRenderOptions=function(e,n,r){const i=new Set;return(m.R.isMainLens(n)||e.features.has(t.showCardLabelInOutcomes)&&n!==m.R.SpecialId.Plagiarism)&&i.add(C.j.Features.showLabel),e.features.has(t.enableMuteQuotedAdvice)&&i.add(C.j.Features.enableMuteQuotedAdvice),e.features.has(t.showAnonymousUserFooters)&&i.add(C.j.Features.showAnonymousUserFooters),e.features.has(t.showPremiumTrialFooters)&&i.add(C.j.Features.showPremiumTrialFooters),e.features.has(t.showPremiumTrialFooters)&&i.add(C.j.Features.showPremiumTrialFooters),e.features.has(t.showNewPremiumCardLabels)&&i.add(C.j.Features.showNewPremiumCardLabels),e.features.has(t.showPersistentPremiumCardLabels)&&i.add(C.j.Features.showPersistentPremiumCardLabels),{features:i,layoutDensity:e.cardLayoutDensityMode,isNew:r}},function(e){e.showCardLabelInOutcomes="showCardLabelInOutcomes",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels"}(t=e.Features||(e.Features={})),e.Default={features:new Set([t.showCardLabelInOutcomes]),cardLayoutDensityMode:C.j.Density.cozy,shouldAnimateAlertApply:h.bZ.isAccepted}}(r||(r={}));const I=(e,t)=>new y.X(e,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection);var k;!function(e){function t(e,t,n){let i;i=h.bZ.getCheckingState(e)===h.bZ.CheckingState.CHECKING?"focused"===t.transition.type||"expanded"===t.transition.type?v.n.CheckingState.Checking:v.n.CheckingState.Full:v.n.CheckingState.Idle;const o=n.features.has(r.Features.enableMuteQuotedAdvice)&&e.extraProperties.isInQuotes;return new v.n.Impl(f.g.fromRatio(e.progress),e.explanation,i,e.getHighlightRanges(),o)}e.getApplicableCardMeta=t,e.getRemove=(e,t)=>(n,r=!0)=>i=>{const a=new Set(n.map((e=>e.id))),s=new Set(i.removedAlertsIds);a.has(i.activeAlert.id)&&s.add(i.activeAlert.id);const{remainingAlerts:l,activeAlertIndex:c}=i.alerts.reduce(((e,t,n)=>!a.has(t.id)||b.o.isFocused(i)&&t.id===i.activeAlert.id?{remainingAlerts:e.remainingAlerts.concat([t]),activeAlertIndex:e.activeAlertIndex}:{remainingAlerts:e.remainingAlerts,activeAlertIndex:e.activeAlertIndex+(n<i.activeAlertIndex||n===i.activeAlertIndex&&n===i.alerts.length-1&&n>0?-1:0)}),{remainingAlerts:[],activeAlertIndex:i.activeAlertIndex}),u=(0,o.pipe)(i,w.C.willBeDisposed(i,a)?e(i.alerts,a,i.activeAlertIndex,i.activeHighlightIndex):e(l,s,c,0));return w.C.willBeDisposed(u,u.removedAlertsIds)?t({type:"removed",clockwise:r})(u):u},e.getTransitionTo=(e,t)=>n=>r=>{const i=b.o.VisualState.to(r.visualState,n);return(0,o.pipe)(r,e(i),(e=>n.type===r.visualState.transition.type||"expanded"!==n.type&&"focused"!==n.type?e:t(_.s.PositionState.invalidateHeight(r.positionState))(e)))};const n=e=>t=>{const n=t.alerts;return s.fromNullable(n.slice(t.activeAlertIndex+1).find(e))};e.getPrevAlert=e=>t=>{const n=t.alerts;return s.fromNullable(n.slice(0,t.activeAlertIndex).reverse().find(e))},e.getAnyRegisteredAlert=e=>t=>{const n=t.alerts;return(0,o.pipe)(n.filter((t=>e.isRegistered(t.id))),(e=>e[e.length-1]),s.fromNullable)},e.getCardSelections=t=>{const r=(e=>t=>e.isRegistered(t.id))(t);return{nextAlert:n(r),prevAlert:e.getPrevAlert(r),anyRegisteredAlert:e.getAnyRegisteredAlert(t)}},e.getSelect=(e,n,r,a,u,d,p,m)=>({alert:f,highlightIndex:g},C,E)=>I=>{(0,l.kG)(!I.removedAlertsIds.has(f.id),"Cannot select removed alert");const k=p.getById(f.id);(0,l.kG)(s.isSome(k),"Cannot select not registered alert");const A=c.unsafeGet(k),x=I.alerts.filter((e=>!I.removedAlertsIds.has(e.id))),T=(0,o.pipe)(C,s.map((e=>E.compare(I,e)>0)),s.getOrElse(i.constTrue)),O=(0,o.pipe)(C,s.exists((e=>e.id===I.id))),R=O?I.positionState:_.s.PositionState.invalidateHeight(I.positionState),N=O&&y.X.isCardOpen(I.visualState)?"expanded":"focused",L=S(A),P=w.C.getIndexByAlert(f.id,x),M=(0,o.pipe)(C,s.fold((()=>b.o.VisualState.initial({type:N,clockwise:T})),(e=>b.o.VisualState.to(I.visualState,{type:N,clockwise:T})))),D=h.bZ.isApplicableAlert(A)?t(A,M,m):v.n.empty(void 0);return(0,o.pipe)(I,a(R),r(M),e(x,I.removedAlertsIds,P,g),n(L),u(D),d)},e.getSelectNextAlert=(e,t)=>n=>r=>w.C.activeAlertRemoved(r)&&!w.C.willBeDisposed(r,r.removedAlertsIds)?(0,o.pipe)(e.nextAlert(r),c.orElse(e.prevAlert(r)),s.map((e=>t({alert:e,highlightIndex:0},s.none,n)(r))),s.getOrElse((()=>r))):r,e.getSelectFirstAlert=e=>(t,n)=>r=>{const i=r.alerts.filter((e=>!r.removedAlertsIds.has(e.id)));(0,l.kG)(i.length>0,"Selectable card must have at least one not removed alert");const o=i[0];return e({alert:o,highlightIndex:0},t,n)(r)},e.getUnselect=(e,t)=>(n,r)=>a=>{const l=(0,o.pipe)(n,s.map((e=>r.compare(a,e)>0)),s.getOrElse(i.constTrue)),c=(0,o.pipe)(n,s.exists((e=>e.id===a.id)))?a.positionState:_.s.PositionState.invalidateHeight(a.positionState);return(0,o.pipe)(a,t(c),w.C.willBeDisposed(a,a.removedAlertsIds)||b.o.isHidden(a)?i.identity:e(b.o.VisualState.to(a.visualState,{type:"rendered",clockwise:l})))},e.getCardHydrator=(e,t,n,r)=>i=>{const a=i.activeAlert.type===g.$.Type.super||i.activeAlert.type===g.$.Type.plagiarism||i.activeAlert.type===g.$.Type.premium||i.activeAlert.type===g.$.Type.takeaway||i.activeAlert.type===g.$.Type.sentenceLevelBrandTones||h.eT.isSimple(i.activeAlert.extraProperties.cardType)?s.none:function(e,t,n){const i=p.Monitoring.Logging.getLogger("CardFactory");return(0,o.pipe)(t,s.filter((t=>!n||(0,o.pipe)(e,s.exists((e=>t.id===e.id&&t.rev===e.revision))))),s.alt((()=>(0,o.pipe)(e,s.chain((e=>(0,o.pipe)(r(e),u.fold((n=>(i.error("Could not hydrate transform",n,{alertId:e.id}),t)),(t=>s.some({id:e.id,rev:e.revision,labels:t}))))))))))}(i.activeAlert.getTransform(),e(i),t(i));return n(a)(i)},e.getChangeVisualState=(e,t)=>n=>r=>{const i=e(n)(r);return"focused"===n.transition.type||"expanded"===n.transition.type?t(i):i},e.getCreate=(e,t,n,i,a)=>(c,u,d,p,m,f,y,C=h.h$.ord)=>{const E=w.C.getAlertByIndex(d,u),I=S(E),k=[...u].sort(C.compare).map(g.$.fromModel),A=k[0];(0,l.kG)(!!A,"The card must contain at least 1 alert");const x=(0,o.pipe)(t,s.chain((e=>e.getAlertMuteCategory(u[0].id)))),T=e(c,{alerts:k,activeAlertIndex:w.C.getIndexByAlert(E.id,k),activeHighlightIndex:p,positionState:_.s.PositionState.empty,visualState:b.o.VisualState.initial({type:"rendered",clockwise:!0}),meta:new v.n.Impl(m.percentile,m.explanation,m.checking,m.ranges,a.features.has(r.Features.enableMuteQuotedAdvice)&&g.$.isInQuotes(A)),lensId:s.some(f),renderOptions:r.toCardRenderOptions(a,f,i(A)),muteCategory:x,order:A.getHighlightRanges()[0].end,initialAlertId:A.id,removedAlertsIds:new Set,cachedTransform:s.none,userInput:I,synfonySelection:s.none});return(0,o.pipe)(y,s.fold((()=>T),(e=>n(e)(T))))},e.getAHI=function(e,t){if((0,l.kG)(t.ranges.length>0,`Incorrect card meta: rangeIds empty. Card ID ${e.id}, activeAlert: ${e.activeAlert.toString()}`),0===e.activeHighlightIndex||e.meta.ranges.length===t.ranges.length)return e.activeHighlightIndex;{const n=e.meta.ranges[e.activeHighlightIndex];return(0,l.kG)(void 0!==n,"AHI not found in rangeIds"),(0,o.pipe)(s.some(t.ranges.findIndex((e=>e.meta.id===n.meta.id))),s.filter((e=>-1!==e)),s.alt((()=>d.findNotLower(t.ranges,n,a.SV.ordEnd))),s.getOrElse((()=>t.ranges.length-1)))}},e.snapshot=e=>({cardId:e.id,vs:{incomplete:e.visualState.incomplete,tr:e.visualState.transition},as:(0,o.pipe)(e.alerts&&e.alerts.map((e=>e.id))),aai:e.activeAlertIndex,ahi:e.activeHighlightIndex})}(k||(k={}))},20291:(e,t,n)=>{if(n.d(t,{R7:()=>b,XU:()=>w}),75==n.j)var r=n(40327);var i=n(5114),o=n(66896),a=n(15646),s=n(48521),l=n(98403),c=n(77176);if(75==n.j)var u=n(66310);if(75==n.j)var d=n(85985);if(75==n.j)var p=n(2834);if(75==n.j)var h=n(24209);if(75==n.j)var m=n(598);if(75==n.j)var f=n(83401);var g=n(35416),y=n(99116);const v={cardsBeyondViewport:5,cardsAroundActive:100},b=(e,t,n,r,u=v,d=l.b2.rafScheduler)=>{const p=e=>!e.positionState.visible&&s.o.isAnimatable(e)&&e.visualState.incomplete?(r.next({type:a.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),n.completeTransition(e.visualState.transitionId)(e)):e,h=e.pipe(c.U(g.nL.mapper((({currentLens:e,alertSource:t})=>i.some({currentLens:e,alertSource:t}))))),m=(0,y.nM)(n)(h,t.viewport,t.scrollTop,t.paddingTop,d).pipe(c.U((({viewport:e,scrollTop:t,paddingTop:n})=>({viewport:e,scrollTop:t,paddingTop:n,completeTransition:p}))),c.U((0,y.GC)({cardsBeyondViewport:u.cardsBeyondViewport,cardsAroundActive:u.cardsAroundActive,changePosition:n})));return{id:"manageCardsVisibility",when:o.R.isWithAlertsId,what:g.nL.Effect.Applicator.create(m)}},w=(e,t,n)=>{const a=(0,r.pipe)(e,c.U(g.nL.mapper((({currentLens:e,alertSource:t})=>i.some({currentLens:e,alertSource:t})))),(0,y.SW)(n),u.w(l.b2.rafScheduler),d.h((e=>0!==e)),p.b((e=>t.moveCardsBy(e,"freezeActiveCardOnCardsListUpdate"))));return{id:"freezeActiveCardOnCardsListUpdate",when:o.R.isWithAlertsId,what:g.nL.Effect.Applicator.create(h.T(h.T(a).pipe(m.c(f.C))))}}},71841:(e,t,n)=>{n.d(t,{i$:()=>h,YA:()=>m});var r=n(57050),i=n(40327),o=n(5114),a=n(98403),s=n(55935),l=n(93508),c=n(19751),u=n(35416),d=n(74238),p=n(14990);const h=e=>a.Hl(e.scrollTop.pipe(s.T(1)),100,!0).pipe(l.O(!1),c.d({bufferSize:1,refCount:!0})),m=(e,t)=>{const n=new p.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(u.nL.getLens).get(),o.chain((({items:e,cardsHeight:t})=>(0,i.pipe)(e.getAt(0),o.map((e=>{const i=(0,r.flow)(d.L.AbsTop.ISO.wrap,n.converters.absTopToViewportTop,n.converters.viewportToWindow)(e.positionState.absTop);return{top:i,bottom:d.r.FromWindowTop.ISO.modify(d.L.concatC(t))(i)}}))))))}},35607:(e,t,n)=>{n.d(t,{o:()=>g});var r=n(40327),i=n(38983),o=n(95195),a=n(8125),s=n(81531),l=n(32952),c=n(44586),u=n(43743),d=n(16118),p=n(77176),h=n(93508),m=n(2834),f=n(74238);class g{constructor(e){this._validateOffset=e,this._log=s.Monitoring.Logging.getLogger("CardsListScrollManager"),this.scrollTop=i.h.create(0),this.paddingTop=i.h.create(0),this.viewport=i.h.create({top:f.r.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new l.xQ,this.moveCardsBy=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),this.scrollOffset.next(e),o.right(void 0)),this.moveCardsByAnimated=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),c.y.create((t=>(0,r.pipe)(this._validateOffset(e,this),o.fold((e=>(t.thrownError(e),a.ZT)),(()=>{const n=2*this.viewport.get().height,r=Math.abs(e)>n?(e>0?1:-1)*n:e,i=e-r,o=u.f.createAnimationObservable(0,r,200).pipe(d.G(),p.U((([e,t])=>t-e)),h.O(i),m.b((e=>this.scrollOffset.next(e)))).subscribe({error:e=>t.error(e),complete:()=>t.complete()});return()=>o.unsubscribe()}))))))}}},74238:(e,t,n)=>{n.d(t,{r:()=>r,L:()=>i});var r,i,o=n(73975),a=n(50479),s=n(64681);!function(e){let t;!function(e){e.ISO=(0,s.k4)()}(t=e.FromWindowTop||(e.FromWindowTop={}))}(r||(r={})),function(e){let t,n,r;!function(e){e.ISO=(0,s.k4)(),e.equals=(0,s.Eh)(o.eqNumber).equals}(t=e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=(0,s.k4)()}(n=e.AbsTop||(e.AbsTop={})),function(e){e.ISO=(0,s.k4)()}(r=e.CardTop||(e.CardTop={})),e.concatC=e=>t=>e+t;const i=e=>new a.aD(e);e.converters=function(t,n,r){const o=i(e.concatC(r)).get,a=i(e.concatC(-t)).get;return{windowToViewport:i(e.concatC(-n)).get,viewportToWindow:i(e.concatC(n)).get,cardTopToViewport:a,viewportToCardTop:i(e.concatC(t)).get,absTopToViewportTop:e=>a(o(e)),absTopToCardTop:o}}}(i||(i={}))},14990:(e,t,n)=>{n.d(t,{Db:()=>i});var r,i,o,a=n(73975),s=n(74238);!function(e){e.above="above",e.below="below",e.hidden="hidden"}(r||(r={})),function(e){e.Impl=class{constructor(e,t,n){this.scrollTop=e,this.viewport=t,this.converters=s.L.converters(e,s.r.FromWindowTop.ISO.unwrap(t.top),n)}}}(i||(i={})),function(e){const t=(0,a.getStructEq)({top:a.eqNumber,height:a.eqNumber});e.eqDimensionsTuple=(0,a.getTupleEq)(t,t)}(o||(o={}))},99116:(e,t,n)=>{if(n.d(t,{Bk:()=>E,v_:()=>I,SW:()=>k,Sd:()=>A,nM:()=>x,GC:()=>T}),75==n.j)var r=n(17771);if(75==n.j)var i=n(29909);var o=n(57050),a=n(40327),s=n(83078),l=n(5114),c=n(73975),u=n(89943),d=n(95983),p=n(77176);if(75==n.j)var h=n(16118);var m=n(85985),f=n(28043),g=n(66310),y=n(98403),v=n(2844),b=n(16892),w=n(35416),_=n(93494),C=n(74238);const E=e=>t=>t.isCardsHeightValid&&(0,a.pipe)(w.In.getActiveItem(t),s.forAll((t=>!e.isScheduledToDispose(t)))),S=e=>t=>t.isCardsHeightValid&&(0,a.pipe)(w.In.getActiveItem(t),s.forAll((t=>!e.isScheduledToDispose(t))));function I({cardTop:e,cardHeight:t,viewportHeight:n,padding:r}){const i=C.L.FromViewportTop.ISO.unwrap(e),o=i+t;return t>n?i:i<0?t+r.before<n?i-r.before:i:o>n?t+r.after<n?o-n+r.after:o-n:i<r.before?t+r.after+r.before<n?i-r.before:t+r.after<n?i-r.after:r.before:n-o<r.after&&t+r.after<n?r.after-(n-o):0}const k=e=>t=>t.pipe(A(e),p.U(l.map((e=>e.currentLens))),h.G(),m.h((([e,t])=>(0,a.pipe)((0,o.tuple)(e,t),(0,o.tupled)(s.map2(((e,t)=>e.id===t.id&&(0,a.pipe)((0,o.tuple)(w.In.getActiveItem(e),e.cardIndex,w.In.getActiveItem(t),t.cardIndex),(0,o.tupled)(r.g(l.option)),l.map((([e,t,n,r])=>e.id===n.id&&t!==r)))))),l.getOrElse((()=>!1))))),p.U((0,o.flow)(i.Pd(l.chain(w.In.getActiveItem),l.chain(w.In.getActiveItem)),(0,o.tupled)(s.map2(((e,t)=>t.positionState.absTop-e.positionState.absTop))),l.getOrElse((()=>0))))),A=e=>t=>t.pipe(p.U(l.filter((({currentLens:t})=>S(e)(t))))),x=e=>(t,n,r,i,o)=>{const s=(e=>l.getEq(c.fromEquals(((t,n)=>{const r=w.In.getActiveItem(t),i=w.In.getActiveItem(n);return l.getEq(e.visualStateEq).equals(r,i)&&t.items.size===n.items.size&&u.compareInPairs(t.items.keys(),n.items.keys(),((e,t)=>e===t))}))))(e);return t.pipe(p.U(l.map((e=>e.currentLens.id))),f.x(c.eqStrict.equals),p.U(l.isSome),g.w(y.Ft(v.aj(n,r,i,A(e)(t).pipe(p.U(l.map((e=>e.currentLens))),f.x(s.equals),g.w(o))))),m.h((([t,n,r,i])=>(0,a.pipe)(i,l.exists(S(e))))),p.U((([e,t,n])=>({viewport:e,scrollTop:t,paddingTop:n}))))},T=({cardsBeyondViewport:e,cardsAroundActive:t,changePosition:n})=>({viewport:r,scrollTop:i,paddingTop:c,completeTransition:u})=>p=>{const h=p.currentLens,m=((e,t,n,r)=>e.size<2||Math.floor(t.height/Math.min(s.unsafeGet(e.getAt(0)).positionState.height,s.unsafeGet(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:{from:Math.max(0,d.aW.lowerBound(e,(e=>e.positionState.absTop+e.positionState.height<n))-r),to:Math.min(e.size,d.aW.lowerBound(e,(e=>e.positionState.absTop<n+t.height))+r)})(h.items,r,i-c,e);let f=!1;const g=h.items.map(((e,r,i)=>{const s=(0,o.flow)((c=n,d=e.positionState.watched||(e=>m.from<=e&&m.to>e||(0,a.pipe)(h.cardIndex,l.exists((n=>e>=n-t&&e<=n+t))))(i),e=>e.positionState.visible!==d?c.changePosition(b.s.PositionState.changeVisible(e.positionState,d))(e):e),(e=>t=>!t.positionState.visible&&t.positionState.animationInProgress?e.changePosition(b.s.PositionState.changeAnimationInProgress(t.positionState,!1))(t):t)(n),u)(e);var c,d;return s!==e?(f=!0,s):e}));return f?w.nL.Prism.getLens().compose(_.v.Prism.items).set(g,p):p}},34383:(e,t,n)=>{n.d(t,{D:()=>r,T:()=>i});var r,i,o=n(17889),a=n(40327),s=n(43675),l=n(45701),c=n(73975),u=n(5114),d=n(40018),p=n(86718);!function(e){e.empty=()=>new Map,e.diff=function(e,t){return s.symmetricDiff(i.eq)(e,t)}}(r||(r={})),function(e){let t,n,r;e.ordAlert=l.fromCompare(((e,t)=>d.bZ.isTakeaway(e)&&d.bZ.isTakeaway(t)?d.h$.ord.compare(e,t):d.bZ.isTakeaway(e)?-1:d.bZ.isTakeaway(t)?1:d.h$.ord.compare(e,t))),function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),function(e){e.eq=c.getStructEq({title:c.eqString,miniTitle:u.getEq(c.eqString),miniLabel:u.getEq(c.eqString),alertIds:o.Eh(c.eqString)})}(n=e.AlertsView||(e.AlertsView={})),function(e){e.eq=c.getStructEq({title:c.eqString,miniTitle:u.getEq(c.eqString),miniLabel:u.getEq(c.eqString),checked:c.eqBoolean,card:p.f.eq})}(r=e.EmptyView||(e.EmptyView={})),e.eq=c.getStructEq({id:c.eqString,rank:c.eqNumber,suggestionsView:u.getEq(n.eq),successView:u.getEq(n.eq),emptyView:r.eq}),e.hasAlerts=function(e){return u.isSome(e.suggestionsView)||u.isSome(e.successView)},e.removeAlerts=function(e,t){return Object.assign(Object.assign({},e),{suggestionsView:(0,a.pipe)(e.suggestionsView,u.chain((e=>(0,a.pipe)(o.nI(e.alertIds.filter((e=>!t.has(e)))),u.map((t=>Object.assign(Object.assign({},e),{alertIds:t}))))))),successView:(0,a.pipe)(e.successView,u.chain((e=>(0,a.pipe)(o.nI(e.alertIds.filter((e=>!t.has(e)))),u.map((t=>Object.assign(Object.assign({},e),{alertIds:t})))))))})}}(i||(i={}))},33806:(e,t,n)=>{n.d(t,{c:()=>i,E:()=>o});var r=n(86775);class i{constructor(e,t,n,r,i,o){this._checklistItemFactory=e,this._checklistItems=t,this._alertsReader=n,this._lensPredicate=r,this._inner=i,this._itemEq=o}create(e,t,n,i){return this._lensPredicate(t)?r.G.create(this._checklistItemFactory,this._checklistItems.get(),this._alertsReader,e,t,this._itemEq):this._inner.create(e,t,n,i)}}const o=(e,t,n,i,o,a)=>s=>i(s)?r.G.getAlertsHandler(e,t,n,a):o(s)},86775:(e,t,n)=>{n.d(t,{G:()=>r});var r,i=n(17889),o=n(57050),a=n(40327),s=n(5114),l=n(71249),c=n(83078),u=n(95195),d=n(92843),p=n(40018),h=n(77610),m=n(16892),f=n(48521),g=n(15215),y=n(70100),v=n(35416),b=n(93494),w=n(95983),_=n(93508),C=n(16118),E=n(77176),S=n(85985),I=n(34383);!function(e){function t(e,t){return`${e}_${t}`}function n(e,t,n){return g.d.isChecklistItemEmpty(t)?y.X.changePositionState(n)(t):e.changePositionState(n)(t)}function r(e,n,r,i){const o=t(n,r.id),a={rank:r.rank,checked:r.emptyView.checked,title:r.emptyView.title,miniTitle:r.emptyView.miniTitle,miniLabel:r.emptyView.miniLabel,miniChecked:s.none};return i?e.createFocusedDefault(n,o,a,r.emptyView.card):e.createRenderedDefault(n,o,a,r.emptyView.card)}function k(e,n,r,o,u,d){return(0,a.pipe)(o.suggestionsView,s.chain((c=>(0,a.pipe)(c.alertIds.map(n),l.compact,i.nI,s.map((n=>function(e,n,r,i,o,l,c){const u=t(n,r),d={id:u,title:i.title};return(0,a.pipe)(l,s.map((e=>o.findIndex((t=>t.id===e)))),s.filter((e=>e>-1)),s.fold((()=>c?e.createFocusedBundle(n,u,i,d,o,s.none):e.createRenderedBundle(n,u,i,d,o)),(t=>e.createFocusedBundle(n,u,i,d,o,s.some(t)))))}(e,r,o.id,{rank:o.rank,checked:!1,miniChecked:s.none,title:c.title,miniTitle:c.miniTitle,miniLabel:c.miniLabel},n,u,d)))))),s.alt((()=>(0,a.pipe)(o.successView,s.chain((i=>{const p=(0,a.pipe)(u,s.filter((e=>i.alertIds.includes(e))),s.chain(n));return(0,a.pipe)(p,c.orElse((0,a.pipe)(i.alertIds.map(n),l.compact,l.head)),s.map((n=>function(e,n,r,i,o,l){const c=t(n,r);return(0,a.pipe)(l,s.filter((e=>e===o.id)),s.fold((()=>e.createRenderedSingle(n,c,i,o)),(t=>e.createFocusedSingle(n,c,i,o))))}(e,r,o.id,{rank:o.rank,checked:!0,miniChecked:s.none,title:i.title,miniTitle:i.miniTitle,miniLabel:i.miniLabel},n,d?s.some(n.id):u))))}))))))}function A(e,t,n){return e.updateMeta(Object.assign(Object.assign({},t.itemMeta),{miniChecked:s.some(n.emptyView.checked),miniTitle:(0,a.pipe)(n.emptyView.miniTitle,c.orElse(s.some(n.emptyView.title))),miniLabel:n.emptyView.miniLabel}))(t)}function x(e,t,n,r,i,l,c){if(i.every((e=>!h.C.hasAlert(e.id)(n)))||h.C.willBeDisposed(n,n.removedAlertsIds))return n;const u=I.T.removeAlerts(r,new Set(i.map((e=>e.id)).concat(Array.from(n.removedAlertsIds)))),d=h.C.willBeDisposed(n,new Set(i.map((e=>e.id)))),m=d&&!I.T.hasAlerts(u),f=(0,a.pipe)(l,s.exists((e=>e.id===n.id)));if(!d||m){const t=(0,a.pipe)(m?A(e,n,r):n,e.removeAlerts(i,(0,a.pipe)(l,s.map((e=>c.itemsOrd.compare(n,e)>0)),s.getOrElse(o.constTrue))));return!!i.find((e=>e.id===n.activeAlert.id))?e.selectNextAlert(c.itemsOrd)(t):t}return(0,a.pipe)(k(e,(0,o.flow)(t.getRegistered,s.filter(p.bZ.isApplicableAlert)),c.id,r,(0,a.pipe)(l,s.filter((e=>e.id===n.id)),s.map((e=>e.activeAlert.id))),f),s.map((t=>f?t:e.changePositionState(n.positionState)(t))),s.getOrElse((()=>n)))}e.create=function(e,t,n,i,l,c){const u=w.aW.create(Array.from(t.values()).map((t=>(0,a.pipe)(k(e,(0,o.flow)(n.getRegistered,s.filter(p.bZ.isApplicableAlert)),i,t,s.none,!1),s.getOrElse((()=>r(e,i,t,!1)))))),(e=>e.id),g.d.ord.compare);return{id:i,type:v.Nm.lensview,kind:v._L.persistent,meta:l,withPriorityList:!1,cardIndex:s.none,items:u,itemsOrd:g.d.ord,animation:v.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return b.v.lensHash.hashCode(this)},equals(e){return b.v.getEq(c).equals(this,e)}}};const T=(e,n,r)=>i=>o=>{if(0===i.length)return o;const s=v.In.getActiveItem(o),l=n.reduce(((n,l)=>(0,a.pipe)(n.update(t(o.id,l.id),(t=>g.d.isChecklistItemWithAlerts(t)?x(e,r,t,l,i,s,o):t)),u.getOrElse((()=>n)))),o.items);return Object.assign(Object.assign({},o),{items:l,animation:v.wj.force})};function O(e,t,i,l,c,u,d){if(g.d.isChecklistItemWithAlerts(i)&&h.C.willBeDisposed(i,i.removedAlertsIds))return i;const p=(0,a.pipe)(c,s.exists((e=>e.id===i.id)));return(0,a.pipe)(k(e,d,t.id,l,u,p),s.alt((()=>p&&g.d.isChecklistItemWithAlerts(i)?s.none:s.some(r(e,t.id,l,p)))),s.map((t=>n(e,t,p?m.s.PositionState.invalidateHeight(i.positionState):i.positionState))),s.map((t=>{return function(e,t,n){return g.d.isChecklistItemEmpty(t)?y.X.changeVisualState(n)(t):e.changeVisualState(n)(t)}(e,t,(n=i,r=t,g.d.isChecklistItemEmpty(n)&&g.d.isChecklistItemEmpty(r)||g.d.isChecklistItemWithAlerts(n)&&g.d.isChecklistItemWithAlerts(r)&&n.viewKind===r.viewKind||!p?i.visualState:f.o.VisualState.initial({type:"focused",clockwise:!0},!0)));var n,r})),s.getOrElse((()=>g.d.isChecklistItemWithAlerts(i)?e.removeAlerts(i.alerts,(0,a.pipe)(c,s.map((e=>t.itemsOrd.compare(i,e)>0)),s.getOrElse(o.constTrue)))(A(e,i,l)):i)))}e.getAlertsHandler=function(e,n,r,i){return(s,c)=>d=>{const m=b.v.ApplyDiff.applyWithFilter(c,b.v.ApplyDiff.apply);return(0,a.pipe)(d,m(s,(()=>o.identity),((e,n,r,i)=>o=>s=>{if(0===o.length)return s;const{left:c,right:d}=(0,a.pipe)(o,b.v.filterAlertInLens(s,i),l.partition(p.bZ.isRegistered)),m=T(e,n,r)(c)(s),f=n.reduce(((n,r)=>(0,a.pipe)(n.update(t(s.id,r.id),(t=>g.d.isChecklistItemWithAlerts(t)?e.updateWith(d.filter((e=>h.C.hasAlert(e.id)(t))))(t):t)),u.getOrElse((()=>n)))),m.items);return Object.assign(Object.assign({},m),{items:f,animation:v.wj.force})})(e,Array.from(n.get().values()),r,i),T(e,Array.from(n.get().values()),r)))}},e.getChecklistHandlerSideEffect=(e,n,i,l,c)=>{const h=n.pipe(_.O(I.D.empty()),C.G(),E.U((([e,t])=>({entries:t,latestChangeDiff:I.D.diff(e,t)}))),S.h((e=>!d.v.isEmpty(e.latestChangeDiff))),E.U((n=>c=>{const h=c.currentLens,m=v.In.getActiveItem(h),f=(0,a.pipe)(l(h),s.map((e=>e.activeAlert.id))),y=(0,o.flow)(i.getRegistered,s.filter(p.bZ.isApplicableAlert)),b=(0,a.pipe)(n.latestChangeDiff,d.v.reduce(h.items,((e,n,r)=>e.has(t(h.id,r))?e.remove(t(h.id,r)):e),((n,r,i)=>(0,a.pipe)(n.update(t(h.id,i.id),(t=>g.d.isChecklistItem(t)?O(e,h,t,i,m,f,y):t)),u.getOrElse((()=>n)))),((t,n)=>(0,a.pipe)(k(e,y,h.id,n,f,!1),s.getOrElse((()=>r(e,h.id,n,!1))),(e=>t.add(e))))));return v.nL.Prism.getLens().modify((e=>Object.assign(Object.assign({},e),{items:b,cardIndex:(0,a.pipe)(m,s.chain((e=>b.get(e.id))),s.map((e=>e.index))),animation:v.wj.force})),c)})));return{id:"checklistHandlerSideEffect",when:c,what:v.nL.Effect.Applicator.create(h)}},e.getHasAlertsQuery=function(e,t,n){return b.v.WithBundles.getHasAlerts(e,t,n)},e.getItemReleaser=(e,i,l,c)=>({removeItemById:u=>d=>{const h=(0,a.pipe)(d.items.get(u),s.map((e=>e.value)),s.chain(s.fromPredicate(g.d.isChecklistItemWithAlerts)));if(s.isNone(h))return c?c.removeItemById(u)(d):d;const y=v.In.getActiveItem(d),b=(0,a.pipe)(y,s.exists((e=>e.id===u))),w=(0,o.flow)(l.getRegistered,s.filter(p.bZ.isApplicableAlert)),_=(0,a.pipe)(h,s.fold((()=>d.items),(l=>(0,a.pipe)(d.items.remove(u),(c=>(0,a.pipe)(s.fromNullable(Array.from(i.get().values()).find((e=>t(d.id,e.id)===l.id))),s.map((t=>c.add((0,o.unsafeCoerce)((0,a.pipe)(k(e,w,d.id,t,s.none,b),s.map((t=>b?e.changeVisualState(f.o.VisualState.initial({type:"focused",clockwise:!0},!0))(t):t)),s.getOrElse((()=>r(e,d.id,t,!1))),(t=>n(e,t,b?m.s.PositionState.invalidateHeight(l.positionState):l.positionState))))))),s.getOrElse((()=>c)))))))),C=(0,a.pipe)(y,s.exists((e=>e.id===u&&(0,a.pipe)(_.get(u),s.fold(o.constTrue,(({value:e})=>g.d.isChecklistItemEmpty(e)))))));return Object.assign(Object.assign({},d),{cardIndex:C?s.none:d.cardIndex,animation:b?v.wj.force:v.wj.proceed,items:_})}}),e.getRemoveAlert=(e,n,r)=>({removeAlertFromItem:(i,o)=>l=>{const c=new Set(i.map((e=>e.id)));return(0,a.pipe)(s.fromPredicate(g.d.isChecklistItemWithAlerts)(l),s.filter(h.C.hasAnyOfAlerts(c)),s.chain((e=>s.fromNullable(Array.from(n.get().values()).find((n=>t(o.id,n.id)===e.id))))),s.map((t=>x(e,r,l,t,i,v.In.getActiveItem(o),o))),s.getOrElse((()=>l)))}})}(r||(r={}))},48521:(e,t,n)=>{n.d(t,{o:()=>r});var r,i=n(40966);!function(e){function t(e){return"visualState"in e}e.Transition=i.u,e.VisualState=i.t,e.eq={equals:(n,r)=>!t(n)||t(r)&&e.VisualState.eq.equals(n.visualState,r.visualState)},e.isAnimatable=t,e.isFocused=e=>{switch(e.visualState.transition.type){case"expanded":case"focused":case"presuccess":case"success":case"feedback_form":return!0;default:return!1}},e.isHidden=e=>"hidden"===e.visualState.transition.type}(r||(r={}))},86718:(e,t,n)=>{n.d(t,{t:()=>r,f:()=>i});var r,i,o=n(22690),a=n(73975),s=n(5114),l=n(45701),c=n(22232),u=n(36156);!function(e){e.eq=a.getStructEq({rank:a.eqNumber,checked:a.eqBoolean,title:a.eqString,miniTitle:s.getEq(a.eqString),miniChecked:s.getEq(a.eqBoolean),miniLabel:s.getEq(a.eqString)}),e.hash=e=>(0,u.NO)({rank:e.rank,title:e.title,miniTitle:h.show(e.miniTitle),miniChecked:f.show(e.miniChecked),miniLabel:p.show(e.miniLabel),checked:e.checked}),e.ord=l.contramap((e=>e.rank))(l.ordNumber)}(r||(r={})),function(e){let t;!function(e){e.simple="simple",e.textLength="textLength"}(t=e.Kind||(e.Kind={})),e.eqSimple=a.getStructEq({explanation:a.eqString,details:s.getEq(a.eqString)}),e.eqTextLength=a.getStructEq({explanation:a.eqString,details:s.getEq(a.eqString),wordCount:a.eqNumber}),e.hashSimple=e=>(0,u.NO)({kind:e.kind,explanation:e.explanation,details:m.show(e.details)}),e.hashTextLength=e=>(0,u.NO)({kind:e.kind,explanation:e.explanation,details:m.show(e.details),wordCount:e.wordCount}),e.isTextLengthCard=function(t){return t.kind===e.Kind.textLength},e.eq=a.fromEquals(((t,n)=>{switch(t.kind){case e.Kind.simple:return n.kind===e.Kind.simple&&e.eqSimple.equals(t,n);case e.Kind.textLength:return n.kind===e.Kind.textLength&&e.eqTextLength.equals(t,n);default:(0,c.vE)(t)}})),e.hash=t=>{switch(t.kind){case e.Kind.simple:return e.hashSimple(t);case e.Kind.textLength:return e.hashTextLength(t);default:(0,c.vE)(t)}}}(i||(i={}));const d=s.getShow(o._3),p=d,h=d,m=d,f=s.getShow(o.R)},70100:(e,t,n)=>{n.d(t,{X:()=>r});var r,i=n(40327),o=n(73975),a=n(5114),s=n(83078),l=n(69345),c=n(40966),u=n(36156),d=n(48521),p=n(86718);!function(e){function t(t,n,r,i,o,a){return{kind:e.kind,id:t,itemMeta:n,cardMeta:r,positionState:i,visualState:o,renderOptions:a,equals(t){return e.eq.equals(this,t)},hashCode(){return e.hash(this)}}}e.kind="ChecklistItemEmpty",e.eq=o.fromEquals(((e,t)=>e.id===t.id&&p.f.eq.equals(e.cardMeta,t.cardMeta)&&p.t.eq.equals(e.itemMeta,t.itemMeta)&&l.Z.eq.equals(e.positionState,t.positionState)&&c.t.eq.equals(e.visualState,t.visualState))),e.hash=e=>(0,u.NO)({id:e.id,checklistItemMeta:p.t.hash(e.itemMeta),card:p.f.hash(e.cardMeta)}),e.create=t,e.updateMeta=e=>n=>t(n.id,e,n.cardMeta,n.positionState,n.visualState,n.renderOptions),e.updateCardMeta=e=>n=>t(n.id,n.itemMeta,e,n.positionState,n.visualState,n.renderOptions),e.changeVisualState=e=>n=>t(n.id,n.itemMeta,n.cardMeta,n.positionState,e,n.renderOptions),e.changePositionState=e=>n=>t(n.id,n.itemMeta,n.cardMeta,e,n.visualState,n.renderOptions),e.completeTransition=e=>n=>t(n.id,n.itemMeta,n.cardMeta,n.positionState,c.t.complete(n.visualState,e),n.renderOptions),e.transitionTo=e=>n=>t(n.id,n.itemMeta,n.cardMeta,n.positionState,c.t.to(n.visualState,e),n.renderOptions),e.select=e=>n=>(0,i.pipe)(e,a.filter((e=>e.id===n.id)),s.orElse((0,i.pipe)(n,a.fromPredicate((e=>"focused"===e.visualState.transition.type)))),a.fold((()=>{const r=l.Z.invalidateHeight(n.positionState),o={type:"focused",clockwise:!0},s=(0,i.pipe)(e,a.fold((()=>c.t.initial(o)),(()=>c.t.to(n.visualState,o))));return t(n.id,n.itemMeta,n.cardMeta,r,s,n.renderOptions)}),(()=>n))),e.unselect=e=>n=>(0,i.pipe)(e,a.filter((e=>e.id===n.id)),s.orElse((0,i.pipe)(n,a.fromPredicate((e=>"rendered"===e.visualState.transition.type)))),a.fold((()=>{const e=l.Z.invalidateHeight(n.positionState),r=d.o.isHidden(n)?n.visualState:c.t.to(n.visualState,{type:"rendered",clockwise:!0});return t(n.id,n.itemMeta,n.cardMeta,e,r,n.renderOptions)}),(()=>n)))}(r||(r={}))},11245:(e,t,n)=>{n.d(t,{U:()=>w});var r=n(17889),i=n(40327),o=n(5114),a=n(22232),s=n(40018),l=n(17594),c=n(26027),u=n(55567),d=n(91549),p=n(20594),h=n(48521),m=n(77610),f=n(69345),g=n(40966),y=n(76974),v=n(70100),b=n(47306);function w(e,t,n,b){const w=p.Mq.getCardSelections(t),E=e=>t=>Object.assign(Object.assign({},t),{positionState:e}),S=e=>t=>Object.assign(Object.assign({},t),{visualState:e}),I=p.Mq.getTransitionTo(S,E),k=(e,t,r)=>i=>{const o=m.C.getAlertByIndex(r,e),a=l.$.isApplicableAlert(o)?p.Mq.getApplicableCardMeta(o,i.visualState,n):u.n.empty(void 0);return Object.assign(Object.assign({},i),{meta:a,alerts:e,activeAlert:o,removedAlertsIds:t,activeAlertIndex:r})},A=e=>t=>Object.assign(Object.assign({},t),{cachedTransform:e,transform:(0,i.pipe)(e,o.map((e=>e.labels)))}),x=t=>p.Mq.getCardHydrator((e=>e.cachedTransform),c.X.canHydrate,A,e)(t),T=p.Mq.getSelect(k,(e=>t=>Object.assign(Object.assign({},t),{userInput:e})),S,E,(e=>t=>Object.assign(Object.assign({},t),{meta:e})),x,t,n),O=p.Mq.getSelectFirstAlert(T),R=p.Mq.getSelectNextAlert(p.Mq.getCardSelections(t),T),N=p.Mq.getUnselect(S,E),L=p.Mq.getRemove(k,I),P=p.Mq.getChangeVisualState(S,x),M=e=>p.Mq.getCreate(C(e),o.none,P,(()=>y.of(o.none)),n),D=(e,t)=>p.Mq.getCreate(_(e,t),o.none,P,(()=>y.of(o.none)),n),F=(e,t,r,a,s)=>{const l=v.X.create(e,t,r,f.Z.empty,g.t.initial({type:"rendered",clockwise:!0},!1),p.IG.toCardRenderOptions(n,a,y.of(o.none)));return(0,i.pipe)(s,o.fold((()=>l),(e=>v.X.changeVisualState(e)(l))))};return Object.assign({changePositionState:E,changeVisualState:S,completeTransition:e=>t=>S(h.o.VisualState.complete(t.visualState,e))(t),transitionTo:I,selectByAlert:T,selectFirstAlert:O,selectNextAlert:R,unselect:N,removeAlerts:L,updateWith:e=>t=>{(0,a.kG)(e.every((e=>s.bZ.isRegistered(e))),"cannot add non registered alerts");const n=new Set(e.map((e=>e.id))),r=new Set(t.removedAlertsIds);n.forEach((e=>{r.delete(e)}));const o=t.alerts.filter((e=>!n.has(e.id))).concat(e.map(l.$.fromModel)).sort(b.compare);return(0,i.pipe)(t,k(o,r,m.C.getIndexByAlert(t.activeAlert.id,o)),x)},updateMeta:e=>t=>Object.assign(Object.assign({},t),{itemMeta:e}),createDefault:F,createWithAlerts:(e,t,n,r,o,a,s,l)=>(0,i.pipe)(l?D(t,d.R.getAlertOutcomeBundle(n[0])):M(t),(t=>t(e,n,r,0,o,a,s,b))),createRenderedDefault:(e,t,n,r)=>F(t,n,r,e,o.some(g.t.initial({type:"rendered",clockwise:!0},!1))),createRenderedSingle:(e,t,r,i)=>{const a=h.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return M(r)(t,[i],0,0,p.Mq.getApplicableCardMeta(i,a,n),e,o.some(a),b)},createRenderedBundle:(e,t,r,i,a)=>{const s=h.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return D(r,i)(t,a,0,0,p.Mq.getApplicableCardMeta(a[0],s,n),e,o.some(s),b)},createFocusedDefault:(e,t,n,r)=>F(t,n,r,e,o.some(g.t.initial({type:"focused",clockwise:!0},!0))),createFocusedSingle:(e,t,r,i)=>{const a=h.o.VisualState.initial({type:"focused",clockwise:!0},!0);return M(r)(t,[i],0,0,p.Mq.getApplicableCardMeta(i,a,n),e,o.some(a),b)},createFocusedBundle:(e,t,a,s,l,c)=>(0,i.pipe)(c,o.fold((()=>(0,i.pipe)(l,r.DY(b),(e=>({alerts:e,activeAlertIdx:0})))),(e=>({alerts:l,activeAlertIdx:e}))),(r=>{const i=h.o.VisualState.initial({type:"focused",clockwise:!0},!0);return D(a,s)(t,r.alerts,r.activeAlertIdx,0,p.Mq.getApplicableCardMeta(r.alerts[r.activeAlertIdx],i,n),e,o.some(i),b)}))},w)}const _=(e,t)=>(n,r)=>Object.assign(Object.assign({},E("bundle",e,n,r)),{bundleInfo:t,viewKind:"bundle"}),C=e=>(t,n)=>Object.assign(Object.assign({},E("single",e,t,n)),{viewKind:"single"}),E=(e,t,n,r)=>{const i=new u.n.Impl(r.meta.percentile,r.meta.explanation,r.meta.checking,r.meta.ranges,r.meta.showMuteQuotedAdvice);return b.J.create(n,e,t,r.alerts,r.activeAlertIndex,r.activeHighlightIndex,r.positionState,r.visualState,i,r.lensId,r.renderOptions,r.muteCategory,r.order,r.initialAlertId,r.removedAlertsIds,r.cachedTransform,r.userInput,r.synfonySelection)}},47306:(e,t,n)=>{n.d(t,{J:()=>r});var r,i=n(40327),o=n(73975),a=n(22232),s=n(5114),l=n(26027),c=n(36156),u=n(86718);!function(e){e.kind="ChecklistItemWithAlerts",e.eq=o.fromEquals(((e,t)=>l.X.eq.equals(e,t)&&u.t.eq.equals(e.itemMeta,t.itemMeta)&&e.viewKind===t.viewKind)),e.isBundle=function(e){return"bundle"===e.viewKind},e.isSingle=function(e){return"single"===e.viewKind},e.create=function(t,n,r,o,d,p,h,m,f,g,y,v,b,w,_,C,E,S){const I=o[d];return(0,a.kG)(!!I,"Active alert index should point to an alert"),{kind:e.kind,id:t,viewKind:n,itemMeta:r,alerts:o,activeAlertIndex:d,activeHighlightIndex:p,positionState:h,visualState:m,meta:f,lensId:g,renderOptions:y,muteCategory:v,order:b,initialAlertId:w,removedAlertsIds:_,cachedTransform:C,userInput:E,synfonySelection:S,activeAlert:I,transform:(0,i.pipe)(C,s.map((e=>e.labels))),activeAlertRemoved:_.has(I.id),hashCode(){return(0,c.NO)({alertCard:l.X.hashCode(this),itemMeta:u.t.hash(r),viewKind:n})},equals(t){return e.eq.equals(this,t)}}}}(r||(r={}))},15215:(e,t,n)=>{n.d(t,{d:()=>r});var r,i=n(40327),o=n(45701),a=n(73975),s=n(5114),l=n(86718),c=n(70100),u=n(47306);!function(e){function t(e){return e.kind===c.X.kind}function n(e){return e.kind===u.J.kind}e.ord=o.contramap((e=>e.itemMeta))(l.t.ord),e.eq=a.fromEquals(((e,r)=>t(e)&&t(r)?c.X.eq.equals(e,r):!(!n(e)||!n(r))&&u.J.eq.equals(e,r))),e.isChecklistItemEmpty=t,e.isChecklistItemWithAlerts=n,e.isChecklistItem=function(e){return t(e)||n(e)},e.getAlertsCount=function(e){return(0,i.pipe)(e,s.fromPredicate(n),s.map((e=>e.alerts.length)))}}(r||(r={}))},16892:(e,t,n)=>{n.d(t,{s:()=>r});var r,i=n(73975),o=n(69345);!function(e){e.PositionState=o.Z,e.eqById=i.fromEquals(((e,t)=>e.id===t.id)),e.positionStateEq={equals:(t,n)=>e.PositionState.eq.equals(t.positionState,n.positionState)},e.verticalPositionEq={equals:(t,n)=>e.PositionState.verticalEq.equals(t.positionState,n.positionState)}}(r||(r={}))},69345:(e,t,n)=>{n.d(t,{Z:()=>r});var r,i=n(57050),o=n(73975),a=n(55415);!function(e){e.eq=o.getStructEq({absTop:o.eqNumber,height:o.eqNumber,animationInProgress:o.eqBoolean,visible:o.eqBoolean,isHeightValid:o.eqBoolean,watched:o.eqBoolean}),e.verticalEq=o.getStructEq({absTop:o.eqNumber,height:o.eqNumber}),e.empty={absTop:0,height:0,animationInProgress:!1,visible:!1,isHeightValid:!1,watched:!1},e.create=i.identity,e.dimensionEquals=function(e,t){return e.absTop===t.absTop&&e.height===t.height},e.changeTop=function(e,t){return a.update(e,{absTop:t})},e.changeHeight=function(e,t){return a.update(e,{height:t,isHeightValid:!0})},e.changeAnimationInProgress=function(e,t){return a.update(e,{animationInProgress:t})},e.changeVisible=function(e,t){return a.update(e,{visible:t})},e.invalidateHeight=function(e){return a.update(e,{isHeightValid:!1})},e.changeWatched=function(e,t){return a.update(e,{watched:t})}}(r||(r={}))},4890:(e,t,n)=>{n.d(t,{j:()=>r});var r,i=n(11064),o=n(5114),a=n(22232),s=n(76974);!function(e){let t,n;e.toJSON=function(e){return Object.assign(Object.assign({},e),{isNew:e.isNew._value})},function(e){e.cozy="cozy",e.compact="compact",e.minimal="minimal"}(t=e.Density||(e.Density={})),e.defaultOptions={features:new Set,layoutDensity:t.cozy,isNew:s.of(o.none)},function(e){function t(t,n,r){return i=>{switch(i){case e.cozy:return t();case e.compact:return n();case e.minimal:return r();default:return(0,a.vE)(i)}}}e.match=function(e,n,r){return t(i.of(e),i.of(n),i.of(r))},e.matchL=t,e.matchOrDefault=function(e){return(t,n)=>r=>r===e?t():n()}}(t=e.Density||(e.Density={})),function(e){e.showLabel="showLabel",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels",e.showNewPremiumCardLabels="showNewPremiumCardLabels"}(n=e.Features||(e.Features={}))}(r||(r={}))},40966:(e,t,n)=>{n.d(t,{u:()=>r,t:()=>i});var r,i,o=n(73975),a=n(5114),s=n(22232),l=n(55415);!function(e){let t;e.eq=o.getStructEq({type:o.eqString,clockwise:o.eqBoolean}),t=e.nominal||(e.nominal={})}(r||(r={})),function(e){e.initial=(e,t=!0)=>({from:a.none,transitionId:0,transition:e,incomplete:t}),e.eq=o.getStructEq({from:a.getEq(o.eqStrict),transitionId:o.eqStrict,transition:r.eq,incomplete:o.eqStrict}),e.to=(e,t)=>({from:a.some(e.transition.type),transitionId:e.transitionId+1,transition:t,incomplete:!0}),e.complete=(e,t)=>((0,s.kG)(t===e.transitionId,"unexpected transitionId"),l.update(e,{incomplete:!1}))}(i||(i={}))},77610:(e,t,n)=>{n.d(t,{C:()=>r});var r,i=n(64015),o=n(22690),a=n(5114),s=n(73975),l=n(8125),c=n(22232),u=n(95195),d=n(40018),p=n(17594),h=n(36156),m=n(69345),f=n(40966);!function(e){let t;function n(e){return e.activeAlert.type===p.$.Type.super}function r(e){return e.activeAlert.type===p.$.Type.smartPhrases}function g(e){return p.$.isTakeaway(e.activeAlert)}function y(e){return e.activeAlert.type===p.$.Type.sentenceLevelBrandTones}function v(e){return e.activeAlert.alertType===d.bZ.Type.Synfony}function b(e){return p.$.isShortenIt(e.activeAlert)}function w(e){return e.activeAlert.type===p.$.Type.default}!function(e){e.show=a.getShow(o._3)}(t=e.UserInput||(e.UserInput={})),e.hashCode=e=>(0,h.NO)({id:e.id,activeAlertId:e.activeAlert.id,metaHashCode:e.meta.hashCode(),alertsCount:e.alerts.length,removedAlertsIdsCount:e.removedAlertsIds.size,activeHighlightIndex:e.activeHighlightIndex,userInput:t.show.show(e.userInput),takeawayAlertsHashCode:e.alerts.reduce(((e,t)=>p.$.isTakeaway(t)?31*e+d.UC.calculateHashCode(t):e),0),shortenItAlertsHashCode:e.alerts.reduce(((e,t)=>p.$.isShortenIt(t)?31*e+d.Np.calculateHashCode(t):e),0),smartPhrasesAlertHashCode:p.$.isSmartPhrases(e.activeAlert)?d.Xi.calculateHashCode(e.activeAlert):void 0,sentenceLevelBrandTonesAlertHashCode:p.$.isSentenceLevelBrandTones(e.activeAlert)?d.iL.calculateHashCode(e.activeAlert):void 0}),e.eq=s.fromEquals(((e,t)=>e.hashCode()===t.hashCode()&&m.Z.eq.equals(e.positionState,t.positionState)&&f.t.eq.equals(e.visualState,t.visualState)&&e.meta.equals(t.meta)&&i.Eh(p.$.eq).equals(e.alerts,t.alerts)&&(0,l.As)(e.removedAlertsIds,t.removedAlertsIds))),e.hasAlert=e=>t=>void 0!==t.alerts.find((t=>t.id===e)),e.hasAnyOfAlerts=e=>t=>t.alerts.some((t=>e.has(t.id))),e.willBeDisposed=(e,t)=>e.alerts.every((e=>t.has(e.id))),e.activeAlertRemoved=e=>e.removedAlertsIds.has(e.activeAlert.id),e.getAlertByIndex=(e,t)=>{const n=t[e];return(0,c.kG)(!!n,"Active alert index should point to an alert",(()=>JSON.stringify({alerts:t,alertIndex:e}))),n},e.getIndexByAlert=(e,t)=>{const n=t.findIndex((t=>t.id===e));return(0,c.kG)(-1!==n,"Alert must exist"),n},e.getActiveAlert=t=>e.getAlertByIndex(t.activeAlertIndex,t.alerts),e.isSuperItem=n,e.isSmartPhrasesItem=r,e.isTakeawayItem=g,e.isSentenceLevelBrandTonesItem=y,e.isSynfonyItem=v,e.isShortenItItem=b,e.isDefaultItem=w,e.match=function(e){return t=>{if(n(t))return u.right(e.super(t));if(r(t))return u.right(e.smartPhrases(t));if(g(t))return u.right(e.takeaway(t));if(y(t))return u.right(e.sentenceLevelBrandTones(t));if(v(t))return u.right(e.synfony(t));if(b(t))return u.right(e.shortenIt(t));if(w(t))return u.right(e.default(t));const i={lensId:t.activeAlert.lensId,lensType:t.activeAlert.lensType};return u.left(new Error(`Cannot render unknown card type with alert: [${JSON.stringify(i,null,2)}]`))}}}(r||(r={}))},35416:(e,t,n)=>{n.d(t,{h8:()=>r,Nm:()=>i,_L:()=>o,In:()=>a,CX:()=>s,yi:()=>_,nL:()=>C,Zz:()=>E,Tl:()=>S,FS:()=>I,wj:()=>A});var r,i,o,a,s,l=n(35214),c=n(57050),u=n(40327),d=n(20817),p=n(5114),h=n(8125),m=n(22232),f=n(55415),g=n(66896),y=n(40151),v=n(87938),b=n(76974),w=n(36156);!function(e){e.forceText="forceText",e.forceSidebar="forceSidebar"}(r||(r={})),function(e){e.lensview="lensview",e.advanced="advanced",e.plagiarism="plagiarism",e.draftAI="draftAI",e.closed="closed"}(i||(i={})),function(e){e.active="active",e.persistent="persistent",e.abstract="abstract"}(o||(o={})),function(e){function t(e){return(0,u.pipe)(e.cardIndex,p.chain((t=>e.items.getAt(t))))}e.getActiveItem=t,e.getActiveItemOfType=function(e){return(0,c.flow)(t,p.filter(e))}}(a||(a={})),function(e){e.withFilter=e=>t=>(n,r)=>t(n,(0,h.W9)(e,r)),e.compose=function(e){return(t,n)=>(0,l.fold)((0,l.getEndomorphismMonoid)())(e.map((e=>e(t,n))))}}(s||(s={}));const _=e=>"withPriorityList"in e&&e.withPriorityList;class C{constructor(e){this._data=e}static create(e){return new C(e)}get alertSource(){return this._data.alertSource}get switchOrder(){return this._data.switchOrder}get currentLens(){return this._data.currentLens}patch(e){return new C(Object.assign(Object.assign({},this._data),e))}hashCode(){let e=7;return e=31*e+(0,w.AC)(this.alertSource),e=31*e+(0,w.AC)(this.switchOrder),e=31*e+this.currentLens.hashCode(),e}equals(e){return this.alertSource===e.alertSource&&this.switchOrder===e.switchOrder&&this.currentLens.equals(e.currentLens)}}var E;!function(e){function t(e,t,n){return r=>{switch(r.currentLens.kind){case o.active:return e(r);case o.persistent:return t(r);case o.abstract:return n(r);default:return(0,m.vE)(r.currentLens)}}}let n,a,s,l;function h(e){return e.currentLens.kind===o.persistent}function w(e){return g.R.isOutcomeId(e.currentLens.id)||g.R.isMainLens(e.currentLens.id)||e.currentLens.id===g.R.SpecialId.PredictionTakeaways||e.currentLens.id===g.R.SpecialId.PredictionEmogenie}e.withCardLensSnapshot=(e,t)=>n=>{const r=n.currentLens.items.size>50,i=(0,u.pipe)(n.currentLens.cardIndex,p.getOrElse((()=>0))),[o,a]=r?[Math.max(i-25,0),i+25]:[0,50];return{alertSource:n.alertSource,switchOrder:n.switchOrder,lens:{id:n.currentLens.id,card:(0,u.pipe)(t(n.currentLens),p.map(e)),items:n.currentLens.items.values().slice(o,a).map(e),sample:r}}},e.snapshot=(n,r)=>t(e.withCardLensSnapshot(n,r),e.withCardLensSnapshot(n,r),(e=>({alertSource:e.alertSource,switchOrder:e.switchOrder,lens:{id:e.currentLens.id,kind:e.currentLens.kind}}))),e.genericMapper=t,e.mapper=e=>t(e,e,(()=>p.none)),e.getActiveItem=t=>e.mapper((({currentLens:e})=>t(e))),e.getActiveAlertHighlight=t=>(0,c.flow)(e.getActiveItem(t),p.map((e=>({alert:e.activeAlert,highlightIndex:e.activeHighlightIndex})))),e.getActiveAlert=t=>(0,c.flow)(e.getActiveItem(t),p.map((e=>e.activeAlert))),e.getLens=e.mapper((({currentLens:e})=>p.some(e))),function(e){e.mapper=function(e,t){return n=>t[e(n)](n)}}(n=e.Items||(e.Items={})),e.is=function(e){return t=>t.currentLens.id===e},e.isLensview=function(e){return e.currentLens.type===i.lensview},e.isPersistent=h,e.hasCards=function(e){return e.currentLens.kind===o.active||h(e)},e.hasItems=function(e){return e.currentLens.kind===o.active||e.currentLens.kind===o.persistent},e.hasSuccess=w,e.isWithPriorityList=function(e){return w(e)&&_(e.currentLens)},e.isForceSidebar=t=>(e.isLensview(t)||t.currentLens.type===i.plagiarism)&&t.alertSource===r.forceSidebar,e.isSidebarOpened=t=>!e.is(g.R.SpecialId.Closed)(t),function(e){e.defaultFilter=f.pick("alertHighlight")}(a=e.FocusFirstFilter||(e.FocusFirstFilter={})),function(e){e.getLens=()=>d.Ri.create((e=>e.currentLens),((e,t)=>t.patch({currentLens:e}))),e.getLensWithItems=()=>d.Ri.create((e=>e.currentLens),((e,t)=>t.patch({currentLens:e})))}(s=e.Prism||(e.Prism={})),function(e){let t,n,r,i,o,a,s,l;!function(e){e.SwitchLens="SwitchLens",e.SwitchAlert="SwitchAlert",e.Applicator="Applicator",e.ItemsApplicator="ItemsApplicator"}(t=e.Type||(e.Type={})),function(e){let n;e.create=function(e){return{type:t.Applicator,source:e}},function(e){e.identity=e=>e,e.override=e=>()=>e,e.empty=y.E}(n=e.Source||(e.Source={}))}(n=e.Applicator||(e.Applicator={})),function(e){let n;e.create=function(e){return{type:t.ItemsApplicator,source:e}},function(e){e.identity=()=>e=>e,e.override=e=>()=>e,e.empty=y.E}(n=e.Source||(e.Source={}))}(r=e.ItemsApplicator||(e.ItemsApplicator={})),function(e){e.create=function(e){return{type:t.SwitchAlert,source:e}}}(i=e.SwitchAlert||(e.SwitchAlert={})),function(e){e.create=function(e){return{type:t.SwitchLens,source:e}}}(o=e.SwitchLens||(e.SwitchLens={})),function(e){e.delayed=e=>t=>{const n=v.j((()=>b.of(void 0)),e),r=Object.assign(Object.assign({},t.what),{source:n(t.what.source)});return Object.assign(Object.assign({},t),{what:r})}}(a=e.Producer||(e.Producer={})),function(e){e.noFocus="noFocus",e.unFocus="unFocus",e.focusFirst="focusFirst",e.focusNext="focusNext",e.focusAlert="focusAlert"}(s=e.FocusBehaviorType||(e.FocusBehaviorType={})),function(e){e.noFocus={kind:s.noFocus},e.unFocus={kind:s.unFocus},e.focusNext={kind:s.focusNext},e.focusFirst={kind:s.focusFirst},e.focusAlert=e=>({kind:s.focusAlert,alertHighlight:e})}(l=e.FocusBehavior||(e.FocusBehavior={}))}(l=e.Effect||(e.Effect={}))}(C||(C={})),function(e){e.defaultOptions={focusBehavior:C.Effect.FocusBehavior.focusFirst}}(E||(E={}));const S=e=>t=>t.id===e.id;var I,k,A;!function(e){e[e.allAlerts=0]="allAlerts",e[e.priorityAlertsOnly=1]="priorityAlertsOnly"}(I||(I={})),function(e){e.getDefault=()=>I.allAlerts}(k||(k={})),function(e){e.skip=c.constFalse,e.force=c.constTrue,e.proceed=e=>e.positionState.animationInProgress}(A||(A={}))},93494:(e,t,n)=>{n.d(t,{v:()=>q});var r,i,o,a=n(17771),s=n(57050),l=n(40327),c=n(20817),u=n(83078),d=n(55415),p=n(92843),h=n(22232),m=n(89943),f=n(5114),g=n(71249),y=n(95195),v=n(73975),b=n(40018),w=n(66896),_=n(36156),C=n(5920),E=n(48521),S=n(16892),I=n(35416);!function(e){let t,n,r,i;e.filterAlertInLens=(e,t)=>g.filter((n=>b.bZ.isNotRemoved(n)||f.isSome(e.items.find((e=>t.hasAlert(n.id)(e)))))),function(e){e.setVisibleItems=e=>t=>Object.assign(Object.assign({},t),{cardIndex:(0,l.pipe)(I.In.getActiveItem(t),f.chain((t=>(0,l.pipe)(e.get(t.id),f.map((e=>e.index)))))),items:e}),e.getActiveItemIndex=e=>(0,s.flow)(I.In.getActiveItem,f.chain((t=>e.get(t.id))),f.map((e=>e.index))),e.hideItem=function(e,t){return E.o.isAnimatable(e)&&"removed"!==e.visualState.transition.type&&"hidden"!==e.visualState.transition.type?t.transitionTo({type:"hidden",clockwise:!1})(e):e},e.calculateCardsHeight=e=>(0,l.pipe)(e.getAt(e.size-1),f.map((e=>e.positionState.absTop+e.positionState.height)),f.getOrElse((()=>0)));e.getItemsPositionsUpdateTransformer=t=>({state:n,metadata:r})=>{if(!I.nL.hasCards(n))return y.left({state:n,metadata:r});const i=I.nL.Prism.getLens();return y.left({state:i.modify(e.updateItemsPositions(t),n),metadata:r})};const t=e=>t=>(0,l.pipe)(t.items.find((e=>t=>n=>n.positionState.watched&&!e.isHidden(n)&&(0,l.pipe)(t,u.forAll((e=>e.id!==n.id))))(e)(I.In.getActiveItem(t))),f.map((({value:t,index:n})=>({index:n,value:(0,l.pipe)(t,f.fromPredicate((t=>t.positionState.isHeightValid&&!e.isScheduledToDispose(t))))}))));e.updateItemsPositions=n=>r=>{const i=I.In.getActiveItem(r),o=t(n)(r),a=(0,l.pipe)(o,f.chain(d.pick("value")),f.map((e=>e.positionState.height)));let s=0;const c=(0,l.pipe)(i,u.forAll((e=>e.positionState.isHeightValid))),p=(0,l.pipe)(o,f.map(d.pick("index")),f.getOrElse((()=>{return e=r.cardIndex,(0,l.pipe)(e,f.map((e=>0===e?1:0)),f.getOrElse((()=>0)));var e}))),h=r.items.map(((e,t,i)=>{const o=u.contains(i)(r.cardIndex),d=o||i===p,h=n.isScheduledToDispose(e)||(o?e.positionState.isHeightValid:f.isSome(a)),m=n.isScheduledToDispose(e)?n.useReferenceHeightOnRemove(e)?(0,l.pipe)(a,f.getOrElse((()=>e.positionState.height))):0:o?e.positionState.height:(0,l.pipe)(a,f.getOrElse((()=>e.positionState.height))),g={absTop:o||c?s:e.positionState.absTop,height:m,animationInProgress:r.animation(e,i),visible:e.positionState.visible,isHeightValid:h,watched:d};return s+=m,S.s.PositionState.eq.equals(e.positionState,g)?e:n.changePosition(g)(e)})),m=e.calculateCardsHeight(h),g=(0,l.pipe)(i,u.forAll((e=>e.positionState.isHeightValid)))&&(0,l.pipe)(h.getAt(p),u.forAll((e=>e.positionState.isHeightValid)));return Object.assign(Object.assign({},r),{items:h,cardsHeight:m,isCardsHeightValid:g})}}(t=e.Items||(e.Items={})),function(e){e.apply=(e,t,n,r)=>i=>(0,l.pipe)(e,p.v.reduce(i,((e,{alert:t})=>r([t])(e)),((e,t,{alert:r})=>n([r])(e)),((e,{alert:n})=>t([n])(e)))),e.applyWithFilter=(e,t)=>(n,r,i,o)=>{const a=(0,s.flow)(g.partition(e),(e=>(0,s.flow)(o(e.left),i(e.right))));return t(n,(t=>r(t.filter(e))),a,o)}}(n=e.ApplyDiff||(e.ApplyDiff={})),function(e){e.items=c.Ri.create((e=>e.items),((e,n)=>t.setVisibleItems(e)(n))),e.getFeedItems=()=>c.Ri.create((e=>e.items),((e,n)=>t.setVisibleItems(e)(n)))}(r=e.Prism||(e.Prism={})),e.getEq=e=>v.fromEquals(((t,n)=>{if(t.kind===I._L.abstract||n.kind===I._L.abstract)return t.id===n.id;{const r=t,i=n;return t.id===n.id&&f.getEq(e).equals(I.In.getActiveItem(r),I.In.getActiveItem(i))&&r.meta.equals(n.meta)&&r.items.equals(i.items)}})),e.lensHash={hashCode:e=>{if(e.kind===I._L.abstract)return(0,_.AC)(e.id);{const n=e;let r=7;return r=31*r+(0,_.AC)(e.id),r=31*r+(t=I.In.getActiveItem(n),(0,l.pipe)(t,f.fold((()=>2433880),(e=>null==e?9735524:e.hashCode()<<2)))),31*r+e.meta.count}var t}},function(e){e.getAlertReleaser=e=>({release:t=>n=>{const r=n.items.map(e.removeAlertFromItem([t],n)),i=(0,l.pipe)(n.cardIndex,f.chain((t=>(0,l.pipe)(r.findRightFrom(e.isScheduledToDispose,t),f.map((e=>e.index))))),f.isSome)?I.wj.skip:I.wj.force;return Object.assign(Object.assign({},n),{animation:i,items:r})}}),e.getUnselectable=(e,t)=>({unselectItem:()=>n=>{const r=(0,l.pipe)(n,e,f.map((e=>n.items.add((0,l.pipe)(e,t.unselect(f.none,n.itemsOrd))))),f.getOrElse((()=>n.items)));return Object.assign(Object.assign({},n),{items:r,animation:I.wj.force,cardIndex:f.none})}}),e.getSelectableByAlert=(e,t)=>({selectItemByAlert:n=>r=>{const i=e(r),o=r.items.find(t.isSelectableByAlert(n));(0,h.kG)(f.isSome(o),"Can not find card for provided alert. Unknown card or it is already disposed.",(()=>n.alert.toString()));const{value:a,index:s}=u.unsafeGet(o),c=(0,l.pipe)(i,f.map((e=>r.items.add((0,l.pipe)(e,t.unselect(f.some(a),r.itemsOrd))))),f.getOrElse((()=>r.items))).add((0,l.pipe)(a,t.selectByAlert(i,n,r.itemsOrd)));return Object.assign(Object.assign({},r),{items:c,animation:I.wj.force,cardIndex:f.some(s)})}}),e.getSelectableById=(e,t)=>({selectItemById:n=>r=>{const i=e(r),o=r.items.get(n),{value:a,index:s}=u.unsafeGet(o),c=(0,l.pipe)(i,f.map((e=>r.items.add((0,l.pipe)(e,t.unselect(f.some(a),r.itemsOrd))))),f.getOrElse((()=>r.items))).add((0,l.pipe)(a,t.select(i,r.itemsOrd)));return Object.assign(Object.assign({},r),{items:c,animation:I.wj.force,cardIndex:f.some(s)})}}),e.getItemReleaser=()=>({removeItemById:t=>n=>e.setVisibleItems(n.items.remove(t))(n)}),e.getMetaUpdatable=function(){return{updateMeta:e=>t=>Object.assign(Object.assign({},t),{meta:w.R.WithAlerts.setMeta(e)(t.meta)})}},e.getAnimatable=function(e,t){return{finishApplyAnimation:n=>r=>{(0,h.kG)(n.every(e.shouldAnimateAlertApply),"Tried to finish animation on non-animated state");const i=r.id,o=e=>{const r=e.items.map(t.removeAlertFromItem(n,e));return Object.assign(Object.assign({},e),{items:r})};if(w.R.isOutcomeId(i))return o(r);switch(i){case w.R.SpecialId.Priority:case w.R.SpecialId.AllAlerts:case w.R.SpecialId.PredictionTakeaways:case w.R.SpecialId.PredictionEmogenie:case w.R.SpecialId.RealTimeProofit:return o(r);case w.R.SpecialId.Premium:throw new Error("It's not possible to animate premium alerts");case w.R.SpecialId.Plagiarism:return(0,h.kG)(n.every(b.bZ.isPlagiarism),"tried to finish animation on non plagiarism alert in plagiarism lens"),o(r);default:return(0,h.vE)(i)}}}},e.getVerifiable=function(e){return{shouldVerify:t=>(0,l.pipe)(I.In.getActiveItem(t),f.exists((t=>e.isScheduledToDispose(t))))||f.isNone(t.items.find((t=>!e.isScheduledToDispose(t))))}},e.getHasAlerts=function(e,t,n){const r=e=>e.id===w.R.SpecialId.Premium||e.id===w.R.SpecialId.Plagiarism?e.meta.count:(0,l.pipe)(I.In.getActiveItem(e),f.chain(t.hasActiveAlert),f.exists(b.bZ.isCapiDone))&&1===e.items.size?0:e.meta.count;return{getVisibleAlertsCount:r,getActiveAlertsCount:r,findFirstAlert:e=>(0,l.pipe)(e.items.filter(n(e)).find((e=>f.isSome(t.hasActiveAlert(e)))),f.map((({value:e})=>({alert:e.activeAlert,highlightIndex:e.activeHighlightIndex})))),findNextAlert:t=>((0,h.kG)(f.isSome(I.In.getActiveItem(t))===f.isSome(t.cardIndex),"Lens is in wrong state"),(0,l.pipe)((0,a.g)(f.option)(I.In.getActiveItem(t),t.cardIndex),f.chain((([r,i])=>(0,l.pipe)(e.nextAlert(r),f.alt((()=>e.prevAlert(r))),f.alt((()=>(0,l.pipe)(m.lookAround(t.items.values(),i,n(t)),f.map((e=>e.value.activeAlert)))))))),u.orElse((0,l.pipe)(C.l.find(t.items,n(t)),f.map((({value:e})=>e.activeAlert)))),f.map((e=>({alert:e,highlightIndex:0})))))}},e.setVisibleItems=e=>t=>Object.assign(Object.assign({},t),{cardIndex:(0,l.pipe)(I.In.getActiveItem(t),f.chain((t=>(0,l.pipe)(e.get(t.id),f.map((e=>e.index)))))),items:e})}(i=e.Capabilities||(e.Capabilities={}))}(r||(r={})),function(e){let t;e.create=function(e,n){return t||(t={id:w.R.SpecialId.Closed,kind:I._L.abstract,type:I.Nm.closed,meta:w.R.createStaticLens({id:w.R.SpecialId.Closed,title:"Closed"},w.R.Meta.group.empty,e),hashCode(){return r.lensHash.hashCode(this)},equals(e){return r.getEq(n).equals(this,e)}}),t}}(i||(i={})),function(e){e.create=()=>({id:w.R.SpecialId.DraftAI,type:I.Nm.draftAI,kind:I._L.abstract,meta:w.R.createStaticLens({id:w.R.SpecialId.DraftAI,title:"Draft AI"},w.R.Meta.group.empty,s.constFalse),transitionSource:f.none,hashCode(){return(0,_.AC)(this.id)},equals(e){return this.id===e.id}}),e.createFromTransitionSource=t=>Object.assign(Object.assign({},e.create()),{transitionSource:f.some(t)})}(o||(o={}));var k,A,x=n(95983),T=n(17594);!function(e){function t(e){return x.vM("cardId",e)}e.create=function(e,n,i,o,a,s){(0,h.kG)(e.id===w.R.SpecialId.Plagiarism,"Cannot create plagiarism lens vm on non-plagiarism lens",e.id);const c=x.aW.empty((e=>e.id),s.compare),u=t(n),d=(0,l.pipe)(i,f.map((({alertIndex:e})=>((0,h.kG)(void 0!==n[e],"Can not find alert for provided alertIndex"),n[e]))));let p=f.none;const m=Array.from(u.entries()).reduce(((e,[t,n])=>(0,l.pipe)(d,f.map((e=>n.indexOf(e))),f.filter((e=>e>-1)),f.fold((()=>e.add(o.createRendered(t,n))),(r=>{const i=o.createFocused(t,n,r);return p=f.some(t),e.add(i)})))),c),g=(0,l.pipe)(p,f.chain((e=>(0,l.pipe)(m.get(e),f.map((e=>e.index))))));return{id:w.R.SpecialId.Plagiarism,kind:I._L.persistent,type:I.Nm.plagiarism,meta:e,cardIndex:g,items:m,itemsOrd:s,animation:I.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return r.lensHash.hashCode(this)},equals(e){return r.getEq(a).equals(this,e)}}},e.updateCardsWithLensMeta=function(e){return t=>t.id===w.R.SpecialId.Plagiarism?Object.assign(Object.assign({},t),{items:t.items.map((t=>T.$.isPlagiarism(t.activeAlert)?e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(T.$.isPlagiarism)):t))}):t},e.add=e=>n=>r=>{const i=t(n),o=Array.from(i.entries()).reduce(((t,[n,r])=>(0,l.pipe)(t.update(n,(t=>e.addPlagiarismAlerts(t,r))),y.fold((()=>t.add(e.createAdded(n,r))),s.identity))),r.items),a=(0,l.pipe)(I.In.getActiveItem(r),f.map((({id:e})=>u.unsafeGet(o.get(e)).index))),c=f.getEq(v.eqNumber).equals(a,r.cardIndex)?I.wj.force:I.wj.skip;return Object.assign(Object.assign({},r),{cardIndex:a,items:o,animation:c})},e.remove=e=>n=>r=>{const i=t(n),o=I.In.getActiveItem(r),a=Array.from(i.entries()).reduce(((t,[n,i])=>(0,l.pipe)(t.update(n,(t=>{const n=(0,l.pipe)(e.remove(t,i,(0,l.pipe)(o,f.map((e=>r.itemsOrd.compare(t,e)>0)),f.getOrElse(s.constTrue))),(t=>e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(T.$.isPlagiarism))));return(0,l.pipe)(o,f.exists((e=>e.id===n.id)))?e.selectNextAlert(n,r.itemsOrd):n})),y.fold((()=>t),s.identity))),r.items);return Object.assign(Object.assign({},r),{items:a,animation:I.wj.force})},e.update=t=>n=>r=>e.updateWithAlerts(t)(n.filter((0,s.not)(t.shouldAnimateAlertApply)))(r),e.updateWithAlerts=n=>r=>i=>{const[o,a]=m.partition(r,b.bZ.isRegistered),c=t(o),u=Array.from(c.entries()).reduce(((e,[t,r])=>(0,l.pipe)(e.update(t,(e=>n.changePlagiarismMetaWithAlerts(e,e.alerts.filter(T.$.isPlagiarism)))),y.fold((()=>e.add(n.createAdded(t,r))),s.identity))),e.remove(n)(a)(i).items),d=(0,l.pipe)(I.In.getActiveItem(i),f.map((({id:e})=>(0,l.pipe)(u.get(e),f.map((({index:e})=>e)),f.getOrElse((()=>0))))));return Object.assign(Object.assign({},i),{cardIndex:d,items:u,animation:I.wj.proceed})},e.getAlertsHandler=function(t){return n=>r.ApplyDiff.apply(n,e.add(t),e.update(t),e.remove(t))}}(k||(k={})),function(e){e.create=function(e,t,n,i,o){const a=x.aW.create(t.map(n.createFromAlert(w.R.SpecialId.Premium)),(e=>e.id),o.compare);return(0,h.kG)(a.size>0,"PremiumLensView should have at least one card"),{id:w.R.SpecialId.Premium,kind:I._L.active,type:I.Nm.advanced,meta:e,items:a,itemsOrd:o,cardIndex:f.none,animation:I.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return r.lensHash.hashCode(this)},equals(e){return r.getEq(i).equals(this,e)}}},e.getAlertsHandler=function(t,n){return i=>r.ApplyDiff.apply(i,e.add(t),e.update(t,n),e.remove(n))},e.add=e=>t=>n=>{const i=t.map(e.createFromAlert(n.id)),o=n.items.add(i),a=r.Items.getActiveItemIndex(o)(n);return Object.assign(Object.assign({},n),{cardIndex:a,items:o,animation:I.wj.proceed})},e.remove=e=>t=>n=>{const i=new Set(t.map((e=>e.id))),o=n.items.filter((0,s.flow)(e.hasActiveAlert,f.exists((e=>i.has(e.id))))).reduce(((e,t)=>e.remove(t.id)),n.items),a=r.Items.getActiveItemIndex(o)(n);return Object.assign(Object.assign({},n),{cardIndex:a,items:o})},e.update=(t,n)=>r=>i=>{const[o,a]=m.partition(r,b.bZ.isRegistered);return(0,s.pipe)(i,e.remove(n)(a),e.add(t)(o))}}(A||(A={}));var O,R=n(8125),N=n(91549);!function(e){const t=b.h$.ord;function n(e){return e.id}function i(e){const t=e.map((e=>[N.R.getAlertOutcomeBundle(e),e]));return x.vM((([e,t])=>n(e)),t)}function o(e,n,r,o,a){(0,h.kG)((0,l.pipe)(r,u.forAll((({alertIndex:e})=>void 0!==n[e]))),"Can not find alert for provided alertIndex");const s=i(n),c=(0,l.pipe)(r,f.map((({alertIndex:e})=>((0,h.kG)(void 0!==n[e],"Can not find alert for provided alertIndex"),n[e]))));let d=f.none;const p=x.aW.empty(N.R.getId,a.compare),m=Array.from(s.entries()).reduce(((n,[r,i])=>{const a=i.map((([e,t])=>t)),s=i[0][0];return(0,l.pipe)(c,f.map((e=>a.indexOf(e))),f.filter((e=>e>-1)),f.fold((()=>n.add(o.createRendered(e)(r,s,a,t))),(i=>{const l=o.createFocused(e)(r,s,a,i,t);return d=f.some(r),n.add(l)})))}),p);return{cardIndex:(0,l.pipe)(d,f.chain((e=>(0,l.pipe)(m.get(e),f.map((e=>e.index)))))),cards:m}}e.getCardId=n,e.initCardsHash=o,e.create=function(e,t,n,i,a,s,l){const{cards:c,cardIndex:u}=o(e,n,i,a,l);return{id:e,type:I.Nm.lensview,kind:I._L.persistent,meta:t,withPriorityList:!1,cardIndex:u,items:c,itemsOrd:l,animation:I.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return r.lensHash.hashCode(this)},equals(e){return r.getEq(s).equals(this,e)}}},e.add=(e,n)=>o=>a=>{if(0===o.length)return a;const c=i(o),u=Array.from(c.entries()).reduce(((r,[i,o])=>{const c=o.map((([e,t])=>t)),u=o[0][0];return(0,l.pipe)(r.update(i,(e=>n.updateWithAlerts(c)(e))),y.fold((()=>r.add(e.createAdded(a.id)(i,u,c,t))),s.identity))}),a.items),d=(0,l.pipe)(a,r.Items.getActiveItemIndex(u)),p=f.getEq(v.eqNumber).equals(d,a.cardIndex)?I.wj.force:I.wj.skip;return Object.assign(Object.assign({},a),{cardIndex:d,items:u,animation:p})},e.remove=e=>t=>n=>{const o=i(t),a=Array.from(o.entries()).reduce(((t,[r,i])=>(0,l.pipe)(t.update(r,(t=>e.removeAlertFromItem(i.map((([e,t])=>t)),n)(t))),y.fold((()=>t),s.identity))),n.items),c=(0,l.pipe)(n,r.Items.getActiveItemIndex(a));return Object.assign(Object.assign({},n),{cardIndex:c,items:a,animation:I.wj.force})},e.update=(t,n,r)=>i=>o=>e.updateWithAlerts(t,r)(i.filter((0,R.ff)(n.shouldAnimateAlertApply)))(o),e.updateWithAlerts=(n,o)=>a=>c=>{if(0===a.length)return c;const{left:u,right:d}=(0,l.pipe)(a,r.filterAlertInLens(c,o),g.partition(b.bZ.isRegistered)),p=i(d),h=Array.from(p.entries()).reduce(((e,[r,i])=>{const a=i.map((([e,t])=>t)),u=i[0][0];return(0,l.pipe)(e.update(r,(e=>o.updateWithAlerts(a)(e))),y.fold((()=>e.add(n.createAdded(c.id)(r,u,a,t))),s.identity))}),e.remove(o)(u)(c).items),m=(0,l.pipe)(c,r.Items.getActiveItemIndex(h));return Object.assign(Object.assign({},c),{cardIndex:m,items:h,animation:I.wj.proceed})},e.getAlertsHandler=function(t,n,i){return(o,a)=>s=>{const c=r.ApplyDiff.applyWithFilter(a,r.ApplyDiff.apply);return(0,l.pipe)(s,c(o,e.add(t,i),e.update(t,n,i),e.remove(i)))}},e.getHasAlerts=function(e,t,n){const i=r.Capabilities.getHasAlerts(e,t,n);return Object.assign(Object.assign({},i),{findNextAlert:t=>(0,l.pipe)((0,a.g)(f.option)(I.In.getActiveItem(t),t.cardIndex),f.chain((([r,i])=>(0,l.pipe)(e.nextAlert(r),f.alt((()=>e.prevAlert(r))),f.alt((()=>(0,l.pipe)(m.findIndexFrom(t.items.values(),i+1,n(t)),f.alt((()=>m.findIndexFrom(t.items.values(),0,n(t)))),f.chain((e=>f.fromNullable(e.value.alerts))),f.map((e=>e[0])))))))),u.orElse((0,l.pipe)(C.l.find(t.items,n(t)),f.chain((({value:e})=>f.fromNullable(e.alerts))),f.map((e=>e[0])))),f.map((e=>({alert:e,highlightIndex:0}))))})}}(O||(O={}));var L=n(35214),P=n(45701),M=n(26027),D=n(69345),F=n(4890);const B=v.fromEquals(((e,t)=>e.id===t.id&&e.visibilityState===t.visibilityState&&D.Z.eq.equals(e.positionState,t.positionState))),U=e=>(0,_.NO)({itemId:e.id,visibilityState:e.visibilityState,positionState:(0,_.NO)(e.positionState)});var $,j,W,G,q;!function(e){e.id="PriorityToggleHintId",e.Kind="PriorityToggleHint",e.create=(e,n)=>new t(e,n,F.j.defaultOptions),e.hidden="hidden",e.visible="visible",e.isVisible=t=>t.visibilityState===e.visible,e.changePosition=(t,n)=>e.create(t.visibilityState,n),e.isPriorityToggleHint=t=>t.id===e.id,e.transitionTo=(t,n)=>t.visibilityState!==n?e.create(n,t.positionState):t;class t{constructor(t,n,r){this.visibilityState=t,this.positionState=n,this.renderOptions=r,this.kind=e.Kind,this.scheduledToDispose=!1,this.id=e.id}equals(e){return B.equals(this,e)}hashCode(){return U(this)}}}($||($={})),function(e){e.id="PriorityToggleId",e.Kind="PriorityToggle",e.isCollapsed=e=>"collapsed"===e.visibilityState,e.isExpanded=e=>"expanded"===e.visibilityState,e.isHidden=e=>"hidden"===e.visibilityState,e.create=(e,n)=>new t(e,n,F.j.defaultOptions),e.changePosition=(t,n)=>e.create(t.visibilityState,n),e.transitionTo=(t,n)=>t.visibilityState!==n?e.create(n,t.positionState):t,e.isPriorityToggle=t=>t.id===e.id,e.isPriorityItem=(0,R.Kg)(e.isPriorityToggle,$.isPriorityToggleHint);class t{constructor(t,n,r){this.visibilityState=t,this.positionState=n,this.renderOptions=r,this.kind=e.Kind,this.scheduledToDispose=!1,this.id=e.id}equals(e){return B.equals(this,e)}hashCode(){return U(this)}}}(j||(j={})),function(e){let t;function n(e,t){return`${e.id}_${t.id}`}function i(e,t,r,i,o,a){(0,h.kG)((0,l.pipe)(i,u.forAll((({alertIndex:e})=>void 0!==r[e]))),"Can not find alert for provided alertIndex");const s=x.aW.create(r.map(((r,a)=>(0,l.pipe)(i,f.exists((({alertIndex:e})=>a===e)))?o.createFocused(e)(n(t,r),r,(0,l.pipe)(i,f.fold((()=>0),(({highlightIndex:e})=>e)))):o.createRendered(e)(n(t,r),r))),M.X.getId,a.compare);return{cardIndex:(0,l.pipe)(i,f.chain((({alertIndex:e})=>s.find((t=>t.activeAlert.id===r[e].id)))),f.map((e=>e.index))),hash:s}}e.isInSuccess=function(e,t,n=s.constTrue){return 0===e.meta.count&&(0===e.items.filter(n).size||f.isNone(e.items.filter(n).find((e=>!t.isScheduledToDispose(e)))))},function(t){t.isInSuccess=t=>n=>I.nL.hasSuccess(n)&&I.nL.hasItems(n)&&e.isInSuccess(n.currentLens,t),t.isInGlobalSuccess=e=>n=>(I.nL.is(w.R.SpecialId.AllAlerts)(n)||I.nL.is(w.R.SpecialId.Priority)(n))&&t.isInSuccess(e)(n)}(t=e.State||(e.State={})),e.getCardId=n,e.initCardsHash=i,e.create=function(e,t,n,o,a,s,l){const{hash:c,cardIndex:u}=i(e,t,n,o,a,l);return{id:e,type:I.Nm.lensview,kind:I._L.persistent,withPriorityList:!1,meta:t,cardIndex:u,items:c,itemsOrd:l,animation:I.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return r.lensHash.hashCode(this)},equals(e){return r.getEq(s).equals(this,e)}}},e.add=(e,t,i)=>o=>a=>{const s=o.map((o=>{const s=t.createAdded(a.id)(n(a.meta,o),o);return e(a,o)?s:r.Items.hideItem(s,i)})),l=a.items.add(s),c=r.Items.getActiveItemIndex(l)(a),u=f.getEq(v.eqNumber).equals(c,a.cardIndex)?I.wj.force:I.wj.skip;return Object.assign(Object.assign({},a),{cardIndex:c,items:l,animation:u})},e.remove=e=>t=>n=>{const i=new Set(t.map((e=>e.id))),o=n.items.map(e.remove((0,s.flow)(e.hasActiveAlert,f.fold(s.constFalse,(e=>i.has(e.id)))),(e=>(0,l.pipe)(I.In.getActiveItem(n),f.map((t=>n.itemsOrd.compare(e,t)>0)),f.getOrElse(s.constTrue))))),a=(0,l.pipe)(n.cardIndex,f.chain((t=>(0,l.pipe)(o.findRightFrom((t=>e.isScheduledToDispose(t)),t),f.map((e=>e.index))))),f.isSome)?I.wj.skip:I.wj.force,c=(0,l.pipe)(n,r.Items.getActiveItemIndex(o));return Object.assign(Object.assign({},n),{cardIndex:c,items:o,animation:a})},e.update=(t,n,r)=>i=>o=>e.updateWithAlerts(n,t,r)(i.filter((0,R.ff)(n.shouldAnimateAlertApply)))(o),e.updateWithAlerts=(e,t,i)=>o=>a=>{if(0===o.length)return a;const c=(0,l.pipe)(o,r.filterAlertInLens(a,i),g.map((e=>[n(a.meta,e),e])),g.reduce(a.items,((n,[o,c])=>(0,l.pipe)(n.update(o,i.updateWithAlerts([c])),y.fold((()=>{const s=e.createAdded(a.id)(o,c);return n.add(t(a,c)?s:r.Items.hideItem(s,i))}),s.identity))))),u=r.Items.getActiveItemIndex(c)(a);return Object.assign(Object.assign({},a),{cardIndex:u,items:c,animation:I.wj.proceed})},e.getAlertHandler=function(t,n,i=s.constTrue){return(o,a)=>{const s=r.ApplyDiff.applyWithFilter(a,r.ApplyDiff.apply);return r=>(0,l.pipe)(r,s(o,e.add(i,t,n),e.update(i,t,n),e.remove(n)))}}}(W||(W={})),function(e){function t(e,t){return(0,l.pipe)(I.In.getActiveItem(e),f.chain(t.hasActiveAlert),f.map((e=>!T.$.isPriority(e))),f.getOrElse((()=>!1)))}function n(e){return(0,l.pipe)(e.items.get(j.id),f.map((({value:e})=>j.isPriorityToggle(e)&&j.isExpanded(e))),f.getOrElse((()=>!1)))}function i(e,t,n){return 0!==e.meta.count&&0===e.meta.priorityCount&&0===e.items.filter((0,R.W9)(t,(e=>!n.isScheduledToDispose(e)))).size}let o;function a(e,t){return r=>I.nL.hasSuccess(r)&&W.isInSuccess(r.currentLens,t)||I.nL.isWithPriorityList(r)&&(W.isInSuccess(r.currentLens,t,(0,R.ff)(j.isPriorityItem))||i(r.currentLens,e,t)&&!n(r.currentLens))}e.ord=(0,L.fold)(P.getMonoid())([(0,l.pipe)(P.ordBoolean,P.contramap($.isPriorityToggleHint)),(0,l.pipe)(P.ordBoolean,P.contramap(j.isPriorityToggle)),M.X.ord]),e.create=function(e,t,n,i,o,a,d,p){const h=(0,l.pipe)(i,f.map((({alertIndex:e})=>n[e])),f.chain(f.fromNullable),f.map((e=>"all"===e.view)),f.getOrElse((()=>!1))),{hash:m}=W.initCardsHash(e,t,n,i,o,p);let g=c(m);g=u(g,h,h,a);const y=(0,l.pipe)(i,f.chain((({alertIndex:e})=>g.find((0,s.flow)(a.hasActiveAlert,f.exists((t=>t.id===n[e].id)))))),f.map((e=>e.index)));return{id:e,type:I.Nm.lensview,kind:I._L.persistent,itemsOrd:p,meta:t,cardIndex:y,items:g,animation:I.wj.skip,withPriorityList:!0,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return r.lensHash.hashCode(this)},equals(e){return r.getEq(d).equals(this,e)}}},e.getHasPriorityToggle=function(e){return{toggleNonPriorityList:r=>i=>{const o=n(i);if("collapsed"===r&&!o||"expanded"===r&&o)return i;const a=t(i,e),s=u(i.items,!o,!o&&a,e);return Object.assign(Object.assign({},i),{items:s,cardIndex:a&&o?f.none:i.cardIndex,animation:I.wj.proceed})}}},e.focusedCardIsNonPriority=t,e.isNonPriorityListOpened=n,e.onlyNonPriorityAlertsLeft=i,e.nonPriorityAlertsVisible=function(e){return!I.nL.isWithPriorityList(e)||n(e.currentLens)},function(e){e.fromLensState=e=>t=>e.currentLens.id!==t||I.nL.isWithPriorityList(e)&&!n(e.currentLens)?I.FS.priorityAlertsOnly:I.FS.allAlerts}(o=e.LensViewMode||(e.LensViewMode={})),e.isInSuccess=a,e.isInGlobalSuccess=function(e,t){return n=>(I.nL.is(w.R.SpecialId.AllAlerts)(n)||I.nL.is(w.R.SpecialId.Priority)(n))&&a(e,t)(n)},e.getSyncVisibleCardsHandler=function(e){return i=>{if(!w.R.isWithSuccessId(i.id))return i;let o=c(i.items);const a=t(i,e);o=u(o,n(i)||a,a,e);const s=r.Items.getActiveItemIndex(o)(i);return Object.assign(Object.assign({},i),{cardIndex:s,items:o,animation:I.wj.proceed})}};function c(e){return e.has(j.id)||0===e.size?e:e=(e=e.add(j.create("expanded",S.s.PositionState.empty))).add($.create("visible",S.s.PositionState.empty))}function u(e,t,n,i){const o=(e=>({transitionTo:t=>n=>E.o.isAnimatable(n)&&n.visualState.transition.type!==t.type?e.transitionTo(t)(n):n}))(i),a=0===e.filter((e=>!i.isScheduledToDispose(e)&&(0,l.pipe)(i.hasActiveAlert(e),f.exists((0,R.ff)(T.$.isPriority))))).size;return e.map((e=>(0,l.pipe)(i.hasActiveAlert(e),f.fold((()=>j.isPriorityItem(e)?a?j.isPriorityToggle(e)?j.transitionTo(e,"hidden"):$.transitionTo(e,"hidden"):j.isPriorityToggle(e)?t||n?j.transitionTo(e,"expanded"):j.transitionTo(e,"collapsed"):t||n?$.transitionTo(e,"visible"):$.transitionTo(e,"hidden"):e),(n=>t||T.$.isPriority(n)?E.o.isAnimatable(e)&&E.o.isHidden(e)?o.transitionTo({type:"rendered",clockwise:!0})(e):e:r.Items.hideItem(e,i))))))}e.isAlertVisible=function(e,t){return"priority"===t.view||n(e)},e.ensureExpandCardIsPresent=c,e.syncVisibleCards=u,e.getHasAlerts=function(e,t,i){return Object.assign(Object.assign({},r.Capabilities.getHasAlerts(e,t,i)),{getVisibleAlertsCount:e=>(0,l.pipe)(I.In.getActiveItem(e),f.chain(t.hasActiveAlert),f.exists(b.bZ.isCapiDone))&&1===e.items.size?0:n(e)?e.meta.count:e.meta.priorityCount})}}(G||(G={})),function(e){e.Prism=r.Prism,e.Items=r.Items,e.Capabilities=r.Capabilities,e.ApplyDiff=r.ApplyDiff,e.filterAlertInLens=r.filterAlertInLens,e.lensHash=r.lensHash,e.getEq=r.getEq,e.Closed=i,e.DraftAI=o,e.Plagiarism=k,e.Premium=A,e.WithBundles=O,e.WithPriority=G,e.WithSuccess=W}(q||(q={}))},73841:(e,t,n)=>{n.d(t,{l:()=>N});var r=n(31542),i=n(11064),o=n(57050),a=n(40327),s=n(95195),l=n(5114),c=n(22232),u=n(8125),d=n(81531),p=n(46680),h=n(66896),m=n(32952),f=n(77176),g=n(76974),y=n(95300),v=n(24209),b=n(66310),w=n(98403),_=n(69935),C=n(91224),E=n(41398),S=n(2834),I=n(28043),k=n(598),A=n(83401),x=n(17594),T=n(48521),O=n(35416),R=n(89770);class N{constructor(e,t,n,c,u,k,A){this._state=e,this._stateProvider=t,this._alertsReader=n,this._alertsService=c,this._stateSideEffects=u,this._getActiveAlert=k,this._stateTransformer=A,this.focusLens=(e,t,n={toFocus:O.Zz.defaultOptions.focusBehavior})=>{this._log.debug("focusLens "+e),this._switchLensActions.next({lensId:e,alertSource:t,options:n})},this.focusAlert=(e,t,n)=>{this._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:n}})},this._log=d.Monitoring.Logging.getLogger("FocusedLensManagerImpl"),this._ts=d.Monitoring.TimeSeries.root.getMetric("lens_state.manager"),this._switchLensActions=new m.xQ,this._switchAlertActions=new m.xQ,this._addMetadata=e=>t=>t.pipe(f.U((t=>({source:t,metadata:e})))),this._focusLensEffect=({lensId:e,alertSource:t,options:{toFocus:n=O.Zz.defaultOptions.focusBehavior,order:r}})=>{if(this._log.debug("_focusLensEffect ",{alertSource:t,lensId:e}),h.R.isClosedId(e))return(0,a.pipe)(g.of(O.nL.Effect.Applicator.Source.override((0,R.T)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));if(h.R.isDraftAIId(e))return(0,a.pipe)(g.of(O.nL.Effect.Applicator.Source.override((0,R.zc)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));const i=this._state.get(),o=i.patch({switchOrder:r||i.switchOrder,alertSource:t});return(0,a.pipe)(this._stateProvider.getLensEventsByLensId(o,e,{focusBehavior:n}),this._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=({alertHighlight:e,alertSource:t,options:n})=>{this._log.isEnabled(p.LogLevel.TRACE)&&this._log.trace(`focusAlert(${e.alert})`);const r=this._state.get(),i=r.patch({switchOrder:n.order||r.switchOrder,alertSource:t});return(0,a.pipe)(this._stateProvider.getLensEventsByAlert(i,function(e,t,n){if(e===h.R.SpecialId.Priority||e===h.R.SpecialId.PredictionTakeaways||e===h.R.SpecialId.PredictionEmogenie||e===h.R.SpecialId.RealTimeProofit)return e;if(void 0!==n)return n;if(e===h.R.SpecialId.Closed||e===h.R.SpecialId.AllAlerts)return h.R.SpecialId.AllAlerts;return t}(r.currentLens.id,e.alert.lensId,n.lensId),e),this._addMetadata({sourceId:"LSM.focusAlertEffect"}))};const T=this._state.get(),N=this._stateTransformer,L=new y.X(T);this._effects=v.T(...this._stateSideEffects.map((({when:e,what:t,id:n})=>this._state.view("currentLens","id").view(e).pipe(b.w(w.Ft((0,a.pipe)(this._effectToApplicator(t),this._addMetadata({sourceId:n}))))))),v.T(this._switchAlertActions.pipe(f.U(this._focusAlertEffect)),this._switchLensActions.pipe(f.U(this._focusLensEffect))).pipe(_.B()));const P=this._ts.getTimer("batched.long_state_change");this._subs=[this._effects.pipe(C.K(((e,t)=>(this._log.error("Got error from effects: ",e),t))),E.M(L,(({source:e,metadata:t},n)=>({state:e(n),metadata:t}))),C.K(((e,t)=>(this._log.error("Got error while applying new state: ",e),t))),f.U(N),C.K(((e,t)=>(this._log.error("Got error while transforming state: ",e),t)))).subscribe((e=>(0,a.pipe)(e,s.fold((({state:e,metadata:t})=>{this._log.isEnabled(p.LogLevel.TRACE)&&this._log.trace(`lens state from: ${t.sourceId}`,e),(0,a.pipe)(this._checkState(e),s.fold((t=>this._log.error("incorrect state transition detected",{error:t,state:e})),(()=>L.next(e))))}),s.fold((e=>this._switchAlertActions.next(e)),(e=>this._switchLensActions.next(e))))))),(0,a.pipe)(L,f.U(O.nL.getActiveAlert(this._getActiveAlert)),S.b((e=>this._log.trace("active alert: ",e))),I.x(l.getEq(x.$.eq).equals),b.w(w.aI((e=>(0,a.pipe)(this._alertsService.takeReference(e,"activeCard"),s.mapLeft((e=>this._log.error("can not take alertRef",e))),s.fold(i.of(o.constVoid),(e=>e.dispose))))))).subscribe(),(0,a.pipe)(L,f.U((e=>{const t=performance.now();r.unstable_batchedUpdates((()=>{this._state.set(e)}));const n=performance.now()-t;n>16&&P.recordTime(n)}))).subscribe()],O.nL.hasCards(T)&&(0,a.pipe)(O.nL.getActiveAlertHighlight(this._getActiveAlert)(T),l.filter((e=>this._alertsReader.isRegistered(e.alert.id))),l.fold((()=>this._switchLensActions.next({lensId:T.currentLens.id,alertSource:T.alertSource,options:{order:T.switchOrder,toFocus:O.nL.Effect.FocusBehavior.noFocus}})),(e=>this._switchAlertActions.next({alertHighlight:e,alertSource:T.alertSource,options:{lensId:T.currentLens.id,order:T.switchOrder}}))))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_effectToApplicator(e){switch(e.type){case O.nL.Effect.Type.Applicator:case O.nL.Effect.Type.ItemsApplicator:return e.source;case O.nL.Effect.Type.SwitchLens:return e.source.pipe(S.b((e=>this._switchLensActions.next(e))),k.c(A.C));case O.nL.Effect.Type.SwitchAlert:return e.source.pipe(S.b((e=>this._switchAlertActions.next(e))),k.c(A.C));default:return(0,c.vE)(e)}}_checkState(e){try{if(O.nL.hasCards(e)){const t=e.currentLens.items.filter((0,u.W9)(T.o.isAnimatable,T.o.isFocused));(0,c.kG)(t.size<=1,"cannot have more than one focused card",(()=>JSON.stringify(t)))}}catch(e){return s.left(e)}return s.right(void 0)}}N.toLensAlert=({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:e.lensId})},89770:(e,t,n)=>{n.d(t,{T:()=>x,zc:()=>T,oq:()=>O});var r=n(57050),i=n(40327),o=n(73975),a=n(22232),s=n(92843),l=n(5114),c=n(8125),u=n(83078),d=n(81531),p=n(51374),h=n(40018),m=n(66896),f=n(4390),g=n(89772),y=n(76974),v=n(85985),b=n(28043),w=n(77176),_=n(24209),C=n(16118),E=n(66310),S=n(93508),I=n(17594),k=n(35416),A=n(93494);const x=()=>k.nL.create({alertSource:h.l$.api,switchOrder:"lensOrder",currentLens:A.v.Closed.create(r.constFalse,o.fromEquals(r.constFalse))}),T=()=>k.nL.create({alertSource:h.l$.api,switchOrder:"lensOrder",currentLens:A.v.DraftAI.create()});class O{constructor(e,t,n,o,a,s,l,c,u,p=k.nL.FocusFirstFilter.defaultFilter){this._checkingState=e,this._alertsReader=t,this._lenses=n,this._positionManager=o,this._lensPreviewVM=a,this._lensViewFactory=s,this._alertsHandlerFactory=l,this._capabilities=c,this._alertsFilterService=u,this._focusFirstFilter=p,this._transformAlertsDiffToApplicator=e=>t=>n=>k.nL.hasItems(n)?n.patch({currentLens:e(t,(0,r.not)(h.bZ.isMuted))(n.currentLens)}):n,this._log=d.Monitoring.Logging.getLogger("FocusedLensManagerImpl"),this._updateMetaSource=e=>t=>n=>e===n.currentLens.id&&k.nL.hasItems(n)?k.nL.Prism.getLensWithItems().modify(this._capabilities.updateMeta(t),n):n,this._lensAlerts=e=>{const t=this._alertsFilterService.alertVisibleInSidebar(e.id);return(0,i.pipe)(this._checkingState.get(),f.p.reduce([],((e,{alert:n})=>t(n)?[...e,n]:e)),(e=>e.sort(h.h$.ord.compare)))}}static _mapByActiveLensId(e,t,n,r){if(m.R.isOutcomeId(e))return r();switch(e){case m.R.SpecialId.Plagiarism:return t();case m.R.SpecialId.Premium:return n();case m.R.SpecialId.AllAlerts:case m.R.SpecialId.Priority:case m.R.SpecialId.PredictionTakeaways:case m.R.SpecialId.PredictionEmogenie:case m.R.SpecialId.RealTimeProofit:return r();default:return(0,a.vE)(e)}}_conditionedApplicator(e,t){return n=>r=>e(r,n)?t(n)(r):r}static _filterALEvents(e){return t=>y.of((0,i.pipe)(t,f.p.Diff.filter((t=>e(t.alert))))).pipe(v.h((0,r.not)(s.v.isEmpty)))}emptyState(e=m.R.SpecialId.AllAlerts){return k.nL.create({currentLens:this._createLens({lensId:e,initialLens:this._lensPreviewVM.getLens(e).get(),visibleAlerts:[],alertHighlight:l.none,alertSource:h.l$.api}),alertSource:h.l$.api,switchOrder:"lensOrder"})}getLensEventsByLensId(e,t,n={}){const r=this._getActiveLensMeta(t),o=this._lensAlerts(r),a=this._createState(e,l.none,r,t,o),s=n.focusBehavior?this._getAlertToFocus(n.focusBehavior,a):l.none;e.currentLens.id===t&&k.nL.hasItems(e)&&this._capabilities.getActiveAlertsCount(e.currentLens)!==o.length&&this._log.warn("Lens contains inconsistent number of alerts",r.id);const c=k.nL.hasItems(a)?(0,i.pipe)(s,l.fold((()=>a),(n=>this._createState(e,l.some(n),r,t,o)))):a;return this._generateEventsFromState(c,this._alertsHandlerFactory(t))}getLensEventsByAlert(e,t,n){(0,a.kG)(l.isSome(this._alertsReader.getById(n.alert.id)),"Can't focus non existing alert",n.alert.id);const r=this._getActiveLensMeta(t),i=e.currentLens.meta.id===t&&e.currentLens.meta.filter(n.alert)&&k.nL.hasItems(e)?k.nL.Prism.getLensWithItems().modify(this._capabilities.selectItemByAlert(n),e):this._createState(e,l.some(n),r,t,this._lensAlerts(r));return this._generateEventsFromState(i,this._alertsHandlerFactory(t))}findClosestAlertHighlight(e,t){return(0,i.pipe)(this._positionManager.findClosestToPosition(e,(e=>p.P.is(e)&&p.x.isVisible(e)&&!p.x.isApplied(e)&&(0,i.pipe)(this._alertsReader.getRegistered(e.meta.alertId),l.exists((n=>this._alertsFilterService.alertCanBeDisplayed(n)&&t(n)&&n.getHighlightRanges().some((t=>t.meta.id===e.meta.id))))))),l.chain((e=>(0,i.pipe)(this._alertsReader.getRegistered(e.meta.alertId),l.map((t=>{const n={alert:I.$.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex((t=>t.meta.id===e.meta.id))};return n.highlightIndex<0&&(this._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:n.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(this._positionManager.findRanges((e=>p.P.is(e)&&e.meta.alertId===t.id))),hasPendingRanges:t.hasNewRangesForUpdate}),n.highlightIndex=0),n}))))))}findNextAlertInText({alert:e,highlightIndex:t},n){const r=e.getHighlightRanges();return(0,a.kG)(t<r.length,"AHI is out of highlightRanges length",`hr length: ${r.length}, ahi: ${t}`),this.findClosestAlertHighlight(r[t].end,n)}findNextAlertInTextByLens(e,t,n){return this.findNextAlertInText(e,this._alertsFilterService.alertVisibleInText(t,n))}findPremiumAlert(){return this._lensPreviewVM.getLens(m.R.SpecialId.Premium).get().count>0?(0,i.pipe)(this._checkingState.get(),f.p.find((0,r.flow)(h.bZ.fromAlertModel,(0,c.W9)(h.bZ.isRegistered,h.bZ.isPremium))),l.map((e=>({alert:I.$.fromModel(e.alert),highlightIndex:0})))):l.none}hasZeroFreeAlerts(e){return 0===this._lensPreviewVM.getLens(e.get()).get().priorityCount}_getMetaChangesObservable(e){return k.nL.hasItems(e)&&e.currentLens.kind===k._L.persistent?this._lensPreviewVM.getLens(e.currentLens.id).view(this._updateMetaSource(e.currentLens.id)):k.nL.hasItems(e)&&e.currentLens.type===k.Nm.lensview?this._lenses.pipe(b.x(g.w.eq.equals),w.U((0,r.flow)(g.w.lookup(e.currentLens.id),l.map(this._updateMetaSource(e.currentLens.id)),l.getOrElse((()=>k.nL.Effect.Applicator.Source.identity))))):k.nL.Effect.Applicator.Source.empty}_generateEventsFromState(e,t){return _.T(this._checkingState.pipe(C.G(),w.U((([e,t])=>f.p.diff(e,t))),E.w(O._filterALEvents(e.currentLens.meta.filter)),w.U(this._conditionedApplicator(((e,t)=>{const n=this._alertsFilterService.getLensesFilter(e.currentLens.id),o=(0,i.pipe)(t,f.p.Diff.filter((0,r.not)((({alert:e})=>n(e)))));return s.v.isEmpty(o)||this._log.info("tried to send event with alerts that do not fit current lens, skipping",{diff:f.p.Diff.show.show(o)}),s.v.isEmpty(o)}),this._transformAlertsDiffToApplicator(t)))),this._getMetaChangesObservable(e)).pipe(S.O(k.nL.Effect.Applicator.Source.override(e)))}_getActiveLensMeta(e){const t=O._mapByActiveLensId(e,(()=>this._lensPreviewVM.getLens(m.R.SpecialId.Plagiarism).get()),(()=>this._lensPreviewVM.getLens(m.R.SpecialId.Premium).get()),(()=>this._lensPreviewVM.getLens(e).get()));return(0,a.kG)(void 0!==t,`unknown lensId:${e}`),t}_createState({alertSource:e,switchOrder:t},n,r,o,s){(0,a.kG)(u.forAll((({alert:e})=>l.isSome(this._alertsReader.getInteractable(e.id))))(n),"we can create state only with alert in registered state",(()=>(0,i.pipe)(n,l.fold((()=>"null"),(e=>e.toString())))));const c=this._createLens({lensId:o,initialLens:r,visibleAlerts:s,alertHighlight:n,alertSource:e});return k.nL.create({currentLens:c,alertSource:e,switchOrder:t})}_createLens(e){const t=(0,i.pipe)(this._focusFirstFilter(e),l.map((({alert:t,highlightIndex:n})=>({alertIndex:e.visibleAlerts.findIndex((0,k.Tl)(t)),highlightIndex:n}))));return this._lensViewFactory.create(e.lensId,e.initialLens,e.visibleAlerts,t)}_getAlertToFocus(e,t){switch(e.kind){case k.nL.Effect.FocusBehaviorType.noFocus:case k.nL.Effect.FocusBehaviorType.unFocus:return l.none;case k.nL.Effect.FocusBehaviorType.focusFirst:return k.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):l.none;case k.nL.Effect.FocusBehaviorType.focusNext:return k.nL.hasItems(t)?this._capabilities.findNextAlert(t.currentLens):l.none;case k.nL.Effect.FocusBehaviorType.focusAlert:return l.some(e.alertHighlight);default:(0,a.vE)(e)}}}},39920:(e,t,n)=>{n.d(t,{is:()=>l,kn:()=>c,ad:()=>u,gi:()=>d});var r,i=n(22232),o=n(66896),a=n(35416),s=n(93494);!function(e){e.compose=function(e){return t=>a.CX.compose(e.map((e=>e(t))))},e.map=function(e,t){return n=>t(e(n))}}(r||(r={}));const l=(e,t)=>n=>{if(o.R.isOutcomeId(n))return s.v.WithSuccess.getAlertHandler(e,t);switch(n){case o.R.SpecialId.Premium:return s.v.Premium.getAlertsHandler(e,t);case o.R.SpecialId.AllAlerts:case o.R.SpecialId.Priority:case o.R.SpecialId.PredictionTakeaways:case o.R.SpecialId.PredictionEmogenie:case o.R.SpecialId.RealTimeProofit:return s.v.WithSuccess.getAlertHandler(e,t);default:return(0,i.vE)(n)}},c=(e,t,n,r,i)=>o=>n(o)?s.v.WithBundles.getAlertsHandler(e,t,i):r(o);class u{constructor(e,t,n,r,i,o){this._cardFactory=e,this._alertsFilterService=t,this._lensPredicate=n,this._inner=r,this._itemEq=i,this._itemOrd=o}create(e,t,n,r){return this._lensPredicate(t)?s.v.WithBundles.create(e,t,n.filter(this._alertsFilterService.alertVisibleInSidebar(e)),r,this._cardFactory,this._itemEq,this._itemOrd):this._inner.create(e,t,n,r)}}class d{constructor(e,t,n,r){this._cardFactory=e,this._alertsFilterService=t,this._itemEq=n,this._itemOrd=r}create(e,t,n,r){const a=()=>s.v.WithSuccess.create(e,t,n.filter(this._alertsFilterService.alertVisibleInSidebar(e)),r,this._cardFactory,this._itemEq,this._itemOrd);if(o.R.isOutcomeId(e))return a();switch(e){case o.R.SpecialId.Premium:return s.v.Premium.create(t,n,this._cardFactory,this._itemEq,this._itemOrd);case o.R.SpecialId.AllAlerts:case o.R.SpecialId.Priority:case o.R.SpecialId.PredictionTakeaways:case o.R.SpecialId.PredictionEmogenie:case o.R.SpecialId.RealTimeProofit:return a();default:return(0,i.vE)(e)}}}},88772:(e,t,n)=>{n.d(t,{t:()=>r});var r,i=n(95195),o=n(35416);!function(e){e.nothing=i.left,e.liftLensState=function(e){return t=>i.left(Object.assign(Object.assign({},t),{state:e(t.state)}))},e.liftWithItemsState=function(e){return t=>i.left(Object.assign(Object.assign({},t),{state:o.nL.hasItems(t.state)?o.nL.Prism.getLensWithItems().modify(e,t.state):t.state}))},e.liftLensView=function(e){return t=>i.left(Object.assign(Object.assign({},t),{state:o.nL.hasCards(t.state)?o.nL.Prism.getLens().modify(e,t.state):t.state}))}}(r||(r={}))},17372:(e,t,n)=>{var r,i;n.d(t,{K:()=>r,z:()=>i}),function(e){e.isPriorityMode=e=>e===i.priority}(r||(r={})),function(e){e.priority="priority",e.all="all"}(i||(i={}))},74364:(e,t,n)=>{n.d(t,{EQ:()=>O,tn:()=>x,$A:()=>T});var r,i=n(57050),o=n(40327),a=n(8125),s=n(95574),l=n(22232),c=n(83078),u=n(5114),d=n(95195),p=n(40018),h=n(66896),m=n(98403),f=n(19751),g=n(32952),y=n(28043),v=n(66310),b=n(40151),w=n(44586),_=n(78674),C=n(77176),E=n(598),S=n(83401),I=n(2834),k=n(73975),A=n(71249);!function(e){e.eq=(0,k.getStructEq)({alert:(0,k.contramap)((e=>e.id))(k.eqStrict),highlightIndex:k.eqStrict}),e.getEq=()=>e.eq,e.getHighlightRange=e=>A.lookup(e.highlightIndex)(e.alert.getHighlightRanges())}(r||(r={}));var x,T,O,R=n(35416);!function(e){let t;!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(t=e.Type||(e.Type={}))}(x||(x={})),function(e){e.Mock=class{constructor(){this.events=new g.xQ,this.focusAlertHighlight=()=>d.left(new Error("Method not implemented.")),this.highlightAlertHighlight=()=>d.left(new Error("Method not implemented.")),this.moveCursorToHighlight=a.ZT}ensureAlertHighlightInViewport(){throw new Error("Method not implemented.")}getMarkByAlert(e){throw new Error("Method not implemented.")}getAlertByMark(e){throw new Error("Method not implemented.")}},e.getHighlightIndex=function(e,t){return(0,o.pipe)(t,d.mapLeft((()=>new Error("Mark is collapsed"))),d.chain((t=>s.tryCatchError((()=>{const n=e.getHighlightRanges(),r=n.length>1?n.findIndex((e=>e.start===t.start&&e.end===t.end)):0;return(0,l.kG)(-1!==r,"Could not find highlight index by Range for provided Alert",(()=>JSON.stringify({alertRanges:n,targetRange:t}))),r})))))}}(T||(T={})),function(e){e.getHighlightSubscribtion=(e,t,n)=>e.pipe(y.x(u.getEq(p.h$.ord).equals),v.w((e=>(0,o.pipe)(e,u.fold((()=>b.E),(e=>w.y.create((()=>(n.debug(`highlight mark: ${e.id}`),(0,o.pipe)(t.highlightAlertHighlight(e),d.fold((t=>(n.error(`Cannot highlight mark: ${e.id}`,t),a.ZT)),(t=>()=>{n.debug(`unhighlight mark: ${e.id}`),t.dispose()})))))))))))),e.highlightMarkByHighlightedCard=(t,n,r,a,s,l)=>{const c=e.getHighlightSubscribtion(t.hovered.pipe(_.b(100),C.U((0,i.flow)(u.chain((e=>{const t=n.get();return R.nL.hasCards(t)?t.currentLens.items.find((t=>(0,o.pipe)(s.hasActiveAlert(t),u.exists((n=>t.id===e&&a.isRegistered(n.id)))))):u.none})),u.chain((({value:e})=>s.hasActiveAlert(e)))))),r,l);return{id:"highlightMarkByHighlightedAlert",when:h.R.isWithAlertsId,what:R.nL.Effect.Applicator.create(c.pipe(E.c(S.C)))}},e.focusMarkByActiveAlert=(e,t,n,i,s)=>{const l=e.view(R.nL.mapper((({currentLens:e,alertSource:t})=>(0,o.pipe)(i(e),u.map((e=>({alert:e.activeAlert,source:t,highlightIndex:e.activeHighlightIndex}))))))).pipe(v.w(m.b2.rafScheduler),f.$f(u.getEq(r.getEq())),C.U(u.filter((e=>u.isSome(n.getRegistered(e.alert.id))))),I.b(c.tap((e=>s.trace("new alert highlight: ",e)))),v.w(u.fold((()=>(s.debug("Nothing to focus"),b.E)),(e=>w.y.create((()=>(s.debug(`Focus mark: ${e.alert.id} | ${e.highlightIndex}`),e.source===p.l$.sidebar&&t.moveCursorToHighlight(e,"start"),(0,o.pipe)(t.focusAlertHighlight(e),d.fold((t=>(s.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),a.ZT)),(t=>()=>{s.debug(`Unfocus mark: ${e.alert.id} | ${e.highlightIndex}'`),t.dispose()}))))))))));return{id:"focusMarkByActiveAlert",when:h.R.isWithAlertsId,what:R.nL.Effect.Applicator.create(l.pipe(E.c(S.C)))}}}(O||(O={}))},43637:(e,t,n)=>{n.d(t,{Bo:()=>h,eh:()=>p,TV:()=>d});var r,i=n(38983),o=n(8125),a=n(5114),s=n(32952),l=n(22232),c=n(66896);!function(e){e.Mock=class{constructor(e={}){this._previewConfig=e}get lensPreviews(){return Object.entries(this._previewConfig).reduce(((e,[t,n])=>{const r=this.getLens(t).get();return e[t]=Object.assign(Object.assign({},c.R.Info.base),{logo:a.none,id:t,title:r.title,description:r.description,status:n.status,progress:n.progress,isUnavailable:n.isUnavailable}),e}),{})}getLens(e){const t=t=>t.lensId===e;if(c.R.isOutcomeId(e))return i.h.create(new c.R.LensImpl(c.R.Info.createOutcome(e),c.R.Meta.group.empty,t));switch(e){case c.R.SpecialId.AllAlerts:return i.h.create(new c.R.LensImpl(c.R.Info.allAlerts,c.R.Meta.group.empty,t));case c.R.SpecialId.Premium:return i.h.create(new c.R.LensImpl(c.R.Info.premium,c.R.Meta.group.empty,t));case c.R.SpecialId.Plagiarism:return i.h.create(new c.R.LensImpl(c.R.Info.plagiarism,c.R.Meta.group.empty,t));case c.R.SpecialId.Priority:return i.h.create(new c.R.LensImpl(c.R.Info.priority,c.R.Meta.group.empty,t));case c.R.SpecialId.PredictionTakeaways:return i.h.create(new c.R.LensImpl(c.R.Info.predictionTakeaways,c.R.Meta.group.empty,t));case c.R.SpecialId.PredictionEmogenie:return i.h.create(new c.R.LensImpl(c.R.Info.predictionEmogenie,c.R.Meta.group.empty,t));case c.R.SpecialId.RealTimeProofit:return i.h.create(new c.R.LensImpl(c.R.Info.realTimeProofit,c.R.Meta.group.empty,t));default:return(0,l.vE)(e)}}findLens(){return a.none}}}(r||(r={}));var u,d,p,h,m=n(17372);!function(e){e[e.EngagementHook=0]="EngagementHook",e[e.DeliveryHook=1]="DeliveryHook",e[e.PlagiarismHook=2]="PlagiarismHook",e[e.ProofitHook=3]="ProofitHook",e[e.GbVoxHook=4]="GbVoxHook",e[e.GbEnableVoxHook=5]="GbEnableVoxHook"}(u||(u={})),function(e){e.NotAvailable="NotAvailable",e.EmptyDocument="EmptyDocument"}(d||(d={})),function(e){e.NotAvailable="NotAvailable",e.EmptyDocument="EmptyDocument"}(p||(p={})),function(e){let t;!function(e){e.default="default",e.priority="priority"}(t=e.LensTitleType||(e.LensTitleType={})),e.documentActionAvailable={kind:"available"},e.proofitDisabled=e=>({kind:"disabled",reason:e}),e.plagiarismDisabled=e=>({kind:"disabled",reason:e});e.Mock=class{constructor(n={}){this.documentActions=i.h.create({proofit:e.documentActionAvailable,plagiarism:e.documentActionAvailable}),this.popover=i.h.create(a.none),this.showMuteControl=i.h.create(!1),this.isDocumentActionsDisabled=i.h.create(!1),this.lensMode=i.h.create(m.z.all),this.defaultLensMode=m.z.all,this.events=new s.xQ,this.lensModeEvents=new s.xQ,this.lensTitleType=t.default,this.dispose=o.ZT;const l=new r.Mock(n);this.lensPreviews=i.h.create(l.lensPreviews)}}}(h||(h={}))},64992:(e,t,n)=>{n.d(t,{x:()=>g,O:()=>y});var r=n(45701),i=n(18208),o=n(68983),a=n(66896),s=n(2291);function l(e){return`${e} ${i.pluralize(e,"alert","alerts")}`}const c=(e,t)=>(n,r,i,o)=>{const a=o?n.count:n.priorityCount;return a>0?l(a):i&g.IsDocumentEmpty?e:t},u={description:"Improves spelling, grammar, and punctuation.",stateMessage:c("No alerts","Looking good")},d={description:"Helps make your writing easier to understand.",stateMessage(e,t,n){const i=(0,o.W)(r.lt(s.g.ord))(t);if(n&g.IsDocumentEmpty)return"So far so good";if(e.count>0){if(s.g.isMin(t))return l(e.count);if(i(s.g.fromNumber(20)))return"Unclear";if(i(s.g.fromNumber(70)))return"A bit unclear";if(i(s.g.fromNumber(85)))return"Mostly clear";if(i(s.g.fromNumber(95)))return"Clear"}return"Very clear"}},p={description:"Helps make your writing more interesting and effective.",stateMessage(e,t,n){const i=n&g.IsFreeUser,a=s.g.isMin(t),c=(0,o.W)(r.lt(s.g.ord))(t);if(n&g.IsDocumentEmpty||i&&a)return"Nothing yet";if(i||e.count>0){if(a)return l(e.count);if(c(s.g.fromNumber(20)))return"Bland";if(c(s.g.fromNumber(80)))return"A bit bland";if(c(s.g.fromNumber(95)))return"Engaging"}return"Very engaging"}},h={description:"Helps you make the right impression on your reader.",stateMessage(e,t,n){const i=n&g.IsFreeUser,a=s.g.isMin(t),c=(0,o.W)(r.lt(s.g.ord))(t);if(n&g.IsDocumentEmpty||i&&a)return"Nothing yet";if(i||e.count>0){if(a)return l(e.count);if(c(s.g.fromNumber(20)))return"Serious issues";if(c(s.g.fromNumber(40)))return"Very off";if(c(s.g.fromNumber(95)))return"Slightly off"}return"Just right"}},m={description:"Your organization’s writing guidelines.",stateMessage:c("Nothing yet","All good")},f={[a.R.SpecialId.Correctness]:u,[a.R.SpecialId.CorrectnessPriority]:u,[a.R.SpecialId.Clarity]:d,[a.R.SpecialId.ClarityPriority]:d,[a.R.SpecialId.Engagement]:p,[a.R.SpecialId.EngagementPriority]:p,[a.R.SpecialId.Delivery]:h,[a.R.SpecialId.DeliveryPriority]:h,[a.R.SpecialId.Vox]:m,[a.R.SpecialId.VoxPriority]:m,[a.R.SpecialId.Plagiarism]:{description:"Checks for similarities to published writing.",stateMessage:(e,t,n)=>n&g.IsLensVisited&&!(n&g.IsDocumentEmpty)?n&g.IsLensActive?s.g.isMin(t)?"100% original":`${t}% unoriginal`:"Recheck":"Not checked yet"},[a.R.SpecialId.Premium]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:(e,t,n)=>n&g.IsDocumentEmpty?"Advanced checks":`${e.count} more ${i.pluralize(e.count,"alert","alerts")}`}};var g;function y(e){return f[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(g||(g={}))},25970:(e,t,n)=>{n.d(t,{g:()=>s});var r,i=n(57050),o=n(5114),a=n(38983);!function(e){let t,n;!function(e){e[e.CHECKED=0]="CHECKED",e[e.NOT_CHECKED=1]="NOT_CHECKED"}(t=e.PlagiarismCheckingState||(e.PlagiarismCheckingState={})),function(e){e.Mock=class{constructor(){this.downloadStarted=a.h.create(!1),this.beginDownload=i.constVoid,this.tryToInterrupt=i.constVoid,this.generateReport=()=>{throw new Error("Method not implemented.")},this.reportData=a.h.create(o.none),this.dedHTML="",this.dispose=i.constVoid}}}(n=e.ViewModel||(e.ViewModel={}))}(r||(r={}));var s,l=n(76974);!function(e){let t,n;!function(e){let t;!function(e){e[e.ERROR=0]="ERROR",e[e.EMPTY=1]="EMPTY",e[e.LOADING=2]="LOADING",e[e.SHORT_CONTENT=3]="SHORT_CONTENT",e[e.READY=4]="READY"}(t=e.Type||(e.Type={}))}(t=e.State||(e.State={})),function(e){e.Mock=class{constructor(e={type:t.Type.EMPTY},n=o.some(new r.ViewModel.Mock)){this.statisticsState=e,this.reportViewModel=n,this.state=l.of(this.statisticsState),this.onModalClose=i.constVoid}}}(n=e.ViewModel||(e.ViewModel={}))}(s||(s={}))},27125:(e,t,n)=>{if(n.d(t,{L:()=>E,g:()=>i}),75==n.j)var r=n(40327);var i,o=n(38983);if(75==n.j)var a=n(84966);if(75==n.j)var s=n(5114);if(75==n.j)var l=n(66896);if(75==n.j)var c=n(35416);if(75==n.j)var u=n(32952);if(75==n.j)var d=n(85985);if(75==n.j)var p=n(77176);if(75==n.j)var h=n(66310);if(75==n.j)var m=n(98403);if(75==n.j)var f=n(93508);if(75==n.j)var g=n(16118);if(75==n.j)var y=n(76974);if(75==n.j)var v=n(50628);if(75==n.j)var b=n(17343);if(75==n.j)var w=n(60797);if(75==n.j)var _=n(2834);if(75==n.j)var C=n(93494);class E{constructor(e,t,n,y,v,b,w,_=C.v.WithSuccess.State.isInSuccess(y),E){this._state=e,this._documentModel=t,this._trackSuccessStateChanged=n,this._capabilities=y,this.nonPriorityOptions=v,this.mutedAlertsOptions=b,this.hasNonPriorityAlerts=w,this.isInSuccess=_,this._withBirthday=E,this._getTextAmount=e=>0===e?i.TextAmount.zero:e<=a.hD?i.TextAmount.small:i.TextAmount.large,this._subs=[],this.textAmount=o.h.create(this._getTextAmount(this._documentModel.documentLength.get().trimmed)),this.actionEvents=new u.xQ,this.applicatorEffects={id:"successViewModel.effects",when:l.R.isWithAlertsId,what:c.nL.Effect.Applicator.create(this.actionEvents.pipe(d.h((({type:e})=>e===i.ActionType.More)),p.U((()=>e=>{const t=e.patch({currentLens:c.nL.hasItems(e)&&(0,c.yi)(e.currentLens)?this._capabilities.toggleNonPriorityList("expanded")(e.currentLens):e.currentLens});return(0,r.pipe)(c.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):s.none,s.fold((()=>t),(e=>t.patch({currentLens:c.nL.hasItems(t)?this._capabilities.selectItemByAlert(e)(t.currentLens):t.currentLens}))))}))))},this._currentLens=this._state.view((e=>({isSuccess:this.isInSuccess(e),type:e.currentLens.type,nonPriorityAlertsLeft:c.nL.isLensview(e)&&c.nL.hasItems(e)&&0!==this._capabilities.getActiveAlertsCount(e.currentLens),isAllAlerts:l.R.isMainLens(e.currentLens.id)}))),this._listenTextSize=()=>this._currentLens.view((e=>e.isSuccess)).pipe(h.w(m.Ft(this._documentModel.documentLength.view("trimmed"))),p.U(this._getTextAmount)).subscribe(m.wW(this.textAmount)),this._lensSwitch=this._currentLens.pipe(f.O(this._currentLens.get()),g.G(),p.U((([e,t])=>t.isSuccess?s.some({prevLensType:e.type,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}):s.none))),this._textAmountToSuccessType=e=>e===i.TextAmount.zero?{type:i.SuccessType.zero,showBirthday:this._withBirthday.get()}:e===i.TextAmount.large?{type:i.SuccessType.large}:{type:i.SuccessType.small},this.successState=o.h.create({type:i.SuccessType.zero,showBirthday:this._withBirthday.get()}),this._subs.push(this._listenTextSize(),this._listenSuccessStateChange()),this.priorityList=(0,r.pipe)(v,s.map((e=>({hasNonPriorityAlerts:this._state.view(w),reviewNonPriorityAlerts:()=>{e.trackNonPriorityToggle(),this.actionEvents.next({type:i.ActionType.More})}})))),this.mutedAlerts=(0,r.pipe)(b,s.map((()=>({reviewMutedSuggestions:()=>{},mutedSuggestionsCount:this._state.view((e=>e.currentLens.meta.mutedCount))}))))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_listenSuccessStateChange(){const e=e=>e.type===i.SuccessType.applied||e.type===i.SuccessType.zero?y.of(e):this._documentModel.checkingState.pipe(d.h((e=>"checking"!==e)),v.P(),b.h(e));return this._lensSwitch.pipe(w.cp((t=>this.textAmount.pipe(p.U(this._textAmountToSuccessType),f.O(t.prevLensType===c.Nm.lensview?{type:i.SuccessType.applied,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}:this._textAmountToSuccessType(this.textAmount.get())),g.G(),p.U((([e,t])=>e.type===i.SuccessType.applied&&t.type!==i.SuccessType.zero?e:t)),h.w(((t,n)=>0===n?y.of(t):e(t))),_.b((e=>{this._trackSuccessStateChanged(e.type===i.SuccessType.applied?"applied":e.type===i.SuccessType.zero?"nothingToCheck":"noIssues")})))))).subscribe(m.wW(this.successState))}}!function(e){let t,n,r;!function(e){e.More="More"}(t=e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(n=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied"}(r=e.SuccessType||(e.SuccessType={}));e.Mock=class{constructor(){this.textAmount=o.h.create(n.zero),this.successState=o.h.create({type:r.zero,showBirthday:!1}),this.mutedSuggestionsCount=o.h.create(0),this.hasNonPriorityAlerts=o.h.create(!1)}reviewMutedSuggestions(){throw new Error("Method not implemented.")}reviewNonPriorityAlerts(){throw new Error("Method not implemented.")}dispose(){throw new Error("Method not implemented.")}}}(i||(i={}))},85287:(e,t,n)=>{n.d(t,{Dn:()=>a,AP:()=>l,rD:()=>C,IY:()=>k,$4:()=>D,bb:()=>F});var r=n(63969),i=n(40219),o=n(50224);const a="linear",s=r.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),l=r.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),c=r.u.keyframes({from:{opacity:1,transform:"translateY(0) scaleY(1)"},to:{opacity:0,transform:"translateY(-75%) scaleY(.5)"}}),u=r.u.keyframes({"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(1)"}}),d=r.u.keyframes({"0%":{opacity:0,transform:"scaleY(.2) translateY(-50%)"},"80%":{opacity:1,transform:"scaleY(.8) translateY(0%)"},"100%":{opacity:1,transform:"scaleY(1)"}}),p=r.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"100%":{opacity:0,transform:"scaleY(0)"}}),h=r.u.keyframes({"0%":{opacity:0,transform:"scale(.8)"},"100%":{opacity:1,transform:"scale(1)"}}),m=r.u.keyframes({"0%, 100%":{opacity:0}}),f=r.u.keyframes({"0%, 59%":{opacity:0},"60%, 100%":{opacity:1}}),g=r.u.keyframes({"0%":{opacity:0},"80%":{opacity:0},"100%":{opacity:1}}),y=r.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"59%":{opacity:1},"60%":{opacity:0},"100%":{opacity:0,transform:"scaleY(0)"}}),v=r.u.keyframes({"0%":{opacity:1},"30%, 100%":{opacity:0}}),b=r.u.keyframes({"0%":{transform:"scaleY(.3)"},"100%":{transform:"scaleY(1)"}}),w=r.u.keyframes({"0%, 20%":{opacity:0},"100%":{opacity:1}}),_={position:"relative",margin:`${r.u.rem(.5)} ${r.u.rem(2)} ${r.u.rem(.5)} 0`,userSelect:"none"},C={position:"absolute",width:r.u.percent(100),pointerEvents:"none"},E={opacity:0,animation:`${s} ${r.u.seconds(i.v4/4/1e3)} ${a} ${r.u.seconds(i.v4/1e3)} forwards`},S={transformOrigin:"top",animation:`${l} ${r.u.seconds(i.v4/1e3)} ${a} forwards`},I={transformOrigin:"bottom",animation:`${c} ${r.u.seconds(i.v4/1e3)} ${a} forwards`},k={transformOrigin:"top",willChange:"contents"},A={animation:`${u} ${r.u.seconds(i.v4/1e3)} ${a} forwards`},x={animation:`${d} ${r.u.seconds(i.v4/1e3)} ${a} forwards`},T={animation:`${p} ${r.u.seconds(i.v4/1e3)} ${a} reverse forwards`},O={animation:`${p} ${r.u.seconds(i.v4/1e3)} ${a} forwards`},R={animation:`${h} ${r.u.seconds(i.v4/1e3)} ${a} forwards`},N={animation:`${h} ${r.u.seconds(i.v4/1e3)} ${a} reverse forwards`},L={transformOrigin:"top",animation:`${f} ${r.u.seconds(i.v4/1e3)} ${a} forwards`,willChange:"contents",$nest:{[`& .${o.g.successWrapperSelector} > *`]:{animation:`${g} ${r.u.seconds(i.v4/1e3)} ${a} forwards`}}},P={position:"absolute",width:r.u.percent(100),transformOrigin:"top",animation:`${y} ${r.u.seconds(i.v4/1e3)} ${a} forwards`,pointerEvents:"none",$nest:{[`& .${o.g.fullCardSelector} > :not(.${o.g.alignButtonHiddenSelector})`]:{animation:`${v} ${r.u.seconds(i.v4/1e3)} ${a} forwards`},[`& .${o.g.fullCardSelector} > .${o.g.alignButtonHiddenSelector}`]:{animation:`${m} ${r.u.seconds(i.v4/1e3)} ${a} none`},[`& .${o.g.fullCardSelector}`]:{transform:`translateY(${r.u.rem(-1)})`}}},M={transformOrigin:"top",animation:`${b} ${r.u.seconds(i.v4/1e3)} ${a} forwards`,willChange:"contents",$nest:{[`& .${o.g.fullCardSelector} > :not(.${o.g.alignButtonHiddenSelector})`]:{animation:`${w} ${r.u.seconds(i.v4/1e3)} ${a} forwards`},[`& .${o.g.fullCardSelector} > .${o.g.alignButtonHiddenSelector}`]:{animation:`${m} ${r.u.seconds(i.v4/1e3)} ${a} none`}}},D=r.u.stylesheet({wrapper:[_],animationWrapper:[{position:"relative"}],shade:[C],focused2renderedMain:[E],focused2renderedShade:[C,S],focused2renderedShadeClockwise:[C,I],rendered2focusedMainBase:[k],rendered2focusedMain:[k,A],rendered2focusedMainClockwise:[k,x],addedMain:[T],rendered2removedShade:[C,O],openedMain:[R],closedMain:[N],focused2successMain:[L],focused2successShade:[P],success2FocusedMain:[M]}),F=new Map([[l,D.focused2renderedShade],[c,D.focused2renderedShadeClockwise],[p,D.rendered2removedShade],[y,D.focused2successShade]])},22800:(e,t,n)=>{n.d(t,{S:()=>S,c:()=>I});var r=n(63969),i=n(40219),o=n(85287),a=n(50224);const s=r.u.keyframes({from:{opacity:0,transform:"translateY(50%)"},to:{opacity:1,transform:"translateY(0)"}}),l=r.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(-25%)"}}),c=r.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}}),u=r.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(150%)"}}),d=r.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),p=r.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),h=r.u.keyframes({from:{transform:"translateY(-10%)"},to:{transform:"translateY(0)"}}),m=r.u.keyframes({from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),f=r.u.keyframes({from:{transform:"translateY(150%)"},to:{transform:"translateY(0)"}}),g=r.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),y=r.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(125%)"}}),v={opacity:0,animation:`${s} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`},b={transformOrigin:"top",animation:`${o.AP} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`,$nest:{[`& .${a.g.bundleInnerContainerSelector}`]:{animation:`${l} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`,$nest:{[`& .${a.g.bundleFakeCard1Selector}`]:{animation:`${c} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`},[`& .${a.g.bundleFakeCard2Selector}`]:{animation:`${u} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`}}}}},w={transformOrigin:"top",animation:`${d} ${r.u.seconds(i.v4/1500)} ${o.Dn} forwards`,$nest:{[`& .${a.g.bundleInnerContainerSelector}`]:{animation:`${l} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`,$nest:{[`& .${a.g.bundleFakeCard1Selector}`]:{animation:`${c} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`},[`& .${a.g.bundleFakeCard2Selector}`]:{animation:`${u} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`}}}}},_={animation:`${p} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`,$nest:{[`& .${a.g.bundleInnerContainerSelector}`]:{animation:`${h} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`,$nest:{[`& .${a.g.bundleFakeCard1Selector}`]:{animation:`${m} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`},[`& .${a.g.bundleFakeCard2Selector}`]:{animation:`${f} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`}}}}},C={animation:`${g} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`,$nest:{[`& .${a.g.bundleInnerContainerSelector}`]:{animation:`${h} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`,$nest:{[`& .${a.g.bundleFakeCard1Selector}`]:{animation:`${m} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`},[`& .${a.g.bundleFakeCard2Selector}`]:{animation:`${f} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`}}}}},E={animation:`${y} ${r.u.seconds(i.v4/1e3)} ${o.Dn} forwards`},S=r.u.stylesheet({focused2renderedBundleMain:[v],focused2renderedBundleShade:[o.rD,b],focused2renderedBundleShadeClockwise:[o.rD,w],rendered2focusedBundleMain:[o.IY,_],rendered2focusedBundleMainClockwise:[o.IY,C],rendered2focusedBundleShade:[o.rD,E]}),I=new Map([[o.AP,S.focused2renderedBundleShade],[d,S.focused2renderedBundleShadeClockwise],[y,S.rendered2focusedBundleShade]])},32338:(e,t,n)=>{n.d(t,{C:()=>h,B:()=>S});var r=n(27378),i=n(5739),o=n(12187),a=n(90351),s=n(63969),l=n(24588),c=n(40219),u=n(15646),d=n(94793),p=n(3656);class h extends r.Component{constructor(){super(...arguments),this._createCardToggler=e=>()=>this.props.actions.next({type:u.lY.Type.hover,kind:e,id:this.props.cardId})}componentWillUnmount(){this._createCardToggler("unhover")()}render(){const{getActiveAlert:e,cardId:t,actions:n,children:a,counter:s,className:l,hideActivateButton:c}=this.props;return r.createElement(i.F.div,Object.assign({"data-aid":t,onClick:t=>{const r=e();n.next({type:u.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:r},clickPoint:{x:t.clientX,y:t.clientY}})},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,o.Sh)(l,S.wrapper,S.miniCard)),r.createElement(p.XY,{className:S.contentWrapper},a),r.createElement("div",{className:S.iconContainer},s&&r.createElement("div",{className:f},s),c?null:r.createElement("div",{className:y},r.createElement(d.JO.Arrow,{className:S.activeTopIcon}),r.createElement(d.JO.Arrow,{className:S.activeBottomIcon}))))}}const m="baseMiniCounterContainer",f=s.u.joinClasses([m,s.u.style({position:"absolute",height:s.u.percent(100),top:0,right:0,zIndex:c.VN,margin:"auto 0",background:a.Il.CoreNeutral0,opacity:1})]),g="baseMiniActivateBtnSelector",y=s.u.joinClasses([g,s.u.style({position:"absolute",top:0,right:0,height:s.u.percent(100),zIndex:c.VN,display:"flex",flexDirection:"column",margin:"auto 0",background:a.Il.CoreNeutral0,opacity:0,justifyContent:"center"})]),v={position:"relative",display:"flex",overflow:"hidden",borderRadius:s.u.rem(c.fx),background:a.Il.CoreNeutral0,boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",cursor:"pointer",alignItems:"center",$nest:{"&:hover":{background:a.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:s.u.seconds(.2)},[`&:hover .${g}`]:{opacity:1},"&:hover .baseMiniCounterContainer":{opacity:0}}},b={overflow:"hidden",margin:`0 ${s.u.rem(3)} 0 ${s.u.rem(2)}`,color:l.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:s.u.rem(1.5)},w={position:"absolute",top:0,right:s.u.rem(.5),bottom:0,display:"flex"},_={display:"flex",margin:`${s.u.rem(.1)} 0 ${s.u.rem(-1.25)}`,transform:"rotate(180deg)"},C={$nest:{"&:before":{position:"absolute",width:s.u.px(10),height:s.u.px(10),borderRadius:s.u.percent(50),content:"''",transform:"scale(.5)"}}},E={$nest:{"&:before":{margin:`auto 0 auto ${s.u.rem(.75)}`}}},S=s.u.stylesheet({wrapper:[v],contentWrapper:[b],iconContainer:[w],activeTopIcon:[_],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[C],miniCard:[C,E]})},50225:(e,t,n)=>{n.d(t,{b:()=>U});var r=n(27378),i=n(57050),o=n(40327),a=n(5739),s=n(38983),l=n(5114),c=n(54338),u=n(15646),d=n(85287),p=n(22800),h=n(35108);const m=({children:e})=>r.createElement(a.F.div,{role:"animation-wrapper",className:d.$4.animationWrapper},e),f=e=>(0,o.pipe)(l.fromNullable(e.activeAlert),l.fold((()=>e.id),(e=>e.id)));class g extends r.Component{constructor(){super(...arguments),this._elementState=c.f.emptyWithName("card")}_stateToElement(e){switch(e){case"added":case"rendered":return this.props.miniCard;case"focused":case"expanded":case"presuccess":return this.props.fullCard;case"success":return this.props.successCard;case"feedback_form":return this.props.feedbackForm;case"removed":return this.props.removedCard;case"muted":return this.props.mutedCard;default:return null}}componentWillUnmount(){const{card:e,actions:t}=this.props;t.next({type:u.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId})}render(){const{actions:e,card:t,transitionClassMapper:n}=this.props;if(!t.visualState.incomplete)return r.createElement(m,null,r.createElement(a.F.div,{key:t.visualState.transition.type},this._stateToElement(t.visualState.transition.type)));const g=n||h.SA,{main:y,shade:v}=g(t.visualState),b=s.h.create(void 0===v?l.none:(0,o.pipe)(t.visualState.from,l.map((e=>({state:e,className:v})))));return!y&&l.isNone(b.get())&&requestAnimationFrame((()=>e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}))),r.createElement(c.f.Context.Provider,{value:this._elementState},r.createElement(m,null,b.view((0,i.flow)(l.map((({state:n,className:i})=>r.createElement(a.F.div,{className:i,key:"shade"+n+f(t),onAnimationEnd:n=>{p.c.get(n.animationName)!==i&&d.bb.get(n.animationName)!==i||(e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),requestAnimationFrame((()=>b.set(l.none))))}},this._stateToElement(n)))),l.toUndefined)),r.createElement(a.F.div,{className:y,key:"expanded"===t.visualState.transition.type?"focused":t.visualState.transition.type,onAnimationEnd:()=>e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),onTransitionEnd:()=>{"presuccess"===t.visualState.transition.type&&e.next({type:u.eI.Kind.startTransitionTo,id:t.id,transition:{type:"success",clockwise:t.visualState.transition.clockwise}})}},this._stateToElement(t.visualState.transition.type))))}}var y,v=n(32338),b=n(8125),w=n(90351),_=n(63969),C=n(24588),E=n(40219),S=n(30763),I=n(7046),k=n(94793),A=n(3656),x=n(57091),T=n(50224);!function(e){e[e.stage0=0]="stage0",e[e.stage1=1]="stage1",e[e.stage2=2]="stage2"}(y||(y={}));const O=({actions:e,isLastCard:t})=>{const n=r.useContext(S.m.Context).successLens.fixedText.titles,i=s.h.create(y.stage0),o=()=>e.next({type:u.lY.Type.switchToNext});return r.createElement(a.F.div,{className:B.successWrapper},r.createElement(A.P1,{className:B.successText,onAnimationEnd:()=>{i.set(y.stage1)}},n[(0,b.TN)(n.length)]),r.createElement(a.F.span,null,i.view((e=>e>=y.stage1&&r.createElement("span",{onAnimationEnd:()=>i.set(y.stage2)},r.createElement(k.JO.CheckmarkAnimated,{className:B.successCheckMark}))))),r.createElement(a.F.span,{className:B.successBtnHolder},t.pipe(x.a(i,((e,t)=>t<y.stage2?null:e?r.createElement(I.zx.Caps,{className:B.doneBtn,name:"done",key:"done-btn",onClick:o},"Done"):r.createElement(I.zx.Caps,{className:B.successBtn,name:"next",key:"next-card",onClick:o},"Next"))))))},R=_.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),N={fontWeight:"bold",lineHeight:_.u.rem(2),animation:`${R} ${_.u.seconds(.2)} linear forwards`},L={position:"relative",borderRadius:_.u.rem(E.Jr),background:w.Il.CoreNeutral0,boxShadow:`0 ${_.u.rem(.625)} ${_.u.rem(E.mJ)} 0 rgba(198, 203, 222, .45)`},P={display:"flex",padding:`${_.u.rem(1.5)} ${_.u.rem(2)}`,alignItems:"center"},M={marginLeft:_.u.rem(1),minWidth:0,minHeight:0,width:_.u.rem(1.325),height:_.u.rem(1.325),animation:`${R} ${_.u.seconds(.2)} linear forwards`},D={float:"right",width:_.u.rem(4),textAlign:"center",animation:`${R} ${_.u.seconds(.2)} linear forwards`},F={backgroundColor:w.Il.CoreGreen50,color:w.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:C.mb}}},B=Object.assign(Object.assign({},_.u.stylesheet({successText:[N],successCheckMark:[M],successBtnHolder:[{marginLeft:"auto",fontWeight:"bold"}],successBtn:[D],doneBtn:[D,F]})),{fullCard:_.u.joinClasses([T.g.fullCardSelector,_.u.style(L)]),successWrapper:_.u.joinClasses([T.g.successWrapperSelector,_.u.style(L,P)])});var U;!function(e){e.Mini=v.C,e.Card=g,e.Success=O}(U||(U={}))},50224:(e,t,n)=>{n.d(t,{g:()=>g,m:()=>y});var r=n(90351),i=n(63969),o=n(24588),a=n(40219);const s={position:"relative",borderRadius:i.u.rem(a.Jr),background:r.Il.CoreNeutral0,boxShadow:`0 ${i.u.rem(.625)} ${i.u.rem(a.mJ)} 0 rgba(198, 203, 222, .45)`},l={$nest:{"&:before":{position:"absolute",width:i.u.px(10),height:i.u.px(10),borderRadius:i.u.percent(50),content:"''",transform:"scale(.5)"}}},c={$nest:{"&:before":{backgroundColor:o.kl}}},u={$nest:{"&:before":{backgroundColor:o.AX}}},d={$nest:{"&:before":{backgroundColor:r.Il.CoreRed50}}},p={$nest:{"&:before":{backgroundColor:r.Il.CoreBlue50}}},h={$nest:{"&:before":{backgroundColor:r.Il.CoreGreen50}}},m={$nest:{"&:before":{backgroundColor:r.Il.CorePurple50}}},f={$nest:{"&:before":{backgroundColor:r.Il.CoreNeutral50}}},g={fullCardSelector:"fullCard",bundleInnerContainerSelector:"bundleInnerContainer",bundleFakeCard1Selector:"bundleFakeCard1",bundleFakeCard2Selector:"bundleFakeCard2",alignButtonHiddenSelector:"alignButtonHidden",cozyCardContainerSelector:"cozyCardContainer",successWrapperSelector:"successWrapper"},y=Object.assign(Object.assign({},i.u.stylesheet({dot:[l],dotAdvanced:[u],dotCritical:[c],dotCorrectness:[d],dotClarity:[p],dotEngagement:[h],dotDelivery:[m],dotVox:[f]})),{fullCard:i.u.joinClasses([g.fullCardSelector,i.u.style(s)])})},35108:(e,t,n)=>{n.d(t,{SA:()=>u,a:()=>d});var r,i=n(40327),o=n(5114),a=n(8125),s=n(81531),l=n(85287),c=n(22800);function u({from:e,transition:t,incomplete:n}){if(!n)return{};const r=p("transitionClassMapper");return(0,i.pipe)(e,o.map((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return r.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?l.$4.rendered2focusedMainClockwise:l.$4.rendered2focusedMain};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:l.$4.focused2renderedMain,shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":switch(t.type){case"success":return{main:l.$4.focused2successMain,shade:l.$4.focused2successShade};default:return{}}case"removed":switch(t.type){case"added":return r.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};default:return{}}default:return{}}})),o.getOrElse((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}})))}function d({from:e,transition:t,incomplete:n}){return n?(0,i.pipe)(e,o.map((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return p("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?c.S.rendered2focusedBundleMainClockwise:c.S.rendered2focusedBundleMain,shade:c.S.rendered2focusedBundleShade};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:c.S.focused2renderedBundleMain,shade:t.clockwise?c.S.focused2renderedBundleShadeClockwise:c.S.focused2renderedBundleShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":switch(t.type){case"success":return{main:l.$4.focused2successMain,shade:l.$4.focused2successShade};default:return{}}case"removed":switch(t.type){case"added":return p("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};default:return{}}default:return{}}})),o.getOrElse((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}}))):{}}!function(e){e.toOption=function(e){return t=>{const{main:n,shade:r}=e(t);return{main:o.fromNullable(n),shade:o.fromNullable(r)}}}}(r||(r={}));const p=(0,a.HP)(s.Monitoring.Logging.getLogger)},40111:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(27378),o=n(57050),a=n(40327),s=n(5739),l=n(59312),c=n(83078),u=n(5114),d=n(95300),p=n(78146),h=n(98036),m=function(){function e(e){this._keySelector=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this._keySelector))},e}(),f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r._keySelector=n,r.attemptedToUnsubscribe=!1,r.count=0,r._currentGroup=u.none,r}return(0,l.__extends)(t,e),t.prototype._next=function(e){var t=this,n=this._keySelector(e);(0,a.pipe)(this._currentGroup,u.fold((function(){return t._createGroup(n,e)}),(function(r){var i=r.key,o=r.group;i!==n?(o.complete(),t._currentGroup=u.none,t._createGroup(n,e)):o.closed||o.next(e)})))},t.prototype._createGroup=function(e,t){var n=new d.X(t);this._currentGroup=u.some({key:e,group:n}),this.destination.next(new p.T(e,n,this))},t.prototype._error=function(e){(0,a.pipe)(this._currentGroup,c.tap((function(t){return t.group.error(e)}))),this._currentGroup=u.none,this.destination.error(e)},t.prototype._complete=function(){(0,a.pipe)(this._currentGroup,c.tap((function(e){return e.group.complete()}))),this._currentGroup=u.none,this.destination.complete()},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(h.L),g=n(19751),y=n(77176),v=n(66310),b=n(28043),w=n(76974),_=n(8125),C=n(90351),E=n(81531),S=n(63969),I=n(40219),k=n(26027),A=n(77610),x=n(29847),T=n(50224),O=n(55636),R=n(25819),N=n(19157);!function(e){e.Mini=({card:e,actions:t})=>i.createElement(s.F.Fragment,null,e.pipe(y.U((e=>i.createElement(N.P.Bundle,{card:e,actions:t}))))),e.Full=({card:e,actions:n,renderCard:c})=>{const{isChecking:u,isCheckingGlobal:d,transform:p}=k.X.useCardStates(e),h=e=>(l("CardBundle").error("card type not supported:",e),null),f=e.pipe((e=>e.lift(new m((e=>e.activeAlert.id)))),v.w((e=>e.pipe(b.x(((e,t)=>e.activeAlertIndex===t.activeAlertIndex)),y.U((t=>({activeAlertIndex:t.activeAlertIndex,activeAlertId:t.activeAlert.id,card:(0,a.pipe)(e,b.x(((e,t)=>e.hashCode()===t.hashCode()&&e.visualState.transitionId===t.visualState.transitionId)),g.d({bufferSize:1,refCount:!0}))}))))))),_=(e,t)=>{const r=t.alerts.length,o=1===r?te.bundleInnerContainer:2===r?te.bundleInnerContainer2Cards:te.bundleInnerContainerNCards;return i.createElement(s.F.div,{className:o},c?c({card:t,actions:n,isChecking:u,isCheckingGlobal:d,transform:e}):i.createElement(R.J,{card:t,actions:n,isChecking:u,transform:e,isCheckingGlobal:d}))};return i.createElement(r,{card:e,actions:n},i.createElement(t,{state:f,stateToClassMapper:(e,t)=>{if(!e)return{prev:(0,x.EJ)(""),next:(0,x.EJ)("")};if(e.activeAlertId===t.activeAlertId)return{prev:(0,x.EJ)(te.inBundleToUpdatedCardOld),next:(0,x.EJ)(te.inBundleToUpdatedCardNew)};if(e.activeAlertIndex===t.activeAlertIndex)return{prev:(0,x.EJ)(te.inBundleToUpdatedCardOld),next:(0,x.EJ)(te.inBundleToUpdatedCardNew)};return e.activeAlertIndex<t.activeAlertIndex?{prev:(0,x.EJ)(te.inBundleToNextCardOld),next:(0,x.EJ)(te.inBundleToNextCardNew)}:{prev:(0,x.EJ)(te.inBundleToPrevCardOld),next:(0,x.EJ)(te.inBundleToPrevCardNew)}}},(e=>i.createElement(s.F.div,{className:e.view,onAnimationEnd:"prev"===e.type?e.done:o.constVoid},(0,a.pipe)(e.state.card,y.U((0,o.flow)(A.C.match({super:h,smartPhrases:t=>_("prev"===e.type?w.of(t.transform):p,t),takeaway:t=>_("prev"===e.type?w.of(t.transform):p,t),sentenceLevelBrandTones:e=>_(p,e),synfony:t=>_("prev"===e.type?w.of(t.transform):p,t),shortenIt:t=>_("prev"===e.type?w.of(t.transform):p,t),default:t=>_("prev"===e.type?w.of(t.transform):p,t)}),k.X.foldCard)))))))};class t extends x.l5{}const n=({alertCount:e})=>1===e?i.createElement(i.Fragment,null):2===e?i.createElement("div",{className:te.bundleFakeCard1}):i.createElement(i.Fragment,null,i.createElement("div",{className:te.bundleFakeCard1}),i.createElement("div",{className:te.bundleFakeCard2})),r=({children:e,card:t,actions:r})=>i.createElement(s.F.div,{className:te.bundleCardWrapper},i.createElement(O.PS,{card:t,actions:r}),i.createElement(s.F.div,{className:te.cardBundleContainer},e,(0,a.pipe)((e=>(0,a.pipe)(e,y.U((e=>u.some(e.alerts.length)))))(t),y.U(u.map((e=>i.createElement(n,{key:e,alertCount:e})))),y.U(u.toNullable)))),l=(0,_.HP)(E.Monitoring.Logging.getLogger)}(r||(r={}));const L=.25,P="0 1px 8px rgba(109, 117, 141, .18)",M=S.u.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),D=S.u.keyframes({from:{transform:"translateX(0)",opacity:1},to:{transform:"translateX(-100px)",opacity:0}}),F=S.u.keyframes({from:{transform:"translateX(-100px)",opacity:0},to:{transform:"translateX(0)",opacity:1}}),B=S.u.keyframes({from:{opacity:0,transform:"scale(.95) translateY(-15px)"},to:{opacity:1,transform:"scale(1) translateY(0)"}}),U=S.u.keyframes({from:{opacity:1,transform:"scale(1) translateY(0)"},to:{opacity:0,transform:"scale(.95) translateY(-15px)"}}),$={position:"relative",borderRadius:S.u.rem(I.Jr),background:C.Il.CoreNeutral0,boxShadow:P,zIndex:2},j={marginTop:S.u.rem(.75)},W={marginTop:S.u.rem(1.25)},G={position:"absolute",top:S.u.px(-5),right:S.u.rem(.5),left:S.u.rem(.5),zIndex:-1,display:"block",height:S.u.percent(100),borderRadius:S.u.rem(I.Jr),backgroundColor:C.Il.CoreNeutral1,boxShadow:P,content:"' '"},q={position:"absolute",top:S.u.px(-10),right:S.u.rem(1),left:S.u.rem(1),zIndex:-2,display:"block",height:S.u.rem(2),borderRadius:S.u.rem(I.Jr),backgroundColor:C.Il.CoreNeutral10,boxShadow:P,content:"' '"},H={borderRadius:S.u.rem(.75),background:C.Il.CoreNeutral20,margin:`${S.u.rem(-.25)} ${S.u.rem(-.25)}`,padding:`${S.u.rem(.25)} ${S.u.rem(.25)}`,$nest:{[`& .${T.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${T.g.fullCardSelector}`]:{padding:`${S.u.rem(.75)} ${S.u.rem(.5)} ${S.u.rem(.5)} ${S.u.rem(1)}`},"& [role=dropdown-list]":{transform:`translateY(${S.u.rem(-.5)})`}}},z={position:"absolute",top:S.u.rem(.8),right:S.u.rem(1),margin:0},V={borderRadius:S.u.rem(I.Jr),background:C.Il.CoreNeutral0,boxShadow:P},Y={display:"block",position:"absolute",top:0,$nest:{[`& .${T.g.bundleInnerContainerSelector}`]:{margin:0}}},X={animation:`${U} ${S.u.seconds(L)} ease-out`},J={animation:`${F} ${S.u.seconds(L)} ease-out`},Z={animation:`${D} ${S.u.seconds(L)} ease-in`},K={animation:`${B} ${S.u.seconds(L)} ease-in`},Q={display:"none",animation:`${M} ${S.u.seconds(L)} ease-in`},ee={animation:`${M} ${S.u.seconds(L)} ease-in`},te=Object.assign(Object.assign({},S.u.stylesheet({bundleInnerContainer:[$],bundleCardWrapper:[H],minimalBetaLabel:[z],compactCardContainer:[V],cardBundleContainer:[{position:"relative",zIndex:2}],inBundleMovingCard:[Y],inBundleToPrevCardOld:[Y,X],inBundleToPrevCardNew:[J],inBundleToNextCardOld:[Y,Z],inBundleToNextCardNew:[K],inBundleToUpdatedCardOld:[Q],inBundleToUpdatedCardNew:[ee]})),{bundleInnerContainer:S.u.joinClasses([T.g.bundleInnerContainerSelector,S.u.style($)]),bundleInnerContainer2Cards:S.u.joinClasses([T.g.bundleInnerContainerSelector,S.u.style($,j)]),bundleInnerContainerNCards:S.u.joinClasses([T.g.bundleInnerContainerSelector,S.u.style($,W)]),bundleFakeCard1:S.u.joinClasses([T.g.bundleFakeCard1Selector,S.u.style(G)]),bundleFakeCard2:S.u.joinClasses([T.g.bundleFakeCard2Selector,S.u.style(q)])})},28584:(e,t,n)=>{n.d(t,{a0:()=>r,$x:()=>E,Im:()=>S,oL:()=>P});var r,i=n(27378),o=n(57050),a=n(40327),s=n(49524),l=n(12187),c=n(5114),u=n(83078),d=n(30763),p=n(66896),h=n(40018),m=n(17594),f=n(4890),g=n(7046),y=n(29245),v=n(94793),b=n(16951),w=n(3656),_=n(50224),C=n(36642);!function(e){e.none="none",e.persistent="persistent",e.new="new"}(r||(r={}));const E=({className:e,vox:t,isMinimalCard:n})=>{const{vox:{styleGuide:r}}=i.useContext(d.m.Context);return i.createElement("div",Object.assign({},(0,l.Sh)(e,C.h.voxTitle,n?C.h.minimalTitle:void 0)),i.createElement("span",null,t.companyName," ",r))},S=({logoUrl:e,className:t})=>i.createElement("img",Object.assign({src:e},(0,l.Sh)(t,C.h.voxLogo))),I=({title:e,layoutDensity:t})=>i.createElement(w.XY,{className:(0,a.pipe)(t,f.j.Density.matchOrDefault(f.j.Density.minimal)((()=>C.h.minimalTitle),(()=>C.h.toneTitle)))},i.createElement(y.d,{emojiClassName:C.h.toneLogo},e));function k(e){return p.R.outcomeTypeMatch(e.lensType)({correctness:_.m.dotCorrectness,clarity:_.m.dotClarity,premium:_.m.dotAdvanced,engagement:_.m.dotEngagement,delivery:_.m.dotDelivery,vox:_.m.dotVox})}const A=({companyLogoUrl:e})=>{const t=i.useContext(d.m.Context).card.sentenceLevelBrandTones;return i.createElement(w.x4,{className:C.h.sentenceLevelBrandTonesLabel},e&&i.createElement("img",{src:e,className:C.h.toneLogo}),i.createElement("span",{className:C.h.sentenceLevelBrandTonesOffBrand},t.offBrandCardTitle)," ",t.detected)};function x(e,t,n,r,d){const{extraProperties:p}=e;return m.$.isTakeaway(e)?function(e,t,n){return{style:"",description:i.createElement("div",{className:(0,a.pipe)(t,f.j.Density.matchOrDefault(f.j.Density.minimal)((()=>C.h.minimalTitle),(()=>{})))},(u.contains(h.TO.correctlyDetected)(e.takeawayFeedback)||u.contains(h.TO.correctlyDetectedAndDone)(e.takeawayFeedback))&&e.takeawayIsLikelyToBeRead?i.createElement(v.JO.ValidationOk,Object.assign({width:16},(0,l.Sh)(C.h.cardLogo,C.h.takeawayIcon))):i.createElement(v.JO.Megaphone,Object.assign({width:16},(0,l.Sh)(C.h.cardLogo,C.h.takeawayIcon))),t===f.j.Density.minimal?n:e.lensName)}}(e,n,d):m.$.isSmartPhrases(e)?function(e){return{style:"",description:i.createElement("div",null,i.createElement(v.JO.SmartPhrases.HeaderCirclePlus,Object.assign({},(0,l.Sh)(C.h.cardLogo))),i.createElement(w.x4,{className:C.h.smartPhrasesLabel},e.miniCardTitle))}}(e):m.$.isSentenceLevelBrandTones(e)?function(e){const t=(0,a.pipe)(e.extraProperties.sentenceLevelBrandTones,c.chain((e=>e.companyLogoUrl)),c.fold(o.constNull,s.y));return{style:"",description:i.createElement(A,{companyLogoUrl:t})}}(e):m.$.isShortenIt(e)?T(e,n,d):c.isSome(p.tone)?function(e,t){return{style:k(e),description:i.createElement(I,{title:e.title,layoutDensity:t})}}(e,n):t?c.isSome(p.vox)?function(e,t){return{style:_.m.dotVox,description:i.createElement(i.Fragment,null,(0,a.pipe)(e.logoUrl,c.fold((()=>null),(e=>i.createElement(S,{logoUrl:e,className:C.h.cardLogo})))),i.createElement(E,{vox:e,isMinimalCard:t===f.j.Density.minimal}))}}(p.vox.value,n):m.$.isFree(e)?T(e,n,d):function(e,t,n){return{style:k(e),description:i.createElement("div",Object.assign({},(0,l.Sh)(C.h.dualItemLabel,(0,a.pipe)(n,f.j.Density.matchOrDefault(f.j.Density.minimal)((()=>C.h.minimalTitle),(()=>{}))))),i.createElement("span",{className:C.h.dualItemLabel},e.lensName,i.createElement(N,{highlightStyle:t})))}}(e,r,n):null}function T(e,t,n){return(0,a.pipe)(t,f.j.Density.matchOrDefault(f.j.Density.minimal)((()=>function(e,t){return{style:k(e),description:t||i.createElement(w.XY,{className:C.h.minimalTitle},e.miniCardTitle)}}(e,n)),(()=>function(e){return{style:k(e),description:e.lensName}}(e))))}const O=({label:e})=>i.createElement("span",{className:C.h.fluencyLabel},e,i.createElement(g.RZ,{iconWidth:10,buttonClass:C.h.fluencyInfo,iconClass:C.h.fluencyInfo,title:i.useContext(d.m.Context).card.fluency.tooltip})),R=({style:e,description:t})=>i.createElement("span",Object.assign({},(0,l.Sh)(C.h.lens,C.h.dot,e)),t),N=({highlightStyle:e})=>{const t=i.useContext(d.m.Context);if(e===r.none)return null;const n=e===r.new?i.createElement("div",{className:C.h.newPremiumLabel},t.premiumAlertLabel.new,i.createElement(v.JO.Paid,{className:C.h.newPremiumLabelIcon,width:12})):i.createElement(v.JO.Paid,{className:C.h.premiumPersistentTooltipIcon,width:10});return i.createElement(b.u,{align:"topCenter",title:t.premiumAlertLabel.tooltip.includedWithPaid},n)},L=({style:e,description:t,extraStyle:n})=>i.createElement("span",Object.assign({},(0,l.Sh)(n,C.h.lensMinimal,C.h.lens,C.h.dot,e)),t),P=e=>(0,a.pipe)(x(e.activeAlert,e.showCardLabel,e.layoutDensity,e.premiumAlertLabelHighlight,e.children),c.fromNullable,c.map((t=>i.createElement("div",{className:e.className},(0,a.pipe)(e.activeAlert.extraProperties.fluencyMessage,c.fold((()=>(0,a.pipe)(e.layoutDensity,f.j.Density.matchOrDefault(f.j.Density.minimal)((()=>i.createElement(L,Object.assign({},t))),(()=>i.createElement(R,Object.assign({},t)))))),(n=>(0,a.pipe)(e.layoutDensity,f.j.Density.match(i.createElement(i.Fragment,null,i.createElement(R,Object.assign({},t)),i.createElement(O,{label:n})),i.createElement(R,Object.assign({},t)),i.createElement(L,{style:t.style,extraStyle:C.h.minimalTitle,description:e.activeAlert.miniCardTitle}))))))))),c.fold((()=>i.createElement("div",{"data-purpose":"label-placeholder"})),(t=>i.createElement(M,null,t,e.badge)))),M=({children:e})=>i.createElement("div",{className:C.h.labelContainer},e)},74754:(e,t,n)=>{n.d(t,{y:()=>o});var r=n(28706);const i=["b","i","br","ul","li"];var o;!function(e){e.renderToHtml=function(e,t){const n=t?{allowedTags:i.concat(["a"]),linkRegExp:t}:{allowedTags:i};return r.yG(e,n)}}(o||(o={}))},66346:(e,t,n)=>{n.d(t,{Vh:()=>p,G3:()=>h,hC:()=>m});var r=n(27378),i=n(84966),o=n(30763),a=n(26027),s=n(15646),l=n(7046),c=n(94793),u=n(28706),d=n(36642);const p=({card:{activeAlert:e,id:t,visualState:n},actions:p,mode:h,className:f})=>{const g=r.useContext(o.m.Context);return r.createElement(l.zx.Tertiary,{key:"toggle-more",name:m(n,g),title:"mini"===h?m(n,g):"",className:f,onClick:u.hz((()=>{const r=a.X.isCardOpen(n);p.next({type:s.eI.Kind.startTransitionTo,id:t,transition:{type:r?"focused":"expanded",clockwise:!0}}),r||p.next({type:s.lY.Type.alertFeedback,alertId:e.id,feedbackType:i.PZ.EXPANDED})}))},a.X.isCardOpen(n)?r.createElement(c.JO.Arrow,{key:"more",className:d.h.lessIcon}):r.createElement(c.JO.QuestionMark,{key:"expand"}),"default"===h&&m(n,g))},h=({visualState:e,children:t,className:n})=>r.createElement("div",{className:(a.X.isCardOpen(e)?d.h.more:d.h.moreHidden)+" "+n},t);function m(e,t){const n=t.card;return a.X.isCardOpen(e)?n.less:n.more}},36642:(e,t,n)=>{n.d(t,{h:()=>I});var r=n(90351),i=n(63969),o=n(40219);const a={$nest:{"&:before":{position:"absolute",width:i.u.px(10),height:i.u.px(10),borderRadius:i.u.percent(50),content:"''",transform:"scale(.5)"}}},s={opacity:1,transition:"opacity .3s"},l={color:r.Il.CoreNeutral50,textTransform:"uppercase",letterSpacing:r.xv.SubheadingLetterSpacing,fontSize:i.u.rem(r.xv.SubheadingSize),lineHeight:i.u.rem(r.xv.SubheadingLineHeight),$nest:{"&:not(:last-child)":{marginRight:i.u.rem(.25)}}},c={position:"relative",display:"inline-block",$nest:{"&:before":{top:0,bottom:i.u.px(2),left:i.u.rem(-1.1),margin:"auto 0"}}},u={$nest:{"&:before":{top:0,bottom:0,left:i.u.rem(-1.1),margin:`${i.u.rem(.25)} 0 auto 0`}}},d={margin:`0 ${i.u.rem(.4)} 0 ${i.u.rem(.2)}`,width:i.u.rem(.85),height:i.u.rem(.85),objectFit:"contain"},p={position:"absolute",top:0,bottom:0,left:i.u.rem(-1),margin:"auto",background:r.Il.CoreNeutral0,transform:"translateX(-50%)"},h={minWidth:"initial",minHeight:"initial",padding:`${i.u.rem(.3)} ${i.u.rem(.25)}`,cursor:"pointer",borderRadius:i.u.percent(100),marginLeft:i.u.rem(.5),$nest:{"&:hover":{background:r.Il.CoreNeutral10}}},m={display:"flex",alignItems:"center",padding:`0 ${i.u.rem(.25)}`,borderRadius:i.u.rem(o.fx),cursor:"pointer",background:r.Il.CoreYellow20,color:r.Il.CoreYellow80,marginLeft:i.u.rem(.5),$nest:{"&:hover":{background:r.Il.CoreYellow10}}},f={minWidth:"initial",minHeight:"initial",fill:r.Il.CoreYellow80,marginLeft:i.u.rem(.3)},g={display:"flex",alignItems:"flex-start",top:i.u.rem(.125),minWidth:"initial",minHeight:"initial",background:r.Il.CoreNeutral0},y={color:r.Il.CoreNeutral90,textTransform:"none",letterSpacing:r.xv.SmallLetterSpacing,fontWeight:r.xv.SmallWeight,fontSize:i.u.rem(r.xv.SmallSize),lineHeight:i.u.rem(r.xv.SmallLineHeight),$nest:{"&:first-letter":{textTransform:"uppercase"}}},v={color:r.Il.CoreNeutral50,textTransform:"none"},b={width:i.u.rem(1),height:i.u.rem(1)},w={display:"inline-flex",padding:`0 ${i.u.rem(.25)}`,borderRadius:i.u.rem(o.fx),background:"linear-gradient(269.73deg, rgba(215, 248, 240, .8) .02%, rgba(202, 235, 250, .8) 99.98%)",textTransform:"uppercase"},_={display:"inline-flex",marginLeft:i.u.rem(.1),minWidth:0,minHeight:0},C={color:r.Il.CoreNeutral80,textTransform:"none"},E={width:i.u.rem(1),height:i.u.rem(1),marginRight:i.u.rem(.375)},S={color:r.Il.CoreRed60},I=i.u.stylesheet({lessIcon:[{transform:"rotate(180deg)"}],more:[s],moreHidden:[s,{position:"absolute",overflow:"hidden",height:0,opacity:0,transition:"none"}],commonLabel:[l],labelContainer:[{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"start"}],lens:[l,c],lensMinimal:[u],voxLogo:[d],cardLogo:[p],dualItemLabel:[{display:"inline-flex",alignItems:"center"}],premiumPersistentTooltipIcon:[h],newPremiumLabel:[m],newPremiumLabelIcon:[f],takeawayIcon:[g],minimalTitle:[y],voxTitle:[{display:"flex",alignItems:"center"}],toneTitle:[v],toneLogo:[p,b],fluencyLabel:[l,w],fluencyInfo:[_],dot:[a],smartPhrasesLabel:[{textTransform:"none"}],sentenceLevelBrandTonesLabel:[C],sentenceLevelBrandTonesLabelImage:[E],sentenceLevelBrandTonesOffBrand:[S]})},1883:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(27378),i=n(5739),o=n(12187),a=n(63969),s=n(35108),l=n(50224);const c=e=>{const{shade:t}=(0,s.SA)(e.visualState);r.useEffect((()=>{t||e.onFocus()}),[]);const n=e.theme||{};return r.createElement(i.F.div,{className:n.container},e.header,r.createElement(i.F.div,{className:n.innerContainer},r.createElement(i.F.div,Object.assign({},(0,o.Sh)(b.wrapper,n.wrapper),{onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut}),r.createElement(i.F.div,Object.assign({},(0,o.Sh)(b.grid,n.content)),r.createElement(i.F.div,Object.assign({},(0,o.Sh)(b.mainContent,n.contentBody)),e.body),r.createElement("div",{className:b.footerContent},e.footer),r.createElement("div",{className:b.actions},e.subActions,r.createElement("div",{className:b.spacerOne}),e.navigation,r.createElement("div",{className:b.spacerFloat}),e.mainActions))),e.extra))},u="& > * + *",d=.75,p={position:"relative"},h={padding:`${a.u.rem(1)} ${a.u.rem(.5)} ${a.u.rem(d)} ${a.u.rem(1)}`},m={padding:`0 ${a.u.rem(.5)} 0 ${a.u.rem(1)}`,$nest:{[u]:{marginTop:a.u.rem(d)}}},f={padding:`0 ${a.u.rem(.5)} 0 ${a.u.rem(1)}`,$nest:{[u]:{marginTop:a.u.rem(d)}}},g={display:"flex",marginLeft:a.u.rem(.5),justifyContent:"space-between",$nest:{"& > *":{flexShrink:0}}},y={width:a.u.rem(1),flexShrink:1},v={$nest:{[u]:{marginTop:a.u.rem(d)}}},b=Object.assign(Object.assign({},a.u.stylesheet({mainContent:[m],footerContent:[f],actions:[g],spacerOne:[y],spacerFloat:[{flex:1}],grid:[v]})),{fullCard:a.u.joinClasses([l.g.fullCardSelector,a.u.style(p)]),wrapper:a.u.joinClasses([l.g.fullCardSelector,a.u.style(p,h)])})},55636:(e,t,n)=>{n.d(t,{PS:()=>it,mQ:()=>nt,o:()=>et,jt:()=>tt,UK:()=>ht,Kg:()=>De,dk:()=>Re,U4:()=>Pe,lJ:()=>Ge,hl:()=>Ze,__:()=>Je,M9:()=>ot,ko:()=>Ne,hT:()=>ze,Be:()=>Me,Eq:()=>gt,oE:()=>ft,g8:()=>mt,q4:()=>qe,Dx:()=>Ve,jg:()=>Ye,Ot:()=>Xe,Nm:()=>We,VM:()=>yt,k_:()=>an,LM:()=>vt,m_:()=>Ke,Bn:()=>sn,Gq:()=>bt,IH:()=>wt});var r=n(27378),i=n(40327),o=n(97329),a=n(12187),s=n(5739),l=n(38983),c=n(6322),u=n(84966),d=n(8125),p=n(83078),h=n(18208),m=n(5114),f=n(90351),g=n(81531),y=n(63969),v=n(24588),b=n(40219),w=n(71284),_=n(30763),C=n(40018),E=n(17594),S=n(26027),I=n(91549),k=n(15646),A=n(77610),x=n(4890),T=n(51006),O=n(8313),R=n(24523),N=n(29847),L=n(62310),P=n(7046),M=n(24811),D=n(95286),F=n(29245),B=n(94793),U=n(50790),$=n(63847),j=n(42329),W=n(16951),G=n(97528),q=n(3656),H=n(85255),z=n(60797),V=n(2291),Y=n(28706),X=n(66310),J=n(49708),Z=n(2834),K=n(95093),Q=n(17343),ee=n(40151),te=n(77176),ne=n(32952),re=n(24209),ie=n(2844),oe=n(85985),ae=n(55935),se=n(50224),le=n(28584),ce=n(74754),ue=n(66346),de=n(1883),pe=n(26662),he=n(14532);const me=({examples:e,layoutDensity:t})=>r.createElement(q.ZT,{nodeType:"table",styleType:q.ZT.Type.Base,className:Ie.wrapper},e.map(((e,n)=>r.createElement("tbody",{key:n,className:Ie.group},e.map((({text:e,title:n,color:o,hasItalic:a},s)=>r.createElement("tr",{key:s,className:(0,i.pipe)(t,x.j.Density.matchL((()=>Ie.item),(()=>Ie.itemCompact),(()=>Ie.itemMinimal)))},(0,i.pipe)(n,m.map((e=>r.createElement("td",{className:he.J.colorMatch(o)(Ie)},(e=>e.split("/").reduce(((e,t,n)=>(0!==n&&e.push(r.createElement("br",{key:n})),e.push(t),e)),[]))(e)))),m.toNullable),r.createElement("td",Object.assign({colSpan:m.isNone(n)?2:void 0,className:a?Ie.content:Ie.contentItalic},Y.yG(e)))))))))),fe={$nest:{"&:not(:last-child):after":{display:"block",height:y.u.rem(1.75),content:"''"}}},ge={$nest:{"&:not(:last-child)":{borderBottom:`${y.u.rem(.5)} solid transparent`}}},ye={display:"flex",flexDirection:"column",lineHeight:y.u.rem(1.3125)},ve={padding:0,verticalAlign:"top",lineHeight:y.u.rem(1.25)},be={paddingRight:y.u.rem(2),verticalAlign:"top",whiteSpace:"nowrap"},we={color:f.Il.CoreNeutral50,fontFeatureSettings:`${b.g_}, ${b.xL}`},_e={color:f.Il.CoreRed50},Ce={color:f.Il.CoreGreen60},Ee={color:f.Il.CoreNeutral90},Se={color:f.Il.CoreNeutral90},Ie=y.u.stylesheet({wrapper:[{borderCollapse:"collapse",userSelect:"initial"}],group:[fe],item:[ge],itemCompact:[ge,{display:"flex",flexDirection:"column"}],itemMinimal:[ge,ye],baseBlock:[ve],title:[ve,be],content:[ve,we],contentItalic:[ve,we,{fontStyle:"italic"}],red:[ve,be,_e],green:[ve,be,Ce],yellow:[ve,be,Ee],fallback:[ve,be,Se]});var ke=n(98210),Ae=n(19025);const xe=o.default||o,Te=(0,d.HP)(g.Monitoring.Logging.getLogger);var Oe;!function(e){e.actionRegex=/^#([\w\d_-]+)$/,e.parse=t=>(0,i.pipe)(m.fromNullable(t.match(e.actionRegex)),m.chain((e=>{switch(e[1]){case"set-goals":return m.some(k.lY.Type.openSetGoals);default:return m.none}})))}(Oe||(Oe={}));const Re=({description:e,actions:t,layoutDensity:n,className:o})=>{const s=r.useContext(_.m.Context),l=r.useContext(G.G.Context),{ref:c,onMount:u}=H.P.useElWatcher();H.P.useSubscriptionTo(c.pipe(z.oA,X.w((e=>Array.from(e.getElementsByTagName("a")).reduce(((e,n)=>{const r=J.R(n,"click").pipe(Z.b((e=>e.preventDefault())));return(0,i.pipe)(m.fromNullable(n.getAttribute("href")),m.chain(Oe.parse),m.fold((()=>(Te("Description").error("Invalid action",n),e.pipe(K.T(r)))),(i=>e.pipe(K.T(l.getTooltipObservable(n,s.card.actionDescription[i],"auto",m.none),r.pipe(Q.h({type:i}),Z.b(t)))))))}),ee.E)))));const d=(0,i.pipe)(n,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>cn.minimalDescription),(()=>cn.description)));return r.createElement(q.XY,Object.assign({mount:u},(0,a.Sh)(d,o),ce.y.renderToHtml(e,Oe.actionRegex)))},Ne=({card:e,isChecking:t})=>C.bZ.isRated(e.activeAlert)?r.createElement(M.B,{value:S.X.isCardPresuccess(e.visualState)?V.g.MAX:e.meta.percentile,initValue:S.X.isCardPresuccess(e.visualState)?e.meta.percentile:V.g.MIN,isLoading:t}):null,Le=({card:e})=>{const t=(0,M.N)(S.X.isCardPresuccess(e.visualState)?V.g.MAX:e.meta.percentile,S.X.isCardPresuccess(e.visualState)?e.meta.percentile:V.g.MIN);return r.createElement(s.F.Fragment,null,t.pipe(te.U(V.g.prism.reverseGet),te.U((e=>r.createElement($.P,{percentage:e,colorType:$.P.ColorType.neoBlue,iconSize:$.P.IconSize.extraSmall,theme:{radialProgressBar:cn.circleProgress,radialProgressText:cn.circleText}})))))},Pe=({card:e,feedbackActions:t,onClick:n,disabled:o})=>{const a=r.useContext(_.m.Context);return r.createElement(P.zx.Ghost,{name:"ignore",title:a.dismiss,onClick:Y.hz((()=>{t.next({type:k.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForDismissSurvey:S.X.isEligibleForDismissSurvey(e),drilldownSuggestionIds:A.C.isSynfonyItem(e)?(0,i.pipe)(e.synfonySelection,m.getOrElse((()=>[]))):void 0}),n&&n()})),disabled:o},r.createElement(B.JO.Ignore,null))},Me=({card:e,feedbackActions:t,onClick:n,disabled:i})=>{const o=r.useContext(_.m.Context);return r.createElement(P.zx.Ghost,{name:"resolve",title:o.resolve,onClick:Y.hz((()=>{t.next({type:k.lY.Type.alertResolve,alertId:e.activeAlert.id,id:e.id}),n&&n()})),disabled:i},r.createElement(B.JO.YesCircle,null))},De=({card:e,feedbackActions:t})=>r.createElement(r.Fragment,null,r.createElement(Pe,{card:e,feedbackActions:t}),r.createElement($e,{activeAlert:e.activeAlert,onMute:(0,i.pipe)(e.muteCategory,m.map((n=>Y.hz((()=>t.next({type:k.lY.Type.muteAlertCategory,categoryId:n.id,id:e.id})))))),onWrong:Y.hz(Y.hz((()=>t.next({type:k.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:u.PZ.WRONG_SUGGESTION})))),onOffensive:Y.hz(Y.hz((()=>t.next({type:k.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:u.PZ.OFFENSIVE_CONTENT})))),onVisibilityChange:e=>t.next({type:k.lY.Type.moreActionsButtonToggle,mode:e?"open":"closed"})})),Fe=({onClick:e})=>{const t=r.useContext(_.m.Context);return r.createElement(P.zx.Flat,{name:"mute",onClick:e},r.createElement(B.JO.Mute,null),t.card.mute)},Be=({onClick:e})=>{const t=r.useContext(_.m.Context);return r.createElement(P.zx.Flat,{name:"incorrect",onClick:e},r.createElement(B.JO.Report,null),t.card.wrong)},Ue=({activeAlert:e,onClick:t})=>{const n=r.useContext(_.m.Context);return(0,i.pipe)(e.extraProperties.vox,p.mapOrDefault((()=>null),r.createElement(P.zx.Flat,{name:"offensive",onClick:t},r.createElement(B.JO.Report,null),n.card.offensive)))},$e=({activeAlert:e,onMute:t,onWrong:n,onOffensive:o,onVisibilityChange:a})=>{const s=e.getTransform(),l=m.isSome(t);return l||m.isSome(s)?r.createElement(D.L,{label:r.createElement(P.zx.Ghost,{name:"moreActions"},r.createElement(B.T1.MoreVertical,null)),align:"right",theme:{dropdownContainer:cn.dropdownContainer},name:"moreActions",onVisibilityChange:a},(0,i.pipe)(t,m.map((e=>r.createElement(Fe,{onClick:e}))),p.orNull),(0,i.pipe)(s,m.map((()=>r.createElement(r.Fragment,null,l&&r.createElement(D.L.Delimiter,null),r.createElement(Be,{onClick:n}),r.createElement(Ue,{activeAlert:e,onClick:o})))),p.orNull)):null},je=({card:e,onClick:t,mode:n="default"})=>{const i=r.useContext(_.m.Context),o=r.useContext(w.a.Context),a=r.useCallback((e=>{o.has(w.a.Flag.onlyTrustedEvents)&&!e.isTrusted||t()}),[]),s=e.renderOptions.features.has(x.j.Features.showAnonymousUserFooters)?{disabled:!0,title:i.card.disabledForAnonymous}:{title:"mini"===n?i.card.addToDict:""};return e.activeAlert.extraProperties.hasAddToDictionary?r.createElement(P.zx.Tertiary,Object.assign({},s,{name:"add-to-dict",onClick:a}),r.createElement(B.JO.Dict,null),i.card.addToDict):null},We=({title:e,checkingInProgress:t,checkingMessage:n,applyMessage:i,onClick:o})=>r.createElement(P.zx.Primary,{key:"update-all",name:"update-all",title:e,className:t.pipe(te.U((0,d.RN)(pe.V.updateAllBtnLoading,pe.V.updateAllBtn))),disabled:t,children:t.pipe(te.U((0,d.RN)(r.createElement(r.Fragment,{key:"update-all-checking"},h.capitalize(n),r.createElement(j.$,{size:18,strokeWidth:2,wrapperClassName:pe.V.updateBtnSpinner,variation:"white"})),r.createElement(r.Fragment,{key:"update-all-checked"},h.capitalize(i))))),onClick:Y.hz(o)}),Ge=({card:e})=>(0,i.pipe)(Qe(e.activeAlert,e.renderOptions.layoutDensity),m.map((t=>r.createElement(ue.G3,{key:"card-actions-details",visualState:e.visualState,className:cn.more},t))),m.toNullable),qe=({card:e,actions:t})=>Ke(e.activeAlert,e.renderOptions.layoutDensity)?r.createElement(ue.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):r.createElement(je,{key:"card-actions-button",card:e,mode:"default",onClick:Y.hz((()=>t.next({type:k.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:u.PZ.ADD_TO_DICTIONARY})))}),He=e=>r.createElement(O.TG,{alignment:"bottom",eventType:"onclick",stepId:T.X.StepId.Step4,title:"Accept a correction",message:"Click on a suggestion to apply it to your text.",dotPosition:{kind:"findFirstButton",position:O.E2.rightTop},themes:{containerWrapperClassName:cn.onboardingNotification}},e.children),ze=({onClick:e,rl:t,layoutDensity:n})=>r.createElement(He,null,r.createElement(ke.zO,{replacementsLabels:t,onClick:e,layoutDensity:n})),Ve=({text:e})=>r.createElement(q.P1,Object.assign({className:cn.title},ce.y.renderToHtml(e))),Ye=({text:e})=>r.createElement(q.P1,Object.assign({className:cn.titleMinimal},ce.y.renderToHtml(e))),Xe=({alert:e})=>r.createElement(q.H4,Object.assign({className:cn.title},ce.y.renderToHtml(e.title))),Je=({alert:e,options:t,children:n,className:i,badge:o})=>r.createElement(le.oL,Object.assign({activeAlert:e,showCardLabel:t.features.has(x.j.Features.showLabel),premiumAlertLabelHighlight:t.features.has(x.j.Features.showNewPremiumCardLabels)?le.a0.new:t.features.has(x.j.Features.showPersistentPremiumCardLabels)?le.a0.persistent:le.a0.none,layoutDensity:t.layoutDensity},(0,a.Sh)(cn.label,i),{badge:o}),n),Ze=({text:e,layoutDensity:t})=>r.createElement("div",{className:cn.highlightedTextBox},r.createElement(q.XY,{className:(0,i.pipe)(t,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>cn.minimalHighlightedTextInnerBox),(()=>cn.highlightedTextInnerBox)))},e));function Ke(e,t){return!e.extraProperties.hasAddToDictionary&&(!E.$.isSentenceLevelBrandTones(e)&&(!(!m.isSome(e.examples)&&!m.isSome(e.details))||!(t!==x.j.Density.minimal||!m.isSome(e.getTransform())||void 0===e.explanation||null===e.explanation||""===e.explanation)))}const Qe=(e,t)=>{if(!Ke(e,t))return p.empty();const n=(0,i.pipe)(t,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>cn.minimalDescription),(()=>cn.description)));return m.some(r.createElement(r.Fragment,null,(0,i.pipe)(t,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>m.isNone(e.details)?r.createElement(q.XY,Object.assign({className:n},ce.y.renderToHtml(e.explanation,Oe.actionRegex))):null),(()=>null))),(0,i.pipe)(e.details,m.map((e=>r.createElement(q.XY,Object.assign({className:n},ce.y.renderToHtml(e))))),m.toNullable),(0,i.pipe)(e.examples,m.map((e=>r.createElement(me,{layoutDensity:t,examples:e}))),m.toNullable)))},et=({isChecking:e})=>r.createElement(s.F.Fragment,null,e.pipe(te.U((e=>r.createElement(j.$,{className:e?cn.spinner:cn.spinnerInvisible,variation:"blue",isIdle:!e,size:32,strokeWidth:2}))))),tt=e=>{const[t,n]=r.useState(!0);return t?r.createElement(at,{type:e.type,actions:e.actions,onClose:()=>n(!1)}):null},nt=({card:e,actions:t})=>A.C.isSentenceLevelBrandTonesItem(e)?null:(0,i.pipe)(e.activeAlert.extraProperties.freePremium,p.contains("unlocked"))?r.createElement(ut,null):!E.$.isFree(e.activeAlert)&&e.renderOptions.features.has(x.j.Features.showPremiumTrialFooters)?r.createElement(ct,{actions:t}):e.renderOptions.features.has(x.j.Features.showAnonymousUserFooters)?r.createElement(lt,{actions:t,card:e}):(0,i.pipe)(e.renderOptions.layoutDensity,x.j.Density.matchOrDefault(x.j.Density.cozy)((()=>r.createElement(st,{card:e,actions:t})),(()=>(0,i.pipe)(e.activeAlert.extraProperties.fluencyMessage,m.fold((()=>r.createElement(st,{card:e,actions:t})),(e=>r.createElement(dt,{fluencyLabel:e})))))));function rt(e,t,n){n.next({type:k.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:e})}const it=({card:e,actions:t})=>{const n=r.useContext(_.m.Context).card.matchesNavigation;return r.createElement(s.F.Fragment,null,(0,i.pipe)(e,te.U((e=>r.createElement("div",{key:e.activeAlert.id,className:cn.bundleNavWrapper},r.createElement(q.XY,{className:cn.bundleTitle},I.R.bundleTitle(e)),r.createElement("div",{className:cn.bundleNavMatchesRow},r.createElement(P.zx.Ghost,{title:0!==e.activeAlertIndex?"Previous suggestion":void 0,className:cn.bundleNavButtonGhost,disabled:0===e.activeAlertIndex,name:"left",onClick:()=>rt("left",e,t)},r.createElement(B.JO.Arrow,{className:cn.bundleNavLeftButtonIcon})),r.createElement(q.ck,{className:cn.bundleNavCount},n.currentMatchPosition(e.activeAlertIndex+1,e.alerts.length)),r.createElement(P.zx.Ghost,{title:e.activeAlertIndex!==e.alerts.length-1?"Next suggestion":void 0,className:cn.bundleNavButtonGhost,disabled:e.activeAlertIndex===e.alerts.length-1,name:"right",onClick:()=>rt("right",e,t)},r.createElement(B.JO.Arrow,{className:cn.bundleNavRightButtonIcon}))))))))},ot=({card:e,actions:t,isChecking:n})=>r.createElement(r.Fragment,null,(0,i.pipe)(e.renderOptions.layoutDensity,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>C.bZ.isRated(e.activeAlert)?r.createElement(r.Fragment,null,r.createElement(Le,{card:e}),r.createElement(Ye,{text:e.activeAlert.miniCardTitle})):r.createElement(Je,{alert:e.activeAlert,options:e.renderOptions},r.createElement(Ye,{text:e.activeAlert.miniCardTitle}))),(()=>r.createElement(r.Fragment,null,r.createElement(Je,{alert:e.activeAlert,options:e.renderOptions}),r.createElement(Ve,{text:e.activeAlert.title}),r.createElement(Ne,{card:e,isChecking:n}))))),r.createElement(Re,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})),at=e=>{const t=r.useContext(_.m.Context),{title:n,content:i}=t.card.onboarding[e.type];return r.useLayoutEffect((()=>()=>e.actions.next({type:k.lY.Type.onboardingClose,value:e.type}))),r.createElement(U.DI.AdHoc,{key:"new-notification",title:r.createElement(r.Fragment,null,n,r.createElement(L.C.Regular,{className:cn.newLabel},t.new)),className:cn.newCheckNotification,onClose:e.onClose},i)},st=({actions:e,card:t})=>{const n=r.useContext(_.m.Context);return H.P.useEffectOnDidMount((()=>{t.meta.showMuteQuotedAdvice&&e.next({type:k.lY.Type.muteQuotedAdviceShow})})),t.meta.showMuteQuotedAdvice?r.createElement(pt.Base,{className:Pt},r.createElement("span",null,n.card.muteCitedText(r.createElement("a",{"data-name":"open-preferences-link",onClick:()=>e.next({type:k.lY.Type.openPreferences})},n.documentSettings.editorSettings))),r.createElement(P.zx,{name:"dismiss-mute-quoted-advice",onClick:()=>e.next({type:k.lY.Type.dismissMuteQuotedAdvice})},r.createElement(B.JO.Close,null))):null},lt=({actions:e,card:t})=>{const n=r.useContext(_.m.Context),i=t.activeAlert.extraProperties.hasAddToDictionary?n.anonymousUserAddToDictionarySignInPrompt:n.anonymousUserGenericSignInPrompt;return r.createElement(pt.Base,{className:cn.anonymousUserNotice},i((()=>{e.next({type:k.lY.Type.toSignIn})})))},ct=({actions:e})=>r.createElement(pt.Small,{className:Dt},r.createElement(B.JO.PaidLink,{className:cn.iconWrapper,width:12}),r.useContext(_.m.Context).premiumFreeTrial((()=>{e.next({type:k.lY.Type.premiumTrialFooterCtaClick})}))),ut=()=>{const{beforeIcon:e,afterIcon:t}=r.useContext(_.m.Context).freePremiumAlertFooter;return r.createElement(pt.Small,{className:Bt},e,r.createElement(B.JO.PaidLink,{width:12}),t)},dt=({fluencyLabel:e})=>{const t=r.useContext(_.m.Context).card.fluency,n=Object.keys(c.n5.PrimaryLanguage).filter((e=>e!==c.n5.PrimaryLanguage.Other)).map((e=>e.toLowerCase())),o=e.toLowerCase(),a=(0,i.pipe)(m.fromNullable(n.find((e=>o.includes(e)))),m.map(h.capitalize),m.getOrElse((()=>"multilingual")),t.cardFooter);return r.createElement(q.x4,{className:cn.fluencyNotice},a,r.createElement(W.u,{title:t.tooltip},r.createElement(B.JO.Info,{width:10,className:cn.fluencyInfo})))};var pt;!function(e){function t(e){return({children:t,className:n})=>r.createElement(e,Object.assign({},(0,a.Sh)(cn.cardFooter,n)),t)}e.Small=t(q.x4),e.Base=t(q.XY)}(pt||(pt={}));const ht=({title:e,children:t})=>r.createElement("div",{className:cn.cardWrapper},r.createElement("div",{className:cn.cardWrapperTitle},e),t),mt=({className:e,title:t,emoji:n,hideBetaBadge:i})=>{const o=r.useContext(_.m.Context);return r.createElement("div",Object.assign({},(0,a.Sh)(cn.smartPhrasesTitle,e)),r.createElement("div",null,r.createElement(F.d,{className:cn.smartPhrasesTitleEmoji},n),t),i?null:r.createElement(L.C.Regular,null,o.beta))},ft=({card:e,actions:t,isLoading:n,transform:i,classes:o})=>{const[a,l]=r.useState(null),[c,u]=r.useState(null),[d,p]=r.useState(200),[h,f]=r.useState(null);r.useEffect((()=>{const e=new xe((e=>{e[0]&&u(e[0].contentRect.height)}));return l(e),()=>e.disconnect()}),[]);const y=r.useCallback((e=>{h&&(null==a||a.unobserve(h)),e&&(f(e),null==a||a.observe(e))}),[h,a]);return r.useEffect((()=>{!e.activeAlert.hideReplacements&&c&&p(c)}),[c]),n?r.createElement("div",{className:cn.smartPhrasesLoadingContainer,style:{height:null!=d?d:void 0}},r.createElement("div",{className:cn.smartPhrasesLoadingContainerInner},r.createElement(R.D,{size:"medium"}))):e.activeAlert.hideReplacements?r.createElement("div",{className:cn.smartPhrasesSuccessLabel},r.createElement(B.JO.SmartPhrases.HeaderCheckmark,{className:cn.smartPhrasesSuccessLabelIcon}),e.activeAlert.phraseAddedTitle):r.createElement("div",{ref:y,className:cn.smartPhrasesReplacementsContainer},r.createElement(Je,{alert:e.activeAlert,options:e.renderOptions,className:cn.smartPhrasesReplacementsLabel}),r.createElement(s.F.div,{className:o.transformContainer},r.createElement(N.T9,{classes:{rendered:o.renderedReplacement,removing:o.hiddenReplacement},timeout:250,content:i.pipe(te.U(m.fold((()=>(g.Monitoring.Logging.getLogger("SmartPhrasesReplacements").error("No replacements available for SmartPhrases card.",{cardId:e.id}),null)),(n=>{const i=Object.assign(Object.assign({},n),{labels:n.labels.filter(((t,n)=>!e.activeAlert.usedReplacementsIndexes.includes(n))).slice(e.activeAlert.replacementsStartIndex,e.activeAlert.replacementsEndIndex)});return r.createElement(ke.GP,{replacementsLabels:i,onClick:n=>Y.hz((()=>{const r=e.activeAlert.originalReplacementsIndexes.get(n+e.activeAlert.replacementsStartIndex)||n;t.next({type:k.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:r,cardType:k.lY.getCardType(e)}),t.next({type:k.lY.Type.smartPhrasesApply,alertId:e.activeAlert.id,cardId:e.id,replacementIndex:n+e.activeAlert.replacementsStartIndex,originalReplacementIndex:r})}))})}))))})))},gt=({card:e,actions:t})=>{const n=r.useContext(_.m.Context);return r.createElement(P.zx.Flat,{className:cn.smartPhrasesFooter,name:`smart-phrases-${e.activeAlert.intent}-open-feedback-form`,onClick:()=>t.next({type:k.lY.Type.smartPhrasesOpenFeedbackForm,alertId:e.activeAlert.id,cardId:e.id})},r.createElement("span",null,n.card.smartPhrases.openFeedbackFormQuestion),r.createElement(B.JO.SmartPhrases.OpenFeedbackFormArrow,null))},yt=({card:e,actions:t,isChecking:n,isCheckingGlobal:i,cardTheme:o,cardBody:a,cardFooter:s,mainActions:c,subActions:u,cardExtra:p})=>{const{transformHidden:h,isMouseInside:m,transformHiddenObservable:f}=H.P.useMemoOnDidMount((()=>{const e=l.h.create(!1),t=new ne.xQ,r=re.T(ie.aj([t,n]).pipe(te.U((([e,t])=>e&&t)),oe.h((e=>!0===e)),Z.b((()=>e.set(!0)))),n.pipe(ae.T(1),oe.h((e=>!e)),Z.b((()=>e.set(!1)))));return{transformHidden:e,isMouseInside:t,transformHiddenObservable:r}}));return H.P.useSubscriptionTo(f),r.createElement(de.Z,{visualState:e.visualState,onFocus:()=>t.next({type:k.lY.Type.alertCardShow,cardType:k.lY.getCardType(e),alertId:e.activeAlert.id}),onMouseOver:()=>{t.next({type:k.lY.Type.hover,kind:"hover",id:e.id}),m.next(!0)},onMouseOut:()=>{t.next({type:k.lY.Type.hover,kind:"unhover",id:e.id}),m.next(!1)},theme:Object.assign(Object.assign({content:i.pipe(te.U((0,d.RN)(cn.loadingWrapperInvisible,cn.loadingWrapper)))},(0,Ae.G)(e.renderOptions)),o),extra:r.createElement(r.Fragment,null,r.createElement(et,{isChecking:i}),null==p?void 0:p()),body:a(h),mainActions:null==c?void 0:c(),footer:null==s?void 0:s(h),subActions:null==u?void 0:u()})},vt={wordWrap:"break-word",overflowWrap:"break-word",$nest:{"& a":{borderBottom:"1px solid",textDecoration:"none",$nest:{"&:link, &:visited":{color:f.Il.CoreBlue50}}},"& b":{fontStyle:"italic",fontFeatureSettings:`${b.g_}, ${b.xL}`},"& ul":{margin:`${y.u.rem(.75)} 0 0`,padding:0,listStyle:"none"},"& li":{position:"relative",paddingLeft:y.u.rem(1.5),$nest:{"&:before":{position:"absolute",left:0,content:"'\\2022'"}}},"& li + li":{marginTop:y.u.rem(.5)}}},bt={lineHeight:y.u.rem(1.3125)},wt={$nest:{"& i":{color:f.Il.CoreNeutral50},"& > * + *":{marginTop:y.u.rem(.75)}}},_t={fontWeight:"bold",textTransform:"none",$nest:{"&:first-letter":{textTransform:"uppercase"},"& i":{color:v.kl}}},Ct={marginTop:y.u.important(0),lineHeight:y.u.rem(1.125)},Et={fontSize:y.u.rem(f.xv.SubheadingSize),lineHeight:y.u.rem(f.xv.SubheadingLineHeight)},St={width:y.u.rem(2),height:y.u.rem(2)},It={position:"absolute",top:`calc(50% - ${y.u.rem(1)})`,left:`calc(50% - ${y.u.rem(1)})`,width:y.u.rem(2),height:y.u.rem(2),transition:"opacity .2s"},kt={marginLeft:y.u.rem(.5),backgroundColor:f.Il.CoreGreen50,color:f.Il.CoreNeutral0,fontWeight:600},At={position:"absolute",marginTop:y.u.rem(-8.5),marginLeft:y.u.rem(-2),$nest:{"&:after":{position:"absolute",bottom:y.u.rem(-.525),left:y.u.rem(.7),borderTop:`${y.u.rem(.625)} solid ${f.Il.BackgroundNotification}`,borderRight:`${y.u.rem(.5)} solid transparent`,borderLeft:`${y.u.rem(.5)} solid transparent`,content:"' '"}}},xt={background:"linear-gradient(269.88deg, rgba(228, 244, 247, .6) .02%, rgba(215, 248, 240, .6) 50.81%, rgba(202, 227, 250, .6) 99.98%)"},Tt={position:"absolute",top:y.u.rem(.75),left:y.u.rem(.4)},Ot={color:f.Il.CoreNeutral90,$nest:{"& a":{fontWeight:800,color:f.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:f.Il.CoreBlue50},"&:hover":{borderBottom:`1px solid ${f.Il.CoreBlue40}`,color:f.Il.CoreBlue40}}}}},Rt={display:"flex",borderRadius:`${b.LB} ${b.LB} ${y.u.rem(b.Jr)} ${y.u.rem(b.Jr)}`,color:f.Il.CoreNeutral50,padding:`${y.u.rem(.5)} ${y.u.rem(.75)} ${y.u.rem(.5)} ${y.u.rem(1)}`,fontSize:y.u.rem(.6875),lineHeight:y.u.rem(1.125)},Nt={padding:`0 ${y.u.rem(.6)}`,minWidth:y.u.rem(.625),minHeight:y.u.rem(.625)},Lt="muteQuotedAdvice",Pt=y.u.joinClasses([Lt,y.u.style({$nest:{"& a":{borderBottom:`1px solid ${f.Il.CoreBlue50}`,color:f.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:f.Il.CoreBlue50},"&:hover":{borderBottom:`1px solid ${f.Il.CoreBlue40}`,color:f.Il.CoreBlue40}}},"& i:hover":{strokeWidth:y.u.px(2)}}})]),Mt="premiumFreeTrial",Dt=y.u.joinClasses([Mt,y.u.style({$nest:{"& svg":{fill:f.Il.CoreYellow80},"& a":{fontWeight:800,color:f.Il.CoreYellow70,$nest:{"&:link, &:visited":{color:f.Il.CoreYellow80},"&:hover":{borderBottom:`1px solid ${f.Il.CoreYellow60}`,color:f.Il.CoreYellow60}}}}})]),Ft="freePremiumAlertFooter",Bt=y.u.joinClasses([Ft,y.u.style({$nest:{"& svg":{margin:`0 ${y.u.rem(.25)}`,fill:f.Il.CoreYellow80}}})]),Ut={display:"block",boxSizing:"border-box",padding:`${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(1.5)}`,width:y.u.percent(100),borderRadius:`${b.LB} ${b.LB} ${y.u.rem(b.Jr)} ${y.u.rem(b.Jr)}`,$nest:{"& a":{cursor:"pointer",transition:"color .2s"},"&.muteQuotedAdvice":{display:"flex",padding:`${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(2)}`,background:f.Il.CoreNeutral10,color:f.Il.CoreNeutral90,justifyContent:"space-between",alignItems:"center"},"&.premiumFreeTrial":{padding:`${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(2)}`,position:"relative",background:f.Il.CoreYellow20,color:f.Il.CoreNeutral90},"&.freePremiumAlertFooter":{display:"flex",justifyContent:"center",alignItems:"center",padding:`${y.u.rem(.5)}`,background:f.Il.CoreYellow20,color:f.Il.CoreYellow80}}},$t={position:"absolute",top:y.u.rem(.8),left:y.u.rem(.5),minWidth:y.u.rem(1),minHeight:y.u.rem(1)},jt={fontWeight:"bold",fontSize:y.u.rem(.875),lineHeight:y.u.rem(1.125),flex:2},Wt={padding:`${y.u.rem(.625)} 0 ${y.u.rem(.1875)} ${y.u.rem(.5)}`,marginBottom:y.u.rem(.25),display:"flex",justifyContent:"space-between",alignItems:"center"},Gt={fontSize:y.u.rem(.75),lineHeight:y.u.rem(1.125),color:f.Il.CoreNeutral90},qt={display:"flex",justifyContent:"flex-end",alignItems:"center",height:y.u.rem(1.5),$nest:{"& > * + *":{marginLeft:y.u.rem(.25)},"& > *":{borderRadius:y.u.rem(b.fx)}}},Ht={height:y.u.rem(2),minHeight:y.u.rem(2),width:y.u.rem(2),fill:f.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer",fill:f.Il.CoreBlue50},"&[data-disabled='true']":{fill:f.Il.CoreNeutral30}}},zt={borderRadius:y.u.rem(.75),background:f.Il.CoreNeutral20,margin:`${y.u.rem(-.25)} ${y.u.rem(-.25)}`,padding:`${y.u.rem(.25)} ${y.u.rem(.25)}`,$nest:{[`& .${se.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${se.g.fullCardSelector}`]:{padding:`${y.u.rem(.75)} ${y.u.rem(.5)} ${y.u.rem(.5)} ${y.u.rem(1)}`},"& [role=dropdown-list]":{transform:`translateY(${y.u.rem(-.5)})`}}},Vt={paddingTop:y.u.rem(.25),paddingBottom:y.u.rem(.5),paddingLeft:y.u.rem(.5),paddingRight:y.u.rem(.5),fontWeight:"bold",fontSize:y.u.rem(.875),lineHeight:y.u.rem(1.125)},Yt={marginRight:y.u.rem(.5)},Xt={display:"flex",alignItems:"center",justifyContent:"space-between",background:f.Il.CoreNeutral10,borderRadius:`${b.LB} ${b.LB} ${y.u.rem(.5)} ${y.u.rem(.5)}`,padding:`${y.u.rem(.6875)} ${y.u.rem(.5)} ${y.u.rem(.6875)} ${y.u.rem(1)}`,color:f.Il.CoreNeutral50,fontSize:y.u.rem(.6875),lineHeight:y.u.rem(1.125),height:y.u.rem(2.5),boxSizing:"border-box"},Jt={fontSize:y.u.rem(.75),lineHeight:y.u.rem(1.125),color:f.Il.CoreNeutral90,display:"flex",alignItems:"center",marginLeft:y.u.rem(-1.5)},Zt={marginRight:y.u.rem(.5)},Kt={display:"flex",flexDirection:"column",justifyContent:"center",animation:`${y.u.keyframes({from:{opacity:0,transform:"scale(0)"}})} .3s ease-in-out`},Qt={marginBottom:y.u.rem(.75)},en={animation:`${y.u.keyframes({from:{opacity:0}})} .3s ease-in-out`};function tn(e,t){return{display:["block","-webkit-box"],maxHeight:y.u.rem(e*t),overflow:"hidden",overflowWrap:"anywhere",whiteSpace:"pre-wrap",textOverflow:"ellipsis","-webkit-line-clamp":t,WebkitBoxOrient:"vertical"}}const nn=Object.assign(Object.assign({},tn(1.5,3)),{lineHeight:y.u.rem(1.5)}),rn=Object.assign(Object.assign({},tn(1.3125,3)),{lineHeight:y.u.rem(1.3125)}),on={padding:y.u.rem(.5),borderRadius:y.u.rem(b.fx),background:f.Il.CoreNeutral10,color:f.Il.CoreNeutral90,fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${b.g_}, ${b.xL}`},an=.25,sn={opacity:0,pointerEvents:"none"},ln={transition:`opacity ${y.u.seconds(an)}`},cn=y.u.stylesheet({loadingWrapper:[ln],loadingWrapperInvisible:[ln,sn],description:[vt],minimalDescription:[vt,bt],more:[wt],onboardingNotification:[{display:"block"}],title:[_t],titleMinimal:[_t,Ct],label:[Et],dropdownContainer:[St],spinner:[It],spinnerInvisible:[It,{opacity:0,pointerEvents:"none"}],newLabel:[kt],newCheckNotification:[At],baseNotice:[xt],iconWrapper:[Tt],anonymousUserNotice:[xt,Ot],fluencyNotice:[xt,Rt],fluencyInfo:[Nt],cardFooter:[Ut],circleProgress:[$t],circleText:[{display:"none"}],bundleTitle:[jt],bundleNavWrapper:[Wt],bundleNavCount:[Gt],bundleNavMatchesRow:[qt],bundleNavButtonGhost:[{$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:"rgba(198, 203, 222, .5)"}}}],bundleNavButton:[Ht],bundleNavLeftButtonIcon:[Ht,{transform:"rotate(90deg)"}],bundleNavRightButtonIcon:[Ht,{transform:"rotate(270deg)"}],cardWrapper:[zt],cardWrapperTitle:[Vt],smartPhrasesTitle:[{display:"flex",justifyContent:"space-between"}],smartPhrasesTitleEmoji:[Yt],smartPhrasesFooter:[Xt],smartPhrasesSuccessLabel:[Jt],smartPhrasesSuccessLabelIcon:[Zt],smartPhrasesLoadingContainer:[Kt],smartPhrasesLoadingContainerInner:[{width:"100%",display:"flex",justifyContent:"center"}],smartPhrasesReplacementsLabel:[Qt],smartPhrasesReplacementsContainer:[en],highlightedTextBox:[on],highlightedTextInnerBox:[nn],minimalHighlightedTextInnerBox:[rn]})},25819:(e,t,n)=>{n.d(t,{J:()=>Le});var r,i=n(27378),o=n(57050),a=n(40327),s=n(38983),l=n(5739),c=n(8125),u=n(5114),d=n(90351),p=n(81531),h=n(63969),m=n(30763),f=n(26027),g=n(15646),y=n(77610),v=n(4890),b=n(29847),w=n(62310),_=n(7046),C=n(77797),E=n(94793),S=n(3656),I=n(28706),k=n(85255),A=n(55935),x=n(2834),T=n(57091),O=n(77176),R=n(95300),N=n(85985),L=n(13444),P=n(93508),M=n(1883),D=n(18208),F=n(73975),B=n(40219),U=n(40018),$=n(29245),j=n(55636),W=n(19025);!function(e){e.Full=({card:e,actions:r})=>i.createElement(M.Z,{footer:null,visualState:e.visualState,onFocus:()=>r.next({type:g.lY.Type.alertCardShow,cardType:g.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(0,W.G)(e.renderOptions),body:i.createElement(n,{card:e}),mainActions:i.createElement(j.U4,{card:e,feedbackActions:r}),subActions:null,extra:i.createElement(t,{card:e,actions:r})});const t=({card:e,actions:t})=>{const n=i.useContext(m.m.Context).card.sentenceLevelBrandTones;return i.createElement(S.x4,{className:J.sentenceLevelBrandTonesFooter},n.helpfulFeedbackQuestion(e.activeAlert.emotion),i.createElement("div",{className:J.sentenceLevelBrandTonesFooterHelpfulFeedback},i.createElement(_.zx.Ghost,{name:`sentence-level-brand-tones-${e.activeAlert.emotion}-helpful-feedback-yes`,title:n.helpfulFeedbackYes,active:u.getEq(F.eqStrict).equals(e.activeAlert.feedback,u.some(U.id.accurate)),disabled:u.isSome(e.activeAlert.feedback),onClick:()=>{t.next({type:g.lY.Type.sentenceLevelBrandTonesFeedback,alertId:e.activeAlert.id,feedbackType:U.id.accurate})}},i.createElement(E.JO.VoteYes,null)),i.createElement(_.zx.Ghost,{name:`sentence-level-brand-tones-${e.activeAlert.emotion}-helpful-feedback-no`,title:n.helpfulFeedbackNo,active:u.getEq(F.eqStrict).equals(e.activeAlert.feedback,u.some(U.id.inaccurate)),disabled:u.isSome(e.activeAlert.feedback),onClick:()=>{t.next({type:g.lY.Type.sentenceLevelBrandTonesFeedback,alertId:e.activeAlert.id,feedbackType:U.id.inaccurate}),t.next({type:g.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForDismissSurvey:f.X.isEligibleForDismissSurvey(e)})}},i.createElement(E.JO.VoteNo,null))))},n=({card:e})=>{const t=i.useContext(m.m.Context),n=u.fromNullable(e.activeAlert.highlightTexts[0]);return i.createElement("div",null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement("div",null,i.createElement("div",{className:J.sentenceLevelBrandTonesHeaderWrapper},i.createElement("div",{className:J.sentenceLevelBrandTonesHeader},i.createElement($.d,{className:J.sentenceLevelBrandTonesHeaderEmoji},e.activeAlert.emoji),D.capitalize(e.activeAlert.emotion)),i.createElement(w.C.Regular,{className:J.offBrandBadge},t.card.sentenceLevelBrandTones.offBrandBadge)),i.createElement(S.XY,{className:J.sentenceLevelBrandTonesDescription},e.activeAlert.description),(0,a.pipe)(n,u.fold(o.constNull,(t=>i.createElement(j.hl,{text:t,layoutDensity:e.renderOptions.layoutDensity}))))))}}(r||(r={}));const G={display:"flex",alignItems:"center",justifyContent:"space-between",background:d.Il.CoreNeutral10,borderRadius:`${B.LB} ${B.LB} ${h.u.rem(B.Jr)} ${h.u.rem(B.Jr)}`,padding:`${h.u.rem(.3)} ${h.u.rem(1)}`,color:d.Il.CoreNeutral50,fontSize:h.u.rem(.64)},q={display:"flex",alignItems:"center",$nest:{'& div[role="button"]:first-child':{marginRight:h.u.rem(.125)}}},H={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:h.u.rem(1),marginBottom:h.u.rem(.625)},z={fontWeight:"bold",fontSize:h.u.rem(.875),lineHeight:h.u.rem(1)},V={marginRight:h.u.rem(.5),lineHeight:h.u.rem(1)},Y={background:d.Il.CoreRed1,color:d.Il.CoreRed60,fontWeight:"bold",fontSize:h.u.rem(.6),lineHeight:h.u.rem(1)},X={marginBottom:h.u.rem(1)},J=h.u.stylesheet({offBrandBadge:[Y],sentenceLevelBrandTonesHeaderWrapper:[H],sentenceLevelBrandTonesHeader:[z],sentenceLevelBrandTonesHeaderEmoji:[V],sentenceLevelBrandTonesFooter:[G],sentenceLevelBrandTonesFooterHelpfulFeedback:[q],sentenceLevelBrandTonesDescription:[X]});var Z,K=n(26328),Q=n(98637),ee=n(2844),te=n(28043),ne=n(98210),re=n(22232),ie=n(2291),oe=n(66346);function ae(e){return e===Z.brief?0:e===Z.focused?1:e===Z.detailed?2:(0,re.vE)(e)}!function(e){e.brief="brief",e.focused="focused",e.detailed="detailed"}(Z||(Z={}));const se=({activeSummary:e})=>{const t=i.useContext(m.m.Context);return i.createElement(_.zx.Group,{sticky:!0},i.createElement(_.zx.White,{title:t.card.shortenIt.selectorTooltip(Z.brief),name:Z.brief,key:Z.brief,active:e.view((e=>e===Z.brief)),onClick:()=>e.set(Z.brief),className:ye.textButton},i.createElement(E.JO.TextShort,{className:ye.textIcon})),i.createElement(_.zx.White,{title:t.card.shortenIt.selectorTooltip(Z.focused),name:Z.focused,key:Z.focused,active:e.view((e=>e===Z.focused)),onClick:()=>e.set(Z.focused),className:ye.textButton},i.createElement(E.JO.TextMedium,{className:ye.textIcon})),i.createElement(_.zx.White,{title:t.card.shortenIt.selectorTooltip(Z.detailed),name:Z.detailed,key:Z.detailed,active:e.view((e=>e===Z.detailed)),onClick:()=>e.set(Z.detailed),className:ye.textButton},i.createElement(E.JO.TextLong,{className:ye.textIcon})))},le=({activeSummary:e,showSelector:t,transform:n})=>{const r=i.useContext(m.m.Context),o=e.view((e=>r.card.shortenIt.compressionHint(ie.g.fromRatio(n.labels[ae(e)].compressionRatio))));return i.createElement("div",{className:ye.summarySelector},i.createElement("div",{className:ye.labelContainer},i.createElement(S.XY,{className:ye.label},t?e:o),t&&i.createElement(S.ck,{className:ye.hint},o)),t&&i.createElement(se,{activeSummary:e}))},ce=({card:e,actions:t})=>{const n=i.useContext(m.m.Context);return i.createElement(i.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(w.C.Regular,null,n.beta)}),i.createElement(ue,{sentenceCount:e.activeAlert.sentenceCount}),i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))},ue=({sentenceCount:e})=>i.createElement(S.H3,{className:ye.sentenceCount},e," ",i.createElement(S.XY,{className:ye.sentences},"sentences")),de=({card:e,feedbackActions:t})=>i.createElement(i.Fragment,null,i.createElement(j.Be,{card:e,feedbackActions:t}),i.createElement(j.U4,{card:e,feedbackActions:t})),pe=({card:e,actions:t})=>(0,j.m_)(e.activeAlert,e.renderOptions.layoutDensity)?i.createElement(oe.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):null,he={color:d.Il.CoreRed50},me={$nest:{"&:not([data-disabled='true'])[data-active='true']":{stroke:d.Il.CoreNeutral0}}},fe={padding:h.u.important(0)},ge={color:d.Il.CoreNeutral50,lineHeight:h.u.rem(1.125)},ye=h.u.stylesheet({sentenceCount:[he],sentences:[{display:"inline-block"}],textIcon:[me],textButton:[fe],summarySelector:[{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}],labelContainer:[{display:"flex",flexDirection:"column"}],label:[{fontWeight:"bold",textTransform:"capitalize"}],hint:[ge]}),ve=({card:e,actions:t,isChecking:n,isCheckingGlobal:r})=>{const a=i.useContext(m.m.Context);return i.createElement(j.VM,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,o.constant)(i.createElement(ce,{card:e,actions:t})),mainActions:(0,o.constant)(i.createElement(de,{card:e,feedbackActions:t})),cardFooter:n=>i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement(j.Nm,{title:a.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:I.hz((()=>{t.next({type:g.lY.Type.requestShortenItReplacements,alertId:e.activeAlert.id,itemId:e.id})}))})),subActions:(0,o.constant)(i.createElement(pe,{card:e,actions:t}))})},be=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:c})=>{const u=i.useContext(m.m.Context),d=s.h.create(Z.brief),p=s.h.create(!0);return i.createElement(j.VM,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,mainActions:(0,o.constant)(i.createElement(j.Kg,{card:e,feedbackActions:t})),subActions:(0,o.constant)(i.createElement(pe,{card:e,actions:t})),cardBody:(0,o.constant)(i.createElement(i.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(w.C.Regular,null,u.beta)}),(0,a.pipe)(e.renderOptions.layoutDensity,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})))),i.createElement(le,{activeSummary:d,showSelector:3===c.labels.length,transform:c}),i.createElement(b.T9,{classes:{rendered:Ee.replacement,removing:Ee.replacementHidden},timeout:250,content:d.view((t=>i.createElement(ne.OW,{label:c.labels[ae(t)],collapsed:p,layoutDensity:e.renderOptions.layoutDensity})))}),i.createElement(j.ko,{card:e,isChecking:n}))),cardFooter:n=>i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement("div",{className:Ee.footerBtns},i.createElement(j.Nm,{title:u.card.todoAction(c.tooltipText),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:I.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:ae(d.get()),cardType:g.lY.getCardType(e)})}))}),i.createElement(_.zx.Ghost,{name:"expand-edits-btn",onClick:()=>p.modify((e=>!e)),className:Ee.expandEditsBtn},i.createElement(l.F.Fragment,null,p.view(u.card.shortenIt.expandEdits)))))})};var we;!function(e){e.Full=e=>{const{isChecking:t,isCheckingGlobal:n}=function(e,t,n){const r=k.P.useAtomOf({isWaiting:e.activeAlert.summariesRequestState===U.vQ.SummariesRequestState.requested,cardIsOpen:"focused"===e.visualState.transition.type||"expanded"===e.visualState.transition.type});return k.P.useMemoOnDidMount((()=>({isChecking:ee.aj([t,r]).pipe(O.U((([e,t])=>e||t.isWaiting&&t.cardIsOpen)),te.x()),isCheckingGlobal:ee.aj([n,r]).pipe(O.U((([e,t])=>e||t.isWaiting&&!t.cardIsOpen)),te.x())})))}(e.card,e.isChecking,e.isCheckingGlobal);return(0,a.pipe)(e.card.transform,u.filter(Q.b$.isShortenIt),u.map((e=>Object.assign(Object.assign({},e),{labels:(0,a.pipe)(e.labels,K.DY(Q.q6.ord))}))),u.fold((0,o.constant)(i.createElement(ve,Object.assign({},e,{isChecking:t,isCheckingGlobal:n}))),(t=>i.createElement(be,Object.assign({},e,{transform:t})))))}}(we||(we={}));const _e={transition:`opacity ${h.u.seconds(j.k_)}`},Ce={padding:`0 ${h.u.rem(1)}`},Ee=h.u.stylesheet({replacement:[_e],replacementHidden:[_e,{opacity:0}],footerBtns:[{display:"flex"}],expandEditsBtn:[Ce]});var Se=n(76720);const Ie=({card:e,actions:t,isChecking:n,isCheckingGlobal:r})=>{const a=i.useContext(m.m.Context);return i.createElement(Oe,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,o.constant)(i.createElement(j.M9,{card:e,actions:t,isChecking:n})),cardFooter:n=>i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement("div",{className:Ue.fullSentenceCardFooterBtns},i.createElement(j.Nm,{title:a.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:I.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,cardType:g.lY.getCardType(e)})}))})))})},ke=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:c})=>{const d=i.useContext(m.m.Context),h=s.h.create(!0);return k.P.useSubscriptionTo((0,a.pipe)(h,A.T(1),x.b((e=>t.next({type:g.lY.Type.fullSentenceHighlightChangesToggle,showChanges:e}))))),i.createElement(Oe,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,o.constant)(i.createElement(l.F.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(w.C.Regular,null,d.beta)}),i.createElement(Pe,{isNew:e.renderOptions.isNew,actions:t}),(0,a.pipe)(e.renderOptions.layoutDensity,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})))),i.createElement(b.T9,{classes:{rendered:Ue.replacement,removing:Ue.replacementHidden},timeout:250,content:h.pipe(T.a(c,((t,n)=>(0,a.pipe)(n,u.fold((()=>(p.Monitoring.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable in full-sentence card",{cardId:e.id}),null)),(n=>i.createElement(ne.n4,{replacements:n,showDiff:t,layoutDensity:e.renderOptions.layoutDensity})))))))}),i.createElement(j.ko,{card:e,isChecking:n}))),cardFooter:n=>i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement(l.F.div,{className:Ue.fullSentenceCardFooterBtns},i.createElement(j.Nm,{title:c.pipe(O.U(u.fold((()=>""),(e=>d.card.todoAction(e.tooltipText))))),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:I.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,cardType:g.lY.getCardType(e)})}))}),i.createElement(C.Ys,{className:Ue.fullSentenceCardCheckbox,checked:h,name:"set-goals"},d.card.showChangesToggle)))})},Ae=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:s})=>{const d=i.useContext(m.m.Context),h=(0,a.pipe)(e.userInput,u.getOrElse((0,o.constant)("")));return i.createElement(Oe,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:r=>i.createElement(i.Fragment,{key:"content"},i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(Pe,{isNew:e.renderOptions.isNew,actions:t}),i.createElement(l.F.div,{className:r.pipe(O.U((0,c.RN)(Ue.transformContainerInvisible,Ue.transformContainer)))},i.createElement(b.T9,{classes:{rendered:Ue.replacement,removing:Ue.replacementHidden},timeout:250,content:s.pipe(O.U(u.fold((()=>(p.Monitoring.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(n=>i.createElement(ne.$s,{key:"label",gapValue:h,replacements:n,layoutDensity:e.renderOptions.layoutDensity,onFocus:()=>t.next({type:g.lY.Type.focusUserInput,id:e.id,kind:"focus"}),onChange:n=>t.next({type:g.lY.Type.changeUserInput,alertId:e.activeAlert.id,cardId:e.id,userInput:n}),onApply:I.hz((()=>t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,cardType:g.lY.getCardType(e)})))})))))})),i.createElement(S.Xk,{className:r.pipe(O.U((0,c.RN)(Ue.transformHint,Ue.transformHintInvisible)))},d.card.updatingSuggestion),i.createElement(j.ko,{card:e,isChecking:n}),(0,a.pipe)(e.renderOptions.layoutDensity,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,o.constant)(i.createElement(j.lJ,{card:e}))})},xe=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:s})=>{const d=i.useContext(m.m.Context);return i.createElement(Oe,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:r=>i.createElement(i.Fragment,null,i.createElement(l.F.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(w.C.Regular,null,d.beta)})),i.createElement(l.F.div,{className:r.pipe(O.U((0,c.RN)(Ue.transformContainerInvisible,Ue.transformContainer)))},i.createElement(b.T9,{classes:{rendered:Ue.replacement,removing:Ue.replacementHidden},timeout:250,content:s.pipe(O.U(u.fold((()=>(p.Monitoring.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(n=>{const r=(0,a.pipe)(e.synfonySelection,u.getOrElse((()=>[])));return i.createElement(ne.Px,{replacements:n,onClick:n=>I.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n,cardType:g.lY.getCardType(e),drilldownSuggestionIds:r})})),onDive:(n,i)=>t.next({type:g.GM.Kind.drilldown,alertId:e.activeAlert.id,wordIndex:n,cardId:e.id,alternativeId:i,drilldownSuggestionIds:r}),onBack:()=>t.next({type:g.GM.Kind.back,cardId:e.id}),selection:r,layoutDensity:e.renderOptions.layoutDensity})}))))})),i.createElement(S.Xk,{className:r.pipe(O.U((0,c.RN)(Ue.transformHint,Ue.transformHintInvisible)))},d.card.updatingSuggestion),i.createElement(j.ko,{card:e,isChecking:n}),(0,a.pipe)(e.renderOptions.layoutDensity,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,o.constant)(i.createElement(j.lJ,{card:e}))})},Te=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:s})=>{const d=i.useContext(m.m.Context);return i.createElement(Oe,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:r=>i.createElement(i.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(l.F.div,{className:r.pipe(O.U((0,c.RN)(Ue.transformContainerInvisible,Ue.transformContainer)))},i.createElement(b.T9,{classes:{rendered:Ue.replacement,removing:Ue.replacementHidden},timeout:250,content:s.pipe(O.U(u.fold((()=>(p.Monitoring.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(n=>i.createElement(j.hT,{rl:n,onClick:n=>I.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n,cardType:g.lY.getCardType(e)})})),layoutDensity:e.renderOptions.layoutDensity})))))})),i.createElement(S.Xk,{className:r.pipe(O.U((0,c.RN)(Ue.transformHint,Ue.transformHintInvisible)))},d.card.updatingSuggestion),i.createElement(j.ko,{card:e,isChecking:n}),(0,a.pipe)(e.renderOptions.layoutDensity,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,o.constant)(i.createElement(j.lJ,{card:e}))})},Oe=e=>{var t,n,r;return i.createElement(j.VM,Object.assign({},e,{cardExtra:null!==(t=e.cardExtra)&&void 0!==t?t:(0,o.constant)(i.createElement(j.mQ,{card:e.card,actions:e.actions})),mainActions:null!==(n=e.mainActions)&&void 0!==n?n:(0,o.constant)(i.createElement(j.Kg,{card:e.card,feedbackActions:e.actions})),subActions:null!==(r=e.subActions)&&void 0!==r?r:(0,o.constant)(i.createElement(j.q4,{card:e.card,actions:e.actions}))}))},Re=({card:e,actions:t,isChecking:n})=>i.createElement(M.Z,{visualState:e.visualState,onFocus:()=>t.next({type:g.lY.Type.alertCardShow,cardType:g.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(0,W.G)(e.renderOptions),body:i.createElement(j.M9,{card:e,actions:t,isChecking:n}),mainActions:i.createElement(j.Kg,{card:e,feedbackActions:t}),footer:i.createElement(j.lJ,{card:e}),subActions:i.createElement(j.q4,{card:e,actions:t}),extra:i.createElement(j.mQ,{card:e,actions:t})}),Ne=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:a})=>{const s=i.useContext(m.m.Context),u=i.useMemo((()=>new R.X(!0)),[]);return i.useEffect((()=>{"focused"===e.visualState.transition.type&&t.next({type:g.lY.Type.smartPhrasesShowFullCard,alertId:e.activeAlert.id})}),[t,e.activeAlert.id,e.visualState.transition.type]),k.P.useSubscriptionTo(u.pipe(N.h(Boolean),L.g(1e3),x.b((()=>u.next(!1))))),i.createElement(j.UK,{title:i.createElement(j.g8,{title:e.activeAlert.title,emoji:e.activeAlert.emoji})},i.createElement(l.F.Fragment,null,u.pipe(O.U((l=>i.createElement(j.VM,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardTheme:l?{contentBody:Ue.smartPhrasesCardBodyLoading}:void 0,cardBody:n=>i.createElement(j.oE,{card:e,actions:t,isLoading:l,transform:a,classes:{transformContainer:n.pipe(O.U((0,c.RN)(Ue.transformContainerInvisible,Ue.transformContainer))),renderedReplacement:Ue.replacement,hiddenReplacement:Ue.replacementHidden}}),mainActions:(0,o.constant)(e.activeAlert.usedReplacementsIndexes.length>0?i.createElement(_.zx.Ghost,{name:`smart-phrases-${e.activeAlert.intent}-done`,onClick:I.hz((()=>t.next({type:g.lY.Type.smartPhrasesDone,alertId:e.activeAlert.id,source:"user"}))),disabled:l},s.done):i.createElement(j.U4,{card:e,feedbackActions:t,onClick:()=>t.next({type:g.lY.Type.smartPhrasesDismiss,alertId:e.activeAlert.id}),disabled:l})),subActions:()=>e.activeAlert.replacementsLength>5||e.activeAlert.hideReplacements?i.createElement(_.zx.Tertiary,{name:`smart-phrases-${e.activeAlert.intent}-show-more-ideas`,onClick:()=>{t.next({type:g.lY.Type.smartPhrasesShowMoreIdeas,cardId:e.id,alertId:e.activeAlert.id}),u.next(!0)},disabled:l},i.createElement(E.JO.SmartPhrases.ShowMore,null),s.card.smartPhrases.showMoreIdeas):null,cardExtra:()=>l?null:i.createElement(j.Eq,{card:e,actions:t})}))))))},Le=({card:e,actions:t,isChecking:n,isCheckingGlobal:o,transform:a})=>y.C.isSmartPhrasesItem(e)?i.createElement(Ne,{card:e,actions:t,isChecking:n,isCheckingGlobal:o,transform:a}):y.C.isSentenceLevelBrandTonesItem(e)?i.createElement(r.Full,{card:e,actions:t}):y.C.isTakeawayItem(e)?i.createElement(Se.o.Full,{card:e,actions:t}):y.C.isShortenItItem(e)?i.createElement(we.Full,{card:e,actions:t,isChecking:n,isCheckingGlobal:o}):f.X.hasTransform(e)?f.X.hasFullSentenceTransform(e)?i.createElement(ke,{card:e,actions:t,isChecking:n,isCheckingGlobal:o,transform:a}):f.X.hasOneGapTransform(e)?i.createElement(Ae,{card:e,actions:t,isChecking:n,isCheckingGlobal:o,transform:a}):f.X.hasSynfonyTransform(e)?i.createElement(xe,{card:e,actions:t,isChecking:n,isCheckingGlobal:o,transform:a}):i.createElement(Te,{card:e,actions:t,isChecking:n,isCheckingGlobal:o,transform:a}):f.X.isSimple(e)?i.createElement(Ie,{card:e,actions:t,isChecking:n,isCheckingGlobal:o}):i.createElement(Re,{card:e,actions:t,isChecking:n}),Pe=e=>i.createElement(l.F.Fragment,null,e.isNew.pipe(O.U(u.fold(o.constNull,(t=>i.createElement(j.jt,{type:t,actions:e.actions,key:"new-notification"})))),P.O(null))),Me={transition:`opacity ${h.u.seconds(j.k_)}`,transitionDelay:h.u.seconds(j.k_)},De={position:"absolute",top:h.u.rem(2),color:d.Il.CoreNeutral40,lineHeight:h.u.rem(2),transition:`opacity ${h.u.seconds(j.k_)}`,transitionDelay:h.u.seconds(j.k_)},Fe={transition:`opacity ${h.u.seconds(j.k_)}`},Be={fontSize:h.u.rem(d.xv.BodySize),lineHeight:h.u.rem(2.0625)},Ue=Object.assign({},h.u.stylesheet({invisible:[j.Bn],transformContainer:[Me],transformContainerInvisible:[Me,j.Bn,{transitionDelay:"initial"}],transformHint:[De],transformHintInvisible:[De,j.Bn,{transitionDelay:"initial"}],replacement:[Fe],replacementHidden:[Fe,{opacity:0}],fullSentenceCardFooterBtns:[{display:"flex",flexWrap:"wrap"}],fullSentenceCardCheckbox:[Be],smartPhrasesCardBodyLoading:[{padding:0}]}))},19157:(e,t,n)=>{n.d(t,{P:()=>D});var r=n(27378),i=n(40327),o=n(12187),a=n(5739),s=n(5114),l=n(83078),c=n(90351),u=n(63969),d=n(40219),p=n(30763),h=n(66896),m=n(40018),f=n(17594),g=n(26027),y=n(91549),v=n(15646),b=n(77610),w=n(62310),_=n(7046),C=n(29245),E=n(94793),S=n(3656),I=n(28706),k=n(77176),A=n(50225),x=n(32338),T=n(50224),O=n(28584),R=n(55636);const N=({theme:e={},action:t,hasEmoji:n})=>r.createElement("div",Object.assign({},(0,o.Sh)(e.wrapper,ae.ctaText)),n?r.createElement(C.d,{emojiClassName:(0,o.Sh)(ae.cardLogo,e.logo).className},t):t),L=({vox:e,theme:t={}})=>r.createElement(r.Fragment,null,(0,i.pipe)(e.logoUrl,s.map((e=>r.createElement(O.Im,Object.assign({},(0,o.Sh)(ae.cardLogo,t.logo),{logoUrl:e})))),s.toNullable),r.createElement(O.$x,Object.assign({vox:e},(0,o.Sh)(ae.cta,t.label),{isMinimalCard:!1}))),P=e=>[h.R.outcomeTypeMatch(e.lensType)({correctness:T.m.dotCorrectness,clarity:T.m.dotClarity,premium:T.m.dotAdvanced,engagement:T.m.dotEngagement,delivery:T.m.dotDelivery,vox:T.m.dotVox}),ae.cta],M=()=>{const e=r.useContext(p.m.Context);return r.createElement(w.C.Regular,{className:ae.newLabel},e.new)};var D;!function(e){e.SmartPhrases=({card:e,actions:t,useBundleContainer:n=!1,twoLined:i=!1})=>{const a=r.useContext(p.m.Context);return r.useEffect((()=>{"added"!==e.visualState.transition.type&&"rendered"!==e.visualState.transition.type||(t.next({type:v.lY.Type.smartPhrasesShowMiniCard,alertId:e.activeAlert.id}),e.activeAlert.hideReplacements&&t.next({type:v.lY.Type.smartPhrasesDone,alertId:e.activeAlert.id,source:"auto"}))}),[t,e.activeAlert.hideReplacements,e.activeAlert.id,e.visualState.transition.type]),r.createElement(A.b.Mini,Object.assign({},(0,o.Sh)(i?z.wrapper:ee.wrapper,ae.smartPhrasesWrapper,n?ee.bundleContainer:null),{actions:t,cardId:e.id,getActiveAlert:()=>e.activeAlert,hideActivateButton:!0}),r.createElement("div",{className:ae.smartPhrasesContainer},r.createElement(R.g8,{className:ae.smartPhrasesTitle,title:e.activeAlert.title,emoji:e.activeAlert.emoji,hideBetaBadge:!0}),r.createElement("div",{className:ae.smartPhrasesIntentDetectedFeedback},r.createElement(_.zx.Ghost,{title:a.card.smartPhrases.intentDetectedFeedbackYes,name:`smart-phrases-${e.activeAlert.intent}-intent-detected-feedback-yes`,active:e.activeAlert.intentDetectedFeedback===m.cm.SMART_PHRASES_INTENT_DETECTED_ACCURATE,disabled:Boolean(e.activeAlert.intentDetectedFeedback),onClick:n=>{var r,i;t.next({type:v.lY.Type.smartPhrasesFeedback,alertId:e.activeAlert.id,cardId:e.id,feedbackType:m.cm.SMART_PHRASES_INTENT_DETECTED_ACCURATE}),t.next({type:v.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:e.activeAlert},clickPoint:{x:null!==(r=null==n?void 0:n.clientX)&&void 0!==r?r:0,y:null!==(i=null==n?void 0:n.clientY)&&void 0!==i?i:0}})}},r.createElement(E.JO.VoteYes,null)),r.createElement(_.zx.Ghost,{title:a.card.smartPhrases.intentDetectedFeedbackNo,name:`smart-phrases-${e.activeAlert.intent}-intent-detected-feedback-no`,active:e.activeAlert.intentDetectedFeedback===m.cm.SMART_PHRASES_INTENT_DETECTED_INACCURATE,disabled:Boolean(e.activeAlert.intentDetectedFeedback),onClick:I.hz((()=>{t.next({type:v.lY.Type.smartPhrasesFeedback,alertId:e.activeAlert.id,cardId:e.id,feedbackType:m.cm.SMART_PHRASES_INTENT_DETECTED_INACCURATE}),t.next({type:v.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForDismissSurvey:g.X.isEligibleForDismissSurvey(e)})}))},r.createElement(E.JO.VoteNo,null)))))},e.Bundle=({card:e,actions:t})=>{const[n]=P(e.activeAlert);return r.createElement(A.b.Mini,Object.assign({},(0,o.Sh)(ee.wrapper,ee.bundleContainer,ee.dot,n),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],counter:r.createElement(S.CL,{className:ee.alertsCounter},e.alerts.length)}),r.createElement(a.F.div,{className:ee.miniContainer},r.createElement("div",{className:ee.highlightedText},y.R.bundleTitle(e))))},e.Standard=({card:n,actions:l})=>{const c=r.useContext(p.m.Context);if(b.C.isSmartPhrasesItem(n))return r.createElement(e.SmartPhrases,{card:n,actions:l});{const[e,u]=P(n.activeAlert);return r.createElement(A.b.Mini,Object.assign({},(0,o.Sh)(ee.wrapper,ee.dot,e),{actions:l,cardId:n.id,getActiveAlert:()=>n.activeAlert}),r.createElement(a.F.div,{className:ee.miniContainer},r.createElement("div",{className:ee.highlightedText},n.activeAlert.highlightTexts[0]),r.createElement("div",{className:ee.middleDot},"·"),(0,i.pipe)(n.activeAlert.extraProperties.vox,s.map((e=>r.createElement(L,{vox:e,theme:{logo:ee.cardLogo}}))),s.getOrElse((()=>r.createElement(r.Fragment,null,r.createElement(N,{hasEmoji:f.$.hasTone(n.activeAlert),action:g.X.miniTitle(n,c),theme:{wrapper:u,logo:ee.cardLogo}}),b.C.isTakeawayItem(n)&&r.createElement(t,{item:n,className:z.takeawayIconStandard}))))),(0,i.pipe)(n.renderOptions.isNew,k.U((e=>s.isSome(e)?r.createElement(M,{key:"new-label"}):null)))))}};const t=({item:e,className:t})=>(l.contains(m.TO.correctlyDetected)(e.activeAlert.takeawayFeedback)||l.contains(m.TO.correctlyDetectedAndDone)(e.activeAlert.takeawayFeedback))&&e.activeAlert.takeawayIsLikelyToBeRead?r.createElement(E.JO.ValidationOk,{width:16,className:t}):r.createElement(E.JO.Megaphone,{width:16,className:t});e.TwoLined=({card:n,actions:a})=>{const l=r.useContext(p.m.Context);if(b.C.isSmartPhrasesItem(n))return r.createElement(e.SmartPhrases,{card:n,actions:a,twoLined:!0});{const[e,c]=P(n.activeAlert);return r.createElement(A.b.Mini,Object.assign({},(0,o.Sh)(z.wrapper,z.dot,e),{actions:a,cardId:n.id,getActiveAlert:()=>n.activeAlert}),r.createElement("div",{className:z.miniContainer},(0,i.pipe)(n.activeAlert.extraProperties.vox,s.map((e=>r.createElement(L,{vox:e,theme:{logo:z.cardLogo,label:z.subTitle}}))),s.getOrElse((()=>r.createElement(r.Fragment,null,r.createElement(N,{hasEmoji:f.$.hasTone(n.activeAlert),action:g.X.miniTitle(n,l),theme:{wrapper:(0,o.Sh)(c,z.ctaText,z.subTitle).className,logo:z.cardLogo}}),b.C.isTakeawayItem(n)&&r.createElement(t,{item:n,className:z.takeawayIconMini}))))),r.createElement("div",{className:$},n.activeAlert.highlightTexts[0])))}}}(D||(D={}));const F="0 1px 8px rgba(109, 117, 141, .18)",B={$nest:{"&:before":{top:u.u.rem(.85),left:0}}},U="miniTwoLinedHighlightedText",$=u.u.joinClasses([U,u.u.style({overflow:"hidden",marginTop:u.u.rem(-.25),color:c.Il.CoreNeutral90,textOverflow:"ellipsis"})]),j={height:u.u.rem(3.25),borderRadius:u.u.rem(d.Jr),boxShadow:F,$nest:{"&:hover":{boxShadow:F},"&:hover .miniTwoLinedHighlightedText":{borderColor:"transparent"}}},W={top:u.u.rem(.7)},G={fontWeight:u.u.important(400),fontSize:u.u.rem(.75)},q={position:"absolute",left:u.u.rem(.5),minWidth:"initial",minHeight:"initial",background:c.Il.CoreNeutral0},H=Object.assign(Object.assign({},q),{top:u.u.rem(.6)}),z=u.u.stylesheet({dot:[B],wrapper:[j],miniContainer:[{flexDirection:"column"}],cardLogo:[W],subTitle:[G],ctaText:[{overflow:"hidden",textOverflow:"ellipsis"}],takeawayIconMini:[H],takeawayIconStandard:[q]}),V={height:u.u.rem(3),$nest:{"&:hover .highlightText":{borderColor:"transparent"}}},Y={$nest:{"&:before":{top:u.u.px(1),bottom:0,left:0}}},X={height:u.u.important(u.u.rem(2.5)),borderRadius:u.u.rem(d.Jr)},J={color:c.Il.CoreNeutral50,display:"flex",width:u.u.rem(2),height:u.u.percent(100),justifyContent:"center",alignItems:"center"},Z={overflow:"hidden",color:c.Il.CoreNeutral90,textOverflow:"ellipsis"},K={display:"inline-block",padding:`0 ${u.u.rem(.5)}`},Q={top:0,bottom:0,left:u.u.rem(.5),margin:"auto"},ee=u.u.stylesheet({wrapper:[V],dot:[Y],miniContainer:[{display:"flex",justifyContent:"flex-end",alignItems:"center"}],bundleContainer:[X],alertsCounter:[J],highlightedText:[Z],middleDot:[K],cardLogo:[Q]}),te={color:c.Il.CoreNeutral50,fontWeight:300},ne={position:"absolute",left:u.u.rem(.5),width:u.u.rem(1),height:u.u.rem(1),background:c.Il.CoreNeutral0},re={marginLeft:u.u.rem(.5)},ie={$nest:{[`& .${x.B.contentWrapper}`]:{margin:0}}},oe={color:c.Il.CoreNeutral90,fontSize:u.u.rem(.875),lineHeight:u.u.rem(1.125),paddingLeft:u.u.rem(.75)},ae=u.u.stylesheet({ctaText:[{$nest:{"&:first-letter":{textTransform:"uppercase"}}}],cta:[te],cardLogo:[ne],newLabel:[re],smartPhrasesWrapper:[ie],smartPhrasesContainer:[{display:"flex",alignItems:"center",justifyContent:"space-between"}],smartPhrasesTitle:[oe],smartPhrasesIntentDetectedFeedback:[{display:"flex",alignItems:"center",position:"absolute",right:0}]})},98210:(e,t,n)=>{n.d(t,{Px:()=>Qe,n4:()=>Ke,$s:()=>tt,zO:()=>it,OW:()=>at,GP:()=>ot});var r=n(27378),i=n(71249),o=n(57050),a=n(40327),s=n(12187),l=n(38983),c=n(5739),u=n(66310),d=n(55415),p=n(22232),h=n(8125),m=n(30763),f=n(51006),g=n(98637),y=n(4890),v=n(8313),b=n(7046),w=n(43965),_=n(94793),C=n(90351),E=n(63969),S=n(24588),I=n(40219),k=n(54338),A=n(3656);function x(e){return e?t=>`${e}/${t}`:o.identity}function T(e){const{name:t}=r.useContext(k.f.Context);return void 0===e?e:"string"==typeof e?x(t)(e):e.view(x(t))}const O=e=>r.createElement(A.ZT,Object.assign({},N(e),{value:e.value,onChange:e.onChange})),R=e=>r.createElement(O,Object.assign({},e,{nodeType:"input"})),N=e=>{return Object.assign({"data-name":T(e.name),mount:(t=e.autofocus,t?e=>e&&requestAnimationFrame((()=>e.focus())):void 0),styleType:A.ZT.Type.P1,nodeType:e.nodeType,placeholder:e.placeholder,onFocus:e.onFocus,onBlur:e.onBlur,onKeyPress:e.onKeyPress},(0,s.Sh)(P.inputField,e.className));var t},L={width:E.u.percent(100),outline:"none",border:`1px solid ${S.xO}`,borderRadius:E.u.rem(I.fx),background:C.Il.CoreNeutral0,$nest:{"&::placeholder":{color:S.FW,opacity:1},"&:focus":{borderColor:C.Il.CoreBlue50}}},P=E.u.stylesheet({inputField:[L],textArea:[{resize:"none"}]});const M=(0,n(83171).Gd)(),D=e=>({$nest:{[`&[data-indent="${e}"]`]:{marginLeft:E.u.rem(.5*e)}}}),F=(e,t,n,r)=>({$nest:{[`&[data-indent="${t}"]`]:{counterIncrement:`card-list${t}`,counterReset:r,$nest:{"&:before":{content:`'${e}' '\\A\\00a0' counter(card-list${t}, ${n}) '. '`}}}}}),B=e=>[F(e,0,"decimal","card-list1 card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),F(e,1,"lower-alpha","card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),F(e,2,"lower-roman","card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),F(e,3,"decimal","card-list4 card-list5 card-list6 card-list7 card-list8"),F(e,4,"lower-alpha","card-list5 card-list6 card-list7 card-list8"),F(e,5,"lower-roman","card-list6 card-list7 card-list8"),F(e,6,"decimal","card-list7 card-list8"),F(e,7,"lower-alpha","card-list8"),F(e,8,"lower-roman","none")],U="cards-replacements_labels-",$={list:`${U}list`,item:`${U}item`,diff:`${U}diff`,columnList:`${U}columnList`,itemInsert:`${U}itemInsert`,deleteAll:`${U}deleteAll`,crossed:`${U}crossed`,deleteQuote:`${U}deleteQuote`,deletePunctuation:`${U}deletePunctuation`,deleteDoubleComma:`${U}deleteDoubleComma`,deleteApostrophe:`${U}deleteApostrophe`,deleteLetter:`${U}deleteLetter`,deletePunctuationBeforeLetter:`${U}deletePunctuationBeforeLetter`,itemOriginal:`${U}itemOriginal`,itemOriginalStrikeThrough:`${U}itemOriginalStrikeThrough`,itemOriginalContent:`${U}itemOriginalContent`,removeOrContainer:`${U}removeOrContainer`,itemContext:`${U}itemContext`,itemContextShifted:`${U}itemContextShifted`,or:`${U}or`,arrowInsertsList:`${U}arrowInsertsList`,cozyArrowInsertsList:`${U}cozyArrowInsertsList`,inlineHeader:`${U}inlineHeader`,fullSentenceBackground:`${U}fullSentenceBackground`,minimalFullSentenceBackground:`${U}minimalFullSentenceBackground`,fullSentenceDelete:`${U}fullSentenceDelete`,fullSentenceDeleteCollapsed:`${U}fullSentenceDeleteCollapsed`,fullSentenceHidden:`${U}fullSentenceHidden`,fullSentenceListItem:`${U}fullSentenceListItem`,fullSentenceBulletListItem:`${U}fullSentenceBulletListItem`,fullSentenceDashedListItem:`${U}fullSentenceDashedListItem`,fullSentenceOrderedListItem:`${U}fullSentenceOrderedListItem`,fullSentenceOrderedListItemWithFormatting:U+"fullSentenceOrderedListItemWithFormatting",fullSentenceDashedListItemWithFormatting:U+"fullSentenceDashedListItemWithFormatting",fullSentenceBulletListItemWithFormatting:U+"fullSentenceBulletListItemWithFormatting",fullSentenceInsert:`${U}fullSentenceInsert`,fullSentenceInsertPunctuation:`${U}fullSentenceInsertPunctuation`,shortenItBackground:`${U}shortenItBackground`,minimalShortenItBackground:`${U}minimalShortenItBackground`,shortenItDelete:`${U}shortenItDelete`,shortenItDeleteCollapsed:`${U}shortenItDeleteCollapsed`,shortenItInsert:`${U}shortenItInsert`,shortenItInsertPunctuation:`${U}shortenItInsertPunctuation`,itemRemove:`${U}itemRemove`,oneGapInsert:`${U}oneGapInsert`,oneGapInput:`${U}oneGapInput`,smartPhrasesInsert:`${U}smartPhrasesInsert`,smartPhrasesInsertContent:`${U}smartPhrasesInsertContent`,smartPhrasesInsertContentText:`${U}smartPhrasesInsertContentText`,drilldownInsertGroup:`${U}drilldownInsertGroup`,drilldownArrowButton:`${U}drilldownArrowButton`,drilldownIcon:`${U}drilldownIcon`,drilldownOriginalRow:`${U}drilldownOriginalRow`,drilldownBackButton:`${U}drilldownBackButton`,collapsibleDelete:`${U}collapsibleDelete`,collapsibleInsert:`${U}collapsibleInsert`,shortenItCollapsibleDelete:`${U}shortenItCollapsibleDelete`,collapsiblePartContent:`${U}collapsiblePartContent`},j={position:"relative",overflow:"hidden",margin:`0 ${E.u.rem(.5)} ${E.u.rem(.5)} 0`,padding:`${E.u.rem(.25)} ${E.u.rem(.5)}`,borderRadius:E.u.rem(I.fx),color:C.Il.CoreNeutral0,textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:E.u.rem(1.5),cursor:"pointer",transitionDuration:".2s",overflowWrap:"break-word"},W={position:"relative",fontWeight:"bolder",overflow:"clip",$nest:{"&:after":{position:"absolute",top:"-8%",left:E.u.rem(.3125),width:"1px",height:"120%",background:C.Il.CoreNeutral0,content:"''",opacity:.8}}},G={position:"relative",marginRight:E.u.rem(.5),whiteSpace:"nowrap"},q={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${E.u.rem(1)} 0`,padding:E.u.rem(.5),maxHeight:E.u.rem(12),borderRadius:E.u.rem(I.fx),background:C.Il.CoreNeutral10,color:C.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${I.g_}, ${I.xL}`},H={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${E.u.rem(1)} 0`,maxHeight:E.u.rem(12),color:C.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontFeatureSettings:`${I.g_}, ${I.xL}`},z={position:"relative",marginRight:E.u.rem(.5),maxWidth:`calc(100% - ${E.u.rem(.5)})`,overflowWrap:"break-word",$nest:{"&:after":{display:"inline-block",marginLeft:E.u.rem(.5),color:C.Il.CoreNeutral50,content:"'→'",verticalAlign:"middle"}}},V={textDecoration:"line-through",color:C.Il.CoreRed40,textDecorationLine:"line-through"},Y=[D(0),D(1),D(2),D(3),D(4),D(5),D(6),D(7),D(8)],X={display:"flex",alignItems:"flex-start",flexWrap:"wrap",fontFeatureSettings:`${I.g_}, ${I.xL}`},J={background:C.Il.BackgroundCardApply,maxWidth:"100%",$nest:{"&[data-hovered='true']":{background:C.Il.CoreGreen50},"&[data-disabled='true']":{background:C.Il.CoreGreen40}}},Z={$nest:{"&:after":{transform:"rotate(-25deg)"}}},K={paddingRight:E.u.rem(.35),$nest:{"&:after":{transform:"rotate(25deg)"}}},Q={paddingRight:E.u.rem(.3125),$nest:{"&:before":{content:"' '"},"&:after":{transform:"rotate(25deg)"}}},ee={textDecoration:"line-through",whiteSpace:"pre-wrap",$nest:{"&:before":{content:"' '"},"&:after":{background:"transparent !important",content:"' '"}}},te={display:"flex",flexBasis:"100%"},ne={margin:`0 ${E.u.rem(.5)} ${E.u.rem(.5)} 2px`,color:C.Il.CoreNeutral60},re={display:"flex",minWidth:"50%",flexWrap:"wrap",flexBasis:"content"},ie={marginBottom:E.u.rem(.25),color:C.Il.CoreNeutral60,fontWeight:400,fontSize:E.u.rem(.8),lineHeight:E.u.rem(1.2),$nest:{"&:first-letter":{textTransform:"capitalize"}}},oe={color:C.Il.CoreRed50,textDecoration:"line-through",fontWeight:600},ae=Object.assign(Object.assign({},oe),{textDecoration:"none"}),se={color:C.Il.CoreNeutral50,textDecoration:"line-through",fontWeight:400},le=Object.assign(Object.assign({},se),{textDecoration:"none"}),ce={background:C.Il.CoreRed50,$nest:{"&[data-hovered='true'], &[data-disabled='true']":{background:C.Il.CoreRed40}}},ue={$nest:{"&:before":{content:"'¶\\A\\00a0-\\00a0'"}}},de={$nest:{"&:before":{content:"'¶\\A\\00a0\\2022\\00a0'"}}},pe={width:"100%",marginTop:E.u.rem(.5),marginBottom:E.u.rem(.25),boxSizing:"border-box",$nest:{"&[data-disabled='true']":{background:C.Il.CoreNeutral40}}},he={marginTop:E.u.rem(.5),lineHeight:`calc(${E.u.rem(2)} - ${E.u.px(2)})`,padding:`0 ${E.u.rem(.5)}`,border:E.u.important(`${E.u.px(1)} solid ${C.Il.CoreNeutral50}`),color:C.Il.CoreNeutral90,boxSizing:"border-box",$nest:{"&:placeholder-shown":{borderColor:E.u.important(C.Il.CoreNeutral20)}}},me=M.style(j,J),fe={position:"relative",margin:`0 ${E.u.rem(.5)} ${E.u.rem(.5)} 0`,padding:`${E.u.rem(.25)} ${E.u.rem(.5)}`,borderRadius:E.u.rem(I.fx),cursor:"pointer",transitionDuration:".2s",backgroundColor:C.Il.CoreNeutral10,color:C.Il.CoreGreen60,fontSize:E.u.rem(.875),fontWeight:700,lineHeight:E.u.rem(1.25),width:E.u.percent(100),boxSizing:"border-box",$nest:{"&[data-hovered='true']":{background:C.Il.CoreGreen60,color:C.Il.CoreNeutral0}}},ge={display:"flex",justifyContent:"space-between",alignItems:"center",width:E.u.percent(100)},ye={textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",overflowWrap:"break-word",overflow:"hidden"},ve={margin:`0 ${E.u.rem(.5)} ${E.u.rem(.5)} 0`,$nest:{[`& .${$.itemInsert}`]:{transitionProperty:"background",margin:0},[`& > .${$.itemInsert}:first-child:not(:last-child)`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${$.drilldownArrowButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},be={boxShadow:"inset 1px 0px 0px rgba(255, 255, 255, 0.3)",paddingLeft:E.u.rem(.1875),paddingRight:E.u.rem(.3125)},we={width:E.u.rem(1),height:E.u.rem(1),minWidth:E.u.rem(1),minHeight:E.u.rem(1),verticalAlign:"top",marginTop:E.u.rem(.25),$nest:{"& > svg":{transform:"scale(0.75)"},"& > svg *":{fill:E.u.important("white")}}},_e={width:E.u.percent(100),marginBottom:E.u.rem(.5),display:"flex",$nest:{"& > *":{marginRight:E.u.rem(.5)}}},Ce={background:C.Il.CoreNeutral10,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:C.Il.CoreNeutral10}}},Ee={display:"inline-block",width:E.u.rem(1),lineHeight:E.u.rem(.625),height:E.u.rem(.625),margin:`0 ${E.u.rem(.25)}`,verticalAlign:"middle",cursor:"pointer",overflowWrap:"normal",textAlign:"center",borderRadius:E.u.rem(I.mA)},Se={lineHeight:E.u.rem(.2),verticalAlign:"super",marginLeft:"1px"},Ie=Object.assign(Object.assign({},Ee),{backgroundColor:C.Il.CoreRed10}),ke=Object.assign(Object.assign({},Ee),{backgroundColor:C.Il.CoreNeutral10}),Ae=Object.assign(Object.assign({},Ee),{backgroundColor:C.Il.CoreGreen10}),xe={list:E.u.joinClasses([$.list,E.u.style(X),M.style(X)]),item:E.u.joinClasses([$.item,E.u.style(j),M.style(j)]),itemInsert:E.u.joinClasses([$.itemInsert,E.u.style(j,J),me]),deleteAll:E.u.joinClasses([$.deleteAll,E.u.style({textDecoration:"line-through"}),M.style({textDecoration:"line-through"})]),crossed:E.u.joinClasses([$.crossed,E.u.style(W)]),deleteQuote:E.u.joinClasses([$.deleteQuote,E.u.style(W,Z),M.style(W,Z)]),deletePunctuation:E.u.joinClasses([$.deletePunctuation,E.u.style(W,K),M.style(W,K)]),deleteDoubleComma:E.u.joinClasses([$.deleteDoubleComma,E.u.style({textDecoration:"line-through"}),M.style({textDecoration:"line-through"})]),deleteApostrophe:E.u.joinClasses([$.deleteApostrophe,E.u.style(W,Q),M.style(W,Q)]),deleteLetter:E.u.joinClasses([$.deleteLetter,E.u.style(ee),M.style(ee)]),deletePunctuationBeforeLetter:E.u.joinClasses([$.deletePunctuationBeforeLetter,E.u.style({textDecoration:"line-through"}),M.style({textDecoration:"line-through"})]),itemOriginal:E.u.joinClasses([$.itemOriginal,E.u.style(z),M.style(z)]),itemOriginalStrikeThrough:E.u.joinClasses([$.itemOriginalStrikeThrough,E.u.style(V),M.style(V)]),itemOriginalContent:E.u.joinClasses([$.itemOriginalContent,E.u.style({color:C.Il.CoreNeutral90}),M.style({color:C.Il.CoreNeutral90})]),removeOrContainer:E.u.joinClasses([$.removeOrContainer,E.u.style(te),M.style(te)]),itemContext:E.u.joinClasses([$.itemContext,E.u.style(G)]),itemContextShifted:E.u.joinClasses([$.itemContextShifted,E.u.style(G,{marginRight:"2px"}),M.style(G,{marginRight:"2px"})]),or:E.u.joinClasses([$.or,E.u.style(ne),M.style(ne)]),arrowInsertsList:E.u.joinClasses([$.arrowInsertsList,E.u.style(re),M.style(re)]),columnList:E.u.joinClasses([$.columnList,E.u.style(re,{flexDirection:"column",alignItems:"flex-start",maxWidth:"100%"}),M.style(re)]),cozyArrowInsertsList:E.u.joinClasses([$.arrowInsertsList,E.u.style(re,{flex:2,flexBasis:"0%"}),M.style(re)]),inlineHeader:E.u.joinClasses([$.inlineHeader,E.u.style(ie),M.style(ie)]),shortenItBackground:E.u.joinClasses([$.shortenItBackground,E.u.style(H),M.style(H)]),minimalShortenItBackground:E.u.joinClasses([$.minimalShortenItBackground,E.u.style(H,{lineHeight:E.u.rem(1.3125)}),M.style(H,{lineHeight:E.u.rem(1.3125)})]),shortenItDelete:E.u.joinClasses([$.shortenItDelete,E.u.style(se),M.style(se)]),shortenItDeleteCollapsed:E.u.joinClasses([$.shortenItDeleteCollapsed,E.u.style(le),M.style(le)]),shortenItInsert:E.u.joinClasses([$.shortenItInsert]),shortenItInsertPunctuation:E.u.joinClasses([$.shortenItInsertPunctuation]),fullSentenceBackground:E.u.joinClasses([$.fullSentenceBackground,E.u.style(q),M.style(q)]),minimalFullSentenceBackground:E.u.joinClasses([$.minimalFullSentenceBackground,E.u.style(q,{lineHeight:E.u.rem(1.3125)}),M.style(q,{lineHeight:E.u.rem(1.3125)})]),fullSentenceDelete:E.u.joinClasses([$.fullSentenceDelete,E.u.style(oe),M.style(oe)]),fullSentenceDeleteCollapsed:E.u.joinClasses([$.fullSentenceDeleteCollapsed,E.u.style(ae),M.style(ae)]),fullSentenceHidden:E.u.joinClasses([$.fullSentenceHidden,E.u.style({display:"none"})]),fullSentenceListItem:E.u.joinClasses([$.fullSentenceListItem,E.u.style(...Y),M.style(...Y)]),fullSentenceBulletListItem:E.u.joinClasses([$.fullSentenceBulletListItem,E.u.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}}),M.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}})]),fullSentenceDashedListItem:E.u.joinClasses([$.fullSentenceDashedListItem,E.u.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}}),M.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}})]),fullSentenceOrderedListItem:E.u.joinClasses([$.fullSentenceOrderedListItem,E.u.style(...B(""),...Y),M.style(...B(""),...Y)]),fullSentenceOrderedListItemWithFormatting:E.u.joinClasses([$.fullSentenceOrderedListItemWithFormatting,E.u.style(...B("¶"),...Y),M.style(...B("¶"),...Y)]),fullSentenceBulletListItemWithFormatting:E.u.joinClasses([$.fullSentenceBulletListItemWithFormatting,E.u.style(...Y,de),M.style(...Y,de)]),fullSentenceDashedListItemWithFormatting:E.u.joinClasses([$.fullSentenceDashedListItemWithFormatting,E.u.style(...Y,ue),M.style(...Y,ue)]),fullSentenceInsert:E.u.joinClasses([$.fullSentenceInsert]),fullSentenceInsertPunctuation:E.u.joinClasses([$.fullSentenceInsertPunctuation]),diff:E.u.joinClasses([$.diff,E.u.style({fontWeight:"bolder"}),M.style({fontWeight:"bolder"})]),itemRemove:E.u.joinClasses([$.itemRemove,E.u.style(j,ce)]),oneGapInsert:E.u.joinClasses([$.oneGapInsert,E.u.style(j,J,pe),me]),oneGapInput:E.u.joinClasses([$.oneGapInput,E.u.style(he)]),smartPhrasesInsert:E.u.joinClasses([$.smartPhrasesInsert,E.u.style(fe),M.style(fe)]),smartPhrasesInsertContent:E.u.joinClasses([$.smartPhrasesInsertContent,E.u.style(ge),M.style(ge)]),smartPhrasesInsertContentText:E.u.joinClasses([$.smartPhrasesInsertContentText,E.u.style(ye),M.style(ye)]),drilldownInsertGroup:E.u.joinClasses([$.drilldownInsertGroup,E.u.style(ve)]),drilldownArrowButton:E.u.joinClasses([$.drilldownArrowButton,E.u.style(be)]),drilldownIcon:E.u.joinClasses([$.drilldownIcon,E.u.style(we)]),drilldownOriginalRow:E.u.joinClasses([$.drilldownOriginalRow,E.u.style(_e)]),drilldownBackButton:E.u.joinClasses([$.drilldownBackButton,E.u.style(Ce)]),collapsibleDelete:E.u.joinClasses([$.collapsibleDelete,E.u.style(Ie)]),shortenItCollapsibleDelete:E.u.joinClasses([$.shortenItCollapsibleDelete,E.u.style(ke)]),collapsibleInsert:E.u.joinClasses([$.collapsibleInsert,E.u.style(Ae)]),collapsiblePartContent:E.u.joinClasses([$.collapsiblePartContent,E.u.style(Se)])};var Te;function Oe(e,t){if(e.length<=4)return null;const n=function(e,t){if(e===t)return;const n=e.length,r=t.length;if(r>n){if(t.substr(0,n)===e)return{from:n,to:n,oldFragment:"",newFragment:t.substr(n)};if(t.substr(r-n)===e)return{from:0,to:0,oldFragment:"",newFragment:t.substr(0,r-n)}}if(r<n){if(e.substr(n-r)===t)return{from:0,to:n-r,oldFragment:e.substr(0,n-r),newFragment:""};if(e.substr(0,r)===t)return{from:r,to:n,oldFragment:e.substr(r),newFragment:""}}const i=r<n?r:n,o=function(e,t,n){let r=0;for(;e[r]===t[r]&&r<n;)r+=1;return r}(e,t,i);let a=function(e,t,n,r,i){let o=0;for(;e[n-o-1]===t[r-o-1]&&i-o>=0;)o+=1;return o}(e,t,n,r,i);o+a>n&&(a-=o+a-n);o+a>r&&(a-=o+a-r);return{from:o,to:n-a,oldFragment:e.substr(o,n-a-o),newFragment:t.substr(o,r-a-o)}}(e,t);if(void 0===n)return null;const{from:r,to:i,oldFragment:o,newFragment:a}=n,s=1===a.length&&r>0&&e[r-1]===a,l=1===o.length&&0===a.length&&t[r-1]===o;let c=r,u=a;return(s||l)&&(c=r-1),s&&(u=a+a),l&&(u=o),u.length>3?null:[e.substring(0,c),u,e.substring(i)]}E.u.cssRule(`.${$.fullSentenceInsert}, .${$.fullSentenceInsertPunctuation}`,{color:C.Il.CoreGreen60,fontWeight:600}),E.u.cssRule(`.${$.shortenItInsert}, .${$.shortenItInsertPunctuation}`,{color:C.Il.CoreBlue50,fontWeight:600}),E.u.cssRule(`.${$.fullSentenceDelete} + .${$.fullSentenceInsert}`,{marginLeft:E.u.rem(.25)}),E.u.cssRule(`.${$.shortenItDelete} + .${$.shortenItInsert}`,{marginLeft:E.u.rem(.25)}),E.u.cssRule(`.${$.fullSentenceOrderedListItemWithFormatting},\n.${$.fullSentenceDashedListItemWithFormatting},\n.${$.fullSentenceBulletListItemWithFormatting}`,{color:C.Il.CoreGreen60,fontWeight:600}),function(e){e.getClass=function(e,t){return null!==(n=t)&&1===n.length&&/["'”’]/.test(n)?e.deleteApostrophe:function(e){return null!==e&&null!==e.match(/["'”][.,;]/)}(t)?e.deleteQuote:function(e){const t=e.replace(/\s/g,"");return null!==e&&null!==t.match(/^["'”“.,;:!?\\\/…\-—()]+$/)}(t)?e.deletePunctuation:function(e){return null!==e&&null!==e.match(/,,/)}(t)?e.deleteDoubleComma:function(e){return null!==e&&1===e.length&&null!==e.match(/[a-z]/i)}(t)?e.deleteLetter:function(e){return null!==e&&e.match(/[.,;:!?\\\/-]\s*[a-z]/i)}(t)?e.deletePunctuationBeforeLetter:e.deleteAll;var n}}(Te||(Te={}));const Re=({transform:e,title:t,disabled:n,boldifier:i=Fe,classes:o=xe,onClick:a})=>r.createElement(b.zx,{animationMode:w.m.FromClickPoint,name:"apply-insert",onClick:a,title:t,disabled:n,className:o.itemInsert},e.map(((e,t)=>r.createElement(r.Fragment,{key:t},i(e,xe.diff))))),Ne=({transform:e,theme:t=xe,showOnboarding:n,onClick:i,onExpand:o})=>{const a=r.useContext(m.m.Context),l=e.label.map(((e,t)=>r.createElement(r.Fragment,{key:t},e.text))),c=r.createElement(b.zx,Object.assign({animationMode:w.m.FromClickPoint,name:"expand-insert",onClick:o,title:a.synfony.drilldownTooltip(l)},(0,s.Sh)(t.itemInsert,t.drilldownArrowButton)),r.createElement(_.JO.Arrow,{direction:_.n4.right,className:t.drilldownIcon}));return r.createElement("div",{className:t.drilldownInsertGroup},r.createElement(b.zx,{animationMode:w.m.FromClickPoint,name:"apply-insert",onClick:i,title:a.synfony.applyTooltip,className:t.itemInsert},l),Boolean(e.subLabels.length)&&(n?r.createElement(et,null,c):c))},Le=({transform:e,title:t,classes:n=xe,onClick:i})=>r.createElement(b.zx,Object.assign({animationMode:w.m.FromClickPoint,name:"apply-remove"},{onClick:i,title:t,className:n.itemRemove}),e.map(((e,t)=>r.createElement($e,{key:t,element:e})))),Pe=({transform:e,title:t,classes:n=xe,onClick:i,children:o})=>r.createElement("div",{className:n.removeOrContainer},e.map(((o,a)=>"text"===o.type?r.createElement("span",{key:a,className:a===e.length-1?n.itemContextShifted:n.itemContext},o.text):r.createElement(b.zx,Object.assign({key:a,animationMode:w.m.FromClickPoint,name:"apply-remove-or"},{onClick:i,title:t,className:n.itemRemove}),r.createElement($e,{element:o})))),o),Me=()=>r.createElement("span",{className:xe.or},r.useContext(m.m.Context).card.or),De=({transform:e,boldifier:t=Fe,strikeThrough:n=!0})=>r.createElement("div",Object.assign({},(0,s.Sh)(xe.itemOriginal,n&&xe.itemOriginalStrikeThrough)),r.createElement("span",{className:xe.itemOriginalContent},e.map(((e,n)=>r.createElement(r.Fragment,{key:n},t(e,xe.diff)))))),Fe=d.pick("text"),Be=({text:e,type:t},n)=>"text"===t?e:r.createElement("span",{className:n},e);function Ue(e,t){return n=>r.createElement(Ze,{index:t,oldText:e,newText:n.text})}const $e=({element:e,strikeClass:t})=>"delete"===e.type?r.createElement("span",Object.assign({},(0,s.Sh)(Te.getClass(xe,e.text),t)),e.text):r.createElement(r.Fragment,null,e.text);const je=/^\W/,We=e=>{switch(e.type){case g.GP.Delete:return xe.fullSentenceDelete;case g.GP.Insert:return je.test(e.text)?xe.fullSentenceInsertPunctuation:xe.fullSentenceInsert;case g.GP.Text:case g.GP.List:return"";default:return(0,p.vE)(e)}},Ge=e=>{switch(e.type){case g.GP.Delete:return xe.fullSentenceHidden;case g.GP.List:case g.GP.Text:case g.GP.Insert:return"";default:return(0,p.vE)(e)}},qe=e=>{switch(e.type){case g.GP.Delete:return xe.fullSentenceHidden;case g.GP.List:return"bullet"===e.kind?xe.fullSentenceBulletListItemWithFormatting:"dashed"===e.kind?xe.fullSentenceDashedListItemWithFormatting:xe.fullSentenceOrderedListItemWithFormatting;case g.GP.Insert:case g.GP.Text:return"";default:return(0,p.vE)(e)}},He=e=>{switch(e.type){case g.GP.Delete:return xe.fullSentenceHidden;case g.GP.List:return"bullet"===e.kind?xe.fullSentenceBulletListItem:"dashed"===e.kind?xe.fullSentenceDashedListItem:xe.fullSentenceOrderedListItem;case g.GP.Insert:case g.GP.Text:return"";default:return(0,p.vE)(e)}},ze=({p:e})=>{const t=l.h.create(e.shouldBeCollapsed);return r.createElement(c.F.Fragment,null,t.view((0,h.RN)(r.createElement("span",{className:e.type===g.GP.Delete?xe.collapsibleDelete:xe.collapsibleInsert,onClick:()=>t.set(!1)},r.createElement("span",{className:xe.collapsiblePartContent},"…")),r.createElement(r.Fragment,null,e.text))))},Ve=({p:e,allEditsCollapsed:t})=>{const n=null!=t?t:l.h.create(!!e.shouldBeCollapsed);return r.createElement(c.F.Fragment,null,n.pipe(u.w((t=>{const n=l.h.create(e.shouldBeCollapsed);return n.view((0,o.flow)((e=>e&&t),(0,h.RN)(r.createElement("span",{className:e.type===g.GP.Delete?xe.shortenItCollapsibleDelete:xe.collapsibleInsert,onClick:()=>n.set(!1)},r.createElement("span",{className:xe.collapsiblePartContent},"…")),r.createElement(r.Fragment,null,e.text))))}))))},Ye=(e,t)=>{if(!e.shouldBeCollapsed)return e.text;switch(e.type){case g.GP.Insert:case g.GP.Delete:return t?r.createElement(ze,{p:e}):e.text;case g.GP.Text:return r.createElement("span",null," … ");default:(0,p.vE)(e)}},Xe=(e,t)=>{if(!e.shouldBeCollapsed)return e.text;switch(e.type){case g.GP.Insert:case g.GP.Delete:return r.createElement(Ve,{p:e,allEditsCollapsed:t});case g.GP.Text:return r.createElement("span",null," … ");default:(0,p.vE)(e)}},Je=e=>(0,a.pipe)((t=>Object.assign({children:Xe(t,e)},(0,s.Sh)((e=>{switch(e.type){case g.GP.Delete:return xe.shortenItDelete;case g.GP.Insert:return je.test(e.text)?xe.shortenItInsertPunctuation:xe.shortenItInsert;case g.GP.Text:case g.GP.List:return"";default:return(0,p.vE)(e)}})(t)))),i.map),Ze=({index:e=0,oldText:t,newText:n})=>{const i=Oe(t,n);return r.createElement(r.Fragment,null,i?[i[0],r.createElement("span",{key:e,className:xe.diff},i[1]),i[2]]:n)},Ke=e=>{return r.createElement(A.XY,{className:(0,a.pipe)(e.layoutDensity,y.j.Density.matchOrDefault(y.j.Density.minimal)((()=>xe.minimalFullSentenceBackground),(()=>xe.fullSentenceBackground)))},(0,a.pipe)(e.replacements.kind===g._k.WithFormatting?(t=e.showDiff,(0,a.pipe)(t,(0,h.RN)(qe,He),(e=>n=>n.type===g.GP.List?Object.assign(Object.assign({},(0,s.Sh)(e(n))),{"data-indent":n.indent}):Object.assign({children:Ye(n,t)},(0,s.Sh)(e(n)))),i.map))(e.replacements.labels):(e=>(0,a.pipe)(e,(0,h.RN)(We,Ge),(t=>n=>Object.assign({children:Ye(n,e)},(0,s.Sh)(t(n)))),i.map))(e.showDiff)(e.replacements.labels),(0,i.mapWithIndex)(((e,t)=>r.createElement("span",Object.assign({key:e},t))))));var t},Qe=({replacements:e,layoutDensity:t,selection:n,onClick:i,onDive:o,onBack:a})=>{const s=r.useContext(m.m.Context),{activeLabels:l,original:c}=g.ey.getSelectedItems(e,n);return r.createElement(A.Xk,{className:xe.list},r.createElement("div",{className:xe.drilldownOriginalRow},n.length>0&&r.createElement(b.zx.Ghost,{name:"go-back",title:s.synfony.back,onClick:a,className:xe.drilldownBackButton},r.createElement(_.JO.Arrow,{direction:_.n4.left})),r.createElement(De,{transform:c,strikeThrough:!n||0===n.length})),r.createElement("div",{className:t===y.j.Density.cozy?xe.cozyArrowInsertsList:xe.arrowInsertsList},l.map(((e,t)=>r.createElement(Ne,{key:t,transform:e,showOnboarding:2===t,onClick:i(e.alternativeId),onExpand:()=>o(t,e.alternativeId)})))))},et=e=>{const t=r.useContext(m.m.Context);return r.createElement(v.TG,{alignment:"topLeft",eventType:"onclick",stepId:f.X.StepId.Synfony,message:t.synfony.onboardingTooltip,dotPosition:{kind:"dotAtPosition",position:v.E2.rightCenter}},e.children)},tt=e=>{const t=r.useContext(m.m.Context).card,n=""===e.gapValue;return r.createElement(r.Fragment,null,r.createElement(R,{name:"input",placeholder:t.gapCard.placeholder,value:e.gapValue,onChange:t=>e.onChange(t.target.value),onKeyPress:e=>{"Enter"===e.key&&e.currentTarget.nextElementSibling&&e.currentTarget.nextElementSibling.click()},className:xe.oneGapInput}),r.createElement(Re,{title:n?"":t.todoAction(e.replacements.tooltipText),boldifier:Be,onClick:e.onApply,classes:{itemInsert:xe.oneGapInsert,inlineHeader:xe.inlineHeader},disabled:n,transform:nt(e.replacements.labels.left,e.gapValue,e.replacements.labels.right)}))},nt=(e,t,n)=>[...e,{type:g.GP.Insert,text:rt(e)+(t||"…")+rt(n)},...n],rt=e=>e.length?" ":"",it=({replacementsLabels:e,layoutDensity:t,onClick:n})=>{const i=r.useContext(m.m.Context).card.todoAction(e.tooltipText);switch(e.type){case g.b$.Type.InsertList:return r.createElement(A.Xk,{className:xe.list},e.labels.map(((e,t)=>r.createElement(Re,Object.assign({},{key:t,title:i,onClick:n(t)},{transform:e})))));case g.b$.Type.DeleteList:return r.createElement(A.Xk,{className:xe.list},e.labels.map(((e,t)=>r.createElement(Le,Object.assign({},{key:t,title:i,onClick:n(t)},{transform:e})))));case g.b$.Type.Arrow:return function({labels:e,original:t,onlyReplacements:n},i,o,a){const s=1===t.length,[l]=s?[t[0].text,e[0][0].text].map(Ue):[Be,Be];return r.createElement(A.Xk,{className:xe.list},!n&&r.createElement(De,{transform:t}),r.createElement("div",{className:o===y.j.Density.cozy?xe.cozyArrowInsertsList:e.length>2?xe.columnList:xe.arrowInsertsList},e.map(((e,t)=>r.createElement(Re,Object.assign({},{key:t,title:i,onClick:a(t)},{transform:e,boldifier:l}))))))}(e,i,t,n);case g.b$.Type.InsertOr:return r.createElement(A.Xk,{className:xe.list},r.createElement(Re,Object.assign({transform:e.labels[0]},{title:i,onClick:n(0)},{boldifier:Be})),r.createElement(Me,null),r.createElement(Re,Object.assign({transform:e.labels[1]},{title:i,onClick:n(1)},{boldifier:Be})));case g.b$.Type.DeleteOr:return r.createElement(A.Xk,{className:xe.list},e.labels.map(((t,o)=>r.createElement(Pe,Object.assign({},{key:o,title:i,onClick:n(o)},{transform:t}),o===e.labels.length-2&&r.createElement(Me,null)))));case g.b$.Type.FullSentence:case g.b$.Type.OneGap:case g.b$.Type.Drilldown:case g.b$.Type.ShortenIt:return null;default:return(0,p.vE)(e)}},ot=({replacementsLabels:e,onClick:t})=>{const n=r.useContext(m.m.Context).card.todoAction(e.tooltipText);return r.createElement(r.Fragment,null,e.labels.map(((e,i)=>r.createElement(b.zx,{key:i,animationMode:w.m.FromClickPoint,name:"apply-smart-phrases-insert",onClick:t(i),title:n,className:xe.smartPhrasesInsert},r.createElement("div",{className:xe.smartPhrasesInsertContent},r.createElement("div",{className:xe.smartPhrasesInsertContentText},e.map(((e,t)=>r.createElement(r.Fragment,{key:t},Fe(e,xe.diff))))),r.createElement(_.JO.SmartPhrases.AddPhraseCirclePlus,null))))))},at=e=>r.createElement(A.XY,{className:(0,a.pipe)(e.layoutDensity,y.j.Density.matchOrDefault(y.j.Density.minimal)((()=>xe.minimalShortenItBackground),(()=>xe.shortenItBackground)))},(0,a.pipe)(Je(e.collapsed)(e.label.replacement),(0,i.mapWithIndex)(((e,t)=>r.createElement("span",Object.assign({key:e},t))))))},19025:(e,t,n)=>{n.d(t,{f:()=>c,G:()=>u});var r=n(40327),i=n(90351),o=n(63969),a=n(40219),s=n(4890),l=n(50224);const c=e=>({container:(0,r.pipe)(e,s.j.Density.matchOrDefault(s.j.Density.cozy)((()=>m.cozyCardContainer),(()=>m.compactCardContainer)))}),u=e=>Object.assign(Object.assign({},c(e.layoutDensity)),{wrapper:(0,r.pipe)(e.layoutDensity,s.j.Density.matchOrDefault(s.j.Density.minimal)((()=>m.minimalCardWrapper),(()=>{})))}),d={padding:`${o.u.rem(.75)} ${o.u.rem(.5)} ${o.u.rem(.5)} ${o.u.rem(1)}`},p={margin:`${o.u.rem(1)} 0 ${o.u.rem(1.5)}`,borderRadius:o.u.rem(a.Jr),background:i.Il.CoreNeutral0,boxShadow:`0 ${o.u.rem(.625)} ${o.u.rem(a.mJ)} 0 rgba(198, 203, 222, .45)`},h={boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",borderRadius:o.u.rem(a.Jr),background:i.Il.CoreNeutral0},m=Object.assign(Object.assign({},o.u.stylesheet({minimalCardWrapper:[d],compactCardContainer:[h]})),{cozyCardContainer:o.u.joinClasses([l.g.cozyCardContainerSelector,o.u.style(p)])})},18031:(e,t,n)=>{n.d(t,{A:()=>le});var r,i=n(27378),o=n(57050),a=n(40327),s=n(5739),l=n(26027),c=n(77610),u=n(4890),d=n(28043),p=n(77176),h=n(50225),m=n(38983),f=n(8125),g=n(5114),y=n(81531),v=n(30763),b=n(15646),w=n(7046),_=n(12187),C=n(90351),E=n(63969),S=n(24588);!function(e){e.Item=({className:e,children:t,onChange:n,checked:r,tabIndex:o,id:a})=>i.createElement(s.F.label,Object.assign({},(0,_.Sh)(x.radio,e)),r.view((e=>i.createElement(i.Fragment,{key:`radio-${a}`},i.createElement("input",{onChange:n,tabIndex:o||-1,type:"radio",checked:e,className:x.radioInputHidden}),i.createElement("span",{className:k})))),t),e.Group=({items:t,selectedItemIndex:n,itemWrapperClassName:r,onChange:o})=>i.createElement(s.F.Fragment,null,t.map(((t,a)=>i.createElement(e.Item,{id:a,key:a,onChange:()=>{n.set(a),o&&o(a)},checked:n.view((e=>a===e)),className:r},t))))}(r||(r={}));const I="radioInput",k=E.u.joinClasses([I,E.u.style({display:"inline-block",boxSizing:"border-box",minWidth:E.u.rem(1),width:E.u.rem(1),height:E.u.rem(1),border:`${E.u.rem(.125)} solid ${S.FW}`,borderRadius:E.u.percent(50),backgroundColor:C.Il.CoreNeutral0,content:"' '"})]),A={outline:"none",appearance:"none",$nest:{"&:checked + .radioInput":{border:`${E.u.rem(.25)} solid ${C.Il.CoreBlue50}`}}},x=E.u.stylesheet({radioInputHidden:[A],radio:[{display:"inline-flex",cursor:"default",alignItems:"center"}]});var T=n(3656),O=n(28706),R=n(1883),N=n(55636);const L=E.u.style({margin:`${E.u.rem(1)} 0`}),P=E.u.style({marginLeft:E.u.rem(.5),lineHeight:E.u.rem(1.3125),fontSize:E.u.rem(.875),color:C.Il.CoreNeutral90}),M=E.u.style({marginTop:"0 !important",$nest:{"&:not(:last-child)":{marginBottom:E.u.rem(1)}}}),D=E.u.style({marginTop:"0 !important",marginLeft:E.u.rem(1)}),F={color:C.Il.CoreRed60,fontSize:E.u.rem(.75),lineHeight:E.u.rem(1.125)},B=E.u.style(F),U=E.u.style(F,{visibility:"hidden"});var $=n(19025);const j=({card:e,actions:t,hideLabel:n})=>{const o=i.useContext(v.m.Context).card.feedbackForm,l=m.h.create(void 0),c=m.h.create(!1);return(0,a.pipe)(e.visualState.transition,g.fromPredicate((e=>"feedback_form"===e.type)),g.fold((()=>(y.Monitoring.Logging.getLogger("FeedbackForm").error("Trying to render feedback form from non-feedback state",e),null)),(({options:a})=>i.createElement(R.Z,{onFocus:()=>t.next({type:b.lY.Type.alertIgnoreFeedbackFormShow,alertId:e.activeAlert.id}),theme:(0,$.G)(e.renderOptions),visualState:e.visualState,body:i.createElement(i.Fragment,null,n?null:i.createElement(N.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(T.H4,{className:L},o.dismissReason),i.createElement(r.Group,{itemWrapperClassName:M,selectedItemIndex:l,items:a.map((e=>i.createElement("div",{className:P},e.text))),onChange:()=>c.set(!1)})),mainActions:i.createElement(i.Fragment,null),footer:i.createElement(i.Fragment,null,i.createElement(s.F.div,{"aria-hidden":c,className:c.view((0,f.RN)(B,U))},o.error),i.createElement("div",null,i.createElement(w.zx.Primary,{name:"submitCardFeedbackForm",onClick:()=>{const n=l.get();return void 0===n?c.set(!0):O.hz((()=>t.next({type:b.lY.Type.alertIgnoreFormSubmit,alertId:e.activeAlert.id,reason:a[n].key})))()}},o.submit),i.createElement(w.zx.Ghost,{className:D,name:"skipCardFeedbackForm",onClick:O.hz((()=>t.next({type:b.lY.Type.alertIgnoreFormSubmit,alertId:e.activeAlert.id,reason:"skipped"})))},o.skip))),subActions:i.createElement(i.Fragment,null)}))))};var W=n(25819),G=n(19157),q=n(94793),H=n(85255);const z=E.u.style({marginRight:E.u.rem(-.5),marginTop:E.u.rem(.5)}),V=E.u.style({padding:`0 ${E.u.rem(1.625)} !important`,marginRight:E.u.rem(.125)}),Y=E.u.style({marginRight:0}),X=({card:e,actions:t})=>{const n=i.useRef(m.h.create(!1));H.P.useEffectOnWillUnmount((()=>{n.current.get()||(0,a.pipe)(e.muteCategory,g.map((n=>t.next({type:b.lY.Type.mutedAlertSuccessDismissed,id:e.id,categoryId:n.id}))))}));const r=i.useContext(v.m.Context).card.mutedAlertCard;return i.createElement(R.Z,{onFocus:()=>t.next({type:b.lY.Type.mutedAlertSuccessShow}),theme:(0,$.G)(e.renderOptions),visualState:e.visualState,body:i.createElement(i.Fragment,null,i.createElement(N.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(T.XY,null,r.description((0,a.pipe)(e.muteCategory,g.fold((()=>""),(e=>e.description)))))),mainActions:i.createElement(i.Fragment,null),footer:i.createElement("div",{className:z},i.createElement(w.zx.Primary,{name:"gotIt",className:V,onClick:()=>O.hz((()=>t.next({type:b.lY.Type.switchToNext})))()},r.successButtonLabel),i.createElement(w.zx.Ghost,{name:"turnBackOn",onClick:O.hz((()=>{n.current.set(!0),(0,a.pipe)(e.muteCategory,g.map((n=>t.next({type:b.lY.Type.undoMuteAlertCategory,categoryId:n.id,id:e.id}))))}))},r.undoButtonLabel,i.createElement(q.JO.Undo,{color:C.Il.CoreBlue50,className:Y}))),subActions:i.createElement(w.zx.Tertiary,{name:"manageOptionalSuggestions",onClick:()=>t.next({type:b.lY.Type.mutedAlertSuggestionManagementClick})},r.settingsLabel,i.createElement(q.JO.OuterLink,null))})};var J=n(66346),Z=n(2834);const K=({onLeftClick:e,onRightClick:t,currentMatch:n,totalMatch:r,replaceOneMatch:o=!0,disableOnEnd:a=!0,style:s})=>{const l=i.useContext(v.m.Context).card.matchesNavigation;return 0===r?null:1===r&&o?i.createElement("div",Object.assign({},(0,_.Sh)(te.matchesRow,s.matchesRow||!1)),i.createElement(T.ck,Object.assign({},(0,_.Sh)(te.matchesCount,s.matchesCount||!1)),l.numberOfMatches(r))):i.createElement("div",Object.assign({},(0,_.Sh)(te.matchesRow,s.matchesRow||!1)),i.createElement(w.zx.Ghost,{disabled:a&&0===n,name:"left",title:l.prev,onClick:e},i.createElement(q.JO.Arrow,Object.assign({},(0,_.Sh)(te.leftButtonIcon,s.leftButtonIcon||!1)))),i.createElement(T.ck,Object.assign({},(0,_.Sh)(te.matchesCount,s.matchesCount||!1)),l.currentMatchPosition(n+1,r)),i.createElement(w.zx.Ghost,{disabled:a&&n===r-1,name:"right",title:l.next,onClick:t},i.createElement(q.JO.Arrow,Object.assign({},(0,_.Sh)(te.rightButtonIcon,s.rightButtonIcon||!1)))))},Q={display:"inline-block",verticalAlign:"middle",$nest:{"& > * + *":{marginLeft:E.u.rem(.25)}}},ee={textTransform:"uppercase",letterSpacing:E.u.px(.8),lineHeight:E.u.rem(2)},te=E.u.stylesheet({matchesRow:[Q],leftButtonIcon:[{transform:"rotate(90deg)"}],rightButtonIcon:[{transform:"rotate(270deg)"}],matchesCount:[ee]});function ne(e,t,n){const{activeAlert:r,activeHighlightIndex:i}=t,o=r.getHighlightRanges(),a=(i+("left"===e?o.length-1:1))%o.length;n.next({type:b.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"sameAlert",card:t,highlightIndex:a},direction:e})}const re=({card:e,actions:t,selectedLabelIndex:n,isChecking:r})=>{const o=i.useContext(v.m.Context),a=m.h.create(!1);return H.P.useSubscriptionTo(r.pipe(Z.b((e=>a.set(e))))),i.createElement(N.Nm,{applyMessage:e.activeAlert.todoAction,checkingMessage:o.card.checking,title:o.card.todoAction(e.activeAlert.todoAction),checkingInProgress:a,onClick:()=>{t.next({type:b.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n.get(),cardType:b.lY.getCardType(e)})}})},ie=({card:e,actions:t})=>i.createElement(K,{onLeftClick:()=>ne("left",e,t),onRightClick:()=>ne("right",e,t),currentMatch:e.activeHighlightIndex,totalMatch:e.activeAlert.getHighlightRanges().length,disableOnEnd:!1,style:{}});var oe=n(26662);const ae=({activeAlert:e,selectedLabelIndex:t,actions:n})=>{const o=i.useContext(v.m.Context);return i.createElement("div",{className:oe.V.optionsContainer},e.labels.map(((e,a)=>i.createElement(i.Fragment,{key:`option-${a}`},i.createElement(r.Item,{className:oe.V.optionLabel,onChange:()=>{t.set(a),n.next({type:b.lY.Type.alternativeReplacementRadioButtonClick,index:a})},checked:t.view((e=>e===a))},i.createElement(T.XY,{className:oe.V.optionRadio},e.label)),i.createElement(T.x4,{className:oe.V.optionExample},e.replacementTexts.join("; ")),i.createElement(T.x4,{className:oe.V.optionSecondaryAttribute},o.card.matchesNavigation.numberOfMatches(e.matches))))))},se=({card:e,actions:t,isChecking:n,isCheckingGlobal:r})=>{const o=m.h.create(0);return i.createElement(R.Z,{visualState:e.visualState,onFocus:()=>t.next({type:b.lY.Type.alertCardShow,cardType:b.lY.getCardType(e),alertId:e.activeAlert.id}),theme:Object.assign({wrapper:oe.V.superWrapper,content:r.pipe(p.U((0,f.RN)(oe.V.loadingWrapperInvisible,oe.V.loadingWrapper)))},(0,$.f)(e.renderOptions.layoutDensity)),extra:i.createElement(N.o,{isChecking:r}),body:i.createElement(i.Fragment,null,i.createElement(N.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(N.Ot,{alert:e.activeAlert}),i.createElement(N.ko,{card:e,isChecking:n}),i.createElement(N.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}),i.createElement(ae,{activeAlert:e.activeAlert,selectedLabelIndex:o,actions:t})),mainActions:i.createElement(N.Kg,{card:e,feedbackActions:t}),footer:i.createElement(i.Fragment,null,i.createElement(N.lJ,{card:e}),i.createElement(re,{selectedLabelIndex:o,card:e,actions:t,isChecking:n})),navigation:i.createElement(ie,{card:e,actions:t}),subActions:i.createElement(J.Vh,{actions:t,card:e,mode:"mini"})})};var le;!function(e){e.Full=({card:e,actions:t})=>{const{isChecking:n,isCheckingGlobal:r,transform:a}=l.X.useCardStates(e),c=e=>i.createElement(W.J,{card:e,actions:t,isChecking:n,transform:a,isCheckingGlobal:r});return i.createElement(s.F.Fragment,null,e.pipe(d.x(((e,t)=>e.hashCode()===t.hashCode())),p.U((0,o.flow)(l.X.match({super:e=>i.createElement(se,{card:e,actions:t,isChecking:n,isCheckingGlobal:r}),smartPhrases:c,takeaway:c,sentenceLevelBrandTones:c,synfony:c,shortenIt:c,default:c}),l.X.foldCard))))},e.Mini=({card:t,actions:n})=>i.createElement(s.F.Fragment,null,t.pipe(p.U((t=>u.j.Density.matchL((()=>i.createElement(e.MiniSingleLined,{card:t,actions:n})),(()=>i.createElement(e.MiniTwoLined,{card:t,actions:n})),(()=>i.createElement(e.MiniTwoLined,{card:t,actions:n})))(t.renderOptions.layoutDensity))))),e.MiniSingleLined=({card:e,actions:t})=>{function n(e){return i.createElement(G.P.Standard,{card:e,actions:t})}return(0,a.pipe)(e,l.X.match({smartPhrases:n,super:n,takeaway:n,sentenceLevelBrandTones:n,synfony:n,shortenIt:n,default:n}),l.X.foldCard)},e.MiniTwoLined=({card:e,actions:t})=>{function n(e){return i.createElement(G.P.TwoLined,{card:e,actions:t})}return(0,a.pipe)(e,l.X.match({smartPhrases:n,super:n,takeaway:n,sentenceLevelBrandTones:n,synfony:n,shortenIt:n,default:n}),l.X.foldCard)},e.Success=h.b.Success,e.FeedbackForm=({cardData:e,actions:t})=>{function n(e){return i.createElement(j,{card:e,actions:t})}return(0,a.pipe)(e,c.C.match({smartPhrases:function(e){return i.createElement(j,{card:e,actions:t,hideLabel:!0})},takeaway:n,default:n,sentenceLevelBrandTones:n,synfony:n,super:n,shortenIt:n}),l.X.foldCard)},e.MutedAlert=({cardData:e,actions:t})=>{function n(e){return i.createElement(X,{card:e,actions:t})}return(0,a.pipe)(e,c.C.match({smartPhrases:n,takeaway:n,default:n,sentenceLevelBrandTones:n,synfony:n,super:n,shortenIt:n}),l.X.foldCard)}}(le||(le={}))},26662:(e,t,n)=>{n.d(t,{V:()=>v});var r=n(90351),i=n(63969),o=n(40219);const a=(e,t,n,o,a,s)=>Object.assign({position:"absolute",right:e,left:e,zIndex:t,display:"block",height:i.u.rem(2),borderRadius:a,backgroundColor:r.Il.CoreNeutral0,boxShadow:o,content:"' '"},s&&"bottom"!==s?{top:n}:{bottom:n}),s=`0 ${i.u.rem(.25)} ${i.u.rem(1.625)} 0 rgba(198, 203, 222, .25)`,l={marginRight:i.u.rem(1),flexShrink:0,maxWidth:i.u.percent(100)},c={padding:`0 ${i.u.rem(1)}`},u={padding:`0 ${i.u.rem(1.9)} 0 ${i.u.rem(1)}`},d={position:"absolute",top:i.u.rem(.27),right:i.u.rem(.5)},p={display:"grid",width:i.u.percent(100),gridGap:i.u.rem(.5),gridTemplateColumns:"fit-content(60%) auto min-content"},h={minWidth:i.u.rem(7)},m={marginLeft:i.u.rem(.5)},f={color:r.Il.CoreNeutral90,whiteSpace:"nowrap",fontWeight:300,lineHeight:i.u.rem(1.5)},g={$nest:{"&:before":a(i.u.rem(.5),-10,i.u.rem(-.5),s,i.u.rem(o.Jr)),"&:after":a(i.u.rem(1),-20,i.u.rem(-1),s,i.u.rem(o.Jr))}},y={transition:"opacity .2s"},v=i.u.prefixedStylesheet("super",{updateAllBtnCommon:[l],updateAllBtn:[l,c],updateAllBtnLoading:[l,u],updateBtnSpinner:[d],optionsContainer:[p],optionLabel:[h],optionRadio:[m],optionSecondaryAttribute:[f],optionExample:[f,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:"italic"}],superWrapper:[g],loadingWrapper:[y],loadingWrapperInvisible:[y,{opacity:0,pointerEvents:"none"}]})},76720:(e,t,n)=>{n.d(t,{o:()=>k});var r=n(27378),i=n(40327),o=n(83078),a=n(5114),s=n(63969),l=n(30763),c=n(40018),u=n(15646),d=n(4890),p=n(7046),h=n(28706),m=n(66346),f=n(1883),g=n(55636),y=n(19025),v=n(57050),b=n(26027),w=n(94793);const _=({card:e,actions:t,hasHeader:n})=>{const s=r.useContext(l.m.Context),u=a.isNone(e.activeAlert.takeawayFeedback)?s.card.takeaway.defaultTitle:e.activeAlert.title,p=a.fromNullable(e.activeAlert.highlightTexts[0]),h=(0,i.pipe)(e.activeAlert,a.fromPredicate((e=>!e.takeawayIsLikelyToBeRead&&(o.contains(c.TO.correctlyDetected)(e.takeawayFeedback)||o.contains(c.TO.correctlyDetectedAndDone)(e.takeawayFeedback)))),a.map((()=>e.meta.explanation)));return r.createElement(r.Fragment,null,!n&&(0,i.pipe)(e.renderOptions.layoutDensity,d.j.Density.matchOrDefault(d.j.Density.minimal)((()=>r.createElement(g.__,{alert:e.activeAlert,options:e.renderOptions},r.createElement(g.jg,{text:b.X.miniTitle(e,s)}))),(()=>r.createElement(r.Fragment,null,r.createElement(g.__,{alert:e.activeAlert,options:e.renderOptions}),r.createElement(g.Dx,{text:u}))))),(0,i.pipe)(p,a.fold(v.constNull,(t=>r.createElement(g.hl,{text:t,layoutDensity:e.renderOptions.layoutDensity})))),(0,i.pipe)(h,a.fold(v.constNull,(n=>r.createElement(g.dk,{description:n,actions:t,layoutDensity:e.renderOptions.layoutDensity})))))},C=({card:e,feedbackActions:t})=>r.createElement(r.Fragment,null,r.createElement(p.zx.Ghost,{name:"takeaway-like",onClick:h.hz((()=>{var n;return t.next({type:u.lY.Type.takeawayCorrectlyDetected,id:e.id,alertId:e.activeAlert.id,takeawayText:null!==(n=e.activeAlert.highlightTexts[0])&&void 0!==n?n:""})}))},r.createElement(w.JO.YesCircle,null)," Yes"),r.createElement(p.zx.Ghost,{name:"takeaway-dislike",onClick:h.hz((()=>t.next({type:u.lY.Type.takeawayIncorrectlyDetected,id:e.id,alertId:e.activeAlert.id})))},r.createElement(w.JO.NoCircle,null)," No")),E=({card:e,feedbackActions:t})=>{const n=r.useContext(l.m.Context);return r.createElement(r.Fragment,null,r.createElement(p.zx.Ghost,{name:"resolve",title:n.resolve,onClick:h.hz((()=>t.next({type:u.lY.Type.takeawayResolve,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},r.createElement(w.JO.YesCircle,null)),r.createElement(p.zx.Ghost,{name:"ignore",title:n.dismiss,onClick:h.hz((()=>t.next({type:u.lY.Type.takeawayDismiss,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},r.createElement(w.JO.Ignore,null)))};function S(e,t){const n=o.contains(c.TO.correctlyDetected)(e.activeAlert.takeawayFeedback);return e.activeAlert.takeawayIsLikelyToBeRead&&n&&t}function I(e){return!a.isNone(e.takeawayFeedback)&&!(!a.isSome(e.examples)&&!a.isSome(e.details))}var k;!function(e){e.Full=({card:e,actions:t,cardHeader:n,isChecklistItem:s,isChecklistBundleItem:v})=>{const b=r.useContext(l.m.Context);return r.createElement(f.Z,{visualState:e.visualState,onFocus:()=>t.next({type:u.lY.Type.alertCardShow,cardType:u.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(A=e.renderOptions,x=!!n,Object.assign(Object.assign({},(0,y.f)(A.layoutDensity)),{wrapper:(0,i.pipe)(A.layoutDensity,d.j.Density.matchOrDefault(d.j.Density.minimal)((()=>x?T.minimalCardWrapperWithHeader:T.minimalCardWrapper),(()=>{})))})),body:r.createElement(_,{card:e,actions:t,hasHeader:!!n}),mainActions:a.isNone(e.activeAlert.takeawayFeedback)?r.createElement(C,{card:e,feedbackActions:t}):S(e,!!v)?r.createElement(p.zx.Ghost,{name:"takeaway-correctly-detected-and-done",onClick:h.hz((()=>t.next({type:u.lY.Type.takeawayCorrectlyDetectedAndDone,id:e.id,alertId:e.activeAlert.id})))},b.done):(w=e,k=!!s&&!v,(o.contains(c.TO.correctlyDetected)(w.activeAlert.takeawayFeedback)||o.contains(c.TO.correctlyDetectedAndDone)(w.activeAlert.takeawayFeedback))&&w.activeAlert.takeawayIsLikelyToBeRead&&k?null:r.createElement(E,{card:e,feedbackActions:t})),header:n,footer:I(e.activeAlert)?r.createElement(g.lJ,{card:e}):null,subActions:I(e.activeAlert)?r.createElement(m.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):null});var w,k,A,x}}(k||(k={}));const A={padding:`${s.u.rem(.75)} ${s.u.rem(.5)} ${s.u.rem(.5)} ${s.u.rem(1)}`},x={padding:`0 ${s.u.rem(.5)} ${s.u.rem(.5)} ${s.u.rem(1)}`},T=s.u.stylesheet({minimalCardWrapper:[A],minimalCardWrapperWithHeader:[x]})},18955:(e,t,n)=>{n.d(t,{d:()=>A});var r=n(27378),i=n(5739),o=n(38983),a=n(5114),s=n(19962),l=n(81531),c=n(46680),u=n(74238),d=n(45586),p=n(77176),h=n(24209),m=n(18625),f=n(66310),g=n(40151),y=n(85089),v=n(2834),b=n(49708),w=n(93508),_=n(17343),C=n(98403),E=n(76974),S=n(19751),I=n(67434),k=n(57091);class A extends r.Component{constructor(){super(...arguments),this._log=l.Monitoring.Logging.getLogger("CardsListConnectorView",c.LogLevel.DEBUG),this._subs=new d.w.Keeper}componentDidMount(){this.props.isMaster&&this._setMaster()}componentDidUpdate(e){const t=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:t}),this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",t),this.forceUpdate((()=>{this._setMaster(),this._log.trace("view force update complete",t)}))):(this._log.trace("set master view",t),this._setMaster()):(this._log.trace("release master view",t),this._clearSubs())}componentWillUnmount(){this._clearSubs()}render(){const{className:e,children:t,height:n}=this.props;return r.createElement(i.F.div,{"data-purpose":"card-list-connector",style:n.pipe(p.U((e=>({height:e})))),className:e},t)}_setMaster(){this._setSubs()}_setSubs(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())}_clearSubs(){this._subs.dispose()}}!function(e){let t;!function(e){e.create=()=>o.h.create({scrollProvider:a.none,scrollConsumer:a.none,viewport:a.none,title:a.none})}(t=e.Elements||(e.Elements={})),e.boundedScrollListener=(e,t)=>h.T(m.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(f.w(a.fold((()=>g.E),(e=>y.YC(e).pipe(p.U((t=>Object.assign(Object.assign({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),v.b((t=>e.viewport.set({top:u.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(f.w(a.fold((()=>g.E),(t=>b.R(t,"scroll").pipe(p.U((()=>t.scrollTop)),w.O(t.scrollTop),v.b((t=>e.scrollTop.set(t))),_.h(C.PU)))))),t.view("title").pipe(f.w(a.fold((()=>E.of(s.Rect.empty)),(e=>y.YC(e)))),p.U((e=>e.height)),S.d({bufferSize:1,refCount:!0}),v.b((t=>e.paddingTop.set(t)))),t.view("scrollConsumer").pipe(f.w(a.fold((()=>g.E),(t=>e.scrollOffset.pipe(v.b((e=>{t.scrollTop+=e})))))))).pipe(_.h(void 0)),e.superScrollListener=(e,t)=>{const n=t.view("title").pipe(f.w(a.fold((()=>E.of(s.Rect.empty)),(e=>y.YC(e)))),p.U((e=>e.height)),S.d({bufferSize:1,refCount:!0}));return h.T(m.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(f.w(a.fold((()=>g.E),(e=>y.YC(e).pipe(p.U((t=>Object.assign(Object.assign({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),v.b((t=>e.viewport.set({top:u.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(f.w(a.fold((()=>g.E),(t=>b.R(t,"scroll").pipe(p.U((()=>t.scrollTop)),w.O(t.scrollTop),v.b((t=>e.scrollTop.set(t))),_.h(C.PU)))))),t.view("scrollConsumer").pipe(f.w(a.fold((()=>g.E),(t=>e.scrollOffset.pipe(I.R(((e,t)=>e-t),0),v.b((e=>{t.style.transform=`translateY(${e}px)`})))))),k.a(n),v.b((([t,n])=>e.paddingTop.set(t+n))))).pipe(_.h(void 0))}}(A||(A={}))},4948:(e,t,n)=>{n.d(t,{J:()=>l});var r=n(27378),i=n(90351),o=n(63969),a=n(40219);if(75==n.j)var s=n(7046);const l=e=>r.createElement(s.zx.Animated,Object.assign({},(0,s.L_)(e,d.gray))),c={position:"relative",display:"inline-block",overflow:"hidden",outline:"none",border:0,verticalAlign:"middle",whiteSpace:"nowrap",cursor:"default",userSelect:"none",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer"}}},u={overflow:"hidden",padding:`0 ${o.u.rem(.5)}`,borderRadius:o.u.rem(a.fx),backgroundColor:i.Il.CoreNeutral60,color:i.Il.CoreNeutral0,textTransform:"none",letterSpacing:o.u.rem(i.xv.ButtonLetterSpacing),fontSize:o.u.rem(i.xv.ButtonSize),lineHeight:o.u.rem(i.xv.ButtonLineHeight),transitionDuration:o.u.seconds(.2),$nest:{"&[data-active='true'] > i[role='icon'] > svg, &:not([data-disabled='true']):hover > i[role='icon'] > svg, &:not([data-disabled='true'])[data-hovered='true'] > i[role='icon'] > svg":{fill:i.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-active='true']":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0,$nest:{"&:hover":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0}}},"&[data-disabled='true']":{backgroundColor:i.Il.CoreNeutral60,color:i.Il.CoreNeutral50},".groupSticky &":{padding:`0 ${o.u.rem(.5)}`,borderRight:`2px solid ${i.Il.CoreNeutral0}`,borderRadius:0,backgroundColor:i.Il.CoreNeutral20,$nest:{"&:first-child":{borderRadius:`${o.u.rem(a.fx)} 0 0 ${o.u.rem(a.fx)}`},"&:last-child":{borderRight:"none",borderRadius:`0 ${o.u.rem(a.fx)} ${o.u.rem(a.fx)} 0`}}}}},d=o.u.stylesheet({button:[c],gray:[c,u]})},95403:(e,t,n)=>{n.d(t,{s:()=>Ce});var r,i=n(27378),o=n(5739),a=n(22232),s=n(90351),l=n(35407),c=n(88056),u=n(76024),d=n(19429),p=n(59312),h=n(95195),m=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},g=h.left,y=function(e,t,n){return g([{value:e,context:t,message:n}])},v=h.right,b=function(){function e(e,t,n,r){this.name=e,this.is=t,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(t,n){var r=this;return void 0===n&&(n="pipe("+this.name+", "+t.name+")"),new e(n,t.is,(function(e,n){var i=r.validate(e,n);return(0,h.isLeft)(i)?i:t.validate(i.right,n)}),this.encode===w&&t.encode===w?w:function(e){return r.encode(t.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}(),w=function(e){return e};function _(e,t,n,r){for(var i=e.length,o=Array(i+1),a=0;a<i;a++)o[a]=e[a];return o[i]={key:t,type:n,actual:r},o}function C(e,t){for(var n=t.length,r=0;r<n;r++)e.push(t[r])}var E=Object.prototype.hasOwnProperty;function S(e){return Object.keys(e).map((function(t){return t+": "+e[t].name})).join(", ")}function I(e){for(var t=0;t<e.length;t++)if(e[t].encode!==w)return!1;return!0}function k(e){return"{ "+S(e)+" }"}function A(e){return"Partial<"+e+">"}function x(e){return"("+e.map((function(e){return e.name})).join(" | ")+")"}var T={};function O(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];-1!==t.indexOf(o)&&n.push(o)}return n}function R(e){return"LiteralType"===e._tag}function N(e){return"InterfaceType"===e._tag}function L(e){return"UnionType"===e._tag}var P=[];function M(e){if(-1!==P.indexOf(e))return T;if(N(e)||function(e){return"StrictType"===e._tag}(e)){var t=T;for(var n in e.props){var r=e.props[n];R(r)&&(t===T&&(t={}),t[n]=[r.value])}return t}if(function(e){return"ExactType"===e._tag}(e)||function(e){return"RefinementType"===e._tag}(e))return M(e.type);if(function(e){return"IntersectionType"===e._tag}(e))return e.types.reduce((function(e,t){return function(e,t){if(e===T)return t;if(t===T)return e;var n=Object.assign({},e);for(var r in t)if(e.hasOwnProperty(r)){var i=O(e[r],t[r]);if(!(i.length>0)){n=T;break}n[r]=i}else n[r]=t[r];return n}(e,M(t))}),T);if(L(e))return e.types.slice(1).reduce((function(e,t){return function(e,t){if(e===T||t===T)return T;var n=T;for(var r in e)t.hasOwnProperty(r)&&0===O(e[r],t[r]).length&&(n===T&&(n={}),n[r]=e[r].concat(t[r]));return n}(e,M(t))}),M(e.types[0]));if(function(e){return"RecursiveType"===e._tag}(e)){P.push(e);var i=M(e.type);return P.pop(),i}return T}new(function(e){function t(){var t=e.call(this,"null",(function(e){return null===e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="NullType",t}return m(t,e),t}(b));var D=new(function(e){function t(){var t=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="UndefinedType",t}return m(t,e),t}(b)),F=(new(function(e){function t(){var t=e.call(this,"void",D.is,D.validate,w)||this;return t._tag="VoidType",t}return m(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"unknown",(function(e){return!0}),v,w)||this;return t._tag="UnknownType",t}return m(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="StringType",t}return m(t,e),t}(b))),B=new(function(e){function t(){var t=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="NumberType",t}return m(t,e),t}(b)),U=(new(function(e){function t(){var t=e.call(this,"bigint",(function(e){return"bigint"==typeof e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="BigIntType",t}return m(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="BooleanType",t}return m(t,e),t}(b))),$=new(function(e){function t(){var t=e.call(this,"UnknownArray",Array.isArray,(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="AnyArrayType",t}return m(t,e),t}(b)),j=new(function(e){function t(){var t=e.call(this,"UnknownRecord",(function(e){var t=Object.prototype.toString.call(e);return"[object Object]"===t||"[object Window]"===t}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="AnyDictionaryType",t}return m(t,e),t}(b)),W=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.value=o,a._tag="LiteralType",a}return m(t,e),t}(b);function G(e,t){void 0===t&&(t=JSON.stringify(e));var n=function(t){return t===e};return new W(t,n,(function(t,r){return n(t)?v(e):y(t,r)}),w,e)}var q=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.keys=o,a._tag="KeyofType",a}return m(t,e),t}(b);function H(e,t){void 0===t&&(t=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(" | "));var n=function(t){return F.is(t)&&E.call(e,t)};return new q(t,n,(function(e,t){return n(e)?v(e):y(e,t)}),w,e)}var z=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i)||this;return s.type=o,s.predicate=a,s._tag="RefinementType",s}return m(t,e),t}(b);re(B,(function(e){return Number.isInteger(e)}),"Int");var V=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.runDefinition=o,a._tag="RecursiveType",a}return m(t,e),t}(b);Object.defineProperty(V.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});var Y=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.type=o,a._tag="ArrayType",a}return m(t,e),t}(b);function X(e,t){return void 0===t&&(t="Array<"+e.name+">"),new Y(t,(function(t){return $.is(t)&&t.every(e.is)}),(function(t,n){var r=$.validate(t,n);if((0,h.isLeft)(r))return r;for(var i=r.right,o=i.length,a=i,s=[],l=0;l<o;l++){var c=i[l],u=e.validate(c,_(n,String(l),e,c));if((0,h.isLeft)(u))C(s,u.left);else{var d=u.right;d!==c&&(a===i&&(a=i.slice()),a[l]=d)}}return s.length>0?g(s):v(a)}),e.encode===w?w:function(t){return t.map(e.encode)},e)}var J=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.props=o,a._tag="InterfaceType",a}return m(t,e),t}(b);function Z(e,t){void 0===t&&(t=k(e));var n=Object.keys(e),r=n.map((function(t){return e[t]})),i=n.length;return new J(t,(function(e){if(j.is(e)){for(var t=0;t<i;t++){var o=n[t],a=e[o];if(void 0===a&&!E.call(e,o)||!r[t].is(a))return!1}return!0}return!1}),(function(e,t){var o=j.validate(e,t);if((0,h.isLeft)(o))return o;for(var a=o.right,s=a,l=[],c=0;c<i;c++){var u=n[c],d=s[u],p=r[c],m=p.validate(d,_(t,u,p,d));if((0,h.isLeft)(m))C(l,m.left);else{var y=m.right;(y!==d||void 0===y&&!E.call(s,u))&&(s===a&&(s=f({},a)),s[u]=y)}}return l.length>0?g(l):v(s)}),I(r)?w:function(e){for(var t=f({},e),o=0;o<i;o++){var a=n[o],s=r[o].encode;s!==w&&(t[a]=s(e[a]))}return t},e)}var K=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.props=o,a._tag="PartialType",a}return m(t,e),t}(b);function Q(e,t){void 0===t&&(t=A(k(e)));var n=Object.keys(e),r=n.map((function(t){return e[t]})),i=n.length;return new K(t,(function(t){if(j.is(t)){for(var r=0;r<i;r++){var o=n[r],a=t[o];if(void 0!==a&&!e[o].is(a))return!1}return!0}return!1}),(function(t,r){var o=j.validate(t,r);if((0,h.isLeft)(o))return o;for(var a=o.right,s=a,l=[],c=0;c<i;c++){var u=n[c],d=s[u],p=e[u],m=p.validate(d,_(r,u,p,d));if((0,h.isLeft)(m))void 0!==d&&C(l,m.left);else{var y=m.right;y!==d&&(s===a&&(s=f({},a)),s[u]=y)}}return l.length>0?g(l):v(s)}),I(r)?w:function(e){for(var t=f({},e),o=0;o<i;o++){var a=n[o],s=e[a];void 0!==s&&(t[a]=r[o].encode(s))}return t},e)}!function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i)||this;return s.domain=o,s.codomain=a,s._tag="DictionaryType",s}m(t,e)}(b);var ee=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.types=o,a._tag="UnionType",a}return m(t,e),t}(b);function te(e,t){void 0===t&&(t=x(e));var n=function(e){var t=M(e[0]),n=Object.keys(t),r=e.length,i=function(n){for(var i=t[n].slice(),o=[t[n]],a=1;a<r;a++){var s=M(e[a])[n];if(void 0===s)return"continue-keys";if(s.some((function(e){return-1!==i.indexOf(e)})))return"continue-keys";i.push.apply(i,s),o.push(s)}return{value:[n,o]}};e:for(var o=0,a=n;o<a.length;o++){var s=i(a[o]);if("object"==typeof s)return s.value;switch(s){case"continue-keys":continue e}}}(e);if(void 0!==n&&e.length>0){var r=n[0],i=n[1],o=i.length,a=function(e){for(var t=0;t<o;t++)if(-1!==i[t].indexOf(e))return t};return new ne(t,(function(t){if(j.is(t)){var n=a(t[r]);return void 0!==n&&e[n].is(t)}return!1}),(function(t,n){var i=j.validate(t,n);if((0,h.isLeft)(i))return i;var o=i.right,s=a(o[r]);if(void 0===s)return y(t,n);var l=e[s];return l.validate(o,_(n,String(s),l,o))}),I(e)?w:function(n){var i=a(n[r]);if(void 0===i)throw new Error("no codec found to encode value in union codec "+t);return e[i].encode(n)},e,r)}return new ee(t,(function(t){return e.some((function(e){return e.is(t)}))}),(function(t,n){for(var r=[],i=0;i<e.length;i++){var o=e[i],a=o.validate(t,_(n,String(i),o,t));if(!(0,h.isLeft)(a))return v(a.right);C(r,a.left)}return g(r)}),I(e)?w:function(n){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.is(n))return o.encode(n)}throw new Error("no codec found to encode value in union type "+t)},e)}!function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.types=o,a._tag="IntersectionType",a}m(t,e)}(b);!function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.types=o,a._tag="TupleType",a}m(t,e)}(b);!function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.type=o,a._tag="ReadonlyType",a}m(t,e)}(b);!function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.type=o,a._tag="ReadonlyArrayType",a}m(t,e)}(b);!function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.type=o,a._tag="ExactType",a}m(t,e)}(b);new(function(e){function t(){var t=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="FunctionType",t}return m(t,e),t}(b));var ne=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i,o)||this;return s.tag=a,s}return m(t,e),t}(ee);new(function(e){function t(){var t=e.call(this,"never",(function(e){return!1}),(function(e,t){return y(e,t)}),(function(){throw new Error("cannot encode never")}))||this;return t._tag="NeverType",t}return m(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"any",(function(e){return!0}),v,w)||this;return t._tag="AnyType",t}return m(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,n){return t.is(e)?v(e):y(e,n)}),w)||this;return t._tag="ObjectType",t}return m(t,e),t}(b));function re(e,t,n){var r;return void 0===n&&(n="("+e.name+" | "+(((r=t).displayName||r.name||"<function"+r.length+">")+")")),new z(n,(function(n){return e.is(n)&&t(n)}),(function(n,r){var i=e.validate(n,r);if((0,h.isLeft)(i))return i;var o=i.right;return t(o)?v(o):y(o,r)}),e.encode,e,t)}re(B,Number.isInteger,"Integer"),function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.props=o,a._tag="StrictType",a}m(t,e)}(b);var ie,oe,ae=n(55485);!function(e){e.prod="prod",e.preprod="preprod",e.qa="qa",e.fb="fb",e.dev="dev"}(ie||(ie={})),function(e){e.american="american",e.british="british",e.canadian="canadian",e.australian="australian"}(oe||(oe={}));var se,le=H({".grammarly.com":null,".ppgr.io":null,".qagr.io":null}),ce=(0,p.__spreadArrays)(Object.keys(le.keys),["grammarly.io","sumologic.com","microsoft.com","office.com","apple.com","google.com","mozilla.org","mozilla.net"]).map((function(e){return e.startsWith(".")?e.slice(1):e})),ue=te([Z({state:G("disabled")}),Z({state:G("enabled")}),Z({state:G("test")})]),de=(Z({version:F}),new b("HttpString",F.is,(function(e,t){return h.either.chain(F.validate(e,t),(function(n){return/^(https?|wss?):\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(n)?v(n):y(e,t,"URL parsing failed ("+n+")")}))}),String)),pe=new b("MsStoreUrlString",F.is,(function(e,t){return h.either.chain(F.validate(e,t),(function(n){return/ms-windows-store:\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(n)?v(n):y(e,t,"Edge URL parsing failed ("+n+")")}))}),String),he=new b("AllowedHttpString",de.is,(function(e,t){return h.either.chain(de.validate(e,t),(function(n){for(var r=n.split("//")[1].split("/")[0].split(":")[0],i=0,o=ce;i<o.length;i++){var a=o[i];if(r.endsWith(a))return v(n)}var s="Domain ("+r+") is not allowed in "+ce.join(", ");return y(e,t,s)}))}),de.encode),me=H({TRACE:null,DEBUG:null,INFO:null,WARN:null,ERROR:null,FATAL:null,OFF:null}),fe=(Q({env:ae.D.createStringEnum(ie,"Environment"),logLevel:me,accumulateCrashLogLevel:me,sendCrashOnLogLevel:me,collectLogs:U,collectCrashLogs:U,copyLogsToConsole:U,crashLogsCacheSize:B,debugLogsCacheSize:B,tracking:ue,alertCache:Q({prefix:F,version:F}),mutedCategoriesCache:Q({prefix:F,version:F}),outcomeScoreCache:Q({prefix:F,version:F}),userSettingsPrefix:F,userSettingsVersion:F,defaultDialect:ae.D.createStringEnum(oe,"DialectEnum"),notificationShowTimeMs:B,maxNotificationsOnTheScreen:B,selfUpdate:Q({versionCheckInterval:B,selfUpdateDelay:B,canReloadCheckInterval:B,blockingModalAutoReloadDelay:B,retryFailedVersionCheckInterval:B,retryFailedVersionCheckLimit:B,debugBuildVersion:F,versionFilePath:F}),pingMaybeGnarDelay:B,domains:Q({cookie:le,localServer:F}),api:Q({authUrl:he,institutionUrl:he,snippetsUrl:he,institutionAdminUrl:he,institutionVoxUrl:he,institutionStyleGuideUrl:he,institutionStatisticsUrl:he,institutionSuggestionsUrl:he,institutionTonesUrl:he,tonesUrl:he,dapiUrl:he,doxUrl:he,irbisUrl:he,subscriptionUrl:he,discountUrl:he,capiWsUrl:he,capiApiUrl:he,gnarApi:Q({url:he}),felogUrl:he,felogDebugUrl:he,sumoUrl:he,crashLogUrl:he,onlineTestUrl:F,wsTest:he,proofitResultUrl:he,redirect:he,mailApiUrl:he,ssoUrl:he}),app:Q({nameWeb:F,nameDesktop:F}),urls:Q({free:F,account:he}),onlineEditor:Q({docId:he}),funnel:Q({base:he,resetPassword:he,accountDeleted:he,businessLanding:he,businessStyleguideLanding:he,businessUpgradeLanding:he,subscribe:he,upgrade:he,plans:he,signin:he,socialSignin:he,signup:he,mainPage:he,deleteSocialAccount:he,subscriptionCancellationSurvey:he,keyboardInstall:he,desktopAppInstall:he,claimedUserJoinFallback:he}),officeAddin:Q({installURL:he,infoURL:he}),crossPlatformOfficeAddin:Q({installURL:he,infoURL:he}),desktop:Q({windows:Q({installURL:he,infoURL:he}),mac:Q({installURL:he,infoURL:he})}),extension:Q({chrome:Q({installURL:he,infoURL:he}),firefox:Q({installURL:he,iconURL:he,infoURL:he}),safari:Q({installURL:he}),edge:Q({installURL:pe,infoURL:he}),edgeChromium:Q({installURL:he})}),edu:Q({adminPanelURL:he}),support:Q({login:he,email:F,mainPage:he,newRequest:he,contact:he,connectionTroubleshooting:he,emailExistsKBUrl:he,safariDownloadFilesKBUrl:he,rtfCompatibilityUrl:he,diagnosticTestPath:F,documentAcceptTrackedChanges:he}),privacyPolicy:he,termsOfService:he,account:Q({customize:he,subscription:he,adminSubscription:he,members:he,styleGuide:he,suggestions:he}),preconnectLinks:X(de)}),d.VF((function(){return{env:ie.prod,logLevel:"INFO",accumulateCrashLogLevel:"DEBUG",sendCrashOnLogLevel:"ERROR",collectLogs:!0,collectCrashLogs:!0,copyLogsToConsole:!1,crashLogsCacheSize:100,debugLogsCacheSize:100,tracking:{state:"enabled"},alertCache:{prefix:"editorTsAlertCache",version:"4"},mutedCategoriesCache:{prefix:"mutedCategoriesCache",version:"0"},outcomeScoreCache:{prefix:"scoreCache",version:"0"},userSettingsPrefix:"userSettings",userSettingsVersion:"1",defaultDialect:oe.american,notificationShowTimeMs:7e3,maxNotificationsOnTheScreen:3,selfUpdate:{versionCheckInterval:59*u.MS_IN_MIN,selfUpdateDelay:12*u.MS_IN_HOUR,canReloadCheckInterval:5*u.MS_IN_SEC,blockingModalAutoReloadDelay:1*u.MS_IN_MIN,retryFailedVersionCheckInterval:5*u.MS_IN_MIN,retryFailedVersionCheckLimit:20,debugBuildVersion:"auto",versionFilePath:"/version.json"},pingMaybeGnarDelay:1*u.MS_IN_HOUR,domains:{cookie:".grammarly.com",localServer:"denali-local.grammarly.com"},api:{authUrl:"https://auth.grammarly.com/v3",institutionUrl:"https://institution.grammarly.com/api/institution",snippetsUrl:"https://institution.ppgr.io/api/snippets",institutionAdminUrl:"https://institution.grammarly.com/api/institution/admin",institutionVoxUrl:"https://institution.grammarly.com/api/institution/vox",institutionStyleGuideUrl:"https://institution.grammarly.com/public/api/styleguides",institutionStatisticsUrl:"https://institution.grammarly.com/api/institution/statistics",institutionSuggestionsUrl:"https://institution.grammarly.com/api/institution/settings/suggestions",institutionTonesUrl:"https://institution.grammarly.com/api/institution/settings/tones",tonesUrl:"https://institution.ppgr.io/api/tones",dapiUrl:"https://data.grammarly.com",doxUrl:"https://dox.grammarly.com",irbisUrl:"https://irbis.grammarly.com",subscriptionUrl:"https://subscription.grammarly.com/api/v1",discountUrl:"https://irbis.grammarly.com/api/discounts",capiWsUrl:"wss://capi.grammarly.com/freews",capiApiUrl:"https://capi.grammarly.com/api",gnarApi:{url:"https://gnar.grammarly.com"},felogUrl:"https://f-log-editor.grammarly.io",felogDebugUrl:"https://f-log-editor-debug.grammarly.io",sumoUrl:"https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV0Bxac28IqT2frgzsjX7HEotu8EZEZr07YE9RWLCzrOMGwzO9aL6c_iSiidkEplFOod2igKIxz_7s2CHlXc2u-XuLpetEBK1fV6xjfN2Sw2gA==",crashLogUrl:"https://f-log-editor.grammarly.io/crash",onlineTestUrl:"/online-test.json",wsTest:"wss://wstest.grammarly.com",proofitResultUrl:"https://dox.grammarly.com/documents/_docId_/proofread",redirect:"https://redirect.grammarly.com/redirect",mailApiUrl:"https://g-mail.grammarly.com",ssoUrl:"https://sso.grammarly.com"},app:{nameWeb:"editor",nameDesktop:"desktopEditor"},urls:{free:"/free",account:"https://account.grammarly.com"},onlineEditor:{docId:"https://app.grammarly.com/ddocs/"},funnel:{base:"https://www.grammarly.com",resetPassword:"https://www.grammarly.com/resetpassword",accountDeleted:"https://www.grammarly.com/account-deleted",businessLanding:"https://www.grammarly.com/business/e",businessStyleguideLanding:"https://www.grammarly.com/business/styleguide",businessUpgradeLanding:"https://www.grammarly.com/upgrade/business/try",subscribe:"https://www.grammarly.com/subscribe",upgrade:"https://www.grammarly.com/upgrade",plans:"https://www.grammarly.com/plans",signin:"https://www.grammarly.com/signin",socialSignin:"https://www.grammarly.com/signin/app/desktop-editor",signup:"https://www.grammarly.com/signup",mainPage:"https://www.grammarly.com/",deleteSocialAccount:"https://www.grammarly.com/social/delete-account",subscriptionCancellationSurvey:"https://www.grammarly.com/subscription-cancellation-survey",keyboardInstall:"https://www.grammarly.com/keyboard",desktopAppInstall:"https://www.grammarly.com/native",claimedUserJoinFallback:"https://redirect.grammarly.com/redirect?business_join=1"},officeAddin:{installURL:"https://download-office.grammarly.com/latest/GrammarlyAddInSetup.exe",infoURL:"https://www.grammarly.com/office-addin/windows"},crossPlatformOfficeAddin:{installURL:"https://appsource.microsoft.com/en-us/product/office/WA200001011?tab=Overview",infoURL:"https://www.grammarly.com/office-addin/mac"},desktop:{windows:{installURL:"https://download-editor.grammarly.com/windows/GrammarlySetup.exe",infoURL:"https://www.grammarly.com/native/windows"},mac:{installURL:"https://download-editor.grammarly.com/osx/Grammarly.dmg",infoURL:"https://www.grammarly.com/native/mac"}},extension:{chrome:{installURL:"https://chrome.google.com/webstore/detail/kbfnbcaeplbcioakkpcpgfkobkghlhen",infoURL:"https://chrome.google.com/webstore/detail/grammarly-spell-checker-g/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=en"},firefox:{installURL:"https://addons.mozilla.org/firefox/downloads/latest/566314/addon-566314-latest.xpi",iconURL:"https://addons.cdn.mozilla.net/user-media/addon_icons/566/566314-32.png",infoURL:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/"},safari:{installURL:"https://apps.apple.com/us/app/grammarly-for-safari/id1462114288?ls=1&mt=12"},edge:{installURL:"ms-windows-store://pdp?ProductId=9p59wxtbhzzm",infoURL:"https://www.microsoft.com/en-us/store/p/grammarly-for-microsoft-edge/9p59wxtbhzzm?rtc=1"},edgeChromium:{installURL:"https://microsoftedge.microsoft.com/addons/detail/grammarly-for-microsoft-e/cnlefmmeadmemmdciolhbnfeacpdfbkd"}},edu:{adminPanelURL:"https://account.grammarly.com/admin"},support:{login:"https://support.grammarly.com/login",email:"support@grammarly.com",mainPage:"https://support.grammarly.com/",newRequest:"https://support.grammarly.com/hc/en-us/requests/new",contact:"https://www.grammarly.com/contact",connectionTroubleshooting:"https://support.grammarly.com/hc/en-us/articles/115000090271-Network-configuration-blocks-Grammarly-services",emailExistsKBUrl:"https://support.grammarly.com/hc/en-us/articles/115000090791-Changing-your-email-to-an-email-that-already-exists",safariDownloadFilesKBUrl:"https://support.grammarly.com/hc/en-us/articles/360001105952",rtfCompatibilityUrl:"https://support.grammarly.com/hc/en-us/articles/115000091512-Preserve-text-formatting",diagnosticTestPath:"/diagnostic-test?origin=editor",documentAcceptTrackedChanges:"https://support.office.com/en-us/article/Accept-tracked-changes-4838d24c-d5d1-4c6c-8e39-78b44bd2b4cc"},privacyPolicy:"https://www.grammarly.com/privacy-policy",termsOfService:"https://www.grammarly.com/terms",account:{customize:"https://redirect.grammarly.com/redirect?profile_dictionary=1",subscription:"https://account.grammarly.com/subscription",adminSubscription:"https://account.grammarly.com/admin/subscription",members:"https://account.grammarly.com/admin/members",styleGuide:"https://account.grammarly.com/admin/style-guide",suggestions:"https://redirect.grammarly.com/redirect?profile_suggestions=1"},preconnectLinks:["https://data.grammarly.com","https://gnar.grammarly.com","https://subscription.grammarly.com","https://auth.grammarly.com","https://f-log-editor.grammarly.com","https://static.institution.grammarly.com","https://fonts.gstatic.com"]}})));!function(e){e.createFromPlatformConfig=l.createFrom(fe),e.Context=i.createContext(c.Y.invariantContent("PlatformConfig"))}(se||(se={}));var ge=n(81531),ye=n(63969),ve=n(30763),be=n(7046),we=n(50790),_e=n(4948);var Ce;!function(e){e.UnauthorizedError=({action:e})=>i.createElement(we.DI.TitledContent,{title:"You've Been Logged Out"},"This occurs due to inactivity or logging out on another device.",i.createElement("br",null),i.createElement(_e.J,{name:"login",className:Ie.footerLink,onClick:e},"Log Back In")),e.Offline=({reconnect:e,reconnectTime:t})=>i.createElement(we.DI.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted. We’ll try to reconnect you in"," ",i.createElement(o.F.span,null,t.view((e=>e)))," seconds.",i.createElement("br",null),i.createElement(_e.J,{name:"reconnect",className:Ie.footerLink,onClick:e},"Reconnect Now")),e.ServerError=()=>{const t=e.withReload(_e.J,"UnknownConnectionError");return i.createElement(we.DI.TitledContent,{title:"Sorry, Unexpected Issue"},"A small error has occurred, causing an interruption of service.",i.createElement("br",null),i.createElement(t,{name:"reload-page",className:Ie.footerLink},"Reload This Page"))},e.ConnectionWSError=()=>{const e=i.useContext(se.Context);return i.createElement(we.DI.TitledContent,{title:"Can’t Connect to Grammarly"},"Your network configuration currently blocks Grammarly services on this computer. ",i.createElement("br",null),i.createElement(_e.J,{name:"troubleshoot",className:Ie.footerLink,href:e.support.diagnosticTestPath,target:"_blank"},"Troubleshoot This Issue"))},e.ClientConnectionError=()=>{const t=e.withReload(_e.J,"ClientConnectionErrorNotification");return i.createElement(we.DI.TitledContent,{title:"Your Internet Connection Is Unstable"},"Please check your network stability and then reload this page.",i.createElement("br",null),i.createElement(t,{name:"reload-page",className:Ie.footerLink},"Reload Page Now"))},e.DocumentNotFoundError=({navigateToDocuments:e})=>i.createElement(we.DI.TitledContent,{title:"Can’t find this document"},"It looks like this document was removed or URL is incorrect.",i.createElement("br",null),i.createElement(_e.J,{name:"goto-docs",className:Ie.footerLink,onClick:e},"Go to your documents")),e.SelfUpdate=()=>{const t=i.useContext(ve.m.Context),n=e.withReload(be.zx,"SelfUpdateBlocker");return i.createElement(we.DI.TitledContent,{title:"Grammarly needs to refresh this page"},"Don't worry - your documents have already been saved. Please"," ",i.createElement(n,{name:"reload-page",className:Ie.link},"reload")," ","the page ",t.hotkeyLabelR,".")},e.DesktopHardUpdate=({reloadMethod:e})=>{const t=i.useContext(ve.m.Context).desktopUpdate;return i.createElement(we.DI.TitledContent,{title:t.hardTitle},t.hard,i.createElement("br",null),i.createElement(_e.J,{name:"reload-desktop",className:Ie.footerLink,onClick:e},t.reload))},e.DesktopHardDownload=({downloadMethod:e})=>{const t=i.useContext(ve.m.Context).desktopUpdate;return i.createElement(we.DI.TitledContent,{title:t.hardTitle},t.hard,i.createElement("br",null),i.createElement(_e.J,{name:"download-desktop",className:Ie.footerLink,onClick:e},t.download))},e.SlowNetworkError=()=>i.createElement(we.DI.TitledContent,{title:"Your Internet Connection Is Unstable"},"Grammarly may work slower than normal."),e.CheckingIsDownError=()=>i.createElement(we.DI.TitledContent,{title:"Text Checking Is Temporarily Unavailable"},"Grammarly is unable to check your text for errors at this time. We’re working to resolve the issue. Please check back soon."),e.Error=()=>{const e=i.useContext(se.Context);return i.createElement(we.DI.TitledContent,{title:"Sorry, Something Went Wrong"},"Please try again later or"," ",i.createElement(be.zx,{name:"support",className:Ie.link,href:e.support.login,target:"_blank"},"contact support")," ","now to report the issue.")},e.ProofitPaymentDeclinedError=({paymentMethod:e,navigateToSubscription:t})=>{const n=i.useContext(ve.m.Context).proofitPayment,r=function(e,t,n){switch(e){case"creditCard":return t;case"payPal":return n;default:const r=`Unknown payment method: ${e}`;throw ge.Monitoring.Logging.getLogger("ProofitView").warn(r),new Error(r)}}(e,n.creditCard,n.payPal);return i.createElement(we.DI.TitledContent,{title:"Order can not be processed"},i.createElement("div",null,r),"Please update your credit card information in the Manage Subscription section.",i.createElement("br",null),i.createElement(_e.J,{name:"manage-subscription",className:Ie.footerLink,onClick:t},"Go to Manage Subscription"))},e.PaymentSuccessMessage=()=>{const e=i.useContext(ve.m.Context).proofitOrderModal.card.paymentSuccess;return i.createElement(we.DI.TitledContent,{title:e.title},i.createElement("div",null,e.message))},e.PaymentErrorMessage=()=>{const e=i.useContext(ve.m.Context).proofitOrderModal.card.paymentError,t=i.useContext(se.Context);return i.createElement(we.DI.TitledContent,{title:e.title},i.createElement("div",null,e.message(t.support.login)))},e.ProofitEmptyDocumentError=()=>i.createElement(we.DI.TitledContent,{title:"Document is empty"},"The document you are trying to submit is empty. Please write something and try again."),e.ProofitDocumentProofreadError=({navigateToDocuments:e})=>i.createElement(we.DI.TitledContent,{title:"This document is a recent submission"},"The text you are trying to send for human proofreading was reviewed by our team. Please edit your text or select another document before you re-submit.",i.createElement("br",null),i.createElement(_e.J,{name:"goto-docs",className:Ie.footerLink,onClick:e},"Go to your documents")),e.ProofitComplexInternalStructureError=({navigateToDocuments:e})=>i.createElement(we.DI.TitledContent,{title:"This document cannot be corrected"},"The text you are trying to send for human proofreading has complex internal structure. Please edit your text (e.g., remove significantly long tables) or select another document.",i.createElement("br",null),i.createElement(_e.J,{name:"goto-docs",className:Ie.footerLink,onClick:e},"Go to your documents")),e.withReload=(e,t)=>class extends i.Component{render(){return i.createElement(e,Object.assign({},this.props,{onClick:()=>{try{localStorage.setItem("pageReloadReason",JSON.stringify({source:t,location:self.location.href,timestamp:Date.now()}))}catch(e){}self.location.reload()}}))}},e.CopyToClipboardError=()=>{const e=i.useContext(ve.m.Context);return i.createElement(we.DI.TitledContent,{title:"Copying Is Not Supported by Your Browser"},"Please use ",e.hotkeyLabelC," instead.")},e.ProofitCancelled=()=>{const e=i.useContext(se.Context);return i.createElement(we.DI.TitledContent,{title:"Your order has been cancelled"},"Your proofreading order has been cancelled and the payment refunded. Please check your email for more information, or contact"," ",i.createElement(_e.J,{name:"support",className:Ie.footerLink,href:e.support.login,target:"_blank"},"Grammarly support"))},e.ProofitCompleted=({documentTitle:e,documentDownloadUrl:t,email:n})=>i.createElement(we.DI.TitledContent,{title:`${e||"Your"} document has been proofread`},"A version of this document with proofreaders’ marks has been emailed to you at ",n," in .docx format.",i.createElement("br",null),i.createElement(_e.J,{name:"download",className:Ie.footerLink,href:t,target:"_blank"},"Download .docx")),e.DenaliFormattingCompatibility=()=>{const e=i.useContext(ve.m.Context),t=i.useContext(se.Context);return i.createElement(we.DI.TitledContent,{title:e.rtfCompatibilityModeNotificationTitle},"To preserve your document’s formatting, Grammarly’s formatting tools are temporarily disabled.",i.createElement("br",null),i.createElement(_e.J,{name:"support",className:Ie.footerLink,href:t.support.rtfCompatibilityUrl,target:"_blank"},"Learn more"))},e.DenaliDocumentUploaded=({navigateToDocuments:e})=>{const{denaliDocumentUploadNotification:t}=i.useContext(ve.m.Context);return i.createElement(we.DI.TitledContent,{title:t.title},t.text," ",i.createElement(be.zx,{name:"goto-docs",className:Ie.link,onClick:e},t.link))},e.AlertsNothingFound=()=>i.createElement(we.DI.Content,null,"Grammarly found no critical writing issues in this text. Keep up the great work!"),e.DesktopSoftUpdate=({reloadMethod:e})=>{const t=i.useContext(ve.m.Context).desktopUpdate;return i.createElement(we.DI.TitledContent,{title:t.softTitle},t.soft,i.createElement("br",null),i.createElement(_e.J,{name:"reload-desktop",className:Ie.footerLink,onClick:e},t.reload))},e.DesktopSoftDownload=({downloadMethod:e})=>{const t=i.useContext(ve.m.Context).desktopUpdate;return i.createElement(we.DI.TitledContent,{title:t.softTitle},t.soft,i.createElement("br",null),i.createElement(_e.J,{name:"download-desktop",className:Ie.footerLink,onClick:e},t.download))},e.ThanksForFeedbackNotification=()=>i.createElement(we.DI.TitledContent,{title:"Your feedback has been sent"},"Thank you for helping make Grammarly better!"),e.DownloadDocumentNotFoundError=()=>{const e=i.useContext(ve.m.Context);return i.createElement(we.DI.TitledContent,{"data-name":"document-not-found",title:e.downloadDocumentNotFoundError})},e.ClipboardNotSupported=({hotkey:e})=>{const t=i.useContext(ve.m.Context);return i.createElement(we.DI.Content,null,t.hotkeyUnsupported,i.createElement("b",null,e))},e.DocumentSizeExceeded=({os:e,officeAddinUrl:t})=>{const n=i.useContext(ve.m.Context).fileSizeExceededNotification;return i.createElement(we.DI.TitledContent,{title:n.title},n.body,"windows"===e&&i.createElement(_e.J,{name:"officeAddin",className:Ie.footerLink,href:t,target:"_blank"},n.link))},e.DocumentUploaded=({navigateToDocument:e})=>{const t=i.useContext(ve.m.Context).documentUploaded;return i.createElement(we.DI.Content,null,t.message,i.createElement("br",null),i.createElement(_e.J,{name:"goto-doc",className:Ie.footerLink,onClick:e},t.link))},e.DocumentTypeUnsupported=()=>{const e=i.useContext(ve.m.Context);return i.createElement(we.DI.Content,null,"Unsupported file type. ",e.notificationUploadFileText,": Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF.")},e.DocumentWithTrackedChangesIsUnsupported=({link:e})=>i.createElement(we.DI.Content,null,"Your document contains revisions. Accept all revisions and try uploading again. Click"," ",i.createElement(be.zx,{name:"document-accept-tracked-changes",className:Ie.link,href:e,target:"_blank"},"here")," ","for details.");const t=(e,t)=>{switch(e){case ke.switchToDenali:return t.switchToDenali;case ke.feedbackSend:return t.feedbackSend;case ke.statisticsError:return t.statisticsError;case ke.referenceCopied:return t.referenceCopied;case ke.documentCopied:return t.documentCopied;case ke.isTemporaryDownloadError:return t.isTemporaryDownloadError;case ke.documentUploadGeneralError:return t.documentUploadGeneralError;case ke.documentIsEmpty:return t.documentIsEmpty;case ke.noFileToUpload:return t.noFileToUpload;case ke.oneDocumentIsAllowed:return t.oneDocumentIsAllowed;default:return(0,a.vE)(e)}};e.Generic=({type:e})=>{const n=i.useContext(ve.m.Context);return i.createElement(we.DI.TitledContent,{title:t(e,n)})}}(Ce||(Ce={}));const Ee={display:"inline-flex",overflow:"unset",color:s.Il.CoreNeutral0,verticalAlign:"baseline",textDecoration:"underline",fontWeight:"bold",cursor:"pointer"},Se={marginTop:ye.u.rem(.5),textDecoration:"none"},Ie=ye.u.stylesheet({link:[Ee],footerLink:[Ee,Se]});var ke;!function(e){e.switchToDenali="switchToDenali",e.feedbackSend="feedbackSend",e.statisticsError="statisticsError",e.referenceCopied="referenceCopied",e.documentCopied="documentCopied",e.isTemporaryDownloadError="isTemporaryDownloadError",e.documentUploadGeneralError="documentUploadGeneralError",e.documentIsEmpty="documentIsEmpty",e.noFileToUpload="noFileToUpload",e.oneDocumentIsAllowed="oneDocumentIsAllowed"}(ke||(ke={}))},32380:(e,t,n)=>{n.d(t,{A:()=>v});var r=n(27378),i=n(18208),o=n(90351),a=n(63969),s=n(30763),l=n(94793),c=n(50790),u=n(4948);const d=(e,t)=>{switch(e.kind){case"ignore":return"Dismissed";case"ignoreAll":return r.createElement(r.Fragment,null,r.createElement("span",null,e.alerts)," ",i.pluralize(e.alerts,"alert has been","alerts have been")," dismissed");case"replace":return"Corrected";case"replaceSynonym":return"Replaced";case"replaceTransform":return r.createElement(r.Fragment,null,e.transform);case"addToDictionary":return r.createElement(r.Fragment,null,r.createElement("b",{className:t&&t.addToDictionary},e.word)," has been added to dictionary");case"report":return"Your report has been sent";case"markAsHelpful":return"Marked as “Will address”";case"markAsNotHelpful":return"Marked as “Not helpful”";default:return""}},p={display:"flex",marginTop:a.u.rem(-1.1),marginBottom:a.u.rem(-.5),alignItems:"center",justifyContent:"space-between"},h={marginTop:a.u.rem(.6),marginRight:a.u.rem(1),color:o.Il.CoreNeutral0,flexGrow:0,flexShrink:0},m={marginTop:a.u.rem(-.25),paddingRight:a.u.rem(.5),minWidth:"auto",minHeight:"auto",justifyContent:"space-between"},f={marginTop:a.u.rem(.6),maxWidth:a.u.rem(14),wordWrap:"break-word",flexBasis:"auto",flexGrow:1},g={marginRight:a.u.rem(1.4)},y=a.u.stylesheet({alertUndoWrapper:[p],alertUndoWrapperFlexible:[p,{flexWrap:"nowrap"}],alertUndoWrapperFullWidth:[p,{flexWrap:"wrap"}],alertUndoBtn:[h],alertUndoIcon:[m],alertUndoContent:[f],alertUndoContentFlexible:[f,g],addToDictionary:[{wordBreak:"break-all"}]});var v;!function(e){const t={wrapper:y.alertUndoWrapperFlexible,content:y.alertUndoContent,icon:y.alertUndoIcon,button:y.alertUndoBtn};e.Standard=({action:n,params:i})=>r.createElement(c.DI.Content,null,r.createElement(e.Content,{action:n,content:d(i),theme:Object.assign(Object.assign({},t),{wrapper:y.alertUndoWrapperFullWidth})})),e.Flexible=({notification:n,onClose:i,action:o,params:a})=>r.createElement(c.SJ.Wrapper,{notification:n,onClose:i},r.createElement(c.DI.Content,null,r.createElement(e.Content,{action:o,content:d(a,{addToDictionary:y.addToDictionary}),theme:Object.assign(Object.assign({},t),{wrapper:y.alertUndoWrapperFlexible,content:y.alertUndoContentFlexible})}))),e.Content=({action:e,content:n,theme:i=t})=>{const o=r.useContext(s.m.Context);return r.createElement("div",{className:i.wrapper},r.createElement("div",{className:i.content},n),r.createElement(u.J,{name:"alertUndoButton",className:i.button,onClick:e},r.createElement(l.JO.Undo,{className:i.icon}),o.undo))}}(v||(v={}))},8313:(e,t,n)=>{n.d(t,{E2:()=>re,TG:()=>ie});var r,i=n(59312),o=n(27378),a=n(57050),s=n(40327),l=n(49524),c=n(5739),u=n(12187),d=n(38983),p=n(22232),h=n(19962),m=n(83078),f=n(5114),g=n(41046),y=n(41488),v=n(8125),b=n(81531);!function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Passed="passed"}(r||(r={}));class w{constructor(){this.completionTrigger=d.h.create(!1),this._steps={},this.cpuAndAnimationOptsExperiment=!1}isStepEnabled(e){return void 0!==this._steps[e]}relaunchAllSteps(){b.Monitoring.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")}setState(e,t){this.subscribeForStep(e).state.set(t)}subscribeForStep(e){const t=d.h.create(r.Hidden);return this._steps[e]||(this._steps[e]={id:e,state:t,dotShown:v.ZT,dotClicked:()=>t.set(r.Popup),popupClosed:()=>t.set(r.Passed),popupIgnored:()=>t.set(r.Hidden),actionTaken:()=>t.set(r.Passed)})}getStepCompletionCallback(e){throw new Error("Method not implemented.")}changeState(e){}}var _=n(98403),C=n(77176),E=n(24209),S=n(85985),I=n(13444),k=n(41398),A=n(66310),x=n(76974),T=n(40151),O=n(90351),R=n(63969),N=n(24588),L=n(40219);const P=O.Il.BackgroundTooltip,M=R.u.keyframes({"0%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, .65)"},"70%":{boxShadow:`0 0 0 ${R.u.rem(1)} rgba(95, 139, 250, 0)`},"100%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, 0)"}}),D={width:R.u.rem(1),height:R.u.rem(1),borderRadius:R.u.percent(50),background:"rgba(95, 139, 250, .65)",boxShadow:"0 0 0 rgba(95, 139, 250, .65)",animation:`${M} 2s infinite`,$nest:{"&:hover":{animation:"none"},"@media print":{visibility:"hidden"}}},F=R.u.keyframes({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(3)"}}),B={width:R.u.rem(1),height:R.u.rem(1),borderRadius:R.u.percent(50),background:"rgba(95, 139, 250, .65)",willChange:"transform",$nest:{"@media print":{visibility:"hidden"},"&:before":{position:"absolute",top:0,left:0,zIndex:-1,width:R.u.rem(1),height:R.u.rem(1),borderRadius:R.u.percent(100),backgroundColor:"rgba(95, 139, 250, .65)",content:"''",animation:`${F} 2s infinite`,willChange:"transform"},"&:hover:before":{animation:"none"}}},U={margin:`${R.u.rem(-1.5)} 0 0 ${R.u.rem(-1.5)}`,padding:R.u.rem(1),borderRadius:R.u.percent(50),cursor:"pointer",pointerEvents:"all"},$={margin:`0 0 ${R.u.rem(.5)}`,color:O.Il.CoreNeutral0,fontWeight:"bold"},j={color:O.Il.CoreNeutral0,lineHeight:R.u.rem(1.25)},W={display:"flex",padding:`${R.u.rem(1)} ${R.u.rem(1.5)} ${R.u.rem(1.25)} ${R.u.rem(2)}`,width:R.u.rem(23),borderRadius:R.u.rem(L.fx),background:P,color:O.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,pointerEvents:"all",alignItems:"flex-start"},G={marginRight:R.u.rem(2),width:R.u.rem(2),flexShrink:0,alignSelf:"center"},q={stroke:N.FW,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{stroke:O.Il.CoreNeutral0,fill:O.Il.CoreNeutral0}}},H={position:"absolute",top:R.u.percent(50),left:R.u.percent(50),zIndex:L.I3},z={position:"relative",zIndex:L.VN},V={zIndex:L.w$},Y={position:"absolute",zIndex:L.w$},X=R.u.prefixedStylesheet("onboarding",{pulse:[D],pulseWrapper:[U],header:[$],description:[j],stepWrapper:[W],content:[{display:"inline-block"}],alertIcon:[G],closeIconWrapper:[{position:"absolute",top:0,right:0}],closeIcon:[q],containerWrapper:[{position:"relative",display:"inline-block"}],onboardingSpot:[H],containerDiv:[{}],editor:[z],onboardingPopup:[V],notificationContainer:[Y],pulseOptimized:[B]});var J=n(7046),Z=n(94793),K=n(29881),Q=n(3656);const ee=({alignment:e,rect:t,onClose:n,className:r,children:i,icon:a,pinTargetRect:l,hideCloseButton:d,onMount:p})=>o.createElement(K.t.ByRelativeRect,Object.assign({rect:t,className:X.notificationContainer},K.t.Alignment.toSelector(e),{pinTargetRect:l,withPin:!0}),o.createElement(c.F.div,Object.assign({},(0,u.Sh)(X.stepWrapper,r),{mount:p}),(0,s.pipe)(a,f.fold((()=>o.createElement(Z.JO.Grammarly,{className:X.alertIcon})),(e=>o.createElement(e,{className:X.alertIcon})))),i,!d&&o.createElement(J.zx,{name:"onboard-close",className:X.closeIconWrapper,onClick:()=>n&&n()},o.createElement(Z.JO.Close,{className:X.closeIcon,width:12})))),te=e=>{var{title:t,description:n}=e,r=(0,i.__rest)(e,["title","description"]);return o.createElement(ee,Object.assign({},r),o.createElement("span",{className:X.content},t&&o.createElement(Q.P1,{className:X.header},t),o.createElement(Q.XY,{className:X.description},n)))},ne=({className:e,onClick:t,customStyle:n,enableOptimizations:r})=>o.createElement(c.F.div,Object.assign({},(0,u.Sh)(X.pulseWrapper,e),{style:n,onClick:()=>t&&t()}),o.createElement("div",{className:r?X.pulseOptimized:X.pulse}));var re;function ie(e){const t=o.useContext(ie.Context),{stepId:n,onboardingViewModel:r}=e,a=(0,i.__rest)(e,["stepId","onboardingViewModel"]),l=r||t,c=oe(n,l),u=o.useContext(y.l.Context).pipe(C.U((e=>e.rect)));return(0,s.pipe)(c,f.fold((()=>o.Children.only(e.children)),(e=>o.createElement(ae,Object.assign({},a,{onboardingStep:e,enableOptimizations:l.cpuAndAnimationOptsExperiment,viewportRect:u})))))}!function(e){e.leftTop="leftTop",e.leftCenter="leftCenter",e.leftBottom="leftBottom",e.center="center",e.rightTop="rightTop",e.rightCenter="rightCenter",e.rightBottom="rightBottom"}(re||(re={}));const oe=(e,t)=>((0,p.kG)(Boolean(t),"onboardingViewModel should be set either in context or in props"),t.isStepEnabled(e)?f.some(t.subscribeForStep(e)):f.none);class ae extends o.Component{constructor(){super(...arguments),this._subs=[],this._wrapperElement=d.h.create(f.none),this._containerElement=d.h.create(f.none),this._exactTargetRect=d.h.create(f.none),this._visibilityState=d.h.create(!1),this._spotStyle=d.h.create({}),this._onEventActionTaken=(e,t=!0)=>n=>{var r;const i=e.state.get();if("popup"===i||t&&"dot"===i){const i=n.target;if(h.isDisabled(i))return;const o=t||h.hasParentWithClassName(i,X.containerDiv);if("findFirstButton"===(null===(r=this.props.dotPosition)||void 0===r?void 0:r.kind)&&!h.hasParentWithAttribute(i,"role","button"))return;o&&e.actionTaken()}else"dot"===i&&(n.preventDefault(),n.stopPropagation())}}componentWillUnmount(){const e=this.props.onboardingStep;"popup"===e.state.get()&&e.popupIgnored(),this._subs.forEach((e=>e.unsubscribe()))}componentDidMount(){const e=this.props.dotPosition;e?this._subs.push(E.T(this.context,this.props.onboardingStep.state.pipe(S.h((e=>"dot"===e||"popup"===e)))).pipe(I.g(500),k.M(this._wrapperElement,this._containerElement),A.w((([t,n,r])=>(0,s.pipe)((0,a.tuple)(n,r),(0,a.tupled)(m.map2(((t,n)=>{switch(e.kind){case"findFirstButton":return _.Dx(e.buttonOrder).pipe(A.w((r=>x.of(void 0).pipe(I.g(500),C.U((()=>{const[i,o]=ce(t,n,e.position,r);return this._exactTargetRect.set(o),i}))))));case"dotAtPosition":return x.of(se(e.position));default:return(0,p.vE)(e)}}))),f.fold((()=>T.E),l.y))))).subscribe((e=>{this._spotStyle.set(e),this._visibilityState.set(!0)}))):this._visibilityState.set(!0)}render(){const e=this.props.onboardingStep;return o.createElement(c.F.div,Object.assign({key:"onboarding-wrapper"},(0,u.Sh)(X.containerWrapper,this.props.themes&&this.props.themes.containerWrapperClassName),{mount:e=>this._wrapperElement.set(f.fromNullable(e))}),o.createElement("div",Object.assign({key:"container",ref:e=>this._containerElement.set(f.fromNullable(e))},(0,u.Sh)(X.containerDiv,this.props.themes&&this.props.themes.containerClassName),{onClickCapture:this._onEventActionTaken(e,"onclick"===this.props.eventType),onMouseEnter:t=>"onhover"===this.props.eventType&&this._onEventActionTaken(e,!1)(t)}),this.props.children),d.h.combine(e.state,this._visibilityState,((t,n)=>{if(!n)return null;switch(t){case"dot":const t=this.props.themes&&this.props.themes.spotClassName;return this.props.onboardingStep.dotShown(),o.createElement(ne,Object.assign({customStyle:this._spotStyle,key:"spot",enableOptimizations:this.props.enableOptimizations},(0,u.Sh)(X.onboardingSpot,t),{onClick:()=>e.dotClicked()}));case"popup":return o.createElement(te,{key:"step",title:this.props.title,alignment:this.props.alignment,rect:this._containerElement.view(f.fold((()=>h.Rect.empty),h.Rect.fromEl)),className:this.props.themes&&this.props.themes.notificationClassName,description:this.props.message,icon:f.fromNullable(this.props.icon),onClose:()=>e.popupClosed(),pinTargetRect:this._exactTargetRect.view(m.orUndefined)});default:return null}})))}}ae.contextType=g.u.Context,ae.defaultProps={alignment:"left"};const se=e=>{switch(e){case re.leftTop:return{top:0,left:0};case re.leftCenter:return{top:"50%",left:0};case re.leftBottom:return{top:"100%",left:0};case re.rightTop:return{top:0,left:"100%"};case re.rightCenter:return{top:"50%",left:"100%"};case re.rightBottom:return{top:"100%",left:"100%"};case re.center:return{top:"50%",left:"50%"};default:return(0,p.vE)(e)}},le=(e,t,n)=>{switch(n){case re.rightTop:return{top:0,left:e.left-t.left+e.width};case re.center:return{top:e.top-t.top+e.height/2,left:e.left-t.left+e.width/2};default:return(0,p.vE)(n)}},ce=(e,t,n,r)=>{const i=t.querySelectorAll('[role="button"]'),o=i.length>0&&(void 0===r?i[i.length-1]:i[r]);if(o){const t=h.Rect.fromEl((0,a.unsafeCoerce)(o)),r=h.Rect.fromEl(e);return[le(t,r,n),f.some(t)]}return[{top:"50%",left:"50%"},f.none]};!function(e){e.Context=o.createContext(null),e.ContextMock=({children:t})=>o.createElement(e.Context.Provider,{value:new w,children:t})}(ie||(ie={}))},68511:(e,t,n)=>{n.r(t),n.d(t,{A:()=>i,ArrayUtils:()=>h,Buffer:()=>u,Comparable:()=>c.V3,Cookie:()=>r,CustomError:()=>l.sH,DOM:()=>w,DateUtils:()=>b,E:()=>A,Either:()=>s,Eq:()=>M,Fullstory:()=>v,G:()=>D,IOOption:()=>ke.p,IllegalArgumentError:()=>l.mG,InvariantError:()=>l.ej,Keys:()=>p.R,M:()=>F,MatchingNotExhaustiveError:()=>l.u0,MouseEventUtils:()=>p.T,NEA:()=>B,NotEmpty:()=>E.G,O:()=>U,ObjectUtils:()=>_,Ord:()=>$,PromiseT:()=>o,R:()=>Q,RD:()=>a,ReactContextUtils:()=>xe.Y,RecoverableOperation:()=>Ae.T,StringUtils:()=>C,SymmetricDiff:()=>R.v,TE:()=>Se,TH:()=>Ie,TangentialPoint:()=>T.A,Version:()=>S,Worker:()=>d,and:()=>c.xD,andP:()=>c.W9,assertNever:()=>l.vE,assertNeverSilent:()=>l.L0,choose:()=>c.RN,compare:()=>c.qu,curry:()=>O.W,curryFlip:()=>c.PU,decode:()=>c.Jx,delay:()=>c.gw,emailValidation:()=>c.D6,expectNonNull:()=>l.CE,getWebSocket:()=>c.Ib,invariant:()=>l.kG,isClientFetchError:()=>l.$w,isDefined:()=>c.$K,isServerErrorCode:()=>l.J_,isSetsEq:()=>c.As,lazy:()=>c.Vo,memoize:()=>c.HP,nameValidation:()=>c.wD,noop:()=>c.ZT,not:()=>c.ff,notEmpty:()=>c.Dw,or:()=>c.or,orP:()=>c.Kg,rand:()=>c.TN,registerDebugHelper:()=>c.iR,sum:()=>c.Sm,throttleByPromise:()=>c.Nk,tick:()=>c.Ky,valueFromEnum:()=>c.CI});var r={};n.r(r),n.d(r,{getCookie:()=>f,setCookie:()=>g,setInstallSourceCookie:()=>y});var i={};n.r(i),n.d(i,{Alt:()=>N.Alt,Alternative:()=>N.Alternative,Applicative:()=>N.Applicative,Compactable:()=>N.Compactable,Do:()=>N.Do,Extend:()=>N.Extend,Filterable:()=>N.Filterable,FilterableWithIndex:()=>N.FilterableWithIndex,Foldable:()=>N.Foldable,FoldableWithIndex:()=>N.FoldableWithIndex,Functor:()=>N.Functor,FunctorWithIndex:()=>N.FunctorWithIndex,Monad:()=>N.Monad,Traversable:()=>N.Traversable,TraversableWithIndex:()=>N.TraversableWithIndex,URI:()=>N.URI,Unfoldable:()=>N.Unfoldable,Witherable:()=>N.Witherable,alt:()=>N.alt,altW:()=>N.altW,ap:()=>N.ap,apFirst:()=>N.apFirst,apS:()=>N.apS,apSecond:()=>N.apSecond,array:()=>N.array,bind:()=>N.bind,bindTo:()=>N.bindTo,chain:()=>N.chain,chainFirst:()=>N.chainFirst,chainWithIndex:()=>N.chainWithIndex,chop:()=>N.chop,chunksOf:()=>N.chunksOf,compact:()=>N.compact,comprehension:()=>N.comprehension,cons:()=>N.cons,copy:()=>N.copy,deleteAt:()=>N.deleteAt,difference:()=>N.difference,dropLeft:()=>N.dropLeft,dropLeftWhile:()=>N.dropLeftWhile,dropRight:()=>N.dropRight,duplicate:()=>N.duplicate,elem:()=>N.elem,empty:()=>N.empty,every:()=>N.every,extend:()=>N.extend,filter:()=>N.filter,filterMap:()=>N.filterMap,filterMapWithIndex:()=>N.filterMapWithIndex,filterWithIndex:()=>N.filterWithIndex,findFirst:()=>N.findFirst,findFirstMap:()=>N.findFirstMap,findIndex:()=>N.findIndex,findLast:()=>N.findLast,findLastIndex:()=>N.findLastIndex,findLastMap:()=>N.findLastMap,flatten:()=>N.flatten,foldLeft:()=>N.foldLeft,foldMap:()=>N.foldMap,foldMapWithIndex:()=>N.foldMapWithIndex,foldRight:()=>N.foldRight,getEq:()=>N.getEq,getMonoid:()=>N.getMonoid,getOrd:()=>N.getOrd,getShow:()=>N.getShow,head:()=>N.head,init:()=>N.init,insertAt:()=>N.insertAt,intersection:()=>N.intersection,intersperse:()=>N.intersperse,isEmpty:()=>N.isEmpty,isNonEmpty:()=>N.isNonEmpty,isOutOfBound:()=>N.isOutOfBound,last:()=>N.last,lefts:()=>N.lefts,lookup:()=>N.lookup,makeBy:()=>N.makeBy,map:()=>N.map,mapWithIndex:()=>N.mapWithIndex,modifyAt:()=>N.modifyAt,of:()=>N.of,partition:()=>N.partition,partitionMap:()=>N.partitionMap,partitionMapWithIndex:()=>N.partitionMapWithIndex,partitionWithIndex:()=>N.partitionWithIndex,prependToAll:()=>N.prependToAll,range:()=>N.range,reduce:()=>N.reduce,reduceRight:()=>N.reduceRight,reduceRightWithIndex:()=>N.reduceRightWithIndex,reduceWithIndex:()=>N.reduceWithIndex,replicate:()=>N.replicate,reverse:()=>N.reverse,rights:()=>N.rights,rotate:()=>N.rotate,scanLeft:()=>N.scanLeft,scanRight:()=>N.scanRight,seededShuffle:()=>P,separate:()=>N.separate,sequence:()=>N.sequence,snoc:()=>N.snoc,some:()=>N.some,sort:()=>N.sort,sortBy:()=>N.sortBy,spanLeft:()=>N.spanLeft,splitAt:()=>N.splitAt,tail:()=>N.tail,takeLeft:()=>N.takeLeft,takeLeftWhile:()=>N.takeLeftWhile,takeRight:()=>N.takeRight,traverse:()=>N.traverse,traverseWithIndex:()=>N.traverseWithIndex,unfold:()=>N.unfold,union:()=>N.union,uniq:()=>N.uniq,unsafeDeleteAt:()=>N.unsafeDeleteAt,unsafeInsertAt:()=>N.unsafeInsertAt,unsafeUpdateAt:()=>N.unsafeUpdateAt,unzip:()=>N.unzip,updateAt:()=>N.updateAt,wilt:()=>N.wilt,wither:()=>N.wither,zero:()=>N.zero,zip:()=>N.zip,zipWith:()=>N.zipWith});var o={};n.r(o),n.d(o,{URI:()=>j,ap:()=>V,apFirst:()=>Y,apSecond:()=>X,chain:()=>J,chainFirst:()=>Z,map:()=>K,orElse:()=>G,promise:()=>W,promiseSeq:()=>H});var a={};n.r(a),n.d(a,{Type:()=>q,URI:()=>ne,ap:()=>be,apFirst:()=>we,apSecond:()=>_e,bimap:()=>Ce,chain:()=>ye,chainFirst:()=>ve,error:()=>oe,fatal:()=>ae,flatten:()=>Ee,fold:()=>pe,getEq:()=>de,inProgress:()=>re,isError:()=>ce,isFatal:()=>ue,isInProgress:()=>se,isSuccess:()=>le,map:()=>fe,mapLeft:()=>ge,remoteData:()=>he,success:()=>ie});var s,l=n(22232),c=n(8125);!function(e){function t(e){return"left"===e.kind}e.left=function(e){return{kind:"left",value:e}},e.right=function(e){return{kind:"right",value:e}},e.isLeft=t,e.isRight=function(e){return"right"===e.kind},e.flatMap=function(e,n){return t(e)?e:n(e.value)},e.fromPromise=function(t){return t.then((function(t){return e.right(t)})).catch((function(t){return e.left(t)}))}}(s||(s={}));var u,d=function(){function e(e,t,n,r){void 0===r&&(r=20),this._task=e,this._buffer=t,this._run=n,this._batchSize=r,this._sub=null}return e.prototype.put=function(e){this._buffer.put(e),null===this._sub&&this._buffer.nonEmpty&&this._scheduleWork()},e.prototype.order=function(e){this._buffer.order(e)},e.prototype.flush=function(){this._task(this._buffer.take(this._buffer.length))},Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.length},enumerable:!1,configurable:!0}),e.prototype._scheduleWork=function(){var e=this;this._sub=this._run((function(){e._task(e._buffer.take(e._batchSize)),e._sub=null,e._buffer.nonEmpty&&e._scheduleWork()}))},e.prototype.shutdown=function(){this._sub&&(this._sub.unsubscribe(),this._sub=null)},e}();!function(e){var t=function(){function e(e){this._predicate=e,this._queueMap=new Set,this._queue=[]}return e.prototype.put=function(e){var t,n=this,r=new Set,i=e.reduce((function(e,t){return r.has(t.id)||n._queueMap.has(t.id)||!n._predicate(t)||(r.add(t.id),e.push(t)),e}),[]);(t=this._queue).push.apply(t,i),i.forEach((function(e){var t=e.id;return n._queueMap.add(t)}))},e.prototype.take=function(e){for(var t=0,n=[];t<this._queue.length&&n.length<e;){var r=this._queue[t];this._predicate(r)&&n.push(r),this._queueMap.delete(r.id),t++}return this._queue=this._queue.slice(t),n},e.prototype.order=function(e){this._queue.sort(e)},Object.defineProperty(e.prototype,"length",{get:function(){return this._queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nonEmpty",{get:function(){return this._queue.length>0},enumerable:!1,configurable:!0}),e}();e.LazyPredicateUniq=t}(u||(u={}));var p=n(25781),h=n(89943),m=n(11066);function f(e){return(0,m.Z)(e)}function g(e,t,n){(0,m.Z)(e,t,n)}function y(e){g("grInstallSource","editor",{domain:e,path:"/",expires:new Date(Date.now()+36e5)})}var v,b=n(76024),w=n(19962),_=n(55415),C=n(18208),E=n(80153);!function(e){function t(){return void 0!==self.FS}e.enable=function(){(0,l.kG)(!t(),"FullStory snippet already loaded");var e=document.createElement("script");e.innerHTML="window['_fs_debug'] = true;\n  window['_fs_host'] = 'fullstory.com';\n  window['_fs_org'] = '76Y20';\n  window['_fs_namespace'] = 'FS';\n  (function(m,n,e,t,l,o,g,y){\n    if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window[\"_fs_namespace\"].');} return;}\n    g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];\n    o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';\n    y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);\n    g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};\n    g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};\n    g.clearUserCookie=function(c,d,i){if(!c || document.cookie.match('fs_uid=[\";\"]*\"[\";\"]*\"[\";\"]*\"')){\n      d=n.domain;while(1){n.cookie='fs_uid=;domain='+d+\n      ';path=/;expires='+new Date(0).toUTCString();i=d.indexOf('.');if(i<0)break;d=d.slice(i+1)}}};\n    })(window,document,window['_fs_namespace'],'script','user');",document.head.appendChild(e)},e.isEnabled=t,e.ignoreClass="fs-hide"}(v||(v={}));var S,I=n(40327),k=n(20279),A=n(95574),x=n(95195);!function(e){e.parse=function(e){return new t(String(e))};var t=function(){function t(e){this.value=x.left(new Error("Version is unset")),this.value=(0,I.pipe)(A.tryCatchError((function(){return new k.SemVer(e.replace(/_/g,"-"))})),x.orElse((function(){return x.fromNullable(new Error("Failed to parse version from "+e))((0,k.coerce)(e))})))}return t.prototype.gte=function(e){return this._test(k.gte,e)},t.prototype.gt=function(e){return this._test(k.gt,e)},t.prototype.lt=function(e){return this._test(k.lt,e)},t.prototype.lte=function(e){return this._test(k.lte,e)},t.prototype.eq=function(e){return this._test(k.eq,e)},t.prototype.toString=function(){return(0,I.pipe)(this.value,x.map((function(e){return e.build.length>0?e.toString()+"+"+e.build.join("-"):e.toString()})),x.getOrElse((function(){return"unknown"})))},t.prototype._test=function(t,n){var r=(0,I.pipe)(e.parse(n.toString()).value,x.getOrElse((function(){return null})));return(0,l.kG)(null!==r,"invalid version provided: "+n),(0,I.pipe)(this.value,x.map((function(e){return t(e,r)})),x.getOrElse((function(){return!1})))},t}()}(S||(S={}));var T=n(78738),O=n(68983),R=n(92843),N=n(71249);function L(e){return Math.abs((1.3685032914*e+.7230964518)%1)}var P=function(e){return function(t){for(var n,r=t.slice(0),i=r.length;i>0;){n=L(e);var o=Math.floor(n*i--),a=r[o];r[o]=r[i],r[i]=a}return r}},M=n(20976),D=n(48837),F=n(43675),B=n(3893),U=n(83078),$=n(4807),j="Promise",W={URI:j,map:function(e,t){return e.then(t)},of:Promise.resolve.bind(Promise),ap:function(e,t){return Promise.all([e,t]).then((function(e){return(0,e[0])(e[1])}))},chain:function(e,t){return e.then(t)},mapLeft:function(e,t){return e.catch((function(e){return Promise.reject(t(e))}))},bimap:function(e,t,n){return e.then(n,(function(e){return Promise.reject(t(e))}))},throwError:function(e){return Promise.reject(e)}};function G(e){return function(t){return t.catch(e)}}var q,H=_.merge(W,{ap:function(e,t){return e.then((function(e){return t.then(e)}))}}),z=(0,I.pipeable)(W),V=z.ap,Y=z.apFirst,X=z.apSecond,J=z.chain,Z=z.chainFirst,K=z.map,Q=n(35407),ee=n(73975),te=n(57050),ne="RemoteData";!function(e){e.InProgress="InProgress",e.Success="Success",e.Error="Error",e.Fatal="Fatal"}(q||(q={}));var re={type:q.InProgress};function ie(e){return{type:q.Success,value:e}}function oe(e,t){return{type:q.Error,error:e,status:t}}function ae(e){return{type:q.Fatal,error:e}}function se(e){return e.type===q.InProgress}function le(e){return e.type===q.Success}function ce(e){return e.type===q.Error}function ue(e){return e.type===q.Fatal}function de(e,t){return(0,ee.fromEquals)((function(n,r){return"InProgress"===n.type&&"InProgress"===r.type||("Success"===n.type&&"Success"===r.type?e.equals(n.value,r.value):("Error"===n.type&&"Error"===r.type||"Fatal"===n.type&&"Fatal"===r.type)&&t.equals(n.error,r.error))}))}function pe(e){return function(t){switch(t.type){case q.InProgress:return e.onInProgress();case q.Success:return e.onSuccess(t.value);case q.Error:return e.onError(t.error);case q.Fatal:return e.onFatal(t.error);default:return(0,l.vE)(t)}}}var he={URI:ne,of:ie,ap:function(e,t){return le(e)?le(t)?ie(e.value(t.value)):t:e},map:function(e,t){return le(e)?ie(t(e.value)):e},chain:function(e,t){return le(e)?t(e.value):e},bimap:function(e,t,n){return se(e)?e:le(e)?ie(n(e.value)):ce(e)?oe(t(e.error),e.status):ae(t(e.error))},mapLeft:function(e,t){return he.bimap(e,t,te.identity)}},me=(0,I.pipeable)(he),fe=me.map,ge=me.mapLeft,ye=me.chain,ve=me.chainFirst,be=me.ap,we=me.apFirst,_e=me.apSecond,Ce=me.bimap,Ee=me.flatten,Se=n(51072),Ie=n(1065),ke=n(39160),Ae=n(81670),xe=n(88056)},25781:(e,t,n)=>{var r,i;n.d(t,{R:()=>r,T:()=>i}),function(e){e.ESC_CODE=27}(r||(r={})),function(e){e.isLeftMouseButtom=function(e){return 1===e.which||0===e.button}}(i||(i={}))},92843:(e,t,n)=>{n.d(t,{v:()=>r,u:()=>i});var r,i,o=n(90329),a=n(57050),s=n(40327),l=n(64681),c=n(5114),u=n(93756),d=n(1065);!function(e){function t(t,n,r){return function(i){return e.fromMutation((function(o){(0,s.pipe)(i,e.forEach((function(e,n){return o.set(n,u.t$(t(n,e)))}),(function(e,t,r){return(0,s.pipe)(n(r,e,t),(function(e){var t=e[0],n=e[1];return o.set(r,u.Hk(t,n))}))}),(function(e,t){return o.set(t,u.F2(r(t,e)))})))}))}}function n(t,n,r){return function(i){return e.fromMutation((function(o){(0,s.pipe)(i,e.forEach((function(e,n){return t(n,e)&&o.set(n,u.t$(e))}),(function(e,t,r){return n(r,e,t)&&o.set(r,u.Hk(e,t))}),(function(e,t){return r(t,e)&&o.set(t,u.F2(e))})))}))}}function r(e){return function(t,n,r){return function(o){var a=i.iso().unwrap(o),s=e.empty;return a.forEach((function(i,o){s=e.concat(s,u.g_((function(e){return t(o,e)}),(function(e){return r(o,e)}),(function(e,t){return n(o,e,t)}))(i))})),s}}}e.reduce=function(e,t,n,r){return function(o){var a=i.iso().unwrap(o),s=e;return a.forEach((function(e,i){s=u.g_((function(e){return t(s,e,i)}),(function(e){return r(s,e,i)}),(function(e,t){return n(s,e,t,i)}))(e)})),s}},e.mapWithIndex=t,e.map=function(e,n,r){return t((function(t,n){return e(n)}),(function(e,t,r){return n(t,r)}),(function(e,t){return r(t)}))},e.filterWithIndex=n,e.filter=function(e,t,r){return n((function(t,n){return e(n)}),(function(e,n,r){return t(n,r)}),(function(e,t){return r(t)}))},e.foldMapWithIndex=r,e.foldMap=function(e){return function(t,n,i){return r(e)((function(e,n){return t(n)}),(function(e,t,r){return n(t,r)}),(function(e,t){return i(t)}))}},e.forEach=function(e,t,n){return function(r){i.iso().unwrap(r).forEach((function(r,i){u.g_((function(t){return e(t,i)}),(function(e){return n(e,i)}),(function(e,n){return t(e,n,i)}))(r)}))}},e.fromMutation=function(e){var t=i.empty();return e(t),i.iso().wrap(t)},e.empty=function(){return i.iso().wrap(i.empty())},e.concat=function(e,t,n){var r=i.iso();return r.wrap(i.concat(e,r.unwrap(t),r.unwrap(n)))},e.inverse=function(e){var t=i.iso();return(0,s.pipe)(t.unwrap(e),o.UI(d.swap),t.wrap)},e.getEq=function(e,t){return l.Eh(i.getEq(e,t))},e.toJSON=function(e){return Array.from(i.iso().unwrap(e))},e.getShow=function(e,t){return i.getShow(e,t)},e.isEmpty=function(e){return 0===i.iso().unwrap(e).size}}(r||(r={})),function(e){e.iso=function(){return l.k4()},e.empty=function(){return new Map};e.concat=function(e,t,n){var r=new Map(t);return n.forEach((function(t,n){r.has(n)?(0,s.pipe)(function(e,t,n){return u.Eh(e,e).equals(t,n)?c.some(n):u.Eh(e,e).equals(t,d.swap(n))?c.none:u.nM(t)?u.g_((function(){return c.some(u.t$(t.left))}),(function(e){return c.some(u.Hk(t.left,e))}),(function(n,r){return e.equals(t.left,r)?c.none:c.some(u.Hk(t.left,r))}))(n):u.tO(t)?u.g_((function(){return c.none}),(0,a.flow)(u.F2,c.some),(function(e,t){return c.some(u.F2(t))}))(n):u.g_((function(){return c.some(u.t$(t.left))}),(0,a.flow)(u.F2,c.some),(function(n,r){return e.equals(t.left,r)?c.none:c.some(u.Hk(t.left,r))}))(n)}(e,r.get(n),t),c.fold((function(){r.delete(n)}),(function(e){return r.set(n,e)}))):r.set(n,t)})),r},e.inverse=o.UI(d.swap),e.getEq=function(e,t){return o.Eh(e,u.Eh(t,t))},e.getShow=function(e,t){return o.ZN(e,u.ZN(t,t))}}(i||(i={}))},78738:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(59312),o=n(71249),a=n(45614),s=n(32426),l=n(40327),c=n(19962),u=n(22232),d=n(5114),p=n(95195),h=n(95574);!function(e){var t,n,r;function m(e,n){var r=n.position,o=n.point,a={width:Math.trunc(e.width),height:Math.trunc(e.height)};return c.Rect.validate(t.match((function(){return(0,i.__assign)({top:o.y,right:o.x,bottom:o.y+a.height,left:o.x-a.width},a)}),(function(){return(0,i.__assign)({top:o.y-a.height,right:o.x,bottom:o.y,left:o.x-a.width},a)}),(function(){return(0,i.__assign)({top:o.y-a.height,right:o.x+a.width,bottom:o.y,left:o.x},a)}),(function(){return(0,i.__assign)({top:o.y,right:o.x+a.width,bottom:o.y+a.height,left:o.x},a)}))(r))}function f(t){return e.topLeft(c.Rect.Point.normalize({x:t.left,y:t.top}))}!function(e){e.topLeft="topLeft",e.topRight="topRight",e.bottomRight="bottomRight",e.bottomLeft="bottomLeft"}(t=e.Position||(e.Position={})),function(e){e.match=function(t,n,r,i){return function(o){switch(o){case e.topRight:return t();case e.bottomRight:return n();case e.bottomLeft:return r();case e.topLeft:return i();default:return(0,u.vE)(o)}}}}(t=e.Position||(e.Position={})),e.topLeft=function(e){return{position:t.topLeft,point:c.Rect.Point.normalize(e)}},e.topRight=function(e){return{position:t.topRight,point:c.Rect.Point.normalize(e)}},e.bottomRight=function(e){return{position:t.bottomRight,point:c.Rect.Point.normalize(e)}},e.bottomLeft=function(e){return{position:t.bottomLeft,point:c.Rect.Point.normalize(e)}},e.relativeTo=function(e,t){return{position:e.position,point:c.Rect.Point.relativeTo(e.point,t)}},e.empty=e.topLeft(c.Rect.Point.empty),e.toRect=m,e.fromRect=f,e.inRect=function(e,t){var n=t.point;return c.Rect.hasPoint(e,n)},e.toCss=function(e){var n=e.position,r=e.point;return t.match((function(){return{top:r.y,right:r.x}}),(function(){return{right:r.x,bottom:r.y}}),(function(){return{bottom:r.y,left:r.x}}),(function(){return{top:r.y,left:r.x}}))(n)},function(t){t.create=function(e,t){return(0,u.kG)(e.point.x===t.point.x||e.point.y===t.point.y,"can not form Zone without a common dimension",(function(){return JSON.stringify({a:e,b:t})})),[e,t]},t.bySide=function(n,r){return c.Rect.Side.match((function(){return t.create(e.bottomLeft({x:Math.ceil(r.left),y:Math.ceil(r.top)}),e.bottomRight({x:Math.floor(r.right),y:Math.ceil(r.top)}))}),(function(){return t.create(e.topLeft({x:Math.floor(r.right),y:Math.ceil(r.top)}),e.bottomLeft({x:Math.floor(r.right),y:Math.floor(r.bottom)}))}),(function(){return t.create(e.topLeft({x:Math.ceil(r.left),y:Math.floor(r.bottom)}),e.topRight({x:Math.floor(r.right),y:Math.floor(r.bottom)}))}),(function(){return t.create(e.topRight({x:Math.ceil(r.left),y:Math.ceil(r.top)}),e.bottomRight({x:Math.ceil(r.left),y:Math.floor(r.bottom)}))}))(n)}}(n=e.Zone||(e.Zone={})),function(e){e.byAxis=function(e,t){return a.fromFoldable((0,s.getFirstSemigroup)(),o.array)(c.Rect.Axis.toSides(e).map((function(e){return[e,n.bySide(e,t)]})))}}(e.Variants||(e.Variants={})),function(t){function n(e,t){return(0,l.pipe)(c.Rect.intersection(e,t),d.map((function(e){var n=e.width/t.width,r=e.height/t.height,i=(Number.isNaN(n)?0:n/2)+(Number.isNaN(r)?0:r/2);return(0,u.kG)(i>=0,"quality can not be negavite: "+i),(0,u.kG)(i<=1,"quality can be higher than 1: "+i),i})))}t.empty={quality:0,point:e.empty},t.qualityOfIntersection=n,t.byViewport=function(e,t){return{quality:(0,l.pipe)(n(e,t),d.getOrElse((function(){return 0})))+(0,l.pipe)(c.Rect.scale(2,t),p.chain(c.Rect.normalize),d.fromEither,d.chain((function(t){return n(e,t)})),d.getOrElse((function(){return 0}))),point:f(t)}},t.fromZone=function(e,n,r){return(0,l.pipe)(o.array.traverse(p.either)(r,(function(e){return m(n,e)})),p.chain((function(e){var t=e[0],n=e[1];return c.Rect.join(t,n)})),p.chain((function(e){return c.Box.placeIntoRect(n,e)})),p.map((function(n){return n.map((function(n){return t.byViewport(e,n)}))})))}}(r=e.Qualified||(e.Qualified={})),function(e){e.build=function(e,t,n){return(0,l.pipe)(n,a.map((function(n){return r.fromZone(e,t,n)})))}}(e.QualifiedVariants||(e.QualifiedVariants={})),function(e){var t;!function(e){e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right",e[e.edges=20]="edges",e[e.any=210]="any"}(t=e.Placement||(e.Placement={})),e.takeBy=function(e,t){return function(n){return(0,l.pipe)(n,a.reduceWithIndex({point:r.empty,side:e},(function(n,r,i){return(0,l.pipe)(i,p.map((function(i){return i.filter((function(r,i){return t.toString().includes(i.toString())&&e===n})).reduce((function(e,t){return t.quality>e.point.quality?{point:t,side:n}:e}),r)})),h.unsafeGet)}))).point}},e.preferBy=function(e,t){return function(n){return(0,l.pipe)(n,a.reduceWithIndex({point:r.empty,side:e},(function(n,r,i){return(0,l.pipe)(i,p.map((function(i){return i.reduce((function(r,i,o){return i.quality>r.point.quality||i.quality===r.point.quality&&t.toString().includes(o.toString())&&e===n?{point:i,side:n}:r}),r)})),h.unsafeGet)}))).point}},e.preferTopMiddle=e.preferBy("top",t.middle),e.preferTopEdges=e.preferBy("top",t.edges)}(e.Selector||(e.Selector={}))}(r||(r={}))},20976:(e,t,n)=>{n.r(t),n.d(t,{Contravariant:()=>i.Contravariant,URI:()=>i.URI,contramap:()=>i.contramap,eq:()=>i.eq,eqBoolean:()=>i.eqBoolean,eqDate:()=>i.eqDate,eqNumber:()=>i.eqNumber,eqStrict:()=>i.eqStrict,eqString:()=>i.eqString,fromEquals:()=>i.fromEquals,getMonoid:()=>i.getMonoid,getStructEq:()=>i.getStructEq,getTupleEq:()=>i.getTupleEq,strictEqual:()=>i.strictEqual,eqToInvariant:()=>o,eqEmpty:()=>a});var r=n(22232),i=n(73975);function o(e){return{equals:function(t,n){return(0,r.kG)(e.equals(t,n),"absurd state accured,\n"+e.show(t)+"\ndoes not equal to:\n"+e.show(n)),!0}}}var a={equals:function(){return!0}}},43675:(e,t,n)=>{n.r(t),n.d(t,{Compactable:()=>r.Ri,Filterable:()=>r.xu,Functor:()=>r.dO,collect:()=>r.KM,compact:()=>r.oA,deleteAt:()=>r.EG,elem:()=>r.t9,empty:()=>r.cS,filter:()=>r.hX,filterMap:()=>r.DZ,fromFoldable:()=>r.sQ,getEq:()=>r.Eh,getFilterableWithIndex:()=>r.qO,getMonoid:()=>r.uZ,getShow:()=>r.ZN,getWitherable:()=>r.YH,insertAt:()=>r.ZQ,isEmpty:()=>r.xb,isSubmap:()=>r.kr,keys:()=>r.XP,lookup:()=>r.P5,lookupWithKey:()=>r.FP,map:()=>r.UI,mapWithIndex:()=>r.Su,map_:()=>r.N,member:()=>r.fP,modifyAt:()=>r.cq,partition:()=>r.uK,partitionMap:()=>r.tV,pop:()=>r.Sw,separate:()=>r.oh,singleton:()=>r.ri,size:()=>r.dp,toArray:()=>r.qo,toUnfoldable:()=>r.nd,updateAt:()=>r.Wl,values:()=>r.VO,URI:()=>p,getFoldableWithIndex:()=>h,getEqByValue:()=>m,symmetricDiff:()=>f,leftToRight:()=>y,rightToLeft:()=>v,Merger:()=>g,diffKeys:()=>w});var r=n(90329),i=n(57050),o=n(40327),a=n(92843),s=n(95195),l=n(5114),c=n(83078),u=n(93756),d=n(1065),p="Map";function h(){var e=function(e,t,n){var r=t;return e.forEach((function(e,t){return r=n(t,r,e)})),r};return{URI:p,_E:void 0,reduce:function(t,n,r){return e(t,n,(function(e,t,n){return r(t,n)}))},foldMap:function(t){return function(n,r){return e(n,t.empty,(function(e,n,i){return t.concat(n,r(i))}))}},reduceRight:function(t,n,r){return e(t,n,(function(e,t,n){return r(n,t)}))},reduceWithIndex:e,reduceRightWithIndex:function(t,n,r){return e(t,n,(function(e,t,n){return r(e,n,t)}))},foldMapWithIndex:function(t){return function(n,r){return e(n,t.empty,(function(e,n,i){return t.concat(n,r(e,i))}))}}}}function m(e){return{equals:function(t,n){if(t===n)return!0;if(t.size===n.size){for(var r=t.keys(),i=void 0;!(i=r.next()).done;)if(!n.has(i.value)||!e.equals(t.get(i.value),n.get(i.value)))return!1;return!0}return!1}}}function f(e){return function(t,n){return a.v.fromMutation((function(r){return t.forEach((function(t,i){if(n.has(i)){var o=n.get(i);e.equals(t,o)||r.set(i,u.Hk(t,o))}else r.set(i,u.t$(t))})),n.forEach((function(n,i){if(t.has(i)){var o=t.get(i);e.equals(o,n)||r.set(i,u.Hk(o,n))}else r.set(i,u.F2(n))})),r}))}}var g,y=b(i.identity),v=b(d.swap);function b(e){return function(t,n,r){var i=new Map(n),c=new Map;return a.u.iso().unwrap(r).forEach((function(n,r){(0,o.pipe)(n,e,t(l.fromNullable(i.get(r))),u.Pd((function(e){return c.set(r,e)}),l.fold((function(){i.delete(r)}),(function(e){return i.set(r,e)}))))})),c.size>0?s.left({recovered:i,rejected:c}):s.right(i)}}function w(e){return function(t,n){var i=[],a=new Map(t);return n.forEach((function(t,n){(0,o.pipe)(r.FP(e)(n,a),c.tapLeft((function(){return i.push(n)})))})),i}}!function(e){e.createStrict=function(e){return function(t){return u.g_((function(n){return l.isNone(t)?u.t$("can not remove non existent entry: left("+e.show(n)+")"):e.equals(t.value,n)?u.F2(l.none):u.t$("can not remove non equal entry: target("+e.show(t.value)+") left("+e.show(n)+")")}),(function(n){return l.isSome(t)?u.t$("can not add existent entry: target("+e.show(t.value)+") right("+e.show(n)+")"):u.F2(l.some(n))}),(function(n,r){return e.equals(n,r)?u.t$("can not apply update with equals parts: left("+e.show(n)+") right("+e.show(r)+")"):l.isNone(t)?u.t$("can not update non existent entry: left("+e.show(n)+") right("+e.show(r)+")"):e.equals(t.value,n)?u.F2(l.some(r)):u.t$("can not apply update on non equal entry: target("+e.show(t.value)+") left("+e.show(n)+") right("+e.show(r)+")")}))}},e.createLoose=function(e){return function(t){return u.g_((function(n){return l.isNone(t)?u.t$("can not remove non existent entry: left("+e.show(n)+")"):e.equals(t.value,n)?u.F2(l.none):u.Hk("removed non equal entry: target("+e.show(t.value)+") left("+e.show(n)+")",l.none)}),(function(n){return l.isSome(t)?u.Hk("existent entry was overwritten: target("+e.show(t.value)+") right("+e.show(n)+")",l.some(n)):u.F2(l.some(n))}),(function(n,r){var i=e.equals(n,r)?l.some("unexpected equal parts in provided update"):l.none;return l.isNone(t)?u.Hk((0,o.pipe)(i,l.map((function(e){return e+", "})),l.getOrElse((function(){return""})))+"update applied on non existent entry: left("+e.show(n)+") right("+e.show(r)+")",l.some(r)):e.equals(t.value,n)?(0,o.pipe)(i,l.map((function(t){return t+": left("+e.show(n)+") right("+e.show(r)+")"})),l.fold((function(){return u.F2(l.some(r))}),(function(e){return u.Hk(e,l.some(r))}))):u.Hk((0,o.pipe)(i,l.map((function(e){return e+", "})),l.getOrElse((function(){return""})))+"update applied on non equal entry: target("+e.show(t.value)+") left("+e.show(n)+") right("+e.show(r)+")",l.some(r))}))}}}(g||(g={}))},35407:(e,t,n)=>{n.r(t),n.d(t,{Applicative:()=>i.g1,Category:()=>i.WD,Choice:()=>i.Lv,Do:()=>i.Do,Functor:()=>i.dO,Monad:()=>i.UA,Profunctor:()=>i.y$,Strong:()=>i.cK,URI:()=>i.ov,ap:()=>i.ap,apFirst:()=>i.N,apS:()=>i.Qt,apSW:()=>i.W5,apSecond:()=>i.a1,apW:()=>i.sL,ask:()=>i.mF,asks:()=>i.VF,bind:()=>i.ak,bindTo:()=>i.YO,bindW:()=>i.NP,chain:()=>i.tS,chainFirst:()=>i.mU,chainW:()=>i.Zl,compose:()=>i.qC,flatten:()=>i.xH,getMonoid:()=>i.uZ,getSemigroup:()=>i.jG,id:()=>i.id,local:()=>i.I_,map:()=>i.UI,of:()=>i.of,promap:()=>i.PY,reader:()=>i.r1,sequenceArray:()=>i.RD,traverseArray:()=>i.uU,traverseArrayWithIndex:()=>i.xW,createFrom:()=>a,composeS:()=>s});var r=n(17771),i=n(19429),o=n(55415),a=function(e){return function(t){return i.r1.map((0,r.g)(i.r1)(e,t),(function(e){var t=e[0],n=e[1];return(0,o.deepUpdate)(t,n)}))}},s=(0,r.Y)(i.r1)},51072:(e,t,n)=>{n.r(t),n.d(t,{Alt:()=>i.Rr,ApplicativePar:()=>i.qA,ApplicativeSeq:()=>i.GI,Bifunctor:()=>i.a_,Do:()=>i.Do,Functor:()=>i.dO,URI:()=>i.ov,alt:()=>i.wp,altW:()=>i.Gk,ap:()=>i.ap,apFirst:()=>i.N,apS:()=>i.Qt,apSW:()=>i.W5,apSecond:()=>i.a1,apW:()=>i.sL,bimap:()=>i.Pd,bind:()=>i.ak,bindTo:()=>i.YO,bindW:()=>i.NP,bracket:()=>i.wk,chainEitherK:()=>i.fX,chainEitherKW:()=>i.$h,chainFirst:()=>i.mU,chainFirstW:()=>i.Z6,chainIOEitherK:()=>i.Vh,chainIOEitherKW:()=>i.er,chainW:()=>i.Zl,filterOrElse:()=>i.Y$,filterOrElseW:()=>i.sf,flatten:()=>i.xH,fold:()=>i.g_,fromEitherK:()=>i.Dj,fromIO:()=>i.tD,fromIOEither:()=>i.fj,fromIOEitherK:()=>i.de,fromOption:()=>i.Yo,fromPredicate:()=>i.DT,fromTask:()=>i.fF,getAltTaskValidation:()=>i.NZ,getApplicativeTaskValidation:()=>i.IH,getApplyMonoid:()=>i.$4,getApplySemigroup:()=>i.gM,getFilterable:()=>i.VU,getOrElse:()=>i.fS,getOrElseW:()=>i.pF,getSemigroup:()=>i.jG,getTaskValidation:()=>i.ey,left:()=>i.t$,leftIO:()=>i.Op,leftTask:()=>i.lk,map:()=>i.UI,mapLeft:()=>i.Vn,of:()=>i.of,orElse:()=>i.vx,right:()=>i.F2,rightIO:()=>i.dk,rightTask:()=>i.QM,sequenceArray:()=>i.RD,sequenceSeqArray:()=>i.mg,swap:()=>i.LF,taskEither:()=>i.Ij,taskEitherSeq:()=>i.dg,taskify:()=>i.K9,throwError:()=>i._y,traverseArray:()=>i.uU,traverseArrayWithIndex:()=>i.xW,traverseSeqArray:()=>i.pE,traverseSeqArrayWithIndex:()=>i.Z9,tryCatch:()=>i.Y3,tryCatchK:()=>i.it,chain:()=>i.tS,fromEither:()=>i.Uo,toPromise:()=>c,flattenLeft:()=>u,flatMap:()=>d,flatMapEither:()=>p,flatMapEither2:()=>h,tryDelay:()=>m});var r=n(99950),i=n(62965),o=n(57050),a=n(40327),s=n(95574),l=n(5114);function c(e){return e().then(s.unsafeGet)}var u=function(e){return i.Ij.chain(e,o.identity)},d=i.tS,p=function(e){return r.map(s.flatMap(e))},h=function(e){return function(t){return(0,a.pipe)(t,(0,i.tS)((function(t){return(0,i.Uo)(e(t))})))}};function m(e,t,n){return(0,a.pipe)(e,(0,i.g_)((function(o){var s=(0,a.pipe)((0,i.t$)(o),r.delay(n));return(0,a.pipe)(t(o),l.fold((function(){return(0,i.t$)(o)}),(function(t){var n=(0,a.pipe)(t,r.chain((function(){return(0,i.F2)(void 0)}))),o=r.getRaceMonoid().concat(s,n);return(0,a.pipe)(o,(0,i.tS)((function(){return e})))})))}),(function(e){return(0,i.F2)(e)})))}},1065:(e,t,n)=>{n.r(t),n.d(t,{Bifunctor:()=>i.a_,Foldable:()=>i.$6,Functor:()=>i.dO,Traversable:()=>i.Kd,URI:()=>i.ov,bimap:()=>i.Pd,both:()=>i.Hk,fold:()=>i.g_,foldMap:()=>i.Lx,fromOptions:()=>i.Qp,getApplicative:()=>i.RY,getEq:()=>i.Eh,getLeft:()=>i.IS,getLeftOnly:()=>i.id,getMonad:()=>i.ML,getRight:()=>i.EK,getRightOnly:()=>i.aQ,getSemigroup:()=>i.jG,getShow:()=>i.ZN,isBoth:()=>i.WP,isLeft:()=>i.nM,isRight:()=>i.tO,left:()=>i.t$,leftOrBoth:()=>i.ED,map:()=>i.UI,mapLeft:()=>i.Vn,reduce:()=>i.u4,reduceRight:()=>i.nq,right:()=>i.F2,rightOrBoth:()=>i.jX,sequence:()=>i.vP,these:()=>i.vC,toTuple:()=>i.Vb,traverse:()=>i.fw,swap:()=>o});var r=n(95195),i=n(93756);function o(e){return(0,i.WP)(e)?(0,i.Hk)(e.right,e.left):(0,r.swap)(e)}},39160:(e,t,n)=>{n.d(t,{p:()=>l});var r=n(59312),i=n(11064),o=n(50157);var a=n(5114);function s(e){var t,n,r=(t=e,n=a.Applicative,{map:(0,o.o)(t,n).map,of:function(e){return t.of(n.of(e))},ap:function(e,r){return t.ap(t.map(e,(function(e){return function(t){return n.ap(e,t)}})),r)}}),i=e.of(a.none);return{map:r.map,ap:r.ap,of:r.of,chain:function(t,n){return e.chain(t,(0,a.fold)((function(){return i}),n))},alt:function(t,n){return e.chain(t,(0,a.fold)(n,(function(t){return e.of((0,a.some)(t))})))},fold:function(t,n,r){return e.chain(t,(0,a.fold)(n,r))},getOrElse:function(t,n){return e.chain(t,(0,a.fold)(n,e.of))},fromM:function(t){return e.map(t,a.some)},none:function(){return i}}}var l,c=n(40327);!function(e){var t;e.URI="IOOption",e.ioOption=(0,r.__assign)({URI:e.URI},s(i.io)),t=(0,c.pipeable)(e.ioOption),e.map=t.map,e.chain=t.chain,e.ap=t.ap,e.alt=t.alt,e.apFirst=t.apFirst,e.apSecond=t.apSecond,e.of=e.ioOption.of,e.fold=function(t,n){return function(r){return e.ioOption.fold(r,t,n)}},e.fromM=e.ioOption.fromM}(l||(l={}))},84347:(e,t,n)=>{e.exports=n(87612)},17123:e=>{var t={};t.create=function(e,t){var n=document.createElement(e);return n.className=t,n},t.appendTo=function(e,t){return t.appendChild(e),e},t.css=function(e,t,n){return"object"==typeof t?function(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r=r.toString()+"px"),e.style[n]=r}return e}(e,t):void 0===n?function(e,t){return self.getComputedStyle(e)[t]}(e,t):function(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}(e,t,n)},t.matches=function(e,t){return void 0!==e.matches?e.matches(t):e.msMatchesSelector(t)},t.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},t.queryChildren=function(e,n){return Array.prototype.filter.call(e.childNodes,(function(e){return t.matches(e,n)}))},e.exports=t},97490:e=>{var t=function(e){this.element=e,this.events={}};t.prototype.bind=function(e,t,n){void 0===this.events[e]&&(this.events[e]=[]);var r={capture:!1};this.events[e].push(t),this.element.addEventListener(e,t,n?Object.assign({},r,n):r)},t.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter((function(r){return!(!n||r===t)||(this.element.removeEventListener(e,r,!1),!1)}),this)},t.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var n=function(){this.eventElements=[]};n.prototype.eventElement=function(e){var n=this.eventElements.filter((function(t){return t.element===e}))[0];return void 0===n&&(n=new t(e),this.eventElements.push(n)),n},n.prototype.bind=function(e,t,n,r){this.eventElement(e).bind(t,n,r)},n.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},n.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},n.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)},e.exports=n},48928:e=>{e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},95889:(e,t,n)=>{var r=n(17123),i=t.toInt=function(e){return parseInt(e,10)||0};function o(e){return["ps--in-scrolling"].concat(void 0===e?["ps--x","ps--y"]:["ps--"+e])}t.isEditable=function(e){return r.matches(e,"input,[contenteditable]")||r.matches(e,"select,[contenteditable]")||r.matches(e,"textarea,[contenteditable]")||r.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=0;t<e.classList.length;t++){var n=e.classList[t];0===n.indexOf("ps-")&&e.classList.remove(n)}},t.outerWidth=function(e){return i(r.css(e,"width"))+i(r.css(e,"paddingLeft"))+i(r.css(e,"paddingRight"))+i(r.css(e,"borderLeftWidth"))+i(r.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){for(var n=o(t),r=0;r<n.length;r++)e.classList.add(n[r])},t.stopScrolling=function(e,t){for(var n=o(t),r=0;r<n.length;r++)e.classList.remove(n[r])},t.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof self&&("ontouchstart"in self||self.DocumentTouch&&document instanceof self.DocumentTouch),supportsIePointer:"undefined"!=typeof self&&null!==self.navigator.msMaxTouchPoints}},87612:(e,t,n)=>{var r=n(81489),i=n(41835),o=n(64114);e.exports={initialize:i,update:o,destroy:r}},48300:e=>{e.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},81489:(e,t,n)=>{var r=n(95889),i=n(17123),o=n(6109);e.exports=function(e){var t=o.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),r.removePsClasses(e),o.remove(e))}},3708:(e,t,n)=>{var r=n(6109),i=n(86057),o=n(21459);e.exports=function(e){!function(e,t){function n(e){return e.getBoundingClientRect()}var r=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",r),t.event.bind(t.scrollbarYRail,"click",(function(r){var a=r.pageY-self.pageYOffset-n(t.scrollbarYRail).top>t.scrollbarYTop?1:-1;o(e,"top",e.scrollTop+a*t.containerHeight),i(e),r.stopPropagation()})),t.event.bind(t.scrollbarX,"click",r),t.event.bind(t.scrollbarXRail,"click",(function(r){var a=r.pageX-self.pageXOffset-n(t.scrollbarXRail).left>t.scrollbarXLeft?1:-1;o(e,"left",e.scrollLeft+a*t.containerWidth),i(e),r.stopPropagation()}))}(e,r.get(e))}},35672:(e,t,n)=>{var r=n(95889),i=n(17123),o=n(6109),a=n(86057),s=n(21459);function l(e,t){var n=null,o=null;var l=function(i){!function(i){var o=n+i*t.railXRatio,a=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=o<0?0:o>a?a:o;var l=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;s(e,"left",l)}(i.pageX-o),a(e),i.stopPropagation(),i.preventDefault()},c=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",l)};t.event.bind(t.scrollbarX,"mousedown",(function(a){o=a.pageX,n=r.toInt(i.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",l),t.event.once(t.ownerDocument,"mouseup",c),a.stopPropagation(),a.preventDefault()}))}function c(e,t){var n=null,o=null;var l=function(i){!function(i){var o=n+i*t.railYRatio,a=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=o<0?0:o>a?a:o;var l=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));s(e,"top",l)}(i.pageY-o),a(e),i.stopPropagation(),i.preventDefault()},c=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",l)};t.event.bind(t.scrollbarY,"mousedown",(function(a){o=a.pageY,n=r.toInt(i.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",l),t.event.once(t.ownerDocument,"mouseup",c),a.stopPropagation(),a.preventDefault()}))}e.exports=function(e){var t=o.get(e);l(e,t),c(e,t)}},94742:(e,t,n)=>{var r=n(95889),i=n(17123),o=n(6109),a=n(86057),s=n(21459);function l(e,t){var n=!1;t.event.bind(e,"mouseenter",(function(){n=!0})),t.event.bind(e,"mouseleave",(function(){n=!1}));t.event.bind(t.ownerDocument,"keydown",(function(o){if(!(o.isDefaultPrevented&&o.isDefaultPrevented()||o.defaultPrevented)){var l=i.matches(t.scrollbarX,":focus")||i.matches(t.scrollbarY,":focus");if(n||l){var c=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(c){if("IFRAME"===c.tagName)c=c.contentDocument.activeElement;else for(;c.shadowRoot;)c=c.shadowRoot.activeElement;if(r.isEditable(c))return}var u=0,d=0;switch(o.which){case 37:u=o.metaKey?-t.contentWidth:o.altKey?-t.containerWidth:-30;break;case 38:d=o.metaKey?t.contentHeight:o.altKey?t.containerHeight:30;break;case 39:u=o.metaKey?t.contentWidth:o.altKey?t.containerWidth:30;break;case 40:d=o.metaKey?-t.contentHeight:o.altKey?-t.containerHeight:-30;break;case 33:d=90;break;case 32:d=o.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=o.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=o.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}s(e,"top",e.scrollTop-d),s(e,"left",e.scrollLeft+u),a(e),function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(u,d)&&o.preventDefault()}}}))}e.exports=function(e){l(e,o.get(e))}},83476:(e,t,n)=>{var r=n(6109),i=n(86057),o=n(21459);function a(e,t){var n=!1;function r(r){var a=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(r),s=a[0],l=a[1];(function(t,n){var r=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){var i=self.getComputedStyle(r);if(![i.overflow,i.overflowX,i.overflowY].join("").match(/(scroll|auto)/))return!1;var o=r.scrollHeight-r.clientHeight;if(o>0&&!(0===r.scrollTop&&n>0||r.scrollTop===o&&n<0))return!0;var a=r.scrollLeft-r.clientWidth;if(a>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===a&&t>0))return!0}return!1})(s,l)||(n=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(o(e,"top",l?e.scrollTop-l*t.settings.wheelSpeed:e.scrollTop+s*t.settings.wheelSpeed),n=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(o(e,"left",s?e.scrollLeft+s*t.settings.wheelSpeed:e.scrollLeft-l*t.settings.wheelSpeed),n=!0):(o(e,"top",e.scrollTop-l*t.settings.wheelSpeed),o(e,"left",e.scrollLeft+s*t.settings.wheelSpeed)),i(e),(n=n||function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(s,l))&&(r.stopPropagation(),r.preventDefault()))}void 0!==self.onwheel?t.event.bind(e,"wheel",r):void 0!==self.onmousewheel&&t.event.bind(e,"mousewheel",r)}e.exports=function(e){a(e,r.get(e))}},15335:(e,t,n)=>{var r=n(6109),i=n(86057);e.exports=function(e){!function(e,t){t.event.bind(e,"scroll",(function(){i(e)}))}(e,r.get(e))}},23405:(e,t,n)=>{var r=n(6109),i=n(86057),o=n(21459);e.exports=function(e){!function(e,t){function n(n){var r=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(n),a=r[0],s=r[1];t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?o(e,"top",s?e.scrollTop-s*t.settings.wheelSpeed:e.scrollTop+a*t.settings.wheelSpeed):t.scrollbarXActive&&!t.scrollbarYActive&&o(e,"left",a?e.scrollLeft+a*t.settings.wheelSpeed:e.scrollLeft-s*t.settings.wheelSpeed):(o(e,"top",e.scrollTop-s*t.settings.wheelSpeed),o(e,"left",e.scrollLeft+a*t.settings.wheelSpeed)),i(e)}void 0!==self.onwheel?t.event.bind(e,"wheel",n,{passive:!0}):void 0!==self.onmousewheel&&t.event.bind(e,"mousewheel",n,{passive:!0})}(e,r.get(e))}},19539:(e,t,n)=>{var r=n(95889),i=n(6109),o=n(86057),a=n(21459);function s(e,t){var n=null,s={top:0,left:0};function l(){n&&(clearInterval(n),n=null),r.stopScrolling(e)}var c=!1;t.event.bind(t.ownerDocument,"selectionchange",(function(){var t;e.contains(0===(t=self.getSelection?self.getSelection():document.getSelection?document.getSelection():"").toString().length?null:t.getRangeAt(0).commonAncestorContainer)?c=!0:(c=!1,l())})),t.event.bind(self,"mouseup",(function(){c&&(c=!1,l())})),t.event.bind(self,"keyup",(function(){c&&(c=!1,l())})),t.event.bind(self,"mousemove",(function(t){if(c){var u={x:t.pageX,y:t.pageY},d={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};u.x<d.left+3?(s.left=-5,r.startScrolling(e,"x")):u.x>d.right-3?(s.left=5,r.startScrolling(e,"x")):s.left=0,u.y<d.top+3?(s.top=d.top+3-u.y<5?-5:-20,r.startScrolling(e,"y")):u.y>d.bottom-3?(s.top=u.y-d.bottom+3<5?5:20,r.startScrolling(e,"y")):s.top=0,0===s.top&&0===s.left?l():n||(n=setInterval((function(){i.get(e)?(a(e,"top",e.scrollTop+s.top),a(e,"left",e.scrollLeft+s.left),o(e)):clearInterval(n)}),50))}}))}e.exports=function(e){s(e,i.get(e))}},76905:(e,t,n)=>{var r=n(95889),i=n(6109),o=n(86057),a=n(21459);function s(e,t,n,r){function s(t,n){a(e,"top",e.scrollTop-n),a(e,"left",e.scrollLeft-t),o(e)}var l={},c=0,u={},d=null,p=!1,h=!1;function m(){p=!0}function f(){p=!1}function g(e){return e.targetTouches?e.targetTouches[0]:e}function y(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function v(e){if(y(e)){h=!0;var t=g(e);l.pageX=t.pageX,l.pageY=t.pageY,c=(new Date).getTime(),null!==d&&clearInterval(d),e.stopPropagation()}}function b(n){if(!h&&t.settings.swipePropagation&&v(n),!p&&h&&y(n)){var r=g(n),i={pageX:r.pageX,pageY:r.pageY},o=i.pageX-l.pageX,a=i.pageY-l.pageY;s(o,a),l=i;var d=(new Date).getTime(),m=d-c;m>0&&(u.x=o/m,u.y=a/m,c=d),function(n,r){var i=e.scrollTop,o=e.scrollLeft,a=Math.abs(n),s=Math.abs(r);if(s>a){if(r<0&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(a>s&&(n<0&&o===t.contentWidth-t.containerWidth||n>0&&0===o))return!t.settings.swipePropagation;return!0}(o,a)&&(n.stopPropagation(),n.preventDefault())}}function w(){!p&&h&&(h=!1,t.settings.swipeEasing&&(clearInterval(d),d=setInterval((function(){i.get(e)&&(u.x||u.y)?Math.abs(u.x)<.01&&Math.abs(u.y)<.01?clearInterval(d):(s(30*u.x,30*u.y),u.x*=.8,u.y*=.8):clearInterval(d)}),10)))}n?(t.event.bind(self,"touchstart",m),t.event.bind(self,"touchend",f),t.event.bind(e,"touchstart",v),t.event.bind(e,"touchmove",b),t.event.bind(e,"touchend",w)):r&&(self.PointerEvent?(t.event.bind(self,"pointerdown",m),t.event.bind(self,"pointerup",f),t.event.bind(e,"pointerdown",v),t.event.bind(e,"pointermove",b),t.event.bind(e,"pointerup",w)):self.MSPointerEvent&&(t.event.bind(self,"MSPointerDown",m),t.event.bind(self,"MSPointerUp",f),t.event.bind(e,"MSPointerDown",v),t.event.bind(e,"MSPointerMove",b),t.event.bind(e,"MSPointerUp",w)))}e.exports=function(e){(r.env.supportsTouch||r.env.supportsIePointer)&&s(e,i.get(e),r.env.supportsTouch,r.env.supportsIePointer)}},41835:(e,t,n)=>{var r=n(6109),i=n(86057),o={"click-rail":n(3708),"drag-scrollbar":n(35672),keyboard:n(94742),wheel:n(83476),passiveWheel:n(23405),touch:n(76905),selection:n(19539)},a=n(15335);e.exports=function(e,t){e.classList.add("ps");var n=r.add(e,"object"==typeof t?t:{});e.classList.add("ps--theme_"+n.settings.theme),n.settings.handlers.forEach((function(t){o[t](e)})),a(e),i(e)}},6109:(e,t,n)=>{var r=n(95889),i=n(48300),o=n(17123),a=n(97490),s=n(48928),l={};function c(e,t){var n,s,l=this;for(var c in l.settings=i(),t)l.settings[c]=t[c];function u(){e.classList.add("ps--focus")}function d(){e.classList.remove("ps--focus")}l.containerWidth=null,l.containerHeight=null,l.contentWidth=null,l.contentHeight=null,l.isRtl="rtl"===o.css(e,"direction"),l.isNegativeScroll=(s=e.scrollLeft,e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=s,n),l.negativeScrollAdjustment=l.isNegativeScroll?e.scrollWidth-e.clientWidth:0,l.event=new a,l.ownerDocument=e.ownerDocument||document,l.scrollbarXRail=o.appendTo(o.create("div","ps__scrollbar-x-rail"),e),l.scrollbarX=o.appendTo(o.create("div","ps__scrollbar-x"),l.scrollbarXRail),l.scrollbarX.setAttribute("tabindex",0),l.event.bind(l.scrollbarX,"focus",u),l.event.bind(l.scrollbarX,"blur",d),l.scrollbarXActive=null,l.scrollbarXWidth=null,l.scrollbarXLeft=null,l.scrollbarXBottom=r.toInt(o.css(l.scrollbarXRail,"bottom")),l.isScrollbarXUsingBottom=l.scrollbarXBottom==l.scrollbarXBottom,l.scrollbarXTop=l.isScrollbarXUsingBottom?null:r.toInt(o.css(l.scrollbarXRail,"top")),l.railBorderXWidth=r.toInt(o.css(l.scrollbarXRail,"borderLeftWidth"))+r.toInt(o.css(l.scrollbarXRail,"borderRightWidth")),o.css(l.scrollbarXRail,"display","block"),l.railXMarginWidth=r.toInt(o.css(l.scrollbarXRail,"marginLeft"))+r.toInt(o.css(l.scrollbarXRail,"marginRight")),o.css(l.scrollbarXRail,"display",""),l.railXWidth=null,l.railXRatio=null,l.scrollbarYRail=o.appendTo(o.create("div","ps__scrollbar-y-rail"),e),l.scrollbarY=o.appendTo(o.create("div","ps__scrollbar-y"),l.scrollbarYRail),l.scrollbarY.setAttribute("tabindex",0),l.event.bind(l.scrollbarY,"focus",u),l.event.bind(l.scrollbarY,"blur",d),l.scrollbarYActive=null,l.scrollbarYHeight=null,l.scrollbarYTop=null,l.scrollbarYRight=r.toInt(o.css(l.scrollbarYRail,"right")),l.isScrollbarYUsingRight=l.scrollbarYRight==l.scrollbarYRight,l.scrollbarYLeft=l.isScrollbarYUsingRight?null:r.toInt(o.css(l.scrollbarYRail,"left")),l.scrollbarYOuterWidth=l.isRtl?r.outerWidth(l.scrollbarY):null,l.railBorderYWidth=r.toInt(o.css(l.scrollbarYRail,"borderTopWidth"))+r.toInt(o.css(l.scrollbarYRail,"borderBottomWidth")),o.css(l.scrollbarYRail,"display","block"),l.railYMarginHeight=r.toInt(o.css(l.scrollbarYRail,"marginTop"))+r.toInt(o.css(l.scrollbarYRail,"marginBottom")),o.css(l.scrollbarYRail,"display",""),l.railYHeight=null,l.railYRatio=null}function u(e){return e.getAttribute("data-ps-id")}t.add=function(e,t){var n=s();return function(e,t){e.setAttribute("data-ps-id",t)}(e,n),l[n]=new c(e,t),l[n]},t.remove=function(e){delete l[u(e)],function(e){e.removeAttribute("data-ps-id")}(e)},t.get=function(e){return l[u(e)]}},86057:(e,t,n)=>{var r=n(95889),i=n(17123),o=n(6109),a=n(21459);function s(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}e.exports=function(e){var t,n=o.get(e);n.containerWidth=e.clientWidth,n.containerHeight=e.clientHeight,n.contentWidth=e.scrollWidth,n.contentHeight=e.scrollHeight,e.contains(n.scrollbarXRail)||((t=i.queryChildren(e,".ps__scrollbar-x-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarXRail,e)),e.contains(n.scrollbarYRail)||((t=i.queryChildren(e,".ps__scrollbar-y-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarYRail,e)),!n.settings.suppressScrollX&&n.containerWidth+n.settings.scrollXMarginOffset<n.contentWidth?(n.scrollbarXActive=!0,n.railXWidth=n.containerWidth-n.railXMarginWidth,n.railXRatio=n.containerWidth/n.railXWidth,n.scrollbarXWidth=s(n,r.toInt(n.railXWidth*n.containerWidth/n.contentWidth)),n.scrollbarXLeft=r.toInt((n.negativeScrollAdjustment+e.scrollLeft)*(n.railXWidth-n.scrollbarXWidth)/(n.contentWidth-n.containerWidth))):n.scrollbarXActive=!1,!n.settings.suppressScrollY&&n.containerHeight+n.settings.scrollYMarginOffset<n.contentHeight?(n.scrollbarYActive=!0,n.railYHeight=n.containerHeight-n.railYMarginHeight,n.railYRatio=n.containerHeight/n.railYHeight,n.scrollbarYHeight=s(n,r.toInt(n.railYHeight*n.containerHeight/n.contentHeight)),n.scrollbarYTop=r.toInt(e.scrollTop*(n.railYHeight-n.scrollbarYHeight)/(n.contentHeight-n.containerHeight))):n.scrollbarYActive=!1,n.scrollbarXLeft>=n.railXWidth-n.scrollbarXWidth&&(n.scrollbarXLeft=n.railXWidth-n.scrollbarXWidth),n.scrollbarYTop>=n.railYHeight-n.scrollbarYHeight&&(n.scrollbarYTop=n.railYHeight-n.scrollbarYHeight),function(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,i.css(t.scrollbarXRail,n);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,i.css(t.scrollbarYRail,r),i.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),i.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(e,n),n.scrollbarXActive?e.classList.add("ps--active-x"):(e.classList.remove("ps--active-x"),n.scrollbarXWidth=0,n.scrollbarXLeft=0,a(e,"left",0)),n.scrollbarYActive?e.classList.add("ps--active-y"):(e.classList.remove("ps--active-y"),n.scrollbarYHeight=0,n.scrollbarYTop=0,a(e,"top",0))}},21459:(e,t,n)=>{var r=n(6109),i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(i("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(i("ps-x-reach-start")));var o=r.get(e);"top"===t&&n>=o.contentHeight-o.containerHeight&&((n=o.contentHeight-o.containerHeight)-e.scrollTop<=2?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(i("ps-y-reach-end"))),"left"===t&&n>=o.contentWidth-o.containerWidth&&((n=o.contentWidth-o.containerWidth)-e.scrollLeft<=2?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(i("ps-x-reach-end"))),void 0===o.lastTop&&(o.lastTop=e.scrollTop),void 0===o.lastLeft&&(o.lastLeft=e.scrollLeft),"top"===t&&n<o.lastTop&&e.dispatchEvent(i("ps-scroll-up")),"top"===t&&n>o.lastTop&&e.dispatchEvent(i("ps-scroll-down")),"left"===t&&n<o.lastLeft&&e.dispatchEvent(i("ps-scroll-left")),"left"===t&&n>o.lastLeft&&e.dispatchEvent(i("ps-scroll-right")),"top"===t&&n!==o.lastTop&&(e.scrollTop=o.lastTop=n,e.dispatchEvent(i("ps-scroll-y"))),"left"===t&&n!==o.lastLeft&&(e.scrollLeft=o.lastLeft=n,e.dispatchEvent(i("ps-scroll-x")))}},64114:(e,t,n)=>{var r=n(95889),i=n(17123),o=n(6109),a=n(86057),s=n(21459);e.exports=function(e){var t=o.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(i.css(t.scrollbarXRail,"marginLeft"))+r.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(i.css(t.scrollbarYRail,"marginTop"))+r.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),a(e),s(e,"top",e.scrollTop),s(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},86474:(e,t,n)=>{n.d(t,{Z:()=>o,UI:()=>Jn});var r={};n.r(r),n.d(r,{audit:()=>P.U,auditTime:()=>M.e,buffer:()=>D.f,bufferCount:()=>B,bufferTime:()=>W.e,bufferToggle:()=>z,bufferWhen:()=>X.R,catchError:()=>J.K,combineAll:()=>Z,combineLatest:()=>K.a,concat:()=>Q.z,concatAll:()=>ee.u,concatMap:()=>te.b,concatMapTo:()=>ne,count:()=>re,debounce:()=>ae.D,debounceTime:()=>I.b,defaultIfEmpty:()=>se.d,delay:()=>A.g,delayWhen:()=>le.j,dematerialize:()=>ce.D,distinct:()=>de,distinctUntilChanged:()=>me.x,distinctUntilKeyChanged:()=>fe,elementAt:()=>be,endWith:()=>we.l,every:()=>_e,exhaust:()=>Se,exhaustMap:()=>Ae.z,expand:()=>xe,filter:()=>w.h,finalize:()=>Re.x,find:()=>Ne,findIndex:()=>Me,first:()=>x.P,flatMap:()=>Ke.VS,groupBy:()=>De.v,ignoreElements:()=>Fe,isEmpty:()=>$e,last:()=>ze,map:()=>_.U,mapTo:()=>S.h,materialize:()=>Ve.i,max:()=>Xe,merge:()=>Je.T,mergeAll:()=>Ze.J,mergeMap:()=>Ke.zg,mergeMapTo:()=>Qe,mergeScan:()=>et,min:()=>rt,multicast:()=>it.O,observeOn:()=>ot.QV,onErrorResumeNext:()=>st,pairwise:()=>ut.G,partition:()=>pt,pluck:()=>C.j,publish:()=>ht.n,publishBehavior:()=>ft,publishLast:()=>yt,publishReplay:()=>O._,race:()=>bt,reduce:()=>Ye.u,refCount:()=>R.x,repeat:()=>wt.r,repeatWhen:()=>_t,retry:()=>St,retryWhen:()=>At,sample:()=>Ot.U,sampleTime:()=>Nt,scan:()=>E.R,sequenceEqual:()=>Dt,share:()=>$t.B,shareReplay:()=>jt.d,single:()=>Wt,skip:()=>Ht.T,skipLast:()=>zt,skipUntil:()=>Xt.u,skipWhile:()=>Jt.n,startWith:()=>k.O,subscribeOn:()=>Zt.R,switchAll:()=>Kt.B,switchMap:()=>b.w,switchMapTo:()=>Qt.c,take:()=>ve.q,takeLast:()=>qe.h,takeUntil:()=>en.R,takeWhile:()=>tn.o,tap:()=>v.b,throttle:()=>nn.P,throttleTime:()=>rn.p,throwIfEmpty:()=>ye.T,timeInterval:()=>an,timeout:()=>ln.V,timeoutWith:()=>cn.L,timestamp:()=>un,toArray:()=>hn,window:()=>mn,windowCount:()=>yn,windowTime:()=>Cn,windowToggle:()=>Tn,windowWhen:()=>Nn,withLatestFrom:()=>Mn.M,zip:()=>qn,zipAll:()=>Hn});var i,o,a=n(59312),s=n(5114),l=n(19429),c=n(45614),u=n(93756),d=n(57050),p=n(24209),h=n(83401),m=n(2844),f=n(40151),g=n(76974),y=n(44586),v=n(2834),b=n(66310),w=n(85985),_=n(77176),C=n(24713),E=n(67434),S=n(17343),I=n(78674),k=n(93508),A=n(13444),x=n(50628),T=n(40327),O=n(48403),R=n(95343);!function(e){e.split=function(e){var t=(0,T.pipe)(e,O._(1),R.x());return{animation:(0,T.pipe)(t,w.h((function(e){return"root"===e.action.key})),_.U((function(e){return{key:e.key,action:e.action.action}}))),action:(0,T.pipe)(t,w.h((function(e){return"children"===e.action.key})),_.U((function(e){return{key:e.key,action:e.action.action}})))}}}(i||(i={})),function(e){function t(e){return l.UI(e)}function n(e){return l.I_(e)}function r(e,t){return function(n){return(0,d.pipe)(e,w.h((function(e){return e.key===t&&e.action.animationType===n})),_.U((function(e){return e.action})),k.O({kind:"init"}),b.w((function(e){return"end"===e.kind?(0,g.of)(e):(0,d.pipe)((0,g.of)({kind:"end",animationType:n}),A.g("start"===e.kind?O:T))})),x.P())}}e.fromSideEffect=function(e,t){return function(n){return(0,p.T)(n.pipe(v.b(e),b.w((function(){return h.C}))),(r=t)instanceof y.y?r:(0,g.of)(r));var r}},e.patchState=t,e.extendActions=n,e.patch=function(e,r){return(0,d.flow)(n(e),t(r))},e.replaceActions=function(e){return l.I_((0,d.flow)(e,b.w((function(){return h.C}))))},e.composeKnot=function(e){return l.VF((function(t){return(0,m.aj)(Object.keys(e).map((function(n){return e[n](t.pipe(w.h((function(e){return e.key===n})),_.U((function(e){return e.action})))).pipe(_.U((function(e){var t;return(t={})[n]=e,t})))}))).pipe(_.U((function(e){return e.reduce((function(e,t){return(0,a.__assign)((0,a.__assign)({},e),t)}))})))}))},e.composeUnion=function(e,t){return l.VF((function(n){return(0,d.pipe)(t(n),b.w((function(t){var r=Object.entries(t)[0],i=r[0],o=r[1];return(0,d.pipe)(n,w.h((function(e){return e.key===o})),_.U((function(e){return e.action})),e[o],_.U((function(e){var t;return(0,a.__assign)((0,a.__assign)({},e),((t={})[i]=o,t))})))})))}))},e.animatingFlow=function(e,t){return function(n){var l=i.split(n),h=l.action,m=l.animation,g=0;return(0,d.pipe)(h,w.h((function(e){return e.key===String(g)})),C.j("action"),e,E.R(function(e,t){return function(n,r){var i,o,a=t(),l=s.fromNullable(n[a]),c=(0,d.pipe)(l,s.map((function(e){return e.children}))),p=e(c,r);if(s.isNone(p))return(i={})[a]={root:s.none,children:r},i;var h=((o={})[a+1]={root:u.EK(p.value),children:r},o),m=u.IS(p.value);return s.isSome(m)&&s.isSome(c)&&(h[a]={root:m,children:c.value}),h}}(t,(function(){return g})),{}),v.b((function(e){return g=Number(Object.keys(e).pop())})),b.w(function(e,t){return function(n){var i=String(t()-1),l=String(t()),u=(0,d.pipe)(s.fromNullable(n[i]),s.chain((function(e){return e.root})),s.map(r(e,i)),s.getOrElse((function(){return f.E})),S.h(c.deleteAt(i))),h=(0,d.pipe)(n[l].root,s.map(r(e,l)),s.getOrElse((function(){return f.E})),S.h((function(e){var t=(0,a.__assign)({},e);return t[l]=(0,a.__assign)((0,a.__assign)({},t[l]),{root:s.none}),t})));return(0,d.pipe)((0,p.T)(u,h),E.R((function(e,t){return t(e)}),n),I.b(o),k.O(n))}}(m,(function(){return g}))))}};var o=100,T=500,O=10*T}(o||(o={}));var N=n(27378),L=n(32952),P=n(50133),M=n(66081),D=n(36919),F=n(98036);function B(e,t){return void 0===t&&(t=null),function(n){return n.lift(new U(e,t))}}var U=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?j:$}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),$=function(e){function t(t,n){var r=e.call(this,t)||this;return r.bufferSize=n,r.buffer=[],r}return a.__extends(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(F.L),j=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return a.__extends(t,e),t.prototype._next=function(e){var t=this,n=t.bufferSize,r=t.startBufferEvery,i=t.buffers,o=t.count;this.count++,o%r==0&&i.push([]);for(var a=i.length;a--;){var s=i[a];s.push(e),s.length===n&&(i.splice(a,1),this.destination.next(s))}},t.prototype._complete=function(){for(var t=this.buffers,n=this.destination;t.length>0;){var r=t.shift();r.length>0&&n.next(r)}e.prototype._complete.call(this)},t}(F.L),W=n(17160),G=n(14601),q=n(72500),H=n(57655);function z(e,t){return function(n){return n.lift(new V(e,t))}}var V=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new Y(e,this.openings,this.closingSelector))},e}(),Y=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.closingSelector=r,i.contexts=[],i.add((0,q.D)(i,n)),i}return a.__extends(t,e),t.prototype._next=function(e){for(var t=this.contexts,n=t.length,r=0;r<n;r++)t[r].buffer.push(e)},t.prototype._error=function(t){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var n=t.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var n=e.buffer,r=e.subscription;this.destination.next(n),t.splice(t.indexOf(e),1),this.remove(r),r.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,n=new G.w,r={buffer:[],subscription:n};t.push(r);var i=(0,q.D)(this,e,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))},t}(H.L),X=n(77150),J=n(91224);function Z(e){return function(t){return t.lift(new m.Ms(e))}}var K=n(57091),Q=n(94123),ee=n(44212),te=n(71032);function ne(e,t){return(0,te.b)((function(){return e}),t)}function re(e){return function(t){return t.lift(new ie(e,t))}}var ie=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new oe(e,this.predicate,this.source))},e}(),oe=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return a.__extends(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(F.L),ae=n(87847),se=n(31524),le=n(87938),ce=n(15789),ue=n(46601);function de(e,t){return function(n){return n.lift(new pe(e,t))}}var pe=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new he(e,this.keySelector,this.flushes))},e}(),he=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=n,i.values=new Set,r&&i.add((0,ue.ft)(r,new ue.IY(i))),i}return a.__extends(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(e){return void n.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(ue.Ds),me=n(28043);function fe(e,t){return(0,me.x)((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))}var ge=n(2270),ye=n(4750),ve=n(23063);function be(e,t){if(e<0)throw new ge.W;var n=arguments.length>=2;return function(r){return r.pipe((0,w.h)((function(t,n){return n===e})),(0,ve.q)(1),n?(0,se.d)(t):(0,ye.T)((function(){return new ge.W})))}}var we=n(39719);function _e(e,t){return function(n){return n.lift(new Ce(e,t,n))}}var Ce=function(){function e(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new Ee(e,this.predicate,this.thisArg,this.source))},e}(),Ee=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return a.__extends(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(F.L);function Se(){return function(e){return e.lift(new Ie)}}var Ie=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new ke(e))},e}(),ke=function(e){function t(t){var n=e.call(this,t)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return a.__extends(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add((0,ue.ft)(e,new ue.IY(this))))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(ue.Ds),Ae=n(97884);function xe(e,t,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(r){return r.lift(new Te(e,t,n))}}var Te=function(){function e(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new Oe(e,this.project,this.concurrent,this.scheduler))},e}(),Oe=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.project=n,o.concurrent=r,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return a.__extends(t,e),t.dispatch=function(e){var t=e.subscriber,n=e.result,r=e.value,i=e.index;t.subscribeToProjection(n,r,i)},t.prototype._next=function(e){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(e);try{var i=(0,this.project)(e,r);if(this.scheduler){var o={subscriber:this,result:i,value:e,index:r};this.destination.add(this.scheduler.schedule(t.dispatch,0,o))}else this.subscribeToProjection(i,e,r)}catch(e){n.error(e)}}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,n){this.active++,this.destination.add((0,ue.ft)(e,new ue.IY(this)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this._next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(ue.Ds),Re=n(9223);function Ne(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(n){return n.lift(new Le(e,n,!1,t))}}var Le=function(){function e(e,t,n,r){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=r}return e.prototype.call=function(e,t){return t.subscribe(new Pe(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}(),Pe=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;return a.predicate=n,a.source=r,a.yieldIndex=i,a.thisArg=o,a.index=0,a}return a.__extends(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete(),this.unsubscribe()},t.prototype._next=function(e){var t=this.predicate,n=this.thisArg,r=this.index++;try{t.call(n||this,e,r,this.source)&&this.notifyComplete(this.yieldIndex?r:e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(F.L);function Me(e,t){return function(n){return n.lift(new Le(e,n,!0,t))}}var De=n(78146);function Fe(){return function(e){return e.lift(new Be)}}var Be=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Ue(e))},e}(),Ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype._next=function(e){},t}(F.L);function $e(){return function(e){return e.lift(new je)}}var je=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new We(e))},e}(),We=function(e){function t(t){return e.call(this,t)||this}return a.__extends(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(F.L),Ge=n(33346),qe=n(51639),He=n(49524);function ze(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?(0,w.h)((function(t,n){return e(t,n,r)})):He.y,(0,qe.h)(1),n?(0,se.d)(t):(0,ye.T)((function(){return new Ge.K})))}}var Ve=n(83840),Ye=n(38934);function Xe(e){var t="function"==typeof e?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t};return(0,Ye.u)(t)}var Je=n(95093),Ze=n(68425),Ke=n(85321);function Qe(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?(0,Ke.zg)((function(){return e}),t,n):("number"==typeof t&&(n=t),(0,Ke.zg)((function(){return e}),n))}function et(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new tt(e,t,n))}}var tt=function(){function e(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new nt(e,this.accumulator,this.seed,this.concurrent))},e}(),nt=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.accumulator=n,o.acc=r,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return a.__extends(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,n=this.destination,r=void 0;try{r=(0,this.accumulator)(this.acc,e,t)}catch(e){return n.error(e)}this.active++,this._innerSub(r)}else this.buffer.push(e)},t.prototype._innerSub=function(e){var t=new ue.IY(this),n=this.destination;n.add(t);var r=(0,ue.ft)(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(e){var t=this.destination;this.acc=e,this.hasValue=!0,t.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(ue.Ds);function rt(e){var t="function"==typeof e?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t};return(0,Ye.u)(t)}var it=n(24755),ot=n(80544),at=n(17733);function st(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&(0,at.k)(e[0])&&(e=e[0]),function(t){return t.lift(new lt(e))}}var lt=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new ct(e,this.nextSources))},e}(),ct=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.nextSources=n,r}return a.__extends(t,e),t.prototype.notifyError=function(){this.subscribeToNextSource()},t.prototype.notifyComplete=function(){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var t=new ue.IY(this),n=this.destination;n.add(t);var r=(0,ue.ft)(e,t);r!==t&&n.add(r)}else this.destination.complete()},t}(ue.Ds),ut=n(16118);function dt(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function pt(e,t){return function(n){return[(0,w.h)(e,t)(n),(0,w.h)(dt(e,t))(n)]}}var ht=n(62962),mt=n(95300);function ft(e){return function(t){return(0,it.O)(new mt.X(e))(t)}}var gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return a.__extends(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),G.w.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),G.w.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(L.xQ);function yt(){return function(e){return(0,it.O)(new gt)(e)}}var vt=n(38062);function bt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return 1===e.length&&(0,at.k)(e[0])&&(e=e[0]),t.lift.call(vt.S3.apply(void 0,[t].concat(e)))}}var wt=n(36303);function _t(e){return function(t){return t.lift(new Ct(e))}}var Ct=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new Et(e,this.notifier,t))},e}(),Et=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return a.__extends(t,e),t.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},t.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,e.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},t.prototype.subscribeToRetries=function(){var t;this.notifications=new L.xQ;try{t=(0,this.notifier)(this.notifications)}catch(t){return e.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=(0,ue.ft)(t,new ue.IY(this))},t}(ue.Ds);function St(e){return void 0===e&&(e=-1),function(t){return t.lift(new It(e,t))}}var It=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new kt(e,this.count,this.source))},e}(),kt=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return a.__extends(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return e.prototype.error.call(this,t);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(F.L);function At(e){return function(t){return t.lift(new xt(e,t))}}var xt=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new Tt(e,this.notifier,this.source))},e}(),Tt=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i}return a.__extends(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{n=new L.xQ;try{r=(0,this.notifier)(n)}catch(t){return e.prototype.error.call(this,t)}i=(0,ue.ft)(r,new ue.IY(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(ue.Ds),Ot=n(13718),Rt=n(82506);function Nt(e,t){return void 0===t&&(t=Rt.P),function(n){return n.lift(new Lt(e,t))}}var Lt=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new Pt(e,this.period,this.scheduler))},e}(),Pt=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(Mt,n,{subscriber:i,period:n})),i}return a.__extends(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(F.L);function Mt(e){var t=e.subscriber,n=e.period;t.notifyNext(),this.schedule(e,n)}function Dt(e,t){return function(n){return n.lift(new Ft(e,t))}}var Ft=function(){function e(e,t){this.compareTo=e,this.comparator=t}return e.prototype.call=function(e,t){return t.subscribe(new Bt(e,this.compareTo,this.comparator))},e}(),Bt=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.compareTo=n,i.comparator=r,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(n.subscribe(new Ut(t,i))),i}return a.__extends(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){for(var e=this,t=e._a,n=e._b,r=e.comparator;t.length>0&&n.length>0;){var i=t.shift(),o=n.shift(),a=!1;try{a=r?r(i,o):i===o}catch(e){this.destination.error(e)}a||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t}(F.L),Ut=function(e){function t(t,n){var r=e.call(this,t)||this;return r.parent=n,r}return a.__extends(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(F.L),$t=n(38194),jt=n(34891);function Wt(e){return function(t){return t.lift(new Gt(e,t))}}var Gt=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new qt(e,this.predicate,this.source))},e}(),qt=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return a.__extends(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new Ge.K)},t}(F.L),Ht=n(55935);function zt(e){return function(t){return t.lift(new Vt(e))}}var Vt=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new ge.W}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new F.L(e)):t.subscribe(new Yt(e,this._skipCount))},e}(),Yt=function(e){function t(t,n){var r=e.call(this,t)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return a.__extends(t,e),t.prototype._next=function(e){var t=this._skipCount,n=this._count++;if(n<t)this._ring[n]=e;else{var r=n%t,i=this._ring,o=i[r];i[r]=e,this.destination.next(o)}},t}(F.L),Xt=n(42833),Jt=n(93497),Zt=n(92403),Kt=n(69935),Qt=n(598),en=n(2768),tn=n(8473),nn=n(25031),rn=n(55721),on=n(18625);function an(e){return void 0===e&&(e=Rt.P),function(t){return(0,on.P)((function(){return t.pipe((0,E.R)((function(t,n){var r=t.current;return{value:n,current:e.now(),last:r}}),{current:e.now(),value:void 0,last:void 0}),(0,_.U)((function(e){var t=e.current,n=e.last,r=e.value;return new sn(r,t-n)})))}))}}var sn=function(){return function(e,t){this.value=e,this.interval=t}}(),ln=n(52342),cn=n(97425);function un(e){return void 0===e&&(e=Rt.P),(0,_.U)((function(t){return new dn(t,e.now())}))}var dn=function(){return function(e,t){this.value=e,this.timestamp=t}}();function pn(e,t,n){return 0===n?[t]:(e.push(t),e)}function hn(){return(0,Ye.u)(pn,[])}function mn(e){return function(t){return t.lift(new fn(e))}}var fn=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var n=new gn(e),r=t.subscribe(n);return r.closed||n.add((0,ue.ft)(this.windowBoundaries,new ue.IY(n))),r},e}(),gn=function(e){function t(t){var n=e.call(this,t)||this;return n.window=new L.xQ,t.next(n.window),n}return a.__extends(t,e),t.prototype.notifyNext=function(){this.openWindow()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,n=this.window=new L.xQ;t.next(n)},t}(ue.Ds);function yn(e,t){return void 0===t&&(t=0),function(n){return n.lift(new vn(e,t))}}var vn=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new bn(e,this.windowSize,this.startWindowEvery))},e}(),bn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.destination=t,i.windowSize=n,i.startWindowEvery=r,i.windows=[new L.xQ],i.count=0,t.next(i.windows[0]),i}return a.__extends(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length,a=0;a<o&&!this.closed;a++)i[a].next(e);var s=this.count-r+1;if(s>=0&&s%t==0&&!this.closed&&i.shift().complete(),++this.count%t==0&&!this.closed){var l=new L.xQ;i.push(l),n.next(l)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(F.L),wn=n(44362),_n=n(67827);function Cn(e){var t=Rt.P,n=null,r=Number.POSITIVE_INFINITY;return(0,_n.K)(arguments[3])&&(t=arguments[3]),(0,_n.K)(arguments[2])?t=arguments[2]:(0,wn.k)(arguments[2])&&(r=Number(arguments[2])),(0,_n.K)(arguments[1])?t=arguments[1]:(0,wn.k)(arguments[1])&&(n=Number(arguments[1])),function(i){return i.lift(new En(e,n,r,t))}}var En=function(){function e(e,t,n,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new In(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),Sn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return a.__extends(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(L.xQ),In=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;a.destination=t,a.windowTimeSpan=n,a.windowCreationInterval=r,a.maxWindowSize=i,a.scheduler=o,a.windows=[];var s=a.openWindow();if(null!==r&&r>=0){var l={subscriber:a,window:s,context:null},c={windowTimeSpan:n,windowCreationInterval:r,subscriber:a,scheduler:o};a.add(o.schedule(xn,n,l)),a.add(o.schedule(An,r,c))}else{var u={subscriber:a,window:s,windowTimeSpan:n};a.add(o.schedule(kn,n,u))}return a}return a.__extends(t,e),t.prototype._next=function(e){for(var t=this.windows,n=t.length,r=0;r<n;r++){var i=t[r];i.closed||(i.next(e),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new Sn;return this.windows.push(e),this.destination.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(F.L);function kn(e){var t=e.subscriber,n=e.windowTimeSpan,r=e.window;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,n)}function An(e){var t=e.windowTimeSpan,n=e.subscriber,r=e.scheduler,i=e.windowCreationInterval,o=n.openWindow(),a=this,s={action:a,subscription:null},l={subscriber:n,window:o,context:s};s.subscription=r.schedule(xn,t,l),a.add(s.subscription),a.schedule(e,i)}function xn(e){var t=e.subscriber,n=e.window,r=e.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(n)}function Tn(e,t){return function(n){return n.lift(new On(e,t))}}var On=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new Rn(e,this.openings,this.closingSelector))},e}(),Rn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=(0,q.D)(i,n,n)),i}return a.__extends(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var n=t.length,r=0;r<n;r++)t[r].window.next(e)},t.prototype._error=function(t){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var o=n[i];o.window.error(t),o.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var n=t.length,r=-1;++r<n;){var i=t[r];i.window.complete(),i.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,n=-1;++n<t;){var r=e[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,n,r,i){if(e===this.openings){var o=void 0;try{o=(0,this.closingSelector)(t)}catch(e){return this.error(e)}var a=new L.xQ,s=new G.w,l={window:a,subscription:s};this.contexts.push(l);var c=(0,q.D)(this,o,l);c.closed?this.closeWindow(this.contexts.length-1):(c.context=l,s.add(c)),this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,n=t[e],r=n.window,i=n.subscription;t.splice(e,1),r.complete(),i.unsubscribe()}},t}(H.L);function Nn(e){return function(t){return t.lift(new Ln(e))}}var Ln=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Pn(e,this.closingSelector))},e}(),Pn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.closingSelector=n,r.openWindow(),r}return a.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.openWindow(i)},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var n,r=this.window=new L.xQ;this.destination.next(r);try{n=(0,this.closingSelector)()}catch(e){return this.destination.error(e),void this.window.error(e)}this.add(this.closingNotification=(0,q.D)(this,n))},t}(H.L),Mn=n(41398),Dn=n(81967),Fn=n(85451);function Bn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),(0,Dn.n)(e,void 0).lift(new Un(n))}var Un=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new $n(e,this.resultSelector))},e}(),$n=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.resultSelector=n,i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:void 0,i}return a.__extends(t,e),t.prototype._next=function(e){var t=this.iterators;(0,at.k)(e)?t.push(new Wn(e)):"function"==typeof e[Fn.hZ]?t.push(new jn(e[Fn.hZ]())):t.push(new Gn(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe());else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){if("function"==typeof(a=e[r]).hasValue&&!a.hasValue())return}var i=!1,o=[];for(r=0;r<t;r++){var a,s=(a=e[r]).next();if(a.hasCompleted()&&(i=!0),s.done)return void n.complete();o.push(s.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(F.L),jn=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},e}(),Wn=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[Fn.hZ]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),Gn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return a.__extends(t,e),t.prototype[Fn.hZ]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return(0,ue.ft)(this.observable,new ue.IY(this))},t}(ue.Ds);function qn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(Bn.apply(void 0,[t].concat(e)))}}function Hn(e){return function(t){return t.lift(new Un(e))}}var zn=n(5739),Vn="root",Yn=n(73975);function Xn(e){return(0,d.flow)(me.x(),E.R((function(t,n){return e.reduceWithIndex(n,new Map,(function(e,n,r){var i=t.get(e);return void 0!==i?(n.set(e,i),i.next(r)):n.set(e,new mt.X(r)),n}))}),new Map),me.x((t=Yn.fromEquals((function(){return!0})),{equals:function(e,n){if(e===n)return!0;if(e.size===n.size){for(var r=e.keys(),i=void 0;!(i=r.next()).done;)if(!n.has(i.value)||!t.equals(e.get(i.value),n.get(i.value)))return!1;return!0}return!1}}).equals));var t}var Jn,Zn=function(){function e(e){this._keySelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Kn(e,this._keySelector))},e}(),Kn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r._keySelector=n,r.attemptedToUnsubscribe=!1,r.count=0,r._currentGroup=s.none,r}return(0,a.__extends)(t,e),t.prototype._next=function(e){var t=this,n=this._keySelector(e);(0,T.pipe)(this._currentGroup,s.fold((function(){return t._createGroup(n,e)}),(function(r){var i=r.key,o=r.group;i!==n?(o.complete(),t._currentGroup=s.none,t._createGroup(n,e)):o.closed||o.next(e)})))},t.prototype._createGroup=function(e,t){var n=new mt.X(t);this._currentGroup=s.some({key:e,group:n}),this.destination.next(new De.T(e,n,this))},t.prototype._error=function(e){(0,T.pipe)(this._currentGroup,s.map((function(t){return t.group.error(e)}))),this._currentGroup=s.none,this.destination.error(e)},t.prototype._complete=function(){(0,T.pipe)(this._currentGroup,s.map((function(e){return e.group.complete()}))),this._currentGroup=s.none,this.destination.complete()},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(F.L);function Qn(e,t){return(0,T.pipe)(t,Jn.mapAction((function(t){return{key:e,action:t}})),l.UI((function(t){return null===t?t:N.cloneElement(t,{key:e})})))}function er(e,t,n){var r,i;if(nr(e)&&t.length>0)return{grid:e.grid,child:er(e.child,t,n)};if(tr(e)&&t.length>0){var o=t[0],s=t.slice(1);return{grid:e.grid,children:(0,a.__assign)((0,a.__assign)({},e.children),(r={},r[o]=er(e.children[o],s,n),r))}}if(rr(e)&&t.length>0)return{foldable:e.foldable,of:er(e.of,t,n)};if(ir(e)&&t.length>0){o=t[0],s=t.slice(1);return{tag:e.tag,members:(0,a.__assign)((0,a.__assign)({},e.members),(i={},i[o]=er(e.members[o],s,n),i))}}return n(e)}function tr(e){return"children"in e}function nr(e){return"child"in e}function rr(e){return"foldable"in e}function ir(e){return"members"in e}function or(e){return N.createElement(zn.F.Fragment,{children:e})}!function(e){function t(e){return nr(e)?function(n){var r=new Proxy({},{get:function(){return t(e.child)({children:null,notify:n.notify,state:n.state||f.E})}});return e.grid({children:r,state:f.E,notify:d.constVoid})}:tr(e)?function(n){return(0,T.pipe)(n.state,Xn(c.record),_.U((function(r){var i=(0,T.pipe)(e.children,c.mapWithIndex((function(e,i){return Qn(e,t(i))({children:null,notify:n.notify,state:r.get(e)||f.E})})));return e.grid({children:i,state:r.get(Vn)||f.E,notify:function(e){return n.notify({key:Vn,action:e})}})})),or)}:rr(e)?function(n){return(0,T.pipe)(n.state,Xn(e.foldable),E.R((function(r,i){var o=new Map;return i.forEach((function(i,a){var s=r.get(a);if(void 0!==s)o.set(a,s);else{var l=Qn(a,t(e.of));o.set(a,l({children:null,notify:n.notify,state:i}))}})),o}),new Map),_.U((function(e){var t=new Array;return e.forEach((function(e){return t.push(e)})),t})),or)}:ir(e)?function(n){return(0,T.pipe)(n.state,(r=e.tag,function(e){return e.pipe((function(e){return e.lift(new Zn((function(e){return e[r]})))}))}),_.U((function(r){return Qn(r.key,t(e.members[r.key]))({children:null,notify:n.notify,state:r})})),or);var r}:e}function n(e,t,r){return tr(e)?{grid:n(e.grid,t,r),children:e.children}:rr(e)?{foldable:e.foldable,of:n(e.of,t,r)}:function(n){return e({children:n.children,notify:(0,T.pipe)(n.notify,l.I_(r)),state:(0,T.pipe)(n.state,_.U(t))})}}!function(t){t.empty=function(){return null},t.make=function(t){return e.Grid.make(t)}}(e.Node||(e.Node={})),function(e){e.make=function(e){return function(t){var n=t.children,i=t.state,o=t.notify;return N.createElement(e,{slots:n,state:i,notify:function(e){return function(){return o(e)}},view:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,T.pipe)(i,C.j.apply(r,e),me.x())}})}}}(e.Grid||(e.Grid={})),function(e){e.make=function(e,t){return{grid:e,child:t}}}(e.Composite||(e.Composite={})),function(e){e.make=function(e,t){return{grid:e,children:t}}}(e.Knot||(e.Knot={})),function(e){e.make=function(e){return{grid:function(e){return or((0,T.pipe)(e.children,c.collect((function(e,t){return t}))))},children:e}}}(e.Group||(e.Group={})),function(e){e.make=function(e,t){return{foldable:e,of:t}}}(e.List||(e.List={})),function(t){t.make=function(e,t){return{tag:e,members:t}},t.asOption=function(t){return{tag:"_tag",members:{Some:e.Group.make({value:t}),None:e.Node.empty}}}}(e.Union||(e.Union={})),function(e){e.make=function(e,t){return function(n){var r;return N.createElement(zn.F.div,((r={})["data-purpose"]="animation-wrapper",r.children=n.children.children,r.className=(0,T.pipe)(n.state,_.U((0,d.flow)(s.map((function(n){return e[n]||t[n]})),s.toUndefined)),me.x()),r.onAnimationStart=(0,T.pipe)(n.state,_.U(s.fold((function(){return d.constVoid}),(function(e){return function(){return n.notify({kind:"start",animationType:e})}})))),r.onAnimationEnd=(0,T.pipe)(n.state,_.U(s.fold((function(){return d.constVoid}),(function(e){return function(){return n.notify({kind:"end",animationType:e})}})))),r))}}}(e.Transition||(e.Transition={})),function(t){t.make=function(t,n){return e.List.make(c.record,e.Knot.make(t,{children:n}))}}(e.Animated||(e.Animated={})),e.mount=function(e,n){var r=new L.xQ;return t(e)({children:null,notify:function(e){return r.next(e)},state:(0,T.pipe)(n(r),O._(1),R.x())})},e.patch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return function(n){return er(n,e,t)}}},e.mapAction=function(e){return function(t){return n(t,d.identity,e)}},e.contramapState=function(e){return function(t){return n(t,e,d.identity)}},e.squash=t,e.promap=n}(Jn||(Jn={}))},90329:(e,t,n)=>{n.d(t,{Ri:()=>me,xu:()=>fe,dO:()=>he,KM:()=>$,oA:()=>ne,EG:()=>q,t9:()=>F,cS:()=>Z,hX:()=>re,DZ:()=>ie,sQ:()=>te,Eh:()=>K,qO:()=>de,uZ:()=>Q,ZN:()=>L,YH:()=>pe,ZQ:()=>G,xb:()=>M,kr:()=>J,XP:()=>B,P5:()=>X,FP:()=>Y,UI:()=>oe,Su:()=>ae,N:()=>ge,fP:()=>D,cq:()=>z,uK:()=>se,tV:()=>le,Sw:()=>V,oh:()=>ce,ri:()=>ee,dp:()=>P,qo:()=>j,nd:()=>W,Wl:()=>H,VO:()=>U});var r=n(95195),i=n(73975),o=n(57050),a=n(5114);function s(e){return function(t){return Array.from(t.keys()).sort(e.compare)}}function l(e){var t=s(e);return function(e){return function(n){for(var r=[],i=0,o=t(n);i<o.length;i++){var a=o[i];r.push(e(a,n.get(a)))}return r}}}function c(e){return l(e)((function(e,t){return[e,t]}))}function u(e){var t=d(e);return function(e){return function(n){var r=t(e,n);if(a.isSome(r)){var i=new Map(n);return i.delete(r.value[0]),i}return n}}}function d(e){return function(t,n){if(void 0===n){var r=d(e);return function(e){return r(t,e)}}for(var i,o=n.entries();!(i=o.next()).done;){var s=i.value,l=s[0],c=s[1];if(e.equals(l,t))return a.some([l,c])}return a.none}}function p(e){var t=d(e);return function(n,r){if(void 0===r){var i=p(e);return function(e){return i(n,e)}}return(0,o.pipe)(t(n,r),a.map((function(e){e[0];return e[1]})))}}function h(e,t){var n=d(e);return function(r,i){if(void 0===i){var o=h(e,t);return function(e){return o(e,r)}}for(var s,l=r.entries();!(s=l.next()).done;){var c=s.value,u=c[0],d=c[1],p=n(u,i);if(a.isNone(p)||!e.equals(u,p.value[0])||!t.equals(d,p.value[1]))return!1}return!0}}var m=new Map;var f=function(e,t){for(var n,r=new Map,i=e.entries();!(n=i.next()).done;){var o=n.value,a=o[0],s=o[1];r.set(a,t(a,s))}return r},g=function(e,t){for(var n,i=new Map,o=new Map,a=e.entries();!(n=a.next()).done;){var s=n.value,l=s[0],c=t(l,s[1]);(0,r.isLeft)(c)?i.set(l,c.left):o.set(l,c.right)}return{left:i,right:o}},y=function(e,t){for(var n,r=new Map,i=new Map,o=e.entries();!(n=o.next()).done;){var a=n.value,s=a[0],l=a[1];t(s,l)?i.set(s,l):r.set(s,l)}return{left:r,right:i}},v=function(e,t){for(var n,r=new Map,i=e.entries();!(n=i.next()).done;){var o=n.value,s=o[0],l=t(s,o[1]);a.isSome(l)&&r.set(s,l.value)}return r},b=function(e,t){for(var n,r=new Map,i=e.entries();!(n=i.next()).done;){var o=n.value,a=o[0],s=o[1];t(a,s)&&r.set(a,s)}return r},w=function(e,t){return f(e,(function(e,n){return t(n)}))},_=function(e,t){return b(e,(function(e,n){return t(n)}))},C=function(e,t){return v(e,(function(e,n){return t(n)}))},E=function(e,t){return y(e,(function(e,n){return t(n)}))},S=function(e,t){return g(e,(function(e,n){return t(n)}))},I=function(e){for(var t,n=new Map,r=e.entries();!(t=r.next()).done;){var i=t.value,o=i[0],s=i[1];a.isSome(s)&&n.set(o,s.value)}return n},k=function(e){for(var t,n=new Map,i=new Map,o=e.entries();!(t=o.next()).done;){var a=t.value,s=a[0],l=a[1];(0,r.isLeft)(l)?n.set(s,l.left):i.set(s,l.right)}return{left:n,right:i}},A="ReadonlyMap";var x=w,T=_,O=C,R=E,N=S,L=function(e,t){return{show:function(n){var r="";return n.forEach((function(n,i){r+="["+e.show(i)+", "+t.show(n)+"], "})),""!==r&&(r=r.substring(0,r.length-2)),"new Map(["+r+"])"}}},P=function(e){return e.size},M=function(e){return 0===e.size},D=function e(t){var n=p(t);return function(r,i){if(void 0===i){var o=e(t);return function(e){return o(r,e)}}return a.isSome(n(r,i))}},F=function e(t){return function(n,r){if(void 0===r){var i=e(t);return function(e){return i(n,e)}}for(var o,a=r.values();!(o=a.next()).done;){var s=o.value;if(t.equals(n,s))return!0}return!1}},B=s,U=function(e){return function(t){return Array.from(t.values()).sort(e.compare)}},$=l,j=c;function W(e,t){return function(e,t){var n=c(e);return function(e){var r=n(e),i=r.length;return t.unfold(0,(function(e){return e<i?a.some([r[e],e+1]):a.none}))}}(e,t)}var G=function(e){var t=d(e);return function(e,n){return function(r){var i,o=t(e,r);return a.isNone(o)?((i=new Map(r)).set(e,n),i):o.value[1]!==n?((i=new Map(r)).set(o.value[0],n),i):r}}},q=u,H=function(e){var t=d(e);return function(e,n){return function(r){var i=t(e,r);if(a.isNone(i))return a.none;var o=new Map(r);return o.set(i.value[0],n),a.some(o)}}},z=function(e){var t=d(e);return function(e,n){return function(r){var i=t(e,r);if(a.isNone(i))return a.none;var o=new Map(r);return o.set(i.value[0],n(i.value[1])),a.some(o)}}},V=function(e){var t=p(e),n=u(e);return function(e){var r=n(e);return function(n){return(0,o.pipe)(t(e,n),a.map((function(e){return[e,r(n)]})))}}},Y=d,X=p,J=h,Z=new Map,K=function(e,t){var n=h(e,t);return(0,i.fromEquals)((function(e,t){return n(e,t)&&n(t,e)}))},Q=function(e,t){var n=d(e);return{concat:function(e,r){if(e===m)return r;if(r===m)return e;for(var i,o=new Map(e),s=r.entries();!(i=s.next()).done;){var l=i.value,c=l[0],u=l[1],d=n(c,e);a.isSome(d)?o.set(d.value[0],t.concat(d.value[1],u)):o.set(c,u)}return o},empty:m}},ee=function(e,t){return new Map([[e,t]])};function te(e,t,n){return function(e,t,n){return function(r){var i=d(e);return n.reduce(r,new Map,(function(e,n){var r=n[0],o=n[1],s=i(r,e);return a.isSome(s)?e.set(s.value[0],t.concat(s.value[1],o)):e.set(r,o),e}))}}(e,t,n)}var ne=I,re=function(e){return function(t){return _(t,e)}},ie=function(e){return function(t){return C(t,e)}},oe=function(e){return function(t){return w(t,e)}},ae=function(e){return function(t){return f(t,e)}},se=function(e){return function(t){return E(t,e)}},le=function(e){return function(t){return S(t,e)}},ce=k,ue="Map",de=function(){return{URI:A,_E:void 0,map:w,mapWithIndex:f,compact:I,separate:k,filter:_,filterMap:C,partition:E,partitionMap:S,partitionMapWithIndex:g,partitionWithIndex:y,filterMapWithIndex:v,filterWithIndex:b}},pe=function(e){var t=s(e),n=function(e,n,r){for(var i=n,o=t(e),a=o.length,s=0;s<a;s++){var l=o[s];i=r(l,i,e.get(l))}return i},r=function(e){return function(n,r){for(var i=e.empty,o=t(n),a=o.length,s=0;s<a;s++){var l=o[s];i=e.concat(i,r(l,n.get(l)))}return i}},i=function(e,n,r){for(var i=n,o=t(e),a=o.length-1;a>=0;a--){var s=o[a];i=r(s,e.get(s),i)}return i},o=function(e){return function(n,r){for(var i=e.of(m),o=t(n),a=o.length,s=function(t){var a=o[t],s=n.get(a);i=e.ap(e.map(i,(function(e){return function(t){return new Map(e).set(a,t)}})),r(a,s))},l=0;l<a;l++)s(l);return i}},a=function(e){var t=o(e);return function(e,n){return t(e,(function(e,t){return n(t)}))}};return{URI:A,_E:void 0,map:w,compact:I,separate:k,filter:_,filterMap:C,partition:E,partitionMap:S,reduce:function(e,t,r){return n(e,t,(function(e,t,n){return r(t,n)}))},foldMap:function(e){var t=r(e);return function(e,n){return t(e,(function(e,t){return n(t)}))}},reduceRight:function(e,t,n){return i(e,t,(function(e,t,r){return n(t,r)}))},traverse:a,sequence:function(e){var t=o(e);return function(e){return t(e,(function(e,t){return t}))}},mapWithIndex:f,reduceWithIndex:n,foldMapWithIndex:r,reduceRightWithIndex:i,traverseWithIndex:o,wilt:function(e){var t=a(e);return function(n,r){return e.map(t(n,r),k)}},wither:function(e){var t=a(e);return function(n,r){return e.map(t(n,r),I)}}}},he={URI:ue,map:x},me={URI:ue,compact:I,separate:k},fe={URI:ue,map:x,compact:I,separate:k,filter:T,filterMap:O,partition:R,partitionMap:N},ge=fe},18756:(e,t,n)=>{function r(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}function i(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){const n=e.valueOf(),r=t.valueOf();if(n===r||n!=n&&r!=r)return!0;if(!n||!r)return!1}return!(!r(e)||!e.equals(t))}n.d(t,{AC:()=>a});function o(e){if("number"==typeof e)return e&e;if("function"==typeof e.valueOf){const t=e.valueOf();if(t!==e)return o(t)}return r(e)?e.hashCode():a(String(e))}function a(e){let t=0;if(null==e||0===e.length)return t;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}class s extends Error{constructor(e){let t="";for(const n of e.slice(0,2)){let e="";e=n instanceof Error?`${n.name}(${n.message})`:`${n}`,t+=", "+e}t=t.slice(2),e.length>2&&(t+=", ..."),super(t),this.name="CompositeError",this.errorsRef=e;this.constructor=s,this.__proto__=s.prototype}errors(){return this.errorsRef.slice()}}Error;class l extends Error{constructor(e){super(e),this.name="NoSuchElementError";this.constructor=l,this.__proto__=l.prototype}}Error;class c extends Error{constructor(e){super(e),this.name="IllegalStateError";this.constructor=c,this.__proto__=c.prototype}}class u extends Error{constructor(e){super(e),this.name="IllegalArgumentError";this.constructor=u,this.__proto__=u.prototype}}class d extends Error{constructor(e){super(e),this.name="NotImplementedError";this.constructor=d,this.__proto__=d.prototype}}class p extends Error{constructor(e){super(e),this.name="TimeoutError";this.constructor=p,this.__proto__=p.prototype}}function h(e){return function(){const t=Array.prototype.slice.call(arguments);return t.push(this),e.apply(void 0,t)}}function m(e,t,n){const r=e,i=r.prototype,o="fantasy-land/",a="equals",s=o+a,l="map",c=o+l,u="ap",d=o+u,p=o+"of",m="chain",f=o+m,g="chainRec",y=o+g;i.equals?i[s]=i.equals:n&&(i[s]=h(n.equals)),i.map?i[c]=i.map:t&&(i[c]=h(t.map)),i.ap?i[d]=i.ap:t&&(i[d]=h(t.ap)),r.pure?r[p]=r.pure:t&&(r[p]=t.of),i.chain?i[f]=i.chain:t&&(i[f]=h(t.chain)),r.chainRec?r[y]=r.chainRec:t&&(r[y]=t.chainRec)}class f{constructor(e,t){this._isRight="right"===t,this.value=e}isLeft(){return!this._isRight}isRight(){return this._isRight}contains(e){return this._isRight&&i(this.value,e)}exists(e){return this._isRight&&e(this.value)}filterOrElse(e,t){return this._isRight?e(this.value)?this:y(t()):this}flatMap(e){return this._isRight?e(this.value):this}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}fold(e,t){return this._isRight?t(this.value):e(this.value)}forAll(e){return!this._isRight||e(this.value)}get(){if(this._isRight)return this.value;throw new l("left.get()")}getOrElse(e){return this._isRight?this.value:e}getOrElseL(e){return this._isRight?this.value:e()}map(e){return this._isRight?b(e(this.value)):this}forEach(e){this._isRight&&e(this.value)}swap(){return this._isRight?y(this.value):b(this.value)}toOption(){return this._isRight?E(this.value):S}equals(e){return null!=e&&(this._isRight===e._isRight&&i(this.value,e.value))}hashCode(){return this._isRight?o(this.value)<<2:o(this.value)<<3}static pure(e){return new v(e)}static left(e){return y(e)}static right(e){return b(e)}static map2(e,t,n){return e.isLeft()?e:t.isLeft()?t:b(n(e.value,t.value))}static map3(e,t,n,r){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:b(r(e.value,t.value,n.value))}static map4(e,t,n,r,i){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:b(i(e.value,t.value,n.value,r.value))}static map5(e,t,n,r,i,o){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:b(o(e.value,t.value,n.value,r.value,i.value))}static map6(e,t,n,r,i,o,a){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:o.isLeft()?o:b(a(e.value,t.value,n.value,r.value,i.value,o.value))}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.isRight())return e;const r=e.value;if(r.isRight())return b(r.value);n=r.value}}}class g extends f{constructor(e){super(e,"left")}}function y(e){return new g(e)}class v extends f{constructor(e){super(e,"right")}}function b(e){return new v(e)}const w={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:f.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>f.tailRecM(t,(t=>e(f.left,f.right,t)))};m(f,w,w);class _{constructor(e,t){this._isEmpty=null!=t?t:null==e,this.value=e}get(){if(!this._isEmpty)return this.value;throw new l("Option.get")}getOrElse(e){return this._isEmpty?e:this.value}orNull(){return this._isEmpty?null:this.value}orUndefined(){return this._isEmpty?void 0:this.value}getOrElseL(e){return this._isEmpty?e():this.value}orElse(e){return this._isEmpty?e:this}orElseL(e){return this._isEmpty?e():this}isEmpty(){return this._isEmpty}nonEmpty(){return!this._isEmpty}map(e){return this._isEmpty?S:E(e(this.value))}flatMap(e){return this._isEmpty?S:e(this.value)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}filter(e){return this._isEmpty||!e(this.value)?S:this}fold(e,t){return this._isEmpty?e():t(this.value)}contains(e){return!this._isEmpty&&i(this.value,e)}exists(e){return!this._isEmpty&&e(this.value)}forAll(e){return this._isEmpty||e(this.value)}forEach(e){this._isEmpty||e(this.value)}equals(e){return null!=e&&(this.nonEmpty()&&e.nonEmpty()?i(this.value,e.value):this.isEmpty()&&e.isEmpty())}hashCode(){return this._isEmpty?2433880:null==this.value?9735524:o(this.value)<<2}static of(e){return null!=e?E(e):S}static some(e){return new _(e,!1)}static none(){return S}static empty(){return S}static pure(e){return E(e)}static map2(e,t,n){return e.nonEmpty()&&t.nonEmpty()?E(n(e.value,t.value)):S}static map3(e,t,n,r){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()?E(r(e.value,t.value,n.value)):S}static map4(e,t,n,r,i){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()?E(i(e.value,t.value,n.value,r.value)):S}static map5(e,t,n,r,i,o){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()?E(o(e.value,t.value,n.value,r.value,i.value)):S}static map6(e,t,n,r,i,o,a){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()&&o.nonEmpty()?E(a(e.value,t.value,n.value,r.value,i.value,o.value)):S}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.nonEmpty())return S;{const t=e.value;if(t.isRight())return E(t.value);n=t.value}}}}class C extends _{constructor(e){super(e,!1)}}function E(e){return new C(e)}const S=new class extends _{constructor(){super(void 0,!0)}},I={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:_.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>_.tailRecM(t,(t=>e(f.left,f.right,t)))};m(_,I,I);class k{constructor(e,t){this._isSuccess="success"===t,this.value=e}isSuccess(){return this._isSuccess}isFailure(){return!this._isSuccess}get(){if(!this._isSuccess)throw this.value;return this.value}getOrElse(e){return this._isSuccess?this.value:e}getOrElseL(e){return this._isSuccess?this.value:e()}orNull(){return this._isSuccess?this.value:null}orUndefined(){return this._isSuccess?this.value:void 0}orElse(e){return this._isSuccess?this:e}orElseL(e){return this._isSuccess?this:e()}failed(){return this._isSuccess?O(new l("try.failed()")):x(this.value)}fold(e,t){return this._isSuccess?t(this.value):e(this.value)}filter(e){if(!this._isSuccess)return this;try{return e(this.value)?this:O(new l(`Predicate does not hold for ${this.value}`))}catch(e){return O(e)}}flatMap(e){if(!this._isSuccess)return this;try{return e(this.value)}catch(e){return O(e)}}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}map(e){return this._isSuccess?k.of((()=>e(this.value))):this}forEach(e){this._isSuccess&&e(this.value)}recover(e){return this._isSuccess?this:k.of((()=>e(this.value)))}recoverWith(e){try{return this._isSuccess?this:e(this.value)}catch(e){return O(e)}}toOption(){return this._isSuccess?E(this.value):S}toEither(){return this._isSuccess?b(this.value):y(this.value)}equals(e){return null!=e&&(this._isSuccess?e._isSuccess&&i(this.value,e.value):!e._isSuccess&&i(this.value,e.value))}hashCode(){return this._isSuccess,o(this.value)}static of(e){try{return x(e())}catch(e){return O(e)}}static pure(e){return k.success(e)}static unit(){return N}static success(e){return x(e)}static failure(e){return O(e)}static raise(e){return O(e)}static map2(e,t,n){if(e.isFailure())return e;if(t.isFailure())return t;try{return x(n(e.value,t.value))}catch(e){return O(e)}}static map3(e,t,n,r){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;try{return x(r(e.value,t.value,n.value))}catch(e){return O(e)}}static map4(e,t,n,r,i){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;try{return x(i(e.value,t.value,n.value,r.value))}catch(e){return O(e)}}static map5(e,t,n,r,i,o){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;try{return x(o(e.value,t.value,n.value,r.value,i.value))}catch(e){return O(e)}}static map6(e,t,n,r,i,o,a){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;if(o.isFailure())return o;try{return x(a(e.value,t.value,n.value,r.value,i.value,o.value))}catch(e){return O(e)}}static tailRecM(e,t){let n=e;for(;;)try{const e=t(n);if(e.isFailure())return e;const r=e.get();if(r.isRight())return x(r.value);n=r.value}catch(e){return O(e)}}}class A extends k{constructor(e){super(e,"success")}}function x(e){return new A(e)}class T extends k{constructor(e){super(e,"failure")}}function O(e){return new T(e)}const R={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:k.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>k.tailRecM(t,(t=>e(f.left,f.right,t)))};m(k,R,R);const N=x(void 0);class L{static of(e){return new P(e)}static empty(){return D}static collection(...e){return new B(e)}static cancelAll(e){let t=null;for(const n of e)try{n.cancel()}catch(e){t?t.push(e):t=[e]}if(t)throw 1===t.length?t[0]:new s(t)}}class P extends L{constructor(e){super(),this.thunk=e}cancel(){if(null!==this.thunk){const e=this.thunk;this.thunk=null,e()}}}class M{constructor(){this._funIsDummy=!0}cancel(){}}const D=new M;class F{static of(e){return new U(e)}static empty(){return new $}static alreadyCanceled(){return j}static collection(...e){return new B(e)}}class B extends F{constructor(e){super(),this._refs=e}isCanceled(){return!this._refs}cancel(){if(this._refs)try{L.cancelAll(this._refs)}finally{delete this._refs}}}class U extends P{isCanceled(){return null===this.thunk}}class $ extends F{constructor(){super(...arguments),this.canceled=!1}isCanceled(){return this.canceled}cancel(){this.canceled=!0}}const j=new class extends M{isCanceled(){return!0}};new class extends M{isCanceled(){return!0}cancel(){}update(e){return e.cancel(),this}};class W{constructor(e){this._underlying=e,this._canceled=!1}update(e){return this._canceled?e.cancel():this._underlying=e,this}isCanceled(){return this._canceled}cancel(){this._canceled||(this._canceled=!0,this._underlying&&(this._underlying.cancel(),delete this._underlying))}collapse(){if(this._underlying&&this._underlying instanceof W){const e=this._underlying;this._underlying=e._underlying,this._canceled=e._canceled}return this}clear(){return this._canceled||(this._underlying=void 0),this}static empty(){return new W}static of(e){return new W(L.of(e))}}class G{constructor(e){this._refs=e?e.slice(0):[]}cancel(){if(this._refs)try{L.cancelAll(this._refs)}finally{delete this._refs}}isCanceled(){return!this._refs}push(e){return this._refs?this._refs.push(e):e.cancel(),this}pop(){return this._refs&&this._refs.pop()||L.empty()}static empty(){return new G}static collection(...e){return new G(e)}}class q{constructor(e){this._underlying=e||D,this._chained=!1}update(e){if(!e)throw new u("cannot update to null value");return this._underlying?this._chained?(this._underlying.update(e),this):(this._underlying=e,this):(e.cancel(),this)}cancel(){this._underlying&&(this._underlying.cancel(),this._chained=!1,delete this._underlying)}clear(){this._underlying&&(this._underlying=D,this._chained=!1)}isCanceled(){return!this._underlying||this._chained&&this._underlying.isCanceled()}chainTo(e){if(!e)throw new u("cannot chain to null value");if(e===this)return this;if(!this._underlying)return e.cancel(),this;let t=e,n=!0;for(;t&&n;)if(t._chained){const e=t._underlying;if(e===this)return this;t=e,n=!!e}else t._underlying||(t=void 0),n=!1;if(t){const e=this._underlying;this._underlying=t,this._chained=!0,e instanceof M||t.update(e)}else this.cancel();return this}static empty(){return new q}}class H{toString(){return this.label.toUpperCase()}}const z=1e3,V=1e6,Y=1e3*V,X=60*Y,J=60*X,Z=24*J,K=9007199254740992,Q=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)};function ee(e,t,n){return e>n?K:e<-n?-9007199254740992:e*t}const te=new class extends H{constructor(){super(...arguments),this.ord=0,this.label="nanoseconds"}convert(e,t){return t.toNanos(e)}toNanos(e){return e}toMicros(e){return Q(e/1e3)}toMillis(e){return Q(e/(V/1))}toSeconds(e){return Q(e/(Y/1))}toMinutes(e){return Q(e/(X/1))}toHours(e){return Q(e/(J/1))}toDays(e){return Q(e/(Z/1))}};const ne=new class extends H{constructor(){super(...arguments),this.ord=1,this.label="microseconds"}convert(e,t){return t.toMicros(e)}toNanos(e){return ee(e,1e3,Q(K/1e3))}toMicros(e){return e}toMillis(e){return Q(e/1e3)}toSeconds(e){return Q(e/(Y/z))}toMinutes(e){return Q(e/(X/z))}toHours(e){return Q(e/(J/z))}toDays(e){return Q(e/(Z/z))}};const re=new class extends H{constructor(){super(...arguments),this.ord=2,this.label="milliseconds"}convert(e,t){return t.toMillis(e)}toNanos(e){return ee(e,V/1,Q(K/(V/1)))}toMicros(e){return ee(e,1e3,Q(K/1e3))}toMillis(e){return e}toSeconds(e){return Q(e/1e3)}toMinutes(e){return Q(e/6e4)}toHours(e){return Q(e/(J/V))}toDays(e){return Q(e/(Z/V))}};const ie=new class extends H{constructor(){super(...arguments),this.ord=3,this.label="seconds"}convert(e,t){return t.toSeconds(e)}toNanos(e){return ee(e,Y/1,Q(K/(Y/1)))}toMicros(e){return ee(e,Y/z,Q(K/(Y/z)))}toMillis(e){return ee(e,1e3,Q(K/1e3))}toSeconds(e){return e}toMinutes(e){return Q(e/60)}toHours(e){return Q(e/3600)}toDays(e){return Q(e/86400)}};const oe=new class extends H{constructor(){super(...arguments),this.ord=4,this.label="minutes"}convert(e,t){return t.toMinutes(e)}toNanos(e){return ee(e,X/1,Q(K/(X/1)))}toMicros(e){return ee(e,X/z,Q(K/(X/z)))}toMillis(e){return ee(e,6e4,Q(K/6e4))}toSeconds(e){return ee(e,60,Q(K/60))}toMinutes(e){return e}toHours(e){return Q(e/60)}toDays(e){return Q(e/1440)}};const ae=new class extends H{constructor(){super(...arguments),this.ord=5,this.label="hours"}convert(e,t){return t.toHours(e)}toNanos(e){return ee(e,J/1,Q(K/(J/1)))}toMicros(e){return ee(e,J/z,Q(K/(J/z)))}toMillis(e){return ee(e,J/V,Q(K/(J/V)))}toSeconds(e){return ee(e,3600,Q(K/3600))}toMinutes(e){return ee(e,60,Q(K/60))}toHours(e){return e}toDays(e){return Q(e/24)}};const se=new class extends H{constructor(){super(...arguments),this.ord=6,this.label="days"}convert(e,t){return t.toDays(e)}toNanos(e){return ee(e,Z/1,Q(K/(Z/1)))}toMicros(e){return ee(e,Z/z,Q(K/(Z/z)))}toMillis(e){return ee(e,Z/V,Q(K/(Z/V)))}toSeconds(e){return ee(e,86400,Q(K/86400))}toMinutes(e){return ee(e,1440,Q(K/1440))}toHours(e){return ee(e,24,Q(K/24))}toDays(e){return e}};class le{constructor(e,t){if(isNaN(e))throw new u("NaN is not supported for a Duration");this.duration=Q(e),this.unit=t}isFinite(){return isFinite(this.duration)}toNanos(){return te.convert(this.duration,this.unit)}toMicros(){return ne.convert(this.duration,this.unit)}toMillis(){return re.convert(this.duration,this.unit)}toSeconds(){return ie.convert(this.duration,this.unit)}toMinutes(){return oe.convert(this.duration,this.unit)}toHours(){return ae.convert(this.duration,this.unit)}toDays(){return se.convert(this.duration,this.unit)}convertTo(e){return new le(e.convert(this.duration,this.unit),e)}negate(){switch(this.duration){case 1/0:return le.negInf();case-1/0:return le.inf();default:return new le(-this.duration,this.unit)}}plus(e){if(!isFinite(this.duration)){if(!isFinite(e.duration)&&this.duration!==e.duration)throw new u("cannot deal with two infinities with different signs, as that would be a NaN");return this}if(0===e.duration)return this;if(0===this.duration)return e;if(!isFinite(e.duration))return e;let t=this,n=e;return n.unit.ord<t.unit.ord&&(t=e,n=this),n=n.convertTo(t.unit),new le(t.duration+n.duration,t.unit)}minus(e){return this.plus(e.negate())}equals(e){function t(e,t){return e.unit.convert(t.duration,t.unit)===e.duration}return isFinite(this.duration)?this.unit.ord<=e.unit.ord?t(this,e):t(e,this):!isFinite(e.duration)&&this.duration===e.duration}hashCode(){return this.isFinite()?this.toNanos():this.duration===1/0?7540833725118015:422082410550358}toString(){return this.isFinite()?`${this.duration} ${this.unit.label}`:this.duration>=0?"[end of time]":"[beginning of time]"}static of(e){return"number"==typeof e?le.millis(e):e}static zero(){return new le(0,se)}static inf(){return new le(1/0,se)}static negInf(){return new le(-1/0,se)}static nanos(e){return new le(e,te)}static micros(e){return new le(e,ne)}static millis(e){return new le(e,re)}static seconds(e){return new le(e,ie)}static minutes(e){return new le(e,oe)}static hours(e){return new le(e,ae)}static days(e){return new le(e,se)}}class ce{constructor(e){this._previous=[],this.get=e}set(e){return this.setL((()=>e))}setL(e){this._previous.push(this.get),this.get=e}revert(){const e=this._previous.pop();e&&(this.get=e)}bind(e,t){return this.bindL((()=>e),t)}bindL(e,t){const n=this.get,r=this._previous.slice(0),i=this;try{return i.get=e,t()}finally{i.get=n,i._previous=r}}static of(e){return new ce(e)}}function ue(e){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const t=e[Symbol.iterator](),n=[];for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)return n}}const de=Math.log(2);function pe(e){if(e<0)throw new u("nr must be positive");const t=Math.ceil(function(e){return Math.log(e)/de}(e));return 1<<(t>30?30:t&t)}class he{constructor(e){switch(this.batchIndex=0,this.executionModel=e,e.type){case"alwaysAsync":this.executeBatched=this.executeAsync;break;case"synchronous":this.executeBatched=this.trampoline;break;case"batched":const t=e.recommendedBatchSize-1;this.executeBatched=e=>{const n=this.batchIndex+1&t;return n?(this.batchIndex=n,this.trampoline(e)):this.executeAsync(e)}}}scheduleWithFixedDelay(e,t,n){const r=(e,i,o)=>i.update(e.scheduleOnce(o,(()=>{n(),r(e,i,t)}))),i=W.empty();return r(this,i,e)}scheduleAtFixedRate(e,t,n){const r=(e,t,i,o)=>t.update(e.scheduleOnce(i,(()=>{const i=e.currentTimeMillis();n();const a=e.currentTimeMillis()-i,s=Math.max(0,o-a);r(e,t,o,s)}))),i=W.empty();return r(this,i,"number"==typeof e?e:e.toMillis(),"number"==typeof t?t:t.toMillis())}}he.global=ce.of((()=>ye));class me{constructor(e,t){switch(this.type=e,e){case"synchronous":this.recommendedBatchSize=1073741824;break;case"alwaysAsync":this.recommendedBatchSize=1;break;case"batched":this.recommendedBatchSize=pe(t||128)}}equals(e){return this.type===e.type&&this.recommendedBatchSize===e.recommendedBatchSize}hashCode(){return 47*a(this.type)+this.recommendedBatchSize}static synchronous(){return new me("synchronous")}static alwaysAsync(){return new me("alwaysAsync")}static batched(e){return new me("batched",e)}}me.global=ce.of((()=>me.batched()));class fe{constructor(e){this._isActive=!1,this._queue=[],this._reporter=e}execute(e){this._isActive?this._queue.push(e):this.runLoop(e)}runLoop(e){this._isActive=!0;try{let t=e;for(;t;){try{t()}catch(e){this._reporter(e)}t=this._queue.pop()}}finally{this._isActive=!1}}}class ge extends he{constructor(e=!1,t=me.global.get(),n){super(t),n&&(this.reportFailure=n),this._trampoline=new fe(this.reportFailure),this._useSetImmediate=!!e&&"function"==typeof setImmediate,this.executeAsync=this._useSetImmediate?e=>setImmediate(ve(e,this.reportFailure)):e=>setTimeout(ve(e,this.reportFailure))}executeAsync(e){throw new d("Constructor of GlobalScheduler wasn't executed")}trampoline(e){return this._trampoline.execute(e)}reportFailure(e){console.error(e)}currentTimeMillis(){return Date.now()}scheduleOnce(e,t){const n=Math.max(0,le.of(e).toMillis()),r=setTimeout((()=>{this.batchIndex=0;try{t()}catch(e){this.reportFailure(e)}}),n);return L.of((()=>clearTimeout(r)))}withExecutionModel(e){return new ge(this._useSetImmediate,e)}}const ye=new ge(!0);function ve(e,t){return()=>{try{e()}catch(e){t(e)}}}class be{transform(e,t){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(t(e),this._scheduler)))}attempt(){return this.transform(y,b)}flatMap(e){return this.transformWith(be.raise,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}forEach(e){this.onComplete((t=>t.forEach(e)))}map(e){return this.transformWith(be.raise,(t=>be.pure(e(t),this._scheduler)))}recoverWith(e){return this.transformWith(e,be.pure)}recover(e){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(e,this._scheduler)))}then(e,t){if(!e&&!t)return this;const n=this._scheduler;return this.transformWith(ke(t,(e=>be.raise(e,n)),n),ke(e,(e=>be.pure(e,n)),n))}toPromise(){return new Promise(((e,t)=>{this.onComplete((n=>n.fold(t,e)))}))}delayResult(e){return this.transformWith((t=>be.delayedTick(e,this._scheduler).flatMap((()=>be.raise(t,this._scheduler)))),(t=>be.delayedTick(e,this._scheduler).map((()=>t))))}timeout(e){const t=be.raise(new p(le.of(e).toString()),this._scheduler);return this.timeoutTo(e,(()=>t))}timeoutTo(e,t){const n=[this,be.delayedTick(e,this._scheduler).flatMap((()=>t()))];return be.firstCompletedOf(n,this._scheduler)}static of(e,t=he.global.get()){const n=Se.empty(t);return t.executeAsync((()=>n.tryComplete(k.of(e)))),n.future()}static pure(e,t=he.global.get()){return new we(x(e),t)}static raise(e,t=he.global.get()){return new we(O(e),t)}static create(e,t=he.global.get()){const n=Se.empty(t);try{const t=e(n.complete);return n.future(t||void 0)}catch(e){return be.raise(e,t)}}static unit(e=he.global.get()){const t=e;let n=t._funCache&&t._funCache.futureUnit;return n||(n=new we(x(void 0),e),t._funCache=t._funCache||{},t._funCache.futureUnit=n),n}static delayedTick(e,t=he.global.get()){return be.create((n=>t.scheduleOnce(e,(()=>n(x(void 0))))),t)}static tailRecM(e,t,n=he.global.get()){return t(e).flatMap((e=>e.isRight()?be.pure(e.get(),n):be.tailRecM(e.swap().get(),t,n)))}static fromPromise(e,t=he.global.get()){return e instanceof be?e.withScheduler(t):be.create((t=>{e.then((e=>t(x(e))),(e=>t(O(e))))}),t)}static fromTry(e,t=he.global.get()){return new we(e,t)}static firstCompletedOf(e,t=he.global.get()){return function(e,t){return be.create((n=>{try{const r=xe(e,t);if(0===r.length)return n(O(new u("empty list of futures")));let i=!1;for(let e=0;e<r.length;e++){const o=e;r[e].onComplete((e=>{i?e.isFailure()&&t.reportFailure(e.failed().get()):(i=!0,Ae(r,t,o),n(e))}))}return L.of((()=>Ae(r,t)))}catch(e){n(O(e))}}),t)}(e,t)}static traverse(e,t=1/0,n=he.global.get()){return r=>function(e,t,n,r){if(n<=0)throw new u("parallelism <= 0");return be.of((()=>ue(e)),r).flatMap((e=>Te(e,t,n,r,0,[])))}(e,r,t,n)}static sequence(e,t=he.global.get()){return function(e,t){return be.create((n=>{try{const r=xe(e,t);if(0===r.length)return n(x([]));const i=L.of((()=>Ae(r,t)));let o=!1,a=0,s=[];for(let e=0;e<r.length;e++){const l=e;r[e].onComplete((e=>{a+=1,e.isSuccess()?o||(s[l]=e.get(),o=a===r.length,o&&n(x(s))):o?t.reportFailure(e.failed().get()):(o=!0,i.cancel(),n(e))}))}return i}catch(e){n(O(e))}}),t)}(e,t)}static map2(e,t,n,r=he.global.get()){return be.sequence([e,t],r).map((e=>n(e[0],e[1])))}static map3(e,t,n,r,i=he.global.get()){return be.sequence([e,t,n],i).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i,o=he.global.get()){return be.sequence([e,t,n,r],o).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,o,a=he.global.get()){return be.sequence([e,t,n,r,i],a).map((e=>o(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,o,a,s=he.global.get()){return be.sequence([e,t,n,r,i,o],s).map((e=>a(e[0],e[1],e[2],e[3],e[4],e[5])))}}class we extends be{constructor(e,t){super(),this._value=e,this._scheduler=t}cancel(){}value(){return E(this._value)}withScheduler(e){return this._scheduler===e?this:new we(this._value,e)}onComplete(e){this._scheduler.executeBatched((()=>e(this._value)))}transformWith(e,t){return Ie(this,e,t,this._scheduler)}toPromise(){return this._value.fold((e=>Promise.reject(e)),(e=>Promise.resolve(e)))}}class _e{constructor(){this.id=null,this.ref=null}compressedRoot(){let e=this;for(;"chained"===e.id;)e=e.ref,this.ref=e;return e}value(){switch(this.id){case null:return S;case"complete":return E(this.ref);case"chained":return this.compressedRoot().value()}}tryComplete(e,t){switch(this.id){case null:const n=this.ref;if(this.ref=e,this.id="complete",n)for(let r=0;r<n.length;r++)t.executeBatched((()=>n[r](e)));return!0;case"complete":return!1;case"chained":const r=this.ref.compressedRoot(),i=r.tryComplete(e,t);return this.id="complete",this.ref=i?e:r.value().get(),i}}chainTo(e,t){switch(this.id){case null:const n=this.ref;if(this.id="chained",this.ref=e.compressedRoot(),n&&n.length>0)for(let r=0;r<n.length;r++)e.onComplete(n[r],t);break;case"chained":this.compressedRoot().chainTo(e.compressedRoot(),t);break;case"complete":e.tryComplete(this.ref,t)}}onComplete(e,t){switch(this.id){case null:this.ref||(this.ref=[]),this.ref.push(e);break;case"complete":t.executeBatched((()=>e(this.ref)));break;case"chained":this.ref.onComplete(e,t)}}}const Ce={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:be.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>be.tailRecM(t,(t=>e(f.left,f.right,t)))};m(be,Ce);class Ee extends be{constructor(e,t,n){super(),this._state=e,this._scheduler=n,t&&(this._cancelable=t)}value(){return this._state.value()}onComplete(e){return this._state.onComplete(e,this._scheduler)}cancel(){if(this._cancelable)try{this._cancelable.cancel()}finally{delete this._cancelable}}withScheduler(e){return this._scheduler===e?this:new Ee(this._state,this._cancelable,e)}transformWith(e,t){return Ie(this,e,t,this._scheduler,this._cancelable)}}class Se{constructor(e,t){this.tryComplete=e=>this._state.tryComplete(e,this._scheduler),this.complete=e=>{if(!this.tryComplete(e))throw new c("Cannot complete a FutureMaker twice!")},this._state=e,this._scheduler=t}trySuccess(e){return this.tryComplete(x(e))}success(e){return this.complete(x(e))}tryFailure(e){return this.tryComplete(O(e))}failure(e){return this.complete(O(e))}chainTo(e){this._state.chainTo(e._state,this._scheduler)}future(e){switch(this._state.id){case"complete":return new we(this._state.ref,this._scheduler);default:return new Ee(this._state,e,this._scheduler)}}withScheduler(e){return this._scheduler===e?this:new Se(this._state,e)}static empty(e=he.global.get()){return new Se(new _e,e)}static completed(e,t=he.global.get()){const n=new _e;return n.id="complete",n.ref=e,new Se(n,t)}}function Ie(e,t,n,r,i){const o=Se.empty(r),a=new q(i);return e.onComplete((e=>{let i;try{i=e.fold(t,n)}catch(e){i=be.raise(e)}if(i.value().isEmpty()){const e=i._cancelable;e&&e instanceof q?e.chainTo(a):!e||e instanceof M||a.update(e)}else a.clear();i instanceof Ee?i._state.chainTo(o._state,r):i.onComplete(o.tryComplete)})),o.future(a)}function ke(e,t,n){return r=>{if("function"!=typeof e)return t(r);const i=e(r);return i?"function"==typeof i.then?be.fromPromise(i,n):be.pure(i,n):be.pure(r,n)}}function Ae(e,t,n=-1){const r=[];for(let t=0;t<e.length;t++)if(t!==n)try{e[t].cancel()}catch(e){r.push(e)}if(r.length>0)for(const e of r)t.reportFailure(e)}function xe(e,t){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const n=[];try{const t=e[Symbol.iterator]();for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)break}return n}catch(e){throw Ae(n,t),e}}function Te(e,t,n,r,i,o){if(i>=e.length)return be.pure(o,r);let a=[],s=0;try{for(;i<e.length&&s<n;)a.push(t(e[i++])),s+=1;const l=be.sequence(a,r).map((e=>{for(let t=0;t<e.length;t++)o.push(e[t])}));return i>=e.length?l.map((()=>o)):l.flatMap((()=>Te(e,t,n,r,i,o)))}catch(e){return Ae(a,r),be.raise(e)}}const Oe={next:()=>({done:!0})};function Re(e){if(!e)return Oe;if("[object Array]"!==Object.prototype.toString.call(e))return e[Symbol.iterator]();const t=e;if(0===t.length)return Oe;let n=0;return{next:()=>{const e=t[n++];return{done:n>=t.length,value:e}}}}class Ne{get(){return function(e){let t=e,n=null,r=null;for(;;)switch(t._tag){case"now":const e=t,i=$e(n,r);if(!i)return e.value;n=null,t=i(e.value);break;case"always":case"once":t=new Le(t.get());break;case"suspend":t=t.thunk();break;case"flatMap":n&&(r||(r=[]),r.push(n));const o=t;n=o.f,t=o.source}}(this)}map(e){return new Be(this,(t=>Ne.now(e(t))))}flatMap(e){return new Be(this,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}memoize(){switch(this._tag){case"now":case"once":return this;case"always":return new Me(this.get);default:return new Me((()=>this.get()))}}forEachL(e){return this.map(e)}forEach(e){this.forEachL(e).get()}static of(e){return Ne.always(e)}static pure(e){return Ne.now(e)}static now(e){return new Le(e)}static unit(){return Pe}static always(e){return new De(e)}static once(e){return new Me(e)}static suspend(e){return new Fe(e)}static defer(e){return Ne.suspend(e)}static tailRecM(e,t){return t(e).flatMap((e=>e.isRight()?Ne.now(e.get()):Ne.tailRecM(e.swap().get(),t)))}static sequence(e){return function(e){return Ne.of((()=>Re(e))).flatMap((e=>je([],e)))}(e)}static map2(e,t,n){return Ne.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return Ne.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return Ne.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,o){return Ne.sequence([e,t,n,r,i]).map((e=>o(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,o,a){return Ne.sequence([e,t,n,r,i,o]).map((e=>a(e[0],e[1],e[2],e[3],e[4],e[5])))}}class Le extends Ne{constructor(e){super(),this.value=e,this._tag="now"}get(){return this.value}toString(){return`Eval.now(${JSON.stringify(this.value)})`}}const Pe=new Le(void 0);class Me extends Ne{constructor(e){super(),this._tag="once",this._thunk=e}get(){if(this._thunk){try{this._cache=this._thunk(),this._isError=!1}catch(e){this._cache=e,this._isError=!0}delete this._thunk}if(this._isError)throw this._cache;return this._cache}toString(){return"Eval.once([thunk])"}}class De extends Ne{constructor(e){super(),this._tag="always",this.get=e}toString(){return"Eval.always([thunk])"}}class Fe extends Ne{constructor(e){super(),this.thunk=e,this._tag="suspend"}toString(){return"Eval.suspend([thunk])"}}class Be extends Ne{constructor(e,t){super(),this.source=e,this.f=t,this._tag="flatMap"}toString(){return`Eval#FlatMap(${String(this.source)}, [function])`}}const Ue={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:Ne.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>Ne.tailRecM(t,(t=>e(f.left,f.right,t)))};function $e(e,t){return e||(t&&t.length>0?t.pop():null)}function je(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?Ne.pure(e):je(e,t))))}if(r)return Ne.pure(e)}}m(Ne,Ue);class We{run(e=he.global.get()){return function(e,t){let n=e,r=null,i=null;const o=t.executionModel.recommendedBatchSize-1;let a=t.batchIndex;for(;;)if(n instanceof k){if(n.isSuccess()){const e=et(r,i);if(!e)return t.batchIndex=a,be.pure(n.get());try{n=e(n.get())}catch(e){n=new Ge(k.failure(e))}}else{const e=n.failed().get(),o=tt(r,i);if(!o)return t.batchIndex=a,be.raise(e);try{n=o(e)}catch(e){n=new Ge(k.failure(e))}}r=null;const e=a+1&o;if(!e)return at(n,t,r,i,!0);a=e}else switch(n._tag){case"pure":n=n.value;break;case"always":n=k.of(n.thunk);break;case"once":n=n.runTry();break;case"flatMap":const e=n;r&&(i||(i=[]),i.push(r)),r=e.g?[e.f,e.g]:e.f,n=e.source;break;case"async":case"memoize":return at(n,t,r,i,!1)}}(this,e)}runOnComplete(e,t=he.global.get()){return ot(this,t,null,e,null,null,null)||L.empty()}attempt(){return this.transform((e=>f.left(e)),f.right)}asyncBoundary(e){return this.flatMap((t=>We.shift(e).map((()=>t))))}chain(e){return this.flatMap(e)}delayExecution(e){return We.delayedTick(e).flatMap((()=>this))}delayResult(e){return this.transformWith((t=>We.delayedTick(e).flatMap((()=>We.raise(t)))),(t=>We.delayedTick(e).map((()=>t))))}doOnFinish(e){return this.transformWith((t=>e(E(t)).flatMap((()=>We.raise(t)))),(t=>e(S).map((()=>t))))}doOnCancel(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler;r.trampoline((()=>{const i=t.connection;i.push(L.of((()=>e.run(r)))),We.unsafeStart(this,t,st(r,i,n))}))}))}executeForked(e){return We.fork(this,e)}executeWithModel(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler.withExecutionModel(e),i=new Je(r,t.connection,t.options);r.trampoline((()=>We.unsafeStart(this,i,n)))}))}executeWithOptions(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=new Je(r,t.connection,e);r.trampoline((()=>We.unsafeStart(this,i,n)))}))}flatMap(e){return new Ve(this,e)}ap(e){return e.flatMap((e=>this.map(e)))}followedBy(e){return this.flatMap((()=>e))}forEach(e){return this.map(e)}forEffect(e){return this.flatMap((t=>e.map((()=>t))))}map(e){return new Ve(this,(t=>We.now(e(t))))}memoize(){switch(this._tag){case"pure":return this;case"always":return new He(this.thunk,!1);case"memoize":const e=this;return e.onlySuccess?new Xe(this,!1):e;default:return new Xe(this,!1)}}memoizeOnSuccess(){switch(this._tag){case"pure":case"once":case"memoize":return this;case"always":return new He(this.thunk,!0);default:return new Xe(this,!0)}}recover(e){return this.recoverWith((t=>We.now(e(t))))}recoverWith(e){return this.transformWith(e,We.now)}timeout(e){const t=We.raise(new p(le.of(e).toString()));return this.timeoutTo(e,t)}timeoutTo(e,t){const n=[this,We.delayedTick(e).flatMap((()=>t))];return We.firstCompletedOf(n)}transform(e,t){return this.transformWith((t=>We.now(e(t))),(e=>We.now(t(e))))}transformWith(e,t){return new Ve(this,t,e)}static always(e){return new ze(e)}static async(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=t.connection;r.trampoline((()=>{const t=st(r,i,n);try{const n=e(r,t);i.push(n||L.empty())}catch(e){t(O(e))}}))}))}static asyncUnsafe(e){return new Ye(e)}static defer(e){return We.unit().flatMap((()=>e()))}static deferAction(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler;let i;try{i=e(r)}catch(e){i=We.raise(e)}r.trampoline((()=>We.unsafeStart(i,t,n)))}))}static deferFuture(e){return We.suspend((()=>We.fromFuture(e())))}static deferFutureAction(e){return We.deferAction((t=>We.fromFuture(e(t))))}static delayedTick(e){return We.asyncUnsafe(((t,n)=>{const r=t.connection,i=t.scheduler.scheduleOnce(e,(()=>{r.pop(),n(k.unit())}));r.push(i)}))}static firstCompletedOf(e){return ut(e,be.firstCompletedOf)}static fromFuture(e){return e.value().isEmpty()?We.asyncUnsafe(((t,n)=>{t.connection.push(e),e.onComplete((e=>{t.connection.pop(),n(e)}))})):We.fromTry(e.value().get())}static fromTry(e){return new Ge(e)}static fork(e,t){return We.shift(t).flatMap((()=>e))}static map2(e,t,n){return We.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return We.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return We.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,o){return We.sequence([e,t,n,r,i]).map((e=>o(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,o,a){return We.sequence([e,t,n,r,i,o]).map((e=>a(e[0],e[1],e[2],e[3],e[4],e[5])))}static now(e){return new Ge(x(e))}static of(e){return We.always(e)}static once(e){return new He(e,!1)}static parMap2(e,t,n){return We.gather([e,t]).map((e=>n(e[0],e[1])))}static parMap3(e,t,n,r){return We.gather([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static parMap4(e,t,n,r,i){return We.gather([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static parMap5(e,t,n,r,i,o){return We.gather([e,t,n,r,i]).map((e=>o(e[0],e[1],e[2],e[3],e[4])))}static parMap6(e,t,n,r,i,o,a){return We.gather([e,t,n,r,i,o]).map((e=>a(e[0],e[1],e[2],e[3],e[4],e[5])))}static pure(e){return We.now(e)}static raise(e){return new Ge(O(e))}static sequence(e){return function(e){return We.of((()=>Re(e))).flatMap((e=>ct([],e)))}(e)}static gather(e){return ut(e,be.sequence)}static shift(e){return e?Ke(e):Qe}static suspend(e){return We.unit().flatMap((()=>e()))}static tailRecM(e,t){try{return t(e).flatMap((e=>e.isRight()?We.now(e.get()):We.tailRecM(e.swap().get(),t)))}catch(e){return We.raise(e)}}static unit(){return qe}static unsafeStart(e,t,n){return ot(e,t.scheduler,t,n,null,null,null)}}class Ge extends We{constructor(e){super(),this.value=e,this._tag="pure"}}const qe=new Ge(k.unit());class He extends We{constructor(e,t){super(),this._tag="once",this._thunk=e,this.onlyOnSuccess=t}memoize(){return this.onlyOnSuccess&&this._thunk?new He(this._thunk,!1):this}runTry(){if(this._thunk){const e=k.of(this._thunk);return!e.isSuccess()&&this.onlyOnSuccess||(delete this._thunk,delete this.onlyOnSuccess,this.cache=e),e}return this.cache}}class ze extends We{constructor(e){super(),this.thunk=e,this._tag="always"}}class Ve extends We{constructor(e,t,n){super(),this.source=e,this.f=t,this.g=n,this._tag="flatMap"}}class Ye extends We{constructor(e){super(),this.register=e,this._tag="async"}}class Xe extends We{constructor(e,t){super(),this._tag="memoize",this.source=e,this.result=null,this.onlySuccess=t}}class Je{constructor(e,t=new G,n={autoCancelableRunLoops:!1}){this.scheduler=e,this.options=n,this.connection=t,n.autoCancelableRunLoops&&(this.shouldCancel=()=>t.isCanceled())}markAsyncBoundary(){this.scheduler.batchIndex=0}shouldCancel(){return!1}}const Ze={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:We.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>We.tailRecM(t,(t=>e(f.left,f.right,t)))};function Ke(e){return We.asyncUnsafe(((t,n)=>{(e||t.scheduler).executeAsync((()=>n(k.unit())))}))}m(We,Ze);const Qe=Ke();function et(e,t){let n;return e?n=e:t&&t.length>0&&(n=t.pop()),n?"function"==typeof n?n:n[0]:null}function tt(e,t){let n=e;do{if(n&&"function"!=typeof n)return n[1];n=t?t.pop():null}while(n);return null}class nt{constructor(e,t){this.context=e,this.callback=t,this.canCall=!1,this.bFirst=null,this.bRest=null,this.asFunction=this.signal.bind(this)}prepare(e,t){this.bFirst=e,this.bRest=t,this.canCall=!0}signal(e){this.canCall?(this.canCall=!1,ot(new Ge(e),this.context.scheduler,this.context,this.callback,this,this.bFirst,this.bRest)):e.isFailure()&&this.context.scheduler.reportFailure(e.failed().get())}}function rt(e,t,n,r,i,o,a){if(!t.shouldCancel()){t.scheduler.batchIndex=a;const s=r||new nt(t,n);s.prepare(i,o),e(t,s.asFunction)}}function it(e,t,n,r,i,o){t.shouldCancel()||t.scheduler.executeAsync((()=>{ot(e,t.scheduler,t,n,r,i,o)}))}function ot(e,t,n,r,i,o,a){let s=e,l=o,c=a;const u=t.executionModel.recommendedBatchSize-1;let d=t.batchIndex;for(;;)if(s instanceof k){if(s.isSuccess()){const e=et(l,c);if(!e)return t.batchIndex=d,r(s);try{s=e(s.get())}catch(e){s=k.failure(e)}}else{const e=tt(l,c);if(!e)return t.batchIndex=d,r(s);try{s=e(s.failed().get())}catch(e){s=k.failure(e)}}l=null;const e=d+1&u;if(!e){const e=n||new Je(t);return it(s instanceof k?new Ge(s):s,e,r,i,l,c),e.connection}d=e}else switch(s._tag){case"pure":s=s.value;break;case"always":s=k.of(s.thunk);break;case"once":s=s.runTry();break;case"flatMap":const e=s;l&&(c||(c=[]),c.push(l)),l=e.g?[e.f,e.g]:e.f,s=e.source;break;case"async":const o=s,a=n||new Je(t);return rt(o.register,a,r,i,l,c,d),a.connection;case"memoize":return lt(s,t,n,r,l,c,d)}}function at(e,t,n,r,i){return be.create((o=>{const a=new Je(t);return i?it(e,a,o,null,n,r):ot(e,t,a,o,null,n,r),a.connection}))}function st(e,t,n){let r=!1;return i=>{r?i.isFailure()&&e.reportFailure(i.failed().get()):(r=!0,e.trampoline((()=>{t.pop(),n(i)})))}}function lt(e,t,n,r,i,o,a){let s;if(t.batchIndex=a,e.result)s=e.result;else{const n=at(e.source,t,null,null,!1);n.value().isEmpty()?(e.result=n,s=n,n.onComplete((t=>{t.isSuccess()||!e.onlySuccess?(e.result=t,delete e.source):e.result=null}))):(s=n.value().get(),!s.isSuccess()&&e.onlySuccess||(e.result=s))}ot(s instanceof k?new Ge(s):We.fromFuture(s),t,n,r,null,i,o)}function ct(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?We.pure(e):ct(e,t))))}if(r)return We.pure(e)}}function ut(e,t){return We.asyncUnsafe(((n,r)=>{n.scheduler.trampoline((()=>{let i=!0;try{const o=[],a=ue(e);i=!1;for(let e=0;e<a.length;e++){const t=a[e].run(n.scheduler);o.push(t)}const s=t(o,n.scheduler);n.connection.push(s),s.onComplete(st(n.scheduler,n.connection,r))}catch(e){i?r(O(e)):n.scheduler.reportFailure(e)}}))}))}},77150:(e,t,n)=>{n.d(t,{R:()=>a});var r=n(59312),i=n(14601),o=n(46601);function a(e){return function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.closingSelector))},e}(),l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return r.__extends(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{t=(0,this.closingSelector)()}catch(e){return this.error(e)}e=new i.w,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add((0,o.ft)(t,new o.IY(this))),this.subscribing=!1},t}(o.Ds)},87938:(e,t,n)=>{n.d(t,{j:()=>l});var r=n(59312),i=n(98036),o=n(44586),a=n(57655),s=n(72500);function l(e,t){return t?function(n){return new d(n,t).lift(new c(e))}:function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.delayDurationSelector))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return r.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){var t=this.index++;try{var n=this.delayDurationSelector(e,t);n&&this.tryDelay(n,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue},t.prototype.tryDelay=function(e,t){var n=(0,s.D)(this,e,t);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(a.L),d=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subscriptionDelay=n,r}return r.__extends(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new p(e,this.source))},t}(o.y),p=function(e){function t(t,n){var r=e.call(this)||this;return r.parent=t,r.source=n,r.sourceSubscribed=!1,r}return r.__extends(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(i.L)},15789:(e,t,n)=>{n.d(t,{D:()=>o});var r=n(59312),i=n(98036);function o(){return function(e){return e.lift(new a)}}var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(i.L)},83840:(e,t,n)=>{n.d(t,{i:()=>a});var r=n(59312),i=n(98036),o=n(12834);function a(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new l(e))},e}(),l=function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype._next=function(e){this.destination.next(o.P.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(o.P.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(o.P.createComplete()),e.complete()},t}(i.L)},62962:(e,t,n)=>{n.d(t,{n:()=>o});var r=n(32952),i=n(24755);function o(e){return e?(0,i.O)((function(){return new r.xQ}),e):(0,i.O)(new r.xQ)}},36303:(e,t,n)=>{n.d(t,{r:()=>a});var r=n(59312),i=n(98036),o=n(40151);function a(e){return void 0===e&&(e=-1),function(t){return 0===e?(0,o.c)():e<0?t.lift(new s(-1,t)):t.lift(new s(e-1,t))}}var s=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.count,this.source))},e}(),l=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return r.__extends(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,n=this.count;if(0===n)return e.prototype.complete.call(this);n>-1&&(this.count=n-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(i.L)},42833:(e,t,n)=>{n.d(t,{u:()=>o});var r=n(59312),i=n(46601);function o(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.notifier))},e}(),s=function(e){function t(t,n){var r=e.call(this,t)||this;r.hasValue=!1;var o=new i.IY(r);r.add(o),r.innerSubscription=o;var a=(0,i.ft)(n,o);return a!==o&&(r.add(a),r.innerSubscription=a),r}return r.__extends(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(i.Ds)},20279:(e,t,n)=>{var r,i=n(27061);t=e.exports=h,r="object"==typeof i&&i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],s=t.src=[],l=t.tokens={},c=0;function u(e){l[e]=c++}u("NUMERICIDENTIFIER"),s[l.NUMERICIDENTIFIER]="0|[1-9]\\d*",u("NUMERICIDENTIFIERLOOSE"),s[l.NUMERICIDENTIFIERLOOSE]="[0-9]+",u("NONNUMERICIDENTIFIER"),s[l.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",u("MAINVERSION"),s[l.MAINVERSION]="("+s[l.NUMERICIDENTIFIER]+")\\.("+s[l.NUMERICIDENTIFIER]+")\\.("+s[l.NUMERICIDENTIFIER]+")",u("MAINVERSIONLOOSE"),s[l.MAINVERSIONLOOSE]="("+s[l.NUMERICIDENTIFIERLOOSE]+")\\.("+s[l.NUMERICIDENTIFIERLOOSE]+")\\.("+s[l.NUMERICIDENTIFIERLOOSE]+")",u("PRERELEASEIDENTIFIER"),s[l.PRERELEASEIDENTIFIER]="(?:"+s[l.NUMERICIDENTIFIER]+"|"+s[l.NONNUMERICIDENTIFIER]+")",u("PRERELEASEIDENTIFIERLOOSE"),s[l.PRERELEASEIDENTIFIERLOOSE]="(?:"+s[l.NUMERICIDENTIFIERLOOSE]+"|"+s[l.NONNUMERICIDENTIFIER]+")",u("PRERELEASE"),s[l.PRERELEASE]="(?:-("+s[l.PRERELEASEIDENTIFIER]+"(?:\\."+s[l.PRERELEASEIDENTIFIER]+")*))",u("PRERELEASELOOSE"),s[l.PRERELEASELOOSE]="(?:-?("+s[l.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+s[l.PRERELEASEIDENTIFIERLOOSE]+")*))",u("BUILDIDENTIFIER"),s[l.BUILDIDENTIFIER]="[0-9A-Za-z-]+",u("BUILD"),s[l.BUILD]="(?:\\+("+s[l.BUILDIDENTIFIER]+"(?:\\."+s[l.BUILDIDENTIFIER]+")*))",u("FULL"),u("FULLPLAIN"),s[l.FULLPLAIN]="v?"+s[l.MAINVERSION]+s[l.PRERELEASE]+"?"+s[l.BUILD]+"?",s[l.FULL]="^"+s[l.FULLPLAIN]+"$",u("LOOSEPLAIN"),s[l.LOOSEPLAIN]="[v=\\s]*"+s[l.MAINVERSIONLOOSE]+s[l.PRERELEASELOOSE]+"?"+s[l.BUILD]+"?",u("LOOSE"),s[l.LOOSE]="^"+s[l.LOOSEPLAIN]+"$",u("GTLT"),s[l.GTLT]="((?:<|>)?=?)",u("XRANGEIDENTIFIERLOOSE"),s[l.XRANGEIDENTIFIERLOOSE]=s[l.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",u("XRANGEIDENTIFIER"),s[l.XRANGEIDENTIFIER]=s[l.NUMERICIDENTIFIER]+"|x|X|\\*",u("XRANGEPLAIN"),s[l.XRANGEPLAIN]="[v=\\s]*("+s[l.XRANGEIDENTIFIER]+")(?:\\.("+s[l.XRANGEIDENTIFIER]+")(?:\\.("+s[l.XRANGEIDENTIFIER]+")(?:"+s[l.PRERELEASE]+")?"+s[l.BUILD]+"?)?)?",u("XRANGEPLAINLOOSE"),s[l.XRANGEPLAINLOOSE]="[v=\\s]*("+s[l.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+s[l.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+s[l.XRANGEIDENTIFIERLOOSE]+")(?:"+s[l.PRERELEASELOOSE]+")?"+s[l.BUILD]+"?)?)?",u("XRANGE"),s[l.XRANGE]="^"+s[l.GTLT]+"\\s*"+s[l.XRANGEPLAIN]+"$",u("XRANGELOOSE"),s[l.XRANGELOOSE]="^"+s[l.GTLT]+"\\s*"+s[l.XRANGEPLAINLOOSE]+"$",u("COERCE"),s[l.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",u("COERCERTL"),a[l.COERCERTL]=new RegExp(s[l.COERCE],"g"),u("LONETILDE"),s[l.LONETILDE]="(?:~>?)",u("TILDETRIM"),s[l.TILDETRIM]="(\\s*)"+s[l.LONETILDE]+"\\s+",a[l.TILDETRIM]=new RegExp(s[l.TILDETRIM],"g");u("TILDE"),s[l.TILDE]="^"+s[l.LONETILDE]+s[l.XRANGEPLAIN]+"$",u("TILDELOOSE"),s[l.TILDELOOSE]="^"+s[l.LONETILDE]+s[l.XRANGEPLAINLOOSE]+"$",u("LONECARET"),s[l.LONECARET]="(?:\\^)",u("CARETTRIM"),s[l.CARETTRIM]="(\\s*)"+s[l.LONECARET]+"\\s+",a[l.CARETTRIM]=new RegExp(s[l.CARETTRIM],"g");u("CARET"),s[l.CARET]="^"+s[l.LONECARET]+s[l.XRANGEPLAIN]+"$",u("CARETLOOSE"),s[l.CARETLOOSE]="^"+s[l.LONECARET]+s[l.XRANGEPLAINLOOSE]+"$",u("COMPARATORLOOSE"),s[l.COMPARATORLOOSE]="^"+s[l.GTLT]+"\\s*("+s[l.LOOSEPLAIN]+")$|^$",u("COMPARATOR"),s[l.COMPARATOR]="^"+s[l.GTLT]+"\\s*("+s[l.FULLPLAIN]+")$|^$",u("COMPARATORTRIM"),s[l.COMPARATORTRIM]="(\\s*)"+s[l.GTLT]+"\\s*("+s[l.LOOSEPLAIN]+"|"+s[l.XRANGEPLAIN]+")",a[l.COMPARATORTRIM]=new RegExp(s[l.COMPARATORTRIM],"g");u("HYPHENRANGE"),s[l.HYPHENRANGE]="^\\s*("+s[l.XRANGEPLAIN]+")\\s+-\\s+("+s[l.XRANGEPLAIN]+")\\s*$",u("HYPHENRANGELOOSE"),s[l.HYPHENRANGELOOSE]="^\\s*("+s[l.XRANGEPLAINLOOSE]+")\\s+-\\s+("+s[l.XRANGEPLAINLOOSE]+")\\s*$",u("STAR"),s[l.STAR]="(<|>)?=?\\s*\\*";for(var d=0;d<c;d++)r(d,s[d]),a[d]||(a[d]=new RegExp(s[d]));function p(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof h)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?a[l.LOOSE]:a[l.FULL]).test(e))return null;try{return new h(e,t)}catch(e){return null}}function h(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof h){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof h))return new h(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?a[l.LOOSE]:a[l.FULL]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}t.parse=p,t.valid=function(e,t){var n=p(e,t);return n?n.version:null},t.clean=function(e,t){var n=p(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=h,h.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},h.prototype.toString=function(){return this.version},h.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof h||(e=new h(e,this.options)),this.compareMain(e)||this.comparePre(e)},h.prototype.compareMain=function(e){return e instanceof h||(e=new h(e,this.options)),f(this.major,e.major)||f(this.minor,e.minor)||f(this.patch,e.patch)},h.prototype.comparePre=function(e){if(e instanceof h||(e=new h(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return f(n,i)}while(++t)},h.prototype.compareBuild=function(e){e instanceof h||(e=new h(e,this.options));var t=0;do{var n=this.build[t],i=e.build[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return f(n,i)}while(++t)},h.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new h(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(b(e,t))return null;var n=p(e),r=p(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var a in n)if(("major"===a||"minor"===a||"patch"===a)&&n[a]!==r[a])return i+a;return o},t.compareIdentifiers=f;var m=/^[0-9]+$/;function f(e,t){var n=m.test(e),r=m.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function g(e,t,n){return new h(e,n).compare(new h(t,n))}function y(e,t,n){return g(e,t,n)>0}function v(e,t,n){return g(e,t,n)<0}function b(e,t,n){return 0===g(e,t,n)}function w(e,t,n){return 0!==g(e,t,n)}function _(e,t,n){return g(e,t,n)>=0}function C(e,t,n){return g(e,t,n)<=0}function E(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return b(e,n,r);case"!=":return w(e,n,r);case">":return y(e,n,r);case">=":return _(e,n,r);case"<":return v(e,n,r);case"<=":return C(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function S(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof S){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof S))return new S(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===I?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return f(t,e)},t.major=function(e,t){return new h(e,t).major},t.minor=function(e,t){return new h(e,t).minor},t.patch=function(e,t){return new h(e,t).patch},t.compare=g,t.compareLoose=function(e,t){return g(e,t,!0)},t.compareBuild=function(e,t,n){var r=new h(e,n),i=new h(t,n);return r.compare(i)||r.compareBuild(i)},t.rcompare=function(e,t,n){return g(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compareBuild(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.compareBuild(r,e,n)}))},t.gt=y,t.lt=v,t.eq=b,t.neq=w,t.gte=_,t.lte=C,t.cmp=E,t.Comparator=S;var I={};function k(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof k)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new k(e.raw,t);if(e instanceof S)return new k(e.value,t);if(!(this instanceof k))return new k(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function A(e,t){for(var n=!0,r=e.slice(),i=r.pop();n&&r.length;)n=r.every((function(e){return i.intersects(e,t)})),i=r.pop();return n}function x(e){return!e||"x"===e.toLowerCase()||"*"===e}function T(e,t,n,r,i,o,a,s,l,c,u,d,p){return((t=x(n)?"":x(r)?">="+n+".0.0":x(i)?">="+n+"."+r+".0":">="+t)+" "+(s=x(l)?"":x(c)?"<"+(+l+1)+".0.0":x(u)?"<"+l+"."+(+c+1)+".0":d?"<="+l+"."+c+"."+u+"-"+d:"<="+s)).trim()}function O(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==I&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function R(e,t,n){try{t=new k(t,n)}catch(e){return!1}return t.test(e)}function N(e,t,n,r){var i,o,a,s,l;switch(e=new h(e,r),t=new k(t,r),n){case">":i=y,o=C,a=v,s=">",l=">=";break;case"<":i=v,o=_,a=y,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(R(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var u=t.set[c],d=null,p=null;if(u.forEach((function(e){e.semver===I&&(e=new S(">=0.0.0")),d=d||e,p=p||e,i(e.semver,d.semver,r)?d=e:a(e.semver,p.semver,r)&&(p=e)})),d.operator===s||d.operator===l)return!1;if((!p.operator||p.operator===s)&&o(e,p.semver))return!1;if(p.operator===l&&a(e,p.semver))return!1}return!0}S.prototype.parse=function(e){var t=this.options.loose?a[l.COMPARATORLOOSE]:a[l.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new h(n[2],this.options.loose):this.semver=I},S.prototype.toString=function(){return this.value},S.prototype.test=function(e){if(r("Comparator.test",e,this.options.loose),this.semver===I||e===I)return!0;if("string"==typeof e)try{e=new h(e,this.options)}catch(e){return!1}return E(e,this.operator,this.semver,this.options)},S.prototype.intersects=function(e,t){if(!(e instanceof S))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(n=new k(e.value,t),R(this.value,n,t));if(""===e.operator)return""===e.value||(n=new k(this.value,t),R(e.semver,n,t));var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=E(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=E(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&a||s||l},t.Range=k,k.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},k.prototype.toString=function(){return this.range},k.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];e=e.replace(n,T),r("hyphen replace",e),e=e.replace(a[l.COMPARATORTRIM],"$1$2$3"),r("comparator trim",e,a[l.COMPARATORTRIM]),e=(e=(e=e.replace(a[l.TILDETRIM],"$1~")).replace(a[l.CARETTRIM],"$1^")).split(/\s+/).join(" ");var i=t?a[l.COMPARATORLOOSE]:a[l.COMPARATOR],o=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?a[l.CARETLOOSE]:a[l.CARET];return e.replace(n,(function(t,n,i,o,a){var s;return r("caret",e,t,n,i,o,a),x(n)?s="":x(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":x(o)?s="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),s="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+a+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+a+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?a[l.TILDELOOSE]:a[l.TILDE];return e.replace(n,(function(t,n,i,o,a){var s;return r("tilde",e,t,n,i,o,a),x(n)?s="":x(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":x(o)?s=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":a?(r("replaceTilde pr",a),s=">="+n+"."+i+"."+o+"-"+a+" <"+n+"."+(+i+1)+".0"):s=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return e.replace(n,(function(n,i,o,a,s,l){r("xRange",e,n,i,o,a,s,l);var c=x(o),u=c||x(a),d=u||x(s),p=d;return"="===i&&p&&(i=""),l=t.includePrerelease?"-0":"",c?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&p?(u&&(a=0),s=0,">"===i?(i=">=",u?(o=+o+1,a=0,s=0):(a=+a+1,s=0)):"<="===i&&(i="<",u?o=+o+1:a=+a+1),n=i+o+"."+a+"."+s+l):u?n=">="+o+".0.0"+l+" <"+(+o+1)+".0.0"+l:d&&(n=">="+o+"."+a+".0"+l+" <"+o+"."+(+a+1)+".0"+l),r("xRange return",n),n}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(a[l.STAR],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o=o.map((function(e){return new S(e,this.options)}),this)},k.prototype.intersects=function(e,t){if(!(e instanceof k))throw new TypeError("a Range is required");return this.set.some((function(n){return A(n,t)&&e.set.some((function(e){return A(e,t)&&n.every((function(n){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new k(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},k.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new h(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(O(this.set[t],e,this.options))return!0;return!1},t.satisfies=R,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new k(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new h(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new k(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new h(r=e,n)))})),r},t.minVersion=function(e,t){e=new k(e,t);var n=new h("0.0.0");if(e.test(n))return n;if(n=new h("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new h(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!y(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new k(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return N(e,t,"<",n)},t.gtr=function(e,t,n){return N(e,t,">",n)},t.outside=N,t.prerelease=function(e,t){var n=p(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new k(e,n),t=new k(t,n),e.intersects(t)},t.coerce=function(e,t){if(e instanceof h)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var n=null;if((t=t||{}).rtl){for(var r;(r=a[l.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),a[l.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;a[l.COERCERTL].lastIndex=-1}else n=e.match(a[l.COERCE]);if(null===n)return null;return p(n[2]+"."+(n[3]||"0")+"."+(n[4]||"0"),t)}}}]);