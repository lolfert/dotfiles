!function(e){function t(t){for(var s,a,c=t[0],r=t[1],l=t[2],u=0,h=[];u<c.length;u++)a=c[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&h.push(n[a][0]),n[a]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);for(d&&d(t);h.length;)h.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],s=!0,c=1;c<i.length;c++){var r=i[c];0!==n[r]&&(s=!1)}s&&(o.splice(t--,1),e=a(a.s=i[0]))}return e}var s={},n={3:0},o=[];function a(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=s,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var c=window.webpackJsonp=window.webpackJsonp||[],r=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=r;o.push([345,1]),i()}({189:function(e,t,i){},190:function(e,t,i){},289:function(e,t,i){"use strict";var s=i(189);i.n(s).a},290:function(e,t,i){"use strict";var s=i(190);i.n(s).a},345:function(e,t,i){"use strict";i.r(t);i(3);var s,n=i(45),o=i(5),a=i(1),c=i(0),r=i.n(c);function l(){l.init||(l.init=!0,s=-1!==function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var s=e.indexOf("Edge/");return s>0?parseInt(e.substring(s+5,e.indexOf(".",s)),10):-1}())}const d={name:"ResizeObserver",mounted:function(){var e=this;l(),this.$nextTick((function(){e._w=e.$el.offsetWidth,e._h=e.$el.offsetHeight}));var t=document.createElement("object");this._resizeObject=t,t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex",-1),t.onload=this.addResizeHandlers,t.type="text/html",s&&this.$el.appendChild(t),t.data="about:blank",s||this.$el.appendChild(t)},beforeDestroy:function(){this.removeResizeHandlers()},methods:{compareAndNotify:function(){this._w===this.$el.offsetWidth&&this._h===this.$el.offsetHeight||(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.$emit("notify",{width:this._w,height:this._h}))},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!s&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};var u=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})};u._withStripped=!0;const h=function(e,t,i,s,n,o,a,c,r,l){"boolean"!=typeof a&&(r=c,c=a,a=!1);const d="function"==typeof i?i.options:i;let u;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,n&&(d.functional=!0)),s&&(d._scopeId=s),o?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,r(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=u):t&&(u=a?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,c(e))}),u)if(d.functional){const e=d.render;d.render=function(t,i){return u.call(i),e(t,i)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,u):[u]}return i}({render:u,staticRenderFns:[]},void 0,d,"data-v-2b830392",!1,void 0,!1,void 0,void 0,void 0);var f={version:"0.5.0",install:function(e){e.component("resize-observer",h),e.component("ResizeObserver",h)}},m=null;(m="undefined"!=typeof window?window.Vue:Object({}).Vue)&&m.use(f);var p=i(213),g=i(77),v=i(25),b=i(26),_=i(6),w=i(18),y=i(364),A={name:"v-dense-select",model:{prop:"value",event:"change"},props:{options:{required:!0},value:{type:String,required:!1},disabled:{type:Boolean,default:!1}},watch:{value:function(){this.select&&this.setValue()},disabled:function(){this.select&&this.setDisabled()}},methods:{onChange:function(){this.$emit("change",this.select.value)},setDisabled:function(){this.select.disabled=this.disabled},setValue:function(){if(this.value){for(const[e,t]of this.options.entries())if(t.id===this.value){this.select.selectedIndex=e;break}}else this.select.selectedIndex=-1}},mounted:function(){this.select=new y.a(this.$el),this.select.listen("MDCSelect:change",this.onChange),this.setDisabled(),this.setValue()}},C=(i(289),i(20)),O=Object(C.a)(A,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mdc-select mdc-select--no-label"},[e._m(0),e._v(" "),i("div",{staticClass:"mdc-select__menu mdc-menu mdc-menu-surface"},[i("ul",{staticClass:"mdc-list"},e._l(e.options,(function(t){return i("li",{key:t.id,staticClass:"mdc-list-item",attrs:{"data-value":t.id,"aria-selected":t.id===e.value}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),0)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mdc-select__anchor"},[t("i",{staticClass:"mdc-select__dropdown-icon"}),this._v(" "),t("div",{staticClass:"mdc-select__selected-text"}),this._v(" "),t("div",{staticClass:"mdc-line-ripple"})])}],!1,null,null,null).exports,x={components:{[v.e.name]:v.e,[v.j.name]:v.j,[v.g.name]:v.g,[O.name]:O,[h.name]:h},data:function(){let e=["select","selectUpload","capture","upload","url"];return"samsung"===_.b&&(e=e.filter(e=>"capture"!==e)),{dataLoaded:!1,searchModeAction:"",imageUrl:"",listItems:{...Object(o.i)({actionMenu:["options","website"]},{scope:"actionMenu"}),...Object(o.i)({searchModeAction:e},{scope:"optionValue_action_searchModeAction"})},hasScrollBar:!1,engines:[],searchAllEngines:!1,enableContributions:_.a}},computed:{separatorClasses:function(){return{visible:this.searchAllEngines||this.hasScrollBar}}},methods:{getText:a.q,getEngineIcon:function(e){let t="svg";return["iqdb","karmaDecay","tineye","whatanime"].includes(e)?t="png":["branddb","madridMonitor"].includes(e)&&(e="wipo"),`/src/icons/engines/${e}.${t}`},selectItem:function(e){if("url"===this.searchModeAction&&!Object(o.t)(this.imageUrl))return this.focusImageUrlInput(),void Object(o.r)({messageId:"error_invalidImageUrl"});r.a.runtime.sendMessage({id:"actionPopupSubmit",engine:e,imageUrl:this.imageUrl}),this.closeAction()},showContribute:async function(){await Object(o.q)(),this.closeAction()},showOptions:async function(){"samsung"===_.b?await Object(a.d)(r.a.extension.getURL("/src/options/index.html")):await r.a.runtime.openOptionsPage(),this.closeAction()},showWebsite:async function(){await Object(o.s)(),this.closeAction()},showActionMenu:function(){this.$refs.actionMenu.$emit("open")},onActionMenuSelect:async function(e){"options"===e?await this.showOptions():"website"===e&&await this.showWebsite()},showSearchModeMenu:function(){this.$refs.searchModeMenu.$emit("open")},onSearchModeSelect:async function(e){this.searchModeAction=e},closeAction:async function(){const e=await r.a.tabs.getCurrent();e&&e.id!==r.a.tabs.TAB_ID_NONE&&"safari"!==_.b?r.a.tabs.remove(e.id):window.close()},focusImageUrlInput:function(){this.$refs.imageUrlInput.$refs.input.focus()},settingsBeforeEnter:function(){this.lockPopupHeight()},settingsBeforeLeave:function(){this.lockPopupHeight()},settingsAfterEnter:function(){this.configureScrollBar(),this.focusImageUrlInput()},settingsAfterLeave:function(){this.unlockPopupHeight(),this.configureScrollBar(),this.imageUrl=""},onListSizeChange:function(){this.configureScrollBar()},onListScroll:function(){this.configureScrollBar()},configureScrollBar:function(){if(this.$isAndroid||"safari"===_.b)this.hasScrollBar=this.$refs.items.scrollTop;else{const e=this.$refs.items;this.hasScrollBar=e.scrollHeight>e.clientHeight}},lockPopupHeight:function(){if(this.$isAndroid&&!document.documentElement.style.height){const{height:e}=document.documentElement.getBoundingClientRect();document.documentElement.style.height=e+"px"}},unlockPopupHeight:function(){this.$isAndroid&&document.documentElement.style.height.endsWith("px")&&(document.documentElement.style.height="")},setViewportSize:async function(){const e=await Object(a.l)();this.$isAndroid&&e&&e.width>window.innerWidth?(e.width<394?document.body.style.minWidth=e.width-40+"px":document.body.style.minWidth="354px",this.$el.style.maxHeight=e.height-40+"px",document.documentElement.style.height=""):!this.$isAndroid&&e&&e.width>window.innerWidth?this.$refs.items.style.maxHeight="392px":(document.body.style.minWidth="initial",document.documentElement.style.height="100%")}},created:async function(){await this.setViewportSize(),window.addEventListener("orientationchange",()=>window.setTimeout(this.setViewportSize,1e3));const e=await b.a.get(w.f,"sync"),t=await Object(o.f)(e);"firefox"===_.b&&this.$isAndroid&&(t.length<=1||"main"===e.searchAllEnginesAction)?Object(o.r)({messageId:"error_optionsNotApplied"}):(this.engines=t,this.searchAllEngines="sub"===e.searchAllEnginesAction&&"samsung"!==_.b,this.searchModeAction=e.searchModeAction,this.$watch("searchModeAction",(async function(e){await b.a.set({searchModeAction:e},"sync")})),this.dataLoaded=!0)},mounted:function(){window.setTimeout(()=>{for(const e of document.querySelectorAll(".list-bulk-button, .list-items")){const t=new p.a(e);for(const e of t.listElements)g.a.attachTo(e)}},500)}},$=(i(290),Object(C.a)(x,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.dataLoaded,expression:"dataLoaded"}],attrs:{id:"app"}},[i("div",{staticClass:"header"},[e.$isAndroid?e._e():i("div",{staticClass:"title"},[e._v(e._s(e.getText("extensionName")))]),e._v(" "),e.$isAndroid?i("v-dense-select",{staticClass:"search-mode-menu-mobile",attrs:{options:e.listItems.searchModeAction},model:{value:e.searchModeAction,callback:function(t){e.searchModeAction=t},expression:"searchModeAction"}}):e._e(),e._v(" "),i("div",{staticClass:"header-buttons"},[e.$isAndroid?e._e():i("v-icon-button",{staticClass:"search-mode-button",attrs:{src:"/src/icons/modes/"+e.searchModeAction+".svg"},on:{click:e.showSearchModeMenu}}),e._v(" "),e.enableContributions?i("v-icon-button",{staticClass:"contribute-button",attrs:{src:"/src/contribute/assets/heart.svg"},on:{click:e.showContribute}}):e._e(),e._v(" "),i("v-icon-button",{staticClass:"menu-button",attrs:{src:"/src/icons/misc/more.svg"},on:{click:e.showActionMenu}})],1),e._v(" "),e.$isAndroid?e._e():i("v-menu",{ref:"searchModeMenu",staticClass:"search-mode-menu",attrs:{items:e.listItems.searchModeAction,focusItem:e.searchModeAction,ripple:!0},on:{selected:e.onSearchModeSelect},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(t.items,(function(t){return i("li",{key:t.id,staticClass:"mdc-list-item",attrs:{role:"menuitem","data-value":t.id}},[i("img",{staticClass:"mdc-list-item__graphic item-icon",attrs:{src:"/src/icons/modes/"+t.id+".svg"}}),e._v(" "),i("span",{staticClass:"mdc-list-item__text"},[e._v(e._s(t.label))])])}))}}],null,!1,2638964995)}),e._v(" "),i("v-menu",{ref:"actionMenu",staticClass:"action-menu",attrs:{ripple:!0,items:e.listItems.actionMenu},on:{selected:e.onActionMenuSelect}})],1),e._v(" "),e.dataLoaded?i("transition",{attrs:{name:"settings"},on:{"before-enter":e.settingsBeforeEnter,"before-leave":e.settingsBeforeLeave,"after-enter":e.settingsAfterEnter,"after-leave":e.settingsAfterLeave}},["url"===e.searchModeAction?i("div",{staticClass:"settings"},[i("v-textfield",{ref:"imageUrlInput",attrs:{placeholder:e.getText("inputPlaceholder_imageUrl"),fullwidth:""},model:{value:e.imageUrl,callback:function(t){e.imageUrl="string"==typeof t?t.trim():t},expression:"imageUrl"}})],1):e._e()]):e._e(),e._v(" "),i("div",{staticClass:"list-padding-top"}),e._v(" "),e.searchAllEngines?i("ul",{staticClass:"mdc-list list list-bulk-button"},[i("li",{staticClass:"mdc-list-item list-item",on:{click:function(t){return e.selectItem("allEngines")}}},[i("img",{staticClass:"mdc-list-item__graphic list-item-icon",attrs:{src:e.getEngineIcon("allEngines")}}),e._v("\n      "+e._s(e.getText("menuItemTitle_allEngines"))+"\n    ")])]):e._e(),e._v(" "),i("ul",{staticClass:"mdc-list list list-separator",class:e.separatorClasses},[i("li",{staticClass:"mdc-list-divider",attrs:{role:"separator"}})]),e._v(" "),i("div",{ref:"items",staticClass:"list-items-wrap",on:{scroll:e.onListScroll}},[i("resize-observer",{on:{notify:e.onListSizeChange}}),e._v(" "),i("ul",{staticClass:"mdc-list list list-items"},e._l(e.engines,(function(t){return i("li",{key:t.id,staticClass:"mdc-list-item list-item",on:{click:function(i){return e.selectItem(t)}}},[i("img",{staticClass:"mdc-list-item__graphic list-item-icon",attrs:{src:e.getEngineIcon(t)}}),e._v("\n        "+e._s(e.getText("menuItemTitle_"+t))+"\n      ")])})),0)],1)],1)}),[],!1,null,null,null).exports);!async function(){await Object(o.b)();try{await document.fonts.load("400 14px Roboto"),await document.fonts.load("500 14px Roboto")}catch(e){}n.a.prototype.$isAndroid=await Object(a.r)(),new n.a({el:"#app",render:e=>e($)})}()}});