!function(e){function t(t){for(var a,i,s=t[0],c=t[1],l=t[2],u=0,p=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(d&&d(t);p.length;)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,s=1;s<r.length;s++){var c=r[s];0!==o[c]&&(a=!1)}a&&(n.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},o={50:0},n=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;n.push([349,1]),r()}({191:function(e,t,r){},291:function(e,t,r){"use strict";var a=r(191);r.n(a).a},349:function(e,t,r){"use strict";r.r(t);r(3);var a=r(45),o=r(5),n=(r(54),r(75),r(0)),i=r.n(n),s=r(1),c=r(18),l={data:function(){return{dataLoaded:!1,error:"",showSpinner:!1,engine:""}},methods:{search:async function({task:e,search:t,image:r}){if("google"===this.engine){const t=new FormData;t.append("encoded_image",r.imageBlob,r.imageFilename);const a=await fetch("https://www.google.com/searchbyimage/upload",{referrer:"",mode:"cors",method:"POST",body:t});if(200!==a.status)throw new Error(`API response: ${a.status}, ${await a.text()}`);let n=a.url;e.options.localGoogle||(n=n.replace(/(.*google\.)[a-zA-Z0-9_\-.]+(\/.*)/,"$1com$2&gl=US")),Object(o.t)(n)&&window.location.replace(n)}else if("saucenao"===this.engine){const e=new FormData;e.append("file",r.imageBlob,"Image");const t=await fetch("https://tmp.saucenao.com",{referrer:"",mode:"cors",method:"POST",body:e});if(200!==t.status)throw new Error(`API response: ${t.status}, ${await t.text()}`);const a=(await t.json()).url,n=c.d.saucenao.url.target.replace("{imgUrl}",encodeURIComponent(a));Object(o.t)(n)&&window.location.replace(n)}else if("sogou"===this.engine){const e=new FormData;e.append("flag","1"),e.append("pic_path",r.imageBlob,r.imageFilename);const t=await fetch("https://pic.sogou.com/ris_upload",{referrer:"",mode:"cors",method:"POST",body:e});if(200!==t.status)throw new Error(`API response: ${t.status}, ${await t.text()}`);const a=t.url;Object(o.t)(a)&&window.location.replace(a)}}},created:async function(){const e=new URL(window.location.href).searchParams.get("session"),t=await i.a.runtime.sendMessage({id:"storageRequest",asyncResponse:!0,saveReceipt:!0,storageKey:e});if(t)try{if(this.engine=t.search.engine,document.title=Object(s.q)("pageTitle",[Object(s.q)("optionTitle_"+this.engine),Object(s.q)("extensionName")]),"upload"===t.search.method){const e=Object(o.j)(this.engine);if(t.search.imageSize>e)return this.error=Object(o.h)(this.engine,e),void(this.dataLoaded=!0)}this.showSpinner=!0,this.dataLoaded=!0;const e=await i.a.runtime.sendMessage({id:"storageRequest",asyncResponse:!0,saveReceipt:!0,storageKey:t.imageKey});e?("upload"===t.search.method&&(e.imageBlob=Object(s.f)(e.imageDataUrl)),await this.search({task:t.task,search:t.search,image:e})):this.error=Object(s.q)("error_invalidPageUrl")}catch(e){throw this.error=Object(s.q)("error_engine",Object(s.q)("engineName_"+this.engine)),this.dataLoaded=!0,console.log(e.toString()),e}else this.error=Object(s.q)("error_invalidPageUrl"),this.dataLoaded=!0}},d=(r(291),r(20)),u=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.dataLoaded,expression:"dataLoaded"}],attrs:{id:"app"}},[e.showSpinner&&!e.error?r("div",{staticClass:"sk-rotating-plane"}):e._e(),e._v(" "),e.error?r("div",[r("div",{staticClass:"error-icon"},[e._v(":/")]),e._v(" "),r("div",{staticClass:"error-text"},[e._v(e._s(e.error))])]):e._e()])}),[],!1,null,null,null).exports;!async function(){await Object(o.b)(),new a.a({el:"#app",render:e=>e(u)})}()}});